var NP=Object.create;var{getPrototypeOf:zP,defineProperty:$2,getOwnPropertyNames:DP}=Object;var WP=Object.prototype.hasOwnProperty;var Gq=(A,Q,I)=>{I=A!=null?NP(zP(A)):{};let B=Q||!A||!A.__esModule?$2(I,"default",{value:A,enumerable:!0}):I;for(let E of DP(A))if(!WP.call(B,E))$2(B,E,{get:()=>A[E],enumerable:!0});return B};var KQ=(A,Q)=>()=>(Q||A((Q={exports:{}}).exports,Q),Q.exports);var jH=(A,Q)=>{for(var I in Q)$2(A,I,{get:Q[I],enumerable:!0,configurable:!0,set:(B)=>Q[I]=()=>B})};var Y=(A,Q)=>()=>(A&&(Q=A(A=0)),Q);var N,U2=(A)=>{if(typeof A==="function"||typeof A==="object"&&A.extension){if(!A.extension)throw new Error("Extension class must have an extension object");A={...typeof A.extension!=="object"?{type:A.extension}:A.extension,ref:A}}if(typeof A==="object")A={...A};else throw new Error("Invalid extension type");if(typeof A.type==="string")A.type=[A.type];return A},AJ=(A,Q)=>U2(A).priority??Q,p;var M=Y(()=>{N=((A)=>{return A.Application="application",A.WebGLPipes="webgl-pipes",A.WebGLPipesAdaptor="webgl-pipes-adaptor",A.WebGLSystem="webgl-system",A.WebGPUPipes="webgpu-pipes",A.WebGPUPipesAdaptor="webgpu-pipes-adaptor",A.WebGPUSystem="webgpu-system",A.CanvasSystem="canvas-system",A.CanvasPipesAdaptor="canvas-pipes-adaptor",A.CanvasPipes="canvas-pipes",A.Asset="asset",A.LoadParser="load-parser",A.ResolveParser="resolve-parser",A.CacheParser="cache-parser",A.DetectionParser="detection-parser",A.MaskEffect="mask-effect",A.BlendMode="blend-mode",A.TextureSource="texture-source",A.Environment="environment",A.ShapeBuilder="shape-builder",A.Batcher="batcher",A})(N||{}),p={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...A){return A.map(U2).forEach((Q)=>{Q.type.forEach((I)=>this._removeHandlers[I]?.(Q))}),this},add(...A){return A.map(U2).forEach((Q)=>{Q.type.forEach((I)=>{let B=this._addHandlers,E=this._queue;if(!B[I])E[I]=E[I]||[],E[I]?.push(Q);else B[I]?.(Q)})}),this},handle(A,Q,I){let B=this._addHandlers,E=this._removeHandlers;if(B[A]||E[A])throw new Error(`Extension type ${A} already has a handler`);B[A]=Q,E[A]=I;let C=this._queue;if(C[A])C[A]?.forEach((J)=>Q(J)),delete C[A];return this},handleByMap(A,Q){return this.handle(A,(I)=>{if(I.name)Q[I.name]=I.ref},(I)=>{if(I.name)delete Q[I.name]})},handleByNamedList(A,Q,I=-1){return this.handle(A,(B)=>{if(Q.findIndex((C)=>C.name===B.name)>=0)return;Q.push({name:B.name,value:B.ref}),Q.sort((C,J)=>AJ(J.value,I)-AJ(C.value,I))},(B)=>{let E=Q.findIndex((C)=>C.name===B.name);if(E!==-1)Q.splice(E,1)})},handleByList(A,Q,I=-1){return this.handle(A,(B)=>{if(Q.includes(B.ref))return;Q.push(B.ref),Q.sort((E,C)=>AJ(C,I)-AJ(E,I))},(B)=>{let E=Q.indexOf(B.ref);if(E!==-1)Q.splice(E,1)})},mixin(A,...Q){for(let I of Q)Object.defineProperties(A.prototype,Object.getOwnPropertyDescriptors(I))}}});var Zk=KQ((cy,V2)=>{var XP=Object.prototype.hasOwnProperty,ZI="~";function LH(){}if(Object.create){if(LH.prototype=Object.create(null),!new LH().__proto__)ZI=!1}function kP(A,Q,I){this.fn=A,this.context=Q,this.once=I||!1}function Hk(A,Q,I,B,E){if(typeof I!=="function")throw new TypeError("The listener must be a function");var C=new kP(I,B||A,E),J=ZI?ZI+Q:Q;if(!A._events[J])A._events[J]=C,A._eventsCount++;else if(!A._events[J].fn)A._events[J].push(C);else A._events[J]=[A._events[J],C];return A}function jq(A,Q){if(--A._eventsCount===0)A._events=new LH;else delete A._events[Q]}function sQ(){this._events=new LH,this._eventsCount=0}sQ.prototype.eventNames=function A(){var Q=[],I,B;if(this._eventsCount===0)return Q;for(B in I=this._events)if(XP.call(I,B))Q.push(ZI?B.slice(1):B);if(Object.getOwnPropertySymbols)return Q.concat(Object.getOwnPropertySymbols(I));return Q};sQ.prototype.listeners=function A(Q){var I=ZI?ZI+Q:Q,B=this._events[I];if(!B)return[];if(B.fn)return[B.fn];for(var E=0,C=B.length,J=new Array(C);E<C;E++)J[E]=B[E].fn;return J};sQ.prototype.listenerCount=function A(Q){var I=ZI?ZI+Q:Q,B=this._events[I];if(!B)return 0;if(B.fn)return 1;return B.length};sQ.prototype.emit=function A(Q,I,B,E,C,J){var K=ZI?ZI+Q:Q;if(!this._events[K])return!1;var H=this._events[K],Z=arguments.length,q,w;if(H.fn){if(H.once)this.removeListener(Q,H.fn,void 0,!0);switch(Z){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,I),!0;case 3:return H.fn.call(H.context,I,B),!0;case 4:return H.fn.call(H.context,I,B,E),!0;case 5:return H.fn.call(H.context,I,B,E,C),!0;case 6:return H.fn.call(H.context,I,B,E,C,J),!0}for(w=1,q=new Array(Z-1);w<Z;w++)q[w-1]=arguments[w];H.fn.apply(H.context,q)}else{var $=H.length,U;for(w=0;w<$;w++){if(H[w].once)this.removeListener(Q,H[w].fn,void 0,!0);switch(Z){case 1:H[w].fn.call(H[w].context);break;case 2:H[w].fn.call(H[w].context,I);break;case 3:H[w].fn.call(H[w].context,I,B);break;case 4:H[w].fn.call(H[w].context,I,B,E);break;default:if(!q)for(U=1,q=new Array(Z-1);U<Z;U++)q[U-1]=arguments[U];H[w].fn.apply(H[w].context,q)}}}return!0};sQ.prototype.on=function A(Q,I,B){return Hk(this,Q,I,B,!1)};sQ.prototype.once=function A(Q,I,B){return Hk(this,Q,I,B,!0)};sQ.prototype.removeListener=function A(Q,I,B,E){var C=ZI?ZI+Q:Q;if(!this._events[C])return this;if(!I)return jq(this,C),this;var J=this._events[C];if(J.fn){if(J.fn===I&&(!E||J.once)&&(!B||J.context===B))jq(this,C)}else{for(var K=0,H=[],Z=J.length;K<Z;K++)if(J[K].fn!==I||E&&!J[K].once||B&&J[K].context!==B)H.push(J[K]);if(H.length)this._events[C]=H.length===1?H[0]:H;else jq(this,C)}return this};sQ.prototype.removeAllListeners=function A(Q){var I;if(Q){if(I=ZI?ZI+Q:Q,this._events[I])jq(this,I)}else this._events=new LH,this._eventsCount=0;return this};sQ.prototype.off=sQ.prototype.removeListener;sQ.prototype.addListener=sQ.prototype.on;sQ.prefixed=ZI;sQ.EventEmitter=sQ;if(typeof V2!=="undefined")V2.exports=sQ});var qk,mA;var yQ=Y(()=>{qk=Gq(Zk(),1),mA=qk.default});var FP,KE=function(A){return typeof A=="string"?A.length>0:typeof A=="number"},vQ=function(A,Q,I){return Q===void 0&&(Q=0),I===void 0&&(I=Math.pow(10,Q)),Math.round(I*A)/I+0},cI=function(A,Q,I){return Q===void 0&&(Q=0),I===void 0&&(I=1),A>I?I:A>Q?A:Q},Dk=function(A){return(A=isFinite(A)?A%360:0)>0?A:A+360},wk=function(A){return{r:cI(A.r,0,255),g:cI(A.g,0,255),b:cI(A.b,0,255),a:cI(A.a)}},N2=function(A){return{r:vQ(A.r),g:vQ(A.g),b:vQ(A.b),a:vQ(A.a,3)}},OP,Lq=function(A){var Q=A.toString(16);return Q.length<2?"0"+Q:Q},Wk=function(A){var{r:Q,g:I,b:B,a:E}=A,C=Math.max(Q,I,B),J=C-Math.min(Q,I,B),K=J?C===Q?(I-B)/J:C===I?2+(B-Q)/J:4+(Q-I)/J:0;return{h:60*(K<0?K+6:K),s:C?J/C*100:0,v:C/255*100,a:E}},Xk=function(A){var{h:Q,s:I,v:B,a:E}=A;Q=Q/360*6,I/=100,B/=100;var C=Math.floor(Q),J=B*(1-I),K=B*(1-(Q-C)*I),H=B*(1-(1-Q+C)*I),Z=C%6;return{r:255*[B,K,J,J,H,B][Z],g:255*[H,B,B,K,J,J][Z],b:255*[J,J,H,B,B,K][Z],a:E}},Yk=function(A){return{h:Dk(A.h),s:cI(A.s,0,100),l:cI(A.l,0,100),a:cI(A.a)}},$k=function(A){return{h:vQ(A.h),s:vQ(A.s),l:vQ(A.l),a:vQ(A.a,3)}},Uk=function(A){return Xk((I=(Q=A).s,{h:Q.h,s:(I*=((B=Q.l)<50?B:100-B)/100)>0?2*I/(B+I)*100:0,v:B+I,a:Q.a}));var Q,I,B},RH=function(A){return{h:(Q=Wk(A)).h,s:(E=(200-(I=Q.s))*(B=Q.v)/100)>0&&E<200?I*B/100/(E<=100?E:200-E)*100:0,l:E/2,a:Q.a};var Q,I,B,E},GP,jP,LP,RP,W2,Vk=function(A,Q){for(var I=0;I<Q.length;I++){var B=Q[I][0](A);if(B)return[B,Q[I][1]]}return[null,void 0]},PP=function(A){return typeof A=="string"?Vk(A.trim(),W2.string):typeof A=="object"&&A!==null?Vk(A,W2.object):[null,void 0]},z2=function(A,Q){var I=RH(A);return{h:I.h,s:cI(I.s+100*Q,0,100),l:I.l,a:I.a}},D2=function(A){return(299*A.r+587*A.g+114*A.b)/1000/255},Nk=function(A,Q){var I=RH(A);return{h:I.h,s:I.s,l:cI(I.l+100*Q,0,100),a:I.a}},X2,HB=function(A){return A instanceof X2?A:new X2(A)},zk,kk=function(A){A.forEach(function(Q){zk.indexOf(Q)<0&&(Q(X2,W2),zk.push(Q))})};var Fk=Y(()=>{FP={grad:0.9,turn:360,rad:360/(2*Math.PI)},OP=/^#([0-9a-f]{3,8})$/i,GP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,LP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,RP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,W2={string:[[function(A){var Q=OP.exec(A);return Q?(A=Q[1]).length<=4?{r:parseInt(A[0]+A[0],16),g:parseInt(A[1]+A[1],16),b:parseInt(A[2]+A[2],16),a:A.length===4?vQ(parseInt(A[3]+A[3],16)/255,2):1}:A.length===6||A.length===8?{r:parseInt(A.substr(0,2),16),g:parseInt(A.substr(2,2),16),b:parseInt(A.substr(4,2),16),a:A.length===8?vQ(parseInt(A.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(A){var Q=LP.exec(A)||RP.exec(A);return Q?Q[2]!==Q[4]||Q[4]!==Q[6]?null:wk({r:Number(Q[1])/(Q[2]?0.39215686274509803:1),g:Number(Q[3])/(Q[4]?0.39215686274509803:1),b:Number(Q[5])/(Q[6]?0.39215686274509803:1),a:Q[7]===void 0?1:Number(Q[7])/(Q[8]?100:1)}):null},"rgb"],[function(A){var Q=GP.exec(A)||jP.exec(A);if(!Q)return null;var I,B,E=Yk({h:(I=Q[1],B=Q[2],B===void 0&&(B="deg"),Number(I)*(FP[B]||1)),s:Number(Q[3]),l:Number(Q[4]),a:Q[5]===void 0?1:Number(Q[5])/(Q[6]?100:1)});return Uk(E)},"hsl"]],object:[[function(A){var{r:Q,g:I,b:B,a:E}=A,C=E===void 0?1:E;return KE(Q)&&KE(I)&&KE(B)?wk({r:Number(Q),g:Number(I),b:Number(B),a:Number(C)}):null},"rgb"],[function(A){var{h:Q,s:I,l:B,a:E}=A,C=E===void 0?1:E;if(!KE(Q)||!KE(I)||!KE(B))return null;var J=Yk({h:Number(Q),s:Number(I),l:Number(B),a:Number(C)});return Uk(J)},"hsl"],[function(A){var{h:Q,s:I,v:B,a:E}=A,C=E===void 0?1:E;if(!KE(Q)||!KE(I)||!KE(B))return null;var J=function(K){return{h:Dk(K.h),s:cI(K.s,0,100),v:cI(K.v,0,100),a:cI(K.a)}}({h:Number(Q),s:Number(I),v:Number(B),a:Number(C)});return Xk(J)},"hsv"]]},X2=function(){function A(Q){this.parsed=PP(Q)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return A.prototype.isValid=function(){return this.parsed!==null},A.prototype.brightness=function(){return vQ(D2(this.rgba),2)},A.prototype.isDark=function(){return D2(this.rgba)<0.5},A.prototype.isLight=function(){return D2(this.rgba)>=0.5},A.prototype.toHex=function(){return Q=N2(this.rgba),I=Q.r,B=Q.g,E=Q.b,J=(C=Q.a)<1?Lq(vQ(255*C)):"","#"+Lq(I)+Lq(B)+Lq(E)+J;var Q,I,B,E,C,J},A.prototype.toRgb=function(){return N2(this.rgba)},A.prototype.toRgbString=function(){return Q=N2(this.rgba),I=Q.r,B=Q.g,E=Q.b,(C=Q.a)<1?"rgba("+I+", "+B+", "+E+", "+C+")":"rgb("+I+", "+B+", "+E+")";var Q,I,B,E,C},A.prototype.toHsl=function(){return $k(RH(this.rgba))},A.prototype.toHslString=function(){return Q=$k(RH(this.rgba)),I=Q.h,B=Q.s,E=Q.l,(C=Q.a)<1?"hsla("+I+", "+B+"%, "+E+"%, "+C+")":"hsl("+I+", "+B+"%, "+E+"%)";var Q,I,B,E,C},A.prototype.toHsv=function(){return Q=Wk(this.rgba),{h:vQ(Q.h),s:vQ(Q.s),v:vQ(Q.v),a:vQ(Q.a,3)};var Q},A.prototype.invert=function(){return HB({r:255-(Q=this.rgba).r,g:255-Q.g,b:255-Q.b,a:Q.a});var Q},A.prototype.saturate=function(Q){return Q===void 0&&(Q=0.1),HB(z2(this.rgba,Q))},A.prototype.desaturate=function(Q){return Q===void 0&&(Q=0.1),HB(z2(this.rgba,-Q))},A.prototype.grayscale=function(){return HB(z2(this.rgba,-1))},A.prototype.lighten=function(Q){return Q===void 0&&(Q=0.1),HB(Nk(this.rgba,Q))},A.prototype.darken=function(Q){return Q===void 0&&(Q=0.1),HB(Nk(this.rgba,-Q))},A.prototype.rotate=function(Q){return Q===void 0&&(Q=15),this.hue(this.hue()+Q)},A.prototype.alpha=function(Q){return typeof Q=="number"?HB({r:(I=this.rgba).r,g:I.g,b:I.b,a:Q}):vQ(this.rgba.a,3);var I},A.prototype.hue=function(Q){var I=RH(this.rgba);return typeof Q=="number"?HB({h:Q,s:I.s,l:I.l,a:I.a}):vQ(I.h)},A.prototype.isEqual=function(Q){return this.toHex()===HB(Q).toHex()},A}(),zk=[]});function k2(A,Q){var I={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},B={};for(var E in I)B[I[E]]=E;var C={};A.prototype.toName=function(J){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var K,H,Z=B[this.toHex()];if(Z)return Z;if(J==null?void 0:J.closest){var q=this.toRgb(),w=1/0,$="black";if(!C.length)for(var U in I)C[U]=new A(I[U]).toRgb();for(var V in I){var z=(K=q,H=C[V],Math.pow(K.r-H.r,2)+Math.pow(K.g-H.g,2)+Math.pow(K.b-H.b,2));z<w&&(w=z,$=V)}return $}},Q.string.push([function(J){var K=J.toLowerCase(),H=K==="transparent"?"#0000":I[K];return H?new A(H).toRgb():null},"name"])}var QJ=class A{constructor(Q=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=Q}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(Q){return this.value=Q,this}set value(Q){if(Q instanceof A)this._value=this._cloneSource(Q._value),this._int=Q._int,this._components.set(Q._components);else if(Q===null)throw new Error("Cannot set Color#value to null");else if(this._value===null||!this._isSourceEqual(this._value,Q))this._value=this._cloneSource(Q),this._normalize(this._value)}get value(){return this._value}_cloneSource(Q){if(typeof Q==="string"||typeof Q==="number"||Q instanceof Number||Q===null)return Q;else if(Array.isArray(Q)||ArrayBuffer.isView(Q))return Q.slice(0);else if(typeof Q==="object"&&Q!==null)return{...Q};return Q}_isSourceEqual(Q,I){let B=typeof Q;if(B!==typeof I)return!1;else if(B==="number"||B==="string"||Q instanceof Number)return Q===I;else if(Array.isArray(Q)&&Array.isArray(I)||ArrayBuffer.isView(Q)&&ArrayBuffer.isView(I)){if(Q.length!==I.length)return!1;return Q.every((C,J)=>C===I[J])}else if(Q!==null&&I!==null){let C=Object.keys(Q),J=Object.keys(I);if(C.length!==J.length)return!1;return C.every((K)=>Q[K]===I[K])}return Q===I}toRgba(){let[Q,I,B,E]=this._components;return{r:Q,g:I,b:B,a:E}}toRgb(){let[Q,I,B]=this._components;return{r:Q,g:I,b:B}}toRgbaString(){let[Q,I,B]=this.toUint8RgbArray();return`rgba(${Q},${I},${B},${this.alpha})`}toUint8RgbArray(Q){let[I,B,E]=this._components;if(!this._arrayRgb)this._arrayRgb=[];return Q||(Q=this._arrayRgb),Q[0]=Math.round(I*255),Q[1]=Math.round(B*255),Q[2]=Math.round(E*255),Q}toArray(Q){if(!this._arrayRgba)this._arrayRgba=[];Q||(Q=this._arrayRgba);let[I,B,E,C]=this._components;return Q[0]=I,Q[1]=B,Q[2]=E,Q[3]=C,Q}toRgbArray(Q){if(!this._arrayRgb)this._arrayRgb=[];Q||(Q=this._arrayRgb);let[I,B,E]=this._components;return Q[0]=I,Q[1]=B,Q[2]=E,Q}toNumber(){return this._int}toBgrNumber(){let[Q,I,B]=this.toUint8RgbArray();return(B<<16)+(I<<8)+Q}toLittleEndianNumber(){let Q=this._int;return(Q>>16)+(Q&65280)+((Q&255)<<16)}multiply(Q){let[I,B,E,C]=A._temp.setValue(Q)._components;return this._components[0]*=I,this._components[1]*=B,this._components[2]*=E,this._components[3]*=C,this._refreshInt(),this._value=null,this}premultiply(Q,I=!0){if(I)this._components[0]*=Q,this._components[1]*=Q,this._components[2]*=Q;return this._components[3]=Q,this._refreshInt(),this._value=null,this}toPremultiplied(Q,I=!0){if(Q===1)return-16777216+this._int;if(Q===0)return I?0:this._int;let B=this._int>>16&255,E=this._int>>8&255,C=this._int&255;if(I)B=B*Q+0.5|0,E=E*Q+0.5|0,C=C*Q+0.5|0;return(Q*255<<24)+(B<<16)+(E<<8)+C}toHex(){let Q=this._int.toString(16);return`#${"000000".substring(0,6-Q.length)+Q}`}toHexa(){let I=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-I.length)+I}setAlpha(Q){return this._components[3]=this._clamp(Q),this}_normalize(Q){let I,B,E,C;if((typeof Q==="number"||Q instanceof Number)&&Q>=0&&Q<=16777215){let J=Q;I=(J>>16&255)/255,B=(J>>8&255)/255,E=(J&255)/255,C=1}else if((Array.isArray(Q)||Q instanceof Float32Array)&&Q.length>=3&&Q.length<=4)Q=this._clamp(Q),[I,B,E,C=1]=Q;else if((Q instanceof Uint8Array||Q instanceof Uint8ClampedArray)&&Q.length>=3&&Q.length<=4)Q=this._clamp(Q,0,255),[I,B,E,C=255]=Q,I/=255,B/=255,E/=255,C/=255;else if(typeof Q==="string"||typeof Q==="object"){if(typeof Q==="string"){let K=A.HEX_PATTERN.exec(Q);if(K)Q=`#${K[2]}`}let J=HB(Q);if(J.isValid())({r:I,g:B,b:E,a:C}=J.rgba),I/=255,B/=255,E/=255}if(I!==void 0)this._components[0]=I,this._components[1]=B,this._components[2]=E,this._components[3]=C,this._refreshInt();else throw new Error(`Unable to convert color ${Q}`)}_refreshInt(){this._clamp(this._components);let[Q,I,B]=this._components;this._int=(Q*255<<16)+(I*255<<8)+(B*255|0)}_clamp(Q,I=0,B=1){if(typeof Q==="number")return Math.min(Math.max(Q,I),B);return Q.forEach((E,C)=>{Q[C]=Math.min(Math.max(E,I),B)}),Q}static isColorLike(Q){return typeof Q==="number"||typeof Q==="string"||Q instanceof Number||Q instanceof A||Array.isArray(Q)||Q instanceof Uint8Array||Q instanceof Uint8ClampedArray||Q instanceof Float32Array||Q.r!==void 0&&Q.g!==void 0&&Q.b!==void 0||Q.r!==void 0&&Q.g!==void 0&&Q.b!==void 0&&Q.a!==void 0||Q.h!==void 0&&Q.s!==void 0&&Q.l!==void 0||Q.h!==void 0&&Q.s!==void 0&&Q.l!==void 0&&Q.a!==void 0||Q.h!==void 0&&Q.s!==void 0&&Q.v!==void 0||Q.h!==void 0&&Q.s!==void 0&&Q.v!==void 0&&Q.a!==void 0}},JA;var IQ=Y(()=>{Fk();kk([k2]);QJ.shared=new QJ;QJ._temp=new QJ;QJ.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;JA=QJ});var Rq;var Pq=Y(()=>{Rq={cullArea:null,cullable:!1,cullableChildren:!0}});var Mq,gq,_q;var PH=Y(()=>{Mq=Math.PI*2,gq=180/Math.PI,_q=Math.PI/180});class UA{constructor(A=0,Q=0){this.x=0,this.y=0,this.x=A,this.y=Q}clone(){return new UA(this.x,this.y)}copyFrom(A){return this.set(A.x,A.y),this}copyTo(A){return A.set(this.x,this.y),A}equals(A){return A.x===this.x&&A.y===this.y}set(A=0,Q=A){return this.x=A,this.y=Q,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return F2.x=0,F2.y=0,F2}}var F2;var aQ=Y(()=>{F2=new UA});class x{constructor(A=1,Q=0,I=0,B=1,E=0,C=0){this.array=null,this.a=A,this.b=Q,this.c=I,this.d=B,this.tx=E,this.ty=C}fromArray(A){this.a=A[0],this.b=A[1],this.c=A[3],this.d=A[4],this.tx=A[2],this.ty=A[5]}set(A,Q,I,B,E,C){return this.a=A,this.b=Q,this.c=I,this.d=B,this.tx=E,this.ty=C,this}toArray(A,Q){if(!this.array)this.array=new Float32Array(9);let I=Q||this.array;if(A)I[0]=this.a,I[1]=this.b,I[2]=0,I[3]=this.c,I[4]=this.d,I[5]=0,I[6]=this.tx,I[7]=this.ty,I[8]=1;else I[0]=this.a,I[1]=this.c,I[2]=this.tx,I[3]=this.b,I[4]=this.d,I[5]=this.ty,I[6]=0,I[7]=0,I[8]=1;return I}apply(A,Q){Q=Q||new UA;let{x:I,y:B}=A;return Q.x=this.a*I+this.c*B+this.tx,Q.y=this.b*I+this.d*B+this.ty,Q}applyInverse(A,Q){Q=Q||new UA;let I=this.a,B=this.b,E=this.c,C=this.d,J=this.tx,K=this.ty,H=1/(I*C+E*-B),Z=A.x,q=A.y;return Q.x=C*H*Z+-E*H*q+(K*E-J*C)*H,Q.y=I*H*q+-B*H*Z+(-K*I+J*B)*H,Q}translate(A,Q){return this.tx+=A,this.ty+=Q,this}scale(A,Q){return this.a*=A,this.d*=Q,this.c*=A,this.b*=Q,this.tx*=A,this.ty*=Q,this}rotate(A){let Q=Math.cos(A),I=Math.sin(A),B=this.a,E=this.c,C=this.tx;return this.a=B*Q-this.b*I,this.b=B*I+this.b*Q,this.c=E*Q-this.d*I,this.d=E*I+this.d*Q,this.tx=C*Q-this.ty*I,this.ty=C*I+this.ty*Q,this}append(A){let Q=this.a,I=this.b,B=this.c,E=this.d;return this.a=A.a*Q+A.b*B,this.b=A.a*I+A.b*E,this.c=A.c*Q+A.d*B,this.d=A.c*I+A.d*E,this.tx=A.tx*Q+A.ty*B+this.tx,this.ty=A.tx*I+A.ty*E+this.ty,this}appendFrom(A,Q){let{a:I,b:B,c:E,d:C,tx:J,ty:K}=A,H=Q.a,Z=Q.b,q=Q.c,w=Q.d;return this.a=I*H+B*q,this.b=I*Z+B*w,this.c=E*H+C*q,this.d=E*Z+C*w,this.tx=J*H+K*q+Q.tx,this.ty=J*Z+K*w+Q.ty,this}setTransform(A,Q,I,B,E,C,J,K,H){return this.a=Math.cos(J+H)*E,this.b=Math.sin(J+H)*E,this.c=-Math.sin(J-K)*C,this.d=Math.cos(J-K)*C,this.tx=A-(I*this.a+B*this.c),this.ty=Q-(I*this.b+B*this.d),this}prepend(A){let Q=this.tx;if(A.a!==1||A.b!==0||A.c!==0||A.d!==1){let I=this.a,B=this.c;this.a=I*A.a+this.b*A.c,this.b=I*A.b+this.b*A.d,this.c=B*A.a+this.d*A.c,this.d=B*A.b+this.d*A.d}return this.tx=Q*A.a+this.ty*A.c+A.tx,this.ty=Q*A.b+this.ty*A.d+A.ty,this}decompose(A){let Q=this.a,I=this.b,B=this.c,E=this.d,C=A.pivot,J=-Math.atan2(-B,E),K=Math.atan2(I,Q),H=Math.abs(J+K);if(H<0.00001||Math.abs(Mq-H)<0.00001)A.rotation=K,A.skew.x=A.skew.y=0;else A.rotation=0,A.skew.x=J,A.skew.y=K;return A.scale.x=Math.sqrt(Q*Q+I*I),A.scale.y=Math.sqrt(B*B+E*E),A.position.x=this.tx+(C.x*Q+C.y*B),A.position.y=this.ty+(C.x*I+C.y*E),A}invert(){let A=this.a,Q=this.b,I=this.c,B=this.d,E=this.tx,C=A*B-Q*I;return this.a=B/C,this.b=-Q/C,this.c=-I/C,this.d=A/C,this.tx=(I*this.ty-B*E)/C,this.ty=-(A*this.ty-Q*E)/C,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let A=new x;return A.a=this.a,A.b=this.b,A.c=this.c,A.d=this.d,A.tx=this.tx,A.ty=this.ty,A}copyTo(A){return A.a=this.a,A.b=this.b,A.c=this.c,A.d=this.d,A.tx=this.tx,A.ty=this.ty,A}copyFrom(A){return this.a=A.a,this.b=A.b,this.c=A.c,this.d=A.d,this.tx=A.tx,this.ty=A.ty,this}equals(A){return A.a===this.a&&A.b===this.b&&A.c===this.c&&A.d===this.d&&A.tx===this.tx&&A.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return gP.identity()}static get shared(){return MP.identity()}}var MP,gP;var NA=Y(()=>{PH();aQ();MP=new x,gP=new x});class xA{constructor(A,Q,I){this._x=Q||0,this._y=I||0,this._observer=A}clone(A){return new xA(A??this._observer,this._x,this._y)}set(A=0,Q=A){if(this._x!==A||this._y!==Q)this._x=A,this._y=Q,this._observer._onUpdate(this);return this}copyFrom(A){if(this._x!==A.x||this._y!==A.y)this._x=A.x,this._y=A.y,this._observer._onUpdate(this);return this}copyTo(A){return A.set(this._x,this._y),A}equals(A){return A.x===this._x&&A.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(A){if(this._x!==A)this._x=A,this._observer._onUpdate(this)}get y(){return this._y}set y(A){if(this._y!==A)this._y=A,this._observer._onUpdate(this)}}var HE=()=>{};function VA(A="default"){if(O2[A]===void 0)O2[A]=-1;return++O2[A]}var O2;var HQ=Y(()=>{O2={default:-1}});var Ok,BA="8.0.0",Sq="8.3.4",IJ,c=(A,Q,I=3)=>{if(IJ.quiet||Ok.has(Q))return;let B=new Error().stack,E=`${Q}
Deprecated since v${A}`,C=typeof console.groupCollapsed==="function"&&!IJ.noColor;if(typeof B==="undefined")console.warn("PixiJS Deprecation Warning: ",E);else if(B=B.split(`
`).splice(I).join(`
`),C)console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",E),console.warn(B),console.groupEnd();else console.warn("PixiJS Deprecation Warning: ",E),console.warn(B);Ok.add(Q)};var gA=Y(()=>{Ok=new Set,IJ={quiet:!1,noColor:!1};Object.defineProperties(c,{quiet:{get:()=>IJ.quiet,set:(A)=>{IJ.quiet=A},enumerable:!0,configurable:!1},noColor:{get:()=>IJ.noColor,set:(A)=>{IJ.noColor=A},enumerable:!0,configurable:!1}})});function n(...A){if(G2===Gk)return;if(G2++,G2===Gk)console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.");else console.warn("PixiJS Warning: ",...A)}var G2=0,Gk=500;var _A=()=>{};var WI;var ZE=Y(()=>{WI={_registeredResources:new Set,register(A){this._registeredResources.add(A)},unregister(A){this._registeredResources.delete(A)},release(){this._registeredResources.forEach((A)=>A.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(A){return this._registeredResources.has(A)},reset(){this._registeredResources.clear()}}});class MH{constructor(A,Q){if(this._pool=[],this._count=0,this._index=0,this._classType=A,Q)this.prepopulate(Q)}prepopulate(A){for(let Q=0;Q<A;Q++)this._pool[this._index++]=new this._classType;this._count+=A}get(A){let Q;if(this._index>0)Q=this._pool[--this._index];else Q=new this._classType,this._count++;return Q.init?.(A),Q}return(A){A.reset?.(),this._pool[this._index++]=A}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let A=0;A<this._index;A++)this._pool[A].destroy();this._pool.length=0,this._count=0,this._index=0}}var bq=()=>{};class fq{constructor(){this._poolsByClass=new Map}prepopulate(A,Q){this.getPool(A).prepopulate(Q)}get(A,Q){return this.getPool(A).get(Q)}return(A){this.getPool(A.constructor).return(A)}getPool(A){if(!this._poolsByClass.has(A))this._poolsByClass.set(A,new MH(A));return this._poolsByClass.get(A)}stats(){let A={};return this._poolsByClass.forEach((Q)=>{let I=A[Q._classType.name]?Q._classType.name+Q._classType.ID:Q._classType.name;A[I]={free:Q.totalFree,used:Q.totalUsed,size:Q.totalSize}}),A}clear(){this._poolsByClass.forEach((A)=>A.clear()),this._poolsByClass.clear()}}var yA;var dI=Y(()=>{ZE();bq();yA=new fq;WI.register(yA)});var yq;var vq=Y(()=>{gA();yq={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(A){if(typeof A==="boolean"&&A===!1)this.disableRenderGroup();else this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(A===!0?{}:A)},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(A){c("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(A)}}});function BJ(A,Q,I){let B=A.length,E;if(Q>=B||I===0)return;I=Q+I>B?B-Q:I;let C=B-I;for(E=Q;E<C;++E)A[E]=A[E+I];A.length=C}var gH=()=>{};var Tq;var hq=Y(()=>{gH();gA();Tq={allowChildren:!0,removeChildren(A=0,Q){let I=Q??this.children.length,B=I-A,E=[];if(B>0&&B<=I){for(let J=I-1;J>=A;J--){let K=this.children[J];if(!K)continue;E.push(K),K.parent=null}BJ(this.children,A,I);let C=this.renderGroup||this.parentRenderGroup;if(C)C.removeChildren(E);for(let J=0;J<E.length;++J){let K=E[J];K.parentRenderLayer?.detach(K),this.emit("childRemoved",K,this,J),E[J].emit("removed",this)}if(E.length>0)this._didViewChangeTick++;return E}else if(B===0&&this.children.length===0)return E;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(A){let Q=this.getChildAt(A);return this.removeChild(Q)},getChildAt(A){if(A<0||A>=this.children.length)throw new Error(`getChildAt: Index (${A}) does not exist.`);return this.children[A]},setChildIndex(A,Q){if(Q<0||Q>=this.children.length)throw new Error(`The index ${Q} supplied is out of bounds ${this.children.length}`);this.getChildIndex(A),this.addChildAt(A,Q)},getChildIndex(A){let Q=this.children.indexOf(A);if(Q===-1)throw new Error("The supplied Container must be a child of the caller");return Q},addChildAt(A,Q){if(!this.allowChildren)c(BA,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:I}=this;if(Q<0||Q>I.length)throw new Error(`${A}addChildAt: The index ${Q} supplied is out of bounds ${I.length}`);if(A.parent){let E=A.parent.children.indexOf(A);if(A.parent===this&&E===Q)return A;if(E!==-1)A.parent.children.splice(E,1)}if(Q===I.length)I.push(A);else I.splice(Q,0,A);A.parent=this,A.didChange=!0,A._updateFlags=15;let B=this.renderGroup||this.parentRenderGroup;if(B)B.addChild(A);if(this.sortableChildren)this.sortDirty=!0;return this.emit("childAdded",A,this,Q),A.emit("added",this),A},swapChildren(A,Q){if(A===Q)return;let I=this.getChildIndex(A),B=this.getChildIndex(Q);this.children[I]=Q,this.children[B]=A;let E=this.renderGroup||this.parentRenderGroup;if(E)E.structureDidChange=!0;this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...A){if(A.length===1)return this.reparentChildAt(A[0],this.children.length);return A.forEach((Q)=>this.reparentChildAt(Q,this.children.length)),A[0]},reparentChildAt(A,Q){if(A.parent===this)return this.setChildIndex(A,Q),A;let I=A.worldTransform.clone();A.removeFromParent(),this.addChildAt(A,Q);let B=this.worldTransform.clone();return B.invert(),I.prepend(B),A.setFromMatrix(I),A},replaceChild(A,Q){A.updateLocalTransform(),this.addChildAt(Q,this.getChildIndex(A)),Q.setFromMatrix(A.localTransform),Q.updateLocalTransform(),this.removeChild(A)}}});var xq;var mq=Y(()=>{xq={collectRenderables(A,Q,I){if(this.parentRenderLayer&&this.parentRenderLayer!==I||this.globalDisplayStatus<7||!this.includeInBuild)return;if(this.sortableChildren)this.sortChildren();if(this.isSimple)this.collectRenderablesSimple(A,Q,I);else if(this.renderGroup)Q.renderPipes.renderGroup.addRenderGroup(this.renderGroup,A);else this.collectRenderablesWithEffects(A,Q,I)},collectRenderablesSimple(A,Q,I){let B=this.children,E=B.length;for(let C=0;C<E;C++)B[C].collectRenderables(A,Q,I)},collectRenderablesWithEffects(A,Q,I){let{renderPipes:B}=Q;for(let E=0;E<this.effects.length;E++){let C=this.effects[E];B[C.pipe].push(C,this,A)}this.collectRenderablesSimple(A,Q,I);for(let E=this.effects.length-1;E>=0;E--){let C=this.effects[E];B[C.pipe].pop(C,this,A)}}}});class PB{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let A=0;A<this.filters.length;A++)this.filters[A].destroy();this.filters=null,this.filterArea=null}}var EJ=()=>{};class cq{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){if(this._initialized)return;this._initialized=!0,this._effectClasses.forEach((A)=>{this.add({test:A.test,maskClass:A})})}add(A){this._tests.push(A)}getMaskEffect(A){if(!this._initialized)this.init();for(let Q=0;Q<this._tests.length;Q++){let I=this._tests[Q];if(I.test(A))return yA.get(I.maskClass,A)}return A}returnMaskEffect(A){yA.return(A)}}var CJ;var _H=Y(()=>{M();dI();CJ=new cq;p.handleByList(N.MaskEffect,CJ._effectClasses)});var dq;var pq=Y(()=>{EJ();_H();dq={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let A=this.renderGroup||this.parentRenderGroup;if(A)A.structureDidChange=!0},addEffect(A){if(this.effects.indexOf(A)!==-1)return;this.effects.push(A),this.effects.sort((I,B)=>I.priority-B.priority),this._markStructureAsChanged(),this._updateIsSimple()},removeEffect(A){let Q=this.effects.indexOf(A);if(Q===-1)return;this.effects.splice(Q,1),this._markStructureAsChanged(),this._updateIsSimple()},set mask(A){let Q=this._maskEffect;if(Q?.mask===A)return;if(Q)this.removeEffect(Q),CJ.returnMaskEffect(Q),this._maskEffect=null;if(A===null||A===void 0)return;this._maskEffect=CJ.getMaskEffect(A),this.addEffect(this._maskEffect)},get mask(){return this._maskEffect?.mask},setMask(A){if(this._maskOptions={...this._maskOptions,...A},A.mask)this.mask=A.mask;this._markStructureAsChanged()},set filters(A){if(!Array.isArray(A)&&A)A=[A];let Q=this._filterEffect||(this._filterEffect=new PB);A=A;let I=A?.length>0,B=Q.filters?.length>0,E=I!==B;if(A=Array.isArray(A)?A.slice(0):A,Q.filters=Object.freeze(A),E)if(I)this.addEffect(Q);else this.removeEffect(Q),Q.filters=A??null},get filters(){return this._filterEffect?.filters},set filterArea(A){this._filterEffect||(this._filterEffect=new PB),this._filterEffect.filterArea=A},get filterArea(){return this._filterEffect?.filterArea}}});var uq;var lq=Y(()=>{gA();uq={label:null,get name(){return c(BA,"Container.name property has been removed, use Container.label instead"),this.label},set name(A){c(BA,"Container.name property has been removed, use Container.label instead"),this.label=A},getChildByName(A,Q=!1){return this.getChildByLabel(A,Q)},getChildByLabel(A,Q=!1){let I=this.children;for(let B=0;B<I.length;B++){let E=I[B];if(E.label===A||A instanceof RegExp&&A.test(E.label))return E}if(Q)for(let B=0;B<I.length;B++){let C=I[B].getChildByLabel(A,!0);if(C)return C}return null},getChildrenByLabel(A,Q=!1,I=[]){let B=this.children;for(let E=0;E<B.length;E++){let C=B[E];if(C.label===A||A instanceof RegExp&&A.test(C.label))I.push(C)}if(Q)for(let E=0;E<B.length;E++)B[E].getChildrenByLabel(A,!0,I);return I}}});class EA{constructor(A=0,Q=0,I=0,B=0){this.type="rectangle",this.x=Number(A),this.y=Number(Q),this.width=Number(I),this.height=Number(B)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new EA(0,0,0,0)}clone(){return new EA(this.x,this.y,this.width,this.height)}copyFromBounds(A){return this.x=A.minX,this.y=A.minY,this.width=A.maxX-A.minX,this.height=A.maxY-A.minY,this}copyFrom(A){return this.x=A.x,this.y=A.y,this.width=A.width,this.height=A.height,this}copyTo(A){return A.copyFrom(this),A}contains(A,Q){if(this.width<=0||this.height<=0)return!1;if(A>=this.x&&A<this.x+this.width){if(Q>=this.y&&Q<this.y+this.height)return!0}return!1}strokeContains(A,Q,I,B=0.5){let{width:E,height:C}=this;if(E<=0||C<=0)return!1;let J=this.x,K=this.y,H=I*(1-B),Z=I-H,q=J-H,w=J+E+H,$=K-H,U=K+C+H,V=J+Z,z=J+E-Z,D=K+Z,W=K+C-Z;return A>=q&&A<=w&&Q>=$&&Q<=U&&!(A>V&&A<z&&Q>D&&Q<W)}intersects(A,Q){if(!Q){let _=this.x<A.x?A.x:this.x;if((this.right>A.right?A.right:this.right)<=_)return!1;let f=this.y<A.y?A.y:this.y;return(this.bottom>A.bottom?A.bottom:this.bottom)>f}let I=this.left,B=this.right,E=this.top,C=this.bottom;if(B<=I||C<=E)return!1;let J=iq[0].set(A.left,A.top),K=iq[1].set(A.left,A.bottom),H=iq[2].set(A.right,A.top),Z=iq[3].set(A.right,A.bottom);if(H.x<=J.x||K.y<=J.y)return!1;let q=Math.sign(Q.a*Q.d-Q.b*Q.c);if(q===0)return!1;if(Q.apply(J,J),Q.apply(K,K),Q.apply(H,H),Q.apply(Z,Z),Math.max(J.x,K.x,H.x,Z.x)<=I||Math.min(J.x,K.x,H.x,Z.x)>=B||Math.max(J.y,K.y,H.y,Z.y)<=E||Math.min(J.y,K.y,H.y,Z.y)>=C)return!1;let w=q*(K.y-J.y),$=q*(J.x-K.x),U=w*I+$*E,V=w*B+$*E,z=w*I+$*C,D=w*B+$*C;if(Math.max(U,V,z,D)<=w*J.x+$*J.y||Math.min(U,V,z,D)>=w*Z.x+$*Z.y)return!1;let W=q*(J.y-H.y),j=q*(H.x-J.x),O=W*I+j*E,F=W*B+j*E,L=W*I+j*C,R=W*B+j*C;if(Math.max(O,F,L,R)<=W*J.x+j*J.y||Math.min(O,F,L,R)>=W*Z.x+j*Z.y)return!1;return!0}pad(A=0,Q=A){return this.x-=A,this.y-=Q,this.width+=A*2,this.height+=Q*2,this}fit(A){let Q=Math.max(this.x,A.x),I=Math.min(this.x+this.width,A.x+A.width),B=Math.max(this.y,A.y),E=Math.min(this.y+this.height,A.y+A.height);return this.x=Q,this.width=Math.max(I-Q,0),this.y=B,this.height=Math.max(E-B,0),this}ceil(A=1,Q=0.001){let I=Math.ceil((this.x+this.width-Q)*A)/A,B=Math.ceil((this.y+this.height-Q)*A)/A;return this.x=Math.floor((this.x+Q)*A)/A,this.y=Math.floor((this.y+Q)*A)/A,this.width=I-this.x,this.height=B-this.y,this}scale(A,Q=A){return this.x*=A,this.y*=Q,this.width*=A,this.height*=Q,this}enlarge(A){let Q=Math.min(this.x,A.x),I=Math.max(this.x+this.width,A.x+A.width),B=Math.min(this.y,A.y),E=Math.max(this.y+this.height,A.y+A.height);return this.x=Q,this.width=I-Q,this.y=B,this.height=E-B,this}getBounds(A){return A||(A=new EA),A.copyFrom(this),A}containsRect(A){if(this.width<=0||this.height<=0)return!1;let{x:Q,y:I}=A,B=A.x+A.width,E=A.y+A.height;return Q>=this.x&&Q<this.x+this.width&&I>=this.y&&I<this.y+this.height&&B>=this.x&&B<this.x+this.width&&E>=this.y&&E<this.y+this.height}set(A,Q,I,B){return this.x=A,this.y=Q,this.width=I,this.height=B,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}var iq;var ZQ=Y(()=>{aQ();iq=[new UA,new UA,new UA,new UA]});class RA{constructor(A=1/0,Q=1/0,I=-1/0,B=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jk,this.minX=A,this.minY=Q,this.maxX=I,this.maxY=B}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){if(!this._rectangle)this._rectangle=new EA;let A=this._rectangle;if(this.minX>this.maxX||this.minY>this.maxY)A.x=0,A.y=0,A.width=0,A.height=0;else A.copyFromBounds(this);return A}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jk,this}set(A,Q,I,B){this.minX=A,this.minY=Q,this.maxX=I,this.maxY=B}addFrame(A,Q,I,B,E){E||(E=this.matrix);let{a:C,b:J,c:K,d:H,tx:Z,ty:q}=E,w=this.minX,$=this.minY,U=this.maxX,V=this.maxY,z=C*A+K*Q+Z,D=J*A+H*Q+q;if(z<w)w=z;if(D<$)$=D;if(z>U)U=z;if(D>V)V=D;if(z=C*I+K*Q+Z,D=J*I+H*Q+q,z<w)w=z;if(D<$)$=D;if(z>U)U=z;if(D>V)V=D;if(z=C*A+K*B+Z,D=J*A+H*B+q,z<w)w=z;if(D<$)$=D;if(z>U)U=z;if(D>V)V=D;if(z=C*I+K*B+Z,D=J*I+H*B+q,z<w)w=z;if(D<$)$=D;if(z>U)U=z;if(D>V)V=D;this.minX=w,this.minY=$,this.maxX=U,this.maxY=V}addRect(A,Q){this.addFrame(A.x,A.y,A.x+A.width,A.y+A.height,Q)}addBounds(A,Q){this.addFrame(A.minX,A.minY,A.maxX,A.maxY,Q)}addBoundsMask(A){this.minX=this.minX>A.minX?this.minX:A.minX,this.minY=this.minY>A.minY?this.minY:A.minY,this.maxX=this.maxX<A.maxX?this.maxX:A.maxX,this.maxY=this.maxY<A.maxY?this.maxY:A.maxY}applyMatrix(A){let Q=this.minX,I=this.minY,B=this.maxX,E=this.maxY,{a:C,b:J,c:K,d:H,tx:Z,ty:q}=A,w=C*Q+K*I+Z,$=J*Q+H*I+q;this.minX=w,this.minY=$,this.maxX=w,this.maxY=$,w=C*B+K*I+Z,$=J*B+H*I+q,this.minX=w<this.minX?w:this.minX,this.minY=$<this.minY?$:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=$>this.maxY?$:this.maxY,w=C*Q+K*E+Z,$=J*Q+H*E+q,this.minX=w<this.minX?w:this.minX,this.minY=$<this.minY?$:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=$>this.maxY?$:this.maxY,w=C*B+K*E+Z,$=J*B+H*E+q,this.minX=w<this.minX?w:this.minX,this.minY=$<this.minY?$:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=$>this.maxY?$:this.maxY}fit(A){if(this.minX<A.left)this.minX=A.left;if(this.maxX>A.right)this.maxX=A.right;if(this.minY<A.top)this.minY=A.top;if(this.maxY>A.bottom)this.maxY=A.bottom;return this}fitBounds(A,Q,I,B){if(this.minX<A)this.minX=A;if(this.maxX>Q)this.maxX=Q;if(this.minY<I)this.minY=I;if(this.maxY>B)this.maxY=B;return this}pad(A,Q=A){return this.minX-=A,this.maxX+=A,this.minY-=Q,this.maxY+=Q,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new RA(this.minX,this.minY,this.maxX,this.maxY)}scale(A,Q=A){return this.minX*=A,this.minY*=Q,this.maxX*=A,this.maxY*=Q,this}get x(){return this.minX}set x(A){let Q=this.maxX-this.minX;this.minX=A,this.maxX=A+Q}get y(){return this.minY}set y(A){let Q=this.maxY-this.minY;this.minY=A,this.maxY=A+Q}get width(){return this.maxX-this.minX}set width(A){this.maxX=this.minX+A}get height(){return this.maxY-this.minY}set height(A){this.maxY=this.minY+A}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(A,Q,I,B){let E=this.minX,C=this.minY,J=this.maxX,K=this.maxY;B||(B=this.matrix);let{a:H,b:Z,c:q,d:w,tx:$,ty:U}=B;for(let V=Q;V<I;V+=2){let z=A[V],D=A[V+1],W=H*z+q*D+$,j=Z*z+w*D+U;E=W<E?W:E,C=j<C?j:C,J=W>J?W:J,K=j>K?j:K}this.minX=E,this.minY=C,this.maxX=J,this.maxY=K}containsPoint(A,Q){if(this.minX<=A&&this.minY<=Q&&this.maxX>=A&&this.maxY>=Q)return!0;return!1}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(A){return this.minX=A.minX,this.minY=A.minY,this.maxX=A.maxX,this.maxY=A.maxY,this}}var jk;var _Q=Y(()=>{NA();ZQ();jk=new x});var zQ,qI;var qE=Y(()=>{NA();dI();_Q();zQ=yA.getPool(x),qI=yA.getPool(RA)});var _P,nq;var oq=Y(()=>{NA();_Q();qE();_P=new x,nq={getFastGlobalBounds(A,Q){if(Q||(Q=new RA),Q.clear(),this._getGlobalBoundsRecursive(!!A,Q,this.parentRenderLayer),!Q.isValid)Q.set(0,0,0,0);let I=this.renderGroup||this.parentRenderGroup;return Q.applyMatrix(I.worldTransform),Q},_getGlobalBoundsRecursive(A,Q,I){let B=Q;if(A&&this.parentRenderLayer&&this.parentRenderLayer!==I)return;if(this.localDisplayStatus!==7||!this.measurable)return;let E=!!this.effects.length;if(this.renderGroup||E)B=qI.get().clear();if(this.boundsArea)Q.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let J=this.bounds;B.addFrame(J.minX,J.minY,J.maxX,J.maxY,this.groupTransform)}let C=this.children;for(let J=0;J<C.length;J++)C[J]._getGlobalBoundsRecursive(A,B,I)}if(E){let C=!1,J=this.renderGroup||this.parentRenderGroup;for(let K=0;K<this.effects.length;K++)if(this.effects[K].addBounds){if(!C)C=!0,B.applyMatrix(J.worldTransform);this.effects[K].addBounds(B,!0)}if(C)B.applyMatrix(J.worldTransform.copyTo(_P).invert());Q.addBounds(B),qI.return(B)}else if(this.renderGroup)Q.addBounds(B,this.relativeGroupTransform),qI.return(B)}}});function MB(A,Q,I){I.clear();let B,E;if(A.parent)if(!Q)E=zQ.get().identity(),B=JJ(A,E);else B=A.parent.worldTransform;else B=x.IDENTITY;if(Lk(A,I,B,Q),E)zQ.return(E);if(!I.isValid)I.set(0,0,0,0);return I}function Lk(A,Q,I,B){if(!A.visible||!A.measurable)return;let E;if(!B)A.updateLocalTransform(),E=zQ.get(),E.appendFrom(A.localTransform,I);else E=A.worldTransform;let C=Q,J=!!A.effects.length;if(J)Q=qI.get().clear();if(A.boundsArea)Q.addRect(A.boundsArea,E);else{let K=A.bounds;if(K&&!K.isEmpty())Q.matrix=E,Q.addBounds(K);for(let H=0;H<A.children.length;H++)Lk(A.children[H],Q,E,B)}if(J){for(let K=0;K<A.effects.length;K++)A.effects[K].addBounds?.(Q);C.addBounds(Q,x.IDENTITY),qI.return(Q)}if(!B)zQ.return(E)}function JJ(A,Q){let I=A.parent;if(I)JJ(I,Q),I.updateLocalTransform(),Q.append(I.localTransform);return Q}var pE=Y(()=>{NA();qE()});function rQ(A,Q){if(A===16777215||!Q)return Q;if(Q===16777215||!A)return A;let I=A>>16&255,B=A>>8&255,E=A&255,C=Q>>16&255,J=Q>>8&255,K=Q&255,H=I*C/255|0,Z=B*J/255|0,q=E*K/255|0;return(H<<16)+(Z<<8)+q}var wE=()=>{};function uE(A,Q){if(A===Rk)return Q;if(Q===Rk)return A;return rQ(A,Q)}var Rk=16777215;var SH=Y(()=>{wE()});function lQ(A){return((A&255)<<16)+(A&65280)+(A>>16&255)}var sq;var YE=Y(()=>{NA();pE();qE();SH();sq={getGlobalAlpha(A){if(A){if(this.renderGroup)return this.renderGroup.worldAlpha;if(this.parentRenderGroup)return this.parentRenderGroup.worldAlpha*this.alpha;return this.alpha}let Q=this.alpha,I=this.parent;while(I)Q*=I.alpha,I=I.parent;return Q},getGlobalTransform(A=new x,Q){if(Q)return A.copyFrom(this.worldTransform);this.updateLocalTransform();let I=JJ(this,zQ.get().identity());return A.appendFrom(this.localTransform,I),zQ.return(I),A},getGlobalTint(A){if(A){if(this.renderGroup)return lQ(this.renderGroup.worldColor);if(this.parentRenderGroup)return lQ(uE(this.localColor,this.parentRenderGroup.worldColor));return this.tint}let Q=this.localColor,I=this.parent;while(I)Q=uE(Q,I.localColor),I=I.parent;return lQ(Q)}}});function lE(A,Q,I){if(Q.clear(),I||(I=x.IDENTITY),Pk(A,Q,I,A,!0),!Q.isValid)Q.set(0,0,0,0);return Q}function Pk(A,Q,I,B,E){let C;if(!E){if(!A.visible||!A.measurable)return;A.updateLocalTransform();let H=A.localTransform;C=zQ.get(),C.appendFrom(H,I)}else C=zQ.get(),C=I.copyTo(C);let J=Q,K=!!A.effects.length;if(K)Q=qI.get().clear();if(A.boundsArea)Q.addRect(A.boundsArea,C);else{if(A.renderPipeId)Q.matrix=C,Q.addBounds(A.bounds);let H=A.children;for(let Z=0;Z<H.length;Z++)Pk(H[Z],Q,C,B,!1)}if(K){for(let H=0;H<A.effects.length;H++)A.effects[H].addLocalBounds?.(Q,B);J.addBounds(Q,x.IDENTITY),qI.return(Q)}zQ.return(C)}var KJ=Y(()=>{NA();qE()});function bH(A,Q){let I=A.children;for(let B=0;B<I.length;B++){let E=I[B],C=E.uid,J=(E._didViewChangeTick&65535)<<16|E._didContainerChangeTick&65535,K=Q.index;if(Q.data[K]!==C||Q.data[K+1]!==J)Q.data[Q.index]=C,Q.data[Q.index+1]=J,Q.didChange=!0;if(Q.index=K+2,E.children.length)bH(E,Q)}return Q.didChange}var aq=()=>{};var SP,rq;var tq=Y(()=>{NA();_Q();pE();KJ();aq();SP=new x,rq={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(A,Q){let I=Math.sign(this.scale.x)||1;if(Q!==0)this.scale.x=A/Q*I;else this.scale.x=I},_setHeight(A,Q){let I=Math.sign(this.scale.y)||1;if(Q!==0)this.scale.y=A/Q*I;else this.scale.y=I},getLocalBounds(){if(!this._localBoundsCacheData)this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new RA};let A=this._localBoundsCacheData;if(A.index=1,A.didChange=!1,A.data[0]!==this._didViewChangeTick)A.didChange=!0,A.data[0]=this._didViewChangeTick;if(bH(this,A),A.didChange)lE(this,A.localBounds,SP);return A.localBounds},getBounds(A,Q){return MB(this,A,Q||new RA)}}});var eq;var A5=Y(()=>{eq={_onRender:null,set onRender(A){let Q=this.renderGroup||this.parentRenderGroup;if(!A){if(this._onRender)Q?.removeOnRender(this);this._onRender=null;return}if(!this._onRender)Q?.addOnRender(this);this._onRender=A},get onRender(){return this._onRender}}});function bP(A,Q){return A._zIndex-Q._zIndex}var Q5;var I5=Y(()=>{Q5={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(A){if(this._zIndex===A)return;this._zIndex=A,this.depthOfChildModified()},depthOfChildModified(){if(this.parent)this.parent.sortableChildren=!0,this.parent.sortDirty=!0;if(this.parentRenderGroup)this.parentRenderGroup.structureDidChange=!0},sortChildren(){if(!this.sortDirty)return;this.sortDirty=!1,this.children.sort(bP)}}});var B5;var E5=Y(()=>{aQ();qE();B5={getGlobalPosition(A=new UA,Q=!1){if(this.parent)this.parent.toGlobal(this._position,A,Q);else A.x=this._position.x,A.y=this._position.y;return A},toGlobal(A,Q,I=!1){let B=this.getGlobalTransform(zQ.get(),I);return Q=B.apply(A,Q),zQ.return(B),Q},toLocal(A,Q,I,B){if(Q)A=Q.toGlobal(A,I,B);let E=this.getGlobalTransform(zQ.get(),B);return I=E.applyInverse(A,I),zQ.return(E),I}}});class $E{constructor(){this.uid=VA("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(A){this.instructions[this.instructionSize++]=A}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}var HJ=Y(()=>{HQ()});function ZB(A){return A+=A===0?1:0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A+1}function fH(A){return!(A&A-1)&&!!A}var mC=()=>{};function XI(A){let Q={};for(let I in A)if(A[I]!==void 0)Q[I]=A[I];return Q}var UE=()=>{};function fP(A){let Q=Mk[A];if(Q===void 0)Mk[A]=VA("resource");return Q}var Mk,gk,DQ;var qB=Y(()=>{yQ();HQ();gA();Mk=Object.create(null);gk=class A extends mA{constructor(Q={}){super();this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,Q={...A.defaultOptions,...Q},this.addressMode=Q.addressMode,this.addressModeU=Q.addressModeU??this.addressModeU,this.addressModeV=Q.addressModeV??this.addressModeV,this.addressModeW=Q.addressModeW??this.addressModeW,this.scaleMode=Q.scaleMode,this.magFilter=Q.magFilter??this.magFilter,this.minFilter=Q.minFilter??this.minFilter,this.mipmapFilter=Q.mipmapFilter??this.mipmapFilter,this.lodMinClamp=Q.lodMinClamp,this.lodMaxClamp=Q.lodMaxClamp,this.compare=Q.compare,this.maxAnisotropy=Q.maxAnisotropy??1}set addressMode(Q){this.addressModeU=Q,this.addressModeV=Q,this.addressModeW=Q}get addressMode(){return this.addressModeU}set wrapMode(Q){c(BA,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=Q}get wrapMode(){return this.addressMode}set scaleMode(Q){this.magFilter=Q,this.minFilter=Q,this.mipmapFilter=Q}get scaleMode(){return this.magFilter}set maxAnisotropy(Q){if(this._maxAnisotropy=Math.min(Q,16),this._maxAnisotropy>1)this.scaleMode="linear"}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){let Q=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=fP(Q),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};gk.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};DQ=gk});var _k,GA;var WQ=Y(()=>{yQ();mC();UE();HQ();qB();_k=class A extends mA{constructor(Q={}){super();if(this.options=Q,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=VA("textureSource"),this._resourceType="textureSource",this._resourceId=VA("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.viewDimension="2d",this.arrayLayerCount=1,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,Q={...A.defaultOptions,...Q},this.label=Q.label??"",this.resource=Q.resource,this.autoGarbageCollect=Q.autoGarbageCollect,this._resolution=Q.resolution,Q.width)this.pixelWidth=Q.width*this._resolution;else this.pixelWidth=this.resource?this.resourceWidth??1:1;if(Q.height)this.pixelHeight=Q.height*this._resolution;else this.pixelHeight=this.resource?this.resourceHeight??1:1;this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=Q.format,this.dimension=Q.dimensions,this.viewDimension=Q.viewDimension??Q.dimensions,this.arrayLayerCount=Q.arrayLayerCount,this.mipLevelCount=Q.mipLevelCount,this.autoGenerateMipmaps=Q.autoGenerateMipmaps,this.sampleCount=Q.sampleCount,this.antialias=Q.antialias,this.alphaMode=Q.alphaMode,this.style=new DQ(XI(Q)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(Q){if(this.style===Q)return;this._style?.off("change",this._onStyleChange,this),this._style=Q,this._style?.on("change",this._onStyleChange,this),this._onStyleChange()}set maxAnisotropy(Q){this._style.maxAnisotropy=Q}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(Q){this._style.addressMode=Q}get repeatMode(){return this._style.addressMode}set repeatMode(Q){this._style.addressMode=Q}get magFilter(){return this._style.magFilter}set magFilter(Q){this._style.magFilter=Q}get minFilter(){return this._style.minFilter}set minFilter(Q){this._style.minFilter=Q}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(Q){this._style.mipmapFilter=Q}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(Q){this._style.lodMinClamp=Q}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(Q){this._style.lodMaxClamp=Q}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let Q=this._resolution;if(this.resize(this.resourceWidth/Q,this.resourceHeight/Q))return}this.emit("update",this)}destroy(){if(this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style)this._style.destroy(),this._style=null;this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=VA("resource"),this.emit("change",this),this.emit("unload",this);for(let Q in this._gpuData)this._gpuData[Q]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){let{resource:Q}=this;return Q.naturalWidth||Q.videoWidth||Q.displayWidth||Q.width}get resourceHeight(){let{resource:Q}=this;return Q.naturalHeight||Q.videoHeight||Q.displayHeight||Q.height}get resolution(){return this._resolution}set resolution(Q){if(this._resolution===Q)return;this._resolution=Q,this.width=this.pixelWidth/Q,this.height=this.pixelHeight/Q}resize(Q,I,B){B||(B=this._resolution),Q||(Q=this.width),I||(I=this.height);let E=Math.round(Q*B),C=Math.round(I*B);if(this.width=E/B,this.height=C/B,this._resolution=B,this.pixelWidth===E&&this.pixelHeight===C)return!1;return this._refreshPOT(),this.pixelWidth=E,this.pixelHeight=C,this.emit("resize",this),this._resourceId=VA("resource"),this.emit("change",this),!0}updateMipmaps(){if(this.autoGenerateMipmaps&&this.mipLevelCount>1)this.emit("updateMipmaps",this)}set wrapMode(Q){this._style.wrapMode=Q}get wrapMode(){return this._style.wrapMode}set scaleMode(Q){this._style.scaleMode=Q}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=fH(this.pixelWidth)&&fH(this.pixelHeight)}static test(Q){throw new Error("Unimplemented")}};_k.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",viewDimension:"2d",arrayLayerCount:1,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};GA=_k});function yP(){for(let A=0;A<16;A++){let Q=[];j2.push(Q);for(let I=0;I<16;I++){let B=C5(cC[A]*cC[I]+pC[A]*dC[I]),E=C5(dC[A]*cC[I]+uC[A]*dC[I]),C=C5(cC[A]*pC[I]+pC[A]*uC[I]),J=C5(dC[A]*pC[I]+uC[A]*uC[I]);for(let K=0;K<16;K++)if(cC[K]===B&&dC[K]===E&&pC[K]===C&&uC[K]===J){Q.push(K);break}}}for(let A=0;A<16;A++){let Q=new x;Q.set(cC[A],dC[A],pC[A],uC[A],0,0),Sk.push(Q)}}var cC,dC,pC,uC,j2,Sk,C5,DA;var VE=Y(()=>{NA();cC=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dC=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],pC=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],uC=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],j2=[],Sk=[],C5=Math.sign;yP();DA={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:(A)=>cC[A],uY:(A)=>dC[A],vX:(A)=>pC[A],vY:(A)=>uC[A],inv:(A)=>{if(A&8)return A&15;return-A&7},add:(A,Q)=>j2[A][Q],sub:(A,Q)=>j2[A][DA.inv(Q)],rotate180:(A)=>A^4,isVertical:(A)=>(A&3)===2,byDirection:(A,Q)=>{if(Math.abs(A)*2<=Math.abs(Q)){if(Q>=0)return DA.S;return DA.N}else if(Math.abs(Q)*2<=Math.abs(A)){if(A>0)return DA.E;return DA.W}else if(Q>0){if(A>0)return DA.SE;return DA.SW}else if(A>0)return DA.NE;return DA.NW},matrixAppendRotationInv:(A,Q,I=0,B=0,E=0,C=0)=>{let J=Sk[DA.inv(Q)],K=J.a,H=J.b,Z=J.c,q=J.d,w=I-Math.min(0,K*E,Z*C,K*E+Z*C),$=B-Math.min(0,H*E,q*C,H*E+q*C),U=A.a,V=A.b,z=A.c,D=A.d;A.a=K*U+H*z,A.b=K*V+H*D,A.c=Z*U+q*z,A.d=Z*V+q*D,A.tx=w*U+$*z+A.tx,A.ty=w*V+$*D+A.ty},transformRectCoords:(A,Q,I,B)=>{let{x:E,y:C,width:J,height:K}=A,{x:H,y:Z,width:q,height:w}=Q;if(I===DA.E)return B.set(E+H,C+Z,J,K),B;else if(I===DA.S)return B.set(q-C-K+H,E+Z,K,J);else if(I===DA.W)return B.set(q-E-J+H,w-C-K+Z,J,K);else if(I===DA.N)return B.set(C+H,w-E-J+Z,K,J);return B.set(E+H,C+Z,J,K)}}});var yH=()=>{};var J5=()=>{};var iE;var vH=Y(()=>{M();WQ();iE=class iE extends GA{constructor(A){let Q=A.resource||new Float32Array(A.width*A.height*4),I=A.format;if(!I)if(Q instanceof Float32Array)I="rgba32float";else if(Q instanceof Int32Array)I="rgba32uint";else if(Q instanceof Uint32Array)I="rgba32uint";else if(Q instanceof Int16Array)I="rgba16uint";else if(Q instanceof Uint16Array)I="rgba16uint";else if(Q instanceof Int8Array)I="bgra8unorm";else I="bgra8unorm";super({...A,resource:Q,format:I});this.uploadMethodId="buffer"}static test(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array}};iE.extension=N.TextureSource});class lC{constructor(A,Q){if(this.mapCoord=new x,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof Q==="undefined")this.clampMargin=A.width<10?0:0.5;else this.clampMargin=Q;this.isSimple=!1,this.texture=A}get texture(){return this._texture}set texture(A){if(this.texture===A)return;this._texture?.removeListener("update",this.update,this),this._texture=A,this._texture.addListener("update",this.update,this),this.update()}multiplyUvs(A,Q){if(Q===void 0)Q=A;let I=this.mapCoord;for(let B=0;B<A.length;B+=2){let E=A[B],C=A[B+1];Q[B]=E*I.a+C*I.c+I.tx,Q[B+1]=E*I.b+C*I.d+I.ty}return Q}update(){let A=this._texture;this._updateID++;let Q=A.uvs;this.mapCoord.set(Q.x1-Q.x0,Q.y1-Q.y0,Q.x3-Q.x0,Q.y3-Q.y0,Q.x0,Q.y0);let{orig:I,trim:B}=A;if(B)bk.set(I.width/B.width,0,0,I.height/B.height,-B.x/B.width,-B.y/B.height),this.mapCoord.append(bk);let E=A.source,C=this.uClampFrame,J=this.clampMargin/E._resolution,K=this.clampOffset/E._resolution;return C[0]=(A.frame.x+J+K)/E.width,C[1]=(A.frame.y+J+K)/E.height,C[2]=(A.frame.x+A.frame.width-J+K)/E.width,C[3]=(A.frame.y+A.frame.height-J+K)/E.height,this.uClampOffset[0]=this.clampOffset/E.pixelWidth,this.uClampOffset[1]=this.clampOffset/E.pixelHeight,this.isSimple=A.frame.width===E.width&&A.frame.height===E.height&&A.rotate===0,!0}}var bk;var TH=Y(()=>{NA();bk=new x});var v;var FA=Y(()=>{yQ();VE();ZQ();HQ();gA();J5();vH();WQ();TH();v=class v extends mA{constructor({source:A,label:Q,frame:I,orig:B,trim:E,defaultAnchor:C,defaultBorders:J,rotate:K,dynamic:H}={}){super();if(this.uid=VA("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new EA,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=Q,this.source=A?.source??new GA,this.noFrame=!I,I)this.frame.copyFrom(I);else{let{width:Z,height:q}=this._source;this.frame.width=Z,this.frame.height=q}this.orig=B||this.frame,this.trim=E,this.rotate=K??0,this.defaultAnchor=C,this.defaultBorders=J,this.destroyed=!1,this.dynamic=H||!1,this.updateUvs()}set source(A){if(this._source)this._source.off("resize",this.update,this);this._source=A,A.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){if(!this._textureMatrix)this._textureMatrix=new lC(this);return this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:A,frame:Q}=this,{width:I,height:B}=this._source,E=Q.x/I,C=Q.y/B,J=Q.width/I,K=Q.height/B,H=this.rotate;if(H){let Z=J/2,q=K/2,w=E+Z,$=C+q;H=DA.add(H,DA.NW),A.x0=w+Z*DA.uX(H),A.y0=$+q*DA.uY(H),H=DA.add(H,2),A.x1=w+Z*DA.uX(H),A.y1=$+q*DA.uY(H),H=DA.add(H,2),A.x2=w+Z*DA.uX(H),A.y2=$+q*DA.uY(H),H=DA.add(H,2),A.x3=w+Z*DA.uX(H),A.y3=$+q*DA.uY(H)}else A.x0=E,A.y0=C,A.x1=E+J,A.y1=C,A.x2=E+J,A.y2=C+K,A.x3=E,A.y3=C+K}destroy(A=!1){if(this._source){if(this._source.off("resize",this.update,this),A)this._source.destroy(),this._source=null}this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){if(this.noFrame)this.frame.width=this._source.width,this.frame.height=this._source.height;this.updateUvs(),this.emit("update",this)}get baseTexture(){return c(BA,"Texture.baseTexture is now Texture.source"),this._source}};v.EMPTY=new v({label:"EMPTY",source:new GA({label:"EMPTY"})});v.EMPTY.destroy=yH;v.WHITE=new v({source:new iE({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});v.WHITE.destroy=yH});class K5{constructor(A){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=A||{},this.enableFullScreen=!1,this.textureStyle=new DQ(this.textureOptions)}createTexture(A,Q,I){let B=new GA({...this.textureOptions,width:A,height:Q,resolution:1,antialias:I,autoGarbageCollect:!1});return new v({source:B,label:`texturePool_${vP++}`})}getOptimalTexture(A,Q,I=1,B){let E=Math.ceil(A*I-0.000001),C=Math.ceil(Q*I-0.000001);E=ZB(E),C=ZB(C);let J=(E<<17)+(C<<1)+(B?1:0);if(!this._texturePool[J])this._texturePool[J]=[];let K=this._texturePool[J].pop();if(!K)K=this.createTexture(E,C,B);return K.source._resolution=I,K.source.width=E/I,K.source.height=C/I,K.source.pixelWidth=E,K.source.pixelHeight=C,K.frame.x=0,K.frame.y=0,K.frame.width=A,K.frame.height=Q,K.updateUvs(),this._poolKeyHash[K.uid]=J,K}getSameSizeTexture(A,Q=!1){let I=A.source;return this.getOptimalTexture(A.width,A.height,I._resolution,Q)}returnTexture(A,Q=!1){let I=this._poolKeyHash[A.uid];if(Q)A.source.style=this.textureStyle;this._texturePool[I].push(A)}clear(A){if(A=A!==!1,A)for(let Q in this._texturePool){let I=this._texturePool[Q];if(I)for(let B=0;B<I.length;B++)I[B].destroy(!0)}this._texturePool={}}}var vP=0,hA;var pI=Y(()=>{mC();ZE();WQ();FA();qB();hA=new K5;WI.register(hA)});class nE{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new x,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new $E,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(A){if(this.root=A,A._onRender)this.addOnRender(A);A.didChange=!0;let Q=A.children;for(let I=0;I<Q.length;I++){let B=Q[I];B._updateFlags=15,this.addChild(B)}}enableCacheAsTexture(A={}){this.textureOptions=A,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){if(this.isCachedAsTexture=!1,this.texture)hA.returnTexture(this.texture,!0),this.texture=null}updateCacheTexture(){this.textureNeedsUpdate=!0;let A=this._parentCacheAsTextureRenderGroup;if(A&&!A.textureNeedsUpdate)A.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(let A in this.childrenToUpdate){let Q=this.childrenToUpdate[A];Q.list.fill(null),Q.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(A){if(A.renderGroupParent)A.renderGroupParent._removeRenderGroupChild(A);A.renderGroupParent=this,this.renderGroupChildren.push(A)}_removeRenderGroupChild(A){let Q=this.renderGroupChildren.indexOf(A);if(Q>-1)this.renderGroupChildren.splice(Q,1);A.renderGroupParent=null}addChild(A){if(this.structureDidChange=!0,A.parentRenderGroup=this,A.updateTick=-1,A.parent===this.root)A.relativeRenderGroupDepth=1;else A.relativeRenderGroupDepth=A.parent.relativeRenderGroupDepth+1;if(A.didChange=!0,this.onChildUpdate(A),A.renderGroup){this.addRenderGroupChild(A.renderGroup);return}if(A._onRender)this.addOnRender(A);let Q=A.children;for(let I=0;I<Q.length;I++)this.addChild(Q[I])}removeChild(A){if(this.structureDidChange=!0,A._onRender){if(!A.renderGroup)this.removeOnRender(A)}if(A.parentRenderGroup=null,A.renderGroup){this._removeRenderGroupChild(A.renderGroup);return}let Q=A.children;for(let I=0;I<Q.length;I++)this.removeChild(Q[I])}removeChildren(A){for(let Q=0;Q<A.length;Q++)this.removeChild(A[Q])}onChildUpdate(A){let Q=this.childrenToUpdate[A.relativeRenderGroupDepth];if(!Q)Q=this.childrenToUpdate[A.relativeRenderGroupDepth]={index:0,list:[]};Q.list[Q.index++]=A}updateRenderable(A){if(A.globalDisplayStatus<7)return;this.instructionSet.renderPipes[A.renderPipeId].updateRenderable(A),A.didViewUpdate=!1}onChildViewUpdate(A){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=A}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(A){this._onRenderContainers.push(A)}removeOnRender(A){this._onRenderContainers.splice(this._onRenderContainers.indexOf(A),1)}runOnRender(A){for(let Q=0;Q<this._onRenderContainers.length;Q++)this._onRenderContainers[Q]._onRender(A)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(A=[]){let Q=this.root.children;for(let I=0;I<Q.length;I++)this._getChildren(Q[I],A);return A}_getChildren(A,Q=[]){if(Q.push(A),A.renderGroup)return Q;let I=A.children;for(let B=0;B<I.length;B++)this._getChildren(I[B],Q);return Q}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){if((this._matrixDirty&1)===0)return this._inverseWorldTransform;return this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new x),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()}get textureOffsetInverseTransform(){if((this._matrixDirty&2)===0)return this._textureOffsetInverseTransform;return this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new x),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;let A=this._parentCacheAsTextureRenderGroup;if(A)return this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new x),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(A.inverseWorldTransform).translate(-A._textureBounds.x,-A._textureBounds.y);return this.worldTransform}get cacheToLocalTransform(){if(this.isCachedAsTexture)return this.textureOffsetInverseTransform;if(!this._parentCacheAsTextureRenderGroup)return null;return this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform}}var hH=Y(()=>{NA();HJ();pI()});function iC(A,Q,I={}){for(let B in Q)if(!I[B]&&Q[B]!==void 0)A[B]=Q[B]}var xH=()=>{};var L2,H5,R2,Z5,nC=1,ZJ=2,oE=4,QA;var TQ=Y(()=>{yQ();IQ();Pq();M();NA();PH();HE();HQ();gA();_A();dI();vq();hq();mq();pq();lq();oq();YE();tq();A5();I5();E5();hH();xH();L2=new xA(null),H5=new xA(null),R2=new xA(null,1,1),Z5=new xA(null);QA=class QA extends mA{constructor(A={}){super();this.uid=VA("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new x,this.relativeGroupTransform=new x,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new xA(this,0,0),this._scale=R2,this._pivot=H5,this._origin=Z5,this._skew=L2,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],iC(this,A,{children:!0,parent:!0,effects:!0}),A.children?.forEach((Q)=>this.addChild(Q)),A.parent?.addChild(this)}static mixin(A){c("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),p.mixin(QA,A)}set _didChangeId(A){this._didViewChangeTick=A>>12&4095,this._didContainerChangeTick=A&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...A){if(!this.allowChildren)c(BA,"addChild: Only Containers will be allowed to add children in v8.0.0");if(A.length>1){for(let B=0;B<A.length;B++)this.addChild(A[B]);return A[0]}let Q=A[0],I=this.renderGroup||this.parentRenderGroup;if(Q.parent===this){if(this.children.splice(this.children.indexOf(Q),1),this.children.push(Q),I)I.structureDidChange=!0;return Q}if(Q.parent)Q.parent.removeChild(Q);if(this.children.push(Q),this.sortableChildren)this.sortDirty=!0;if(Q.parent=this,Q.didChange=!0,Q._updateFlags=15,I)I.addChild(Q);if(this.emit("childAdded",Q,this,this.children.length-1),Q.emit("added",this),this._didViewChangeTick++,Q._zIndex!==0)Q.depthOfChildModified();return Q}removeChild(...A){if(A.length>1){for(let B=0;B<A.length;B++)this.removeChild(A[B]);return A[0]}let Q=A[0],I=this.children.indexOf(Q);if(I>-1){if(this._didViewChangeTick++,this.children.splice(I,1),this.renderGroup)this.renderGroup.removeChild(Q);else if(this.parentRenderGroup)this.parentRenderGroup.removeChild(Q);if(Q.parentRenderLayer)Q.parentRenderLayer.detach(Q);Q.parent=null,this.emit("childRemoved",Q,this,I),Q.emit("removed",this)}return Q}_onUpdate(A){if(A){if(A===this._skew)this._updateSkew()}if(this._didContainerChangeTick++,this.didChange)return;if(this.didChange=!0,this.parentRenderGroup)this.parentRenderGroup.onChildUpdate(this)}set isRenderGroup(A){if(!!this.renderGroup===A)return;if(A)this.enableRenderGroup();else this.disableRenderGroup()}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let A=this.parentRenderGroup;A?.removeChild(this),this.renderGroup=yA.get(nE,this),this.groupTransform=x.IDENTITY,A?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let A=this.parentRenderGroup;A?.removeChild(this),yA.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,A?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){if(this._worldTransform||(this._worldTransform=new x),this.renderGroup)this._worldTransform.copyFrom(this.renderGroup.worldTransform);else if(this.parentRenderGroup)this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform);return this._worldTransform}get x(){return this._position.x}set x(A){this._position.x=A}get y(){return this._position.y}set y(A){this._position.y=A}get position(){return this._position}set position(A){this._position.copyFrom(A)}get rotation(){return this._rotation}set rotation(A){if(this._rotation!==A)this._rotation=A,this._onUpdate(this._skew)}get angle(){return this.rotation*gq}set angle(A){this.rotation=A*_q}get pivot(){if(this._pivot===H5)this._pivot=new xA(this,0,0);return this._pivot}set pivot(A){if(this._pivot===H5){if(this._pivot=new xA(this,0,0),this._origin!==Z5)n("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")}typeof A==="number"?this._pivot.set(A):this._pivot.copyFrom(A)}get skew(){if(this._skew===L2)this._skew=new xA(this,0,0);return this._skew}set skew(A){if(this._skew===L2)this._skew=new xA(this,0,0);this._skew.copyFrom(A)}get scale(){if(this._scale===R2)this._scale=new xA(this,1,1);return this._scale}set scale(A){if(this._scale===R2)this._scale=new xA(this,0,0);if(typeof A==="string")A=parseFloat(A);typeof A==="number"?this._scale.set(A):this._scale.copyFrom(A)}get origin(){if(this._origin===Z5)this._origin=new xA(this,0,0);return this._origin}set origin(A){if(this._origin===Z5){if(this._origin=new xA(this,0,0),this._pivot!==H5)n("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")}typeof A==="number"?this._origin.set(A):this._origin.copyFrom(A)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(A){let Q=this.getLocalBounds().width;this._setWidth(A,Q)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(A){let Q=this.getLocalBounds().height;this._setHeight(A,Q)}getSize(A){if(!A)A={};let Q=this.getLocalBounds();return A.width=Math.abs(this.scale.x*Q.width),A.height=Math.abs(this.scale.y*Q.height),A}setSize(A,Q){let I=this.getLocalBounds();if(typeof A==="object")Q=A.height??A.width,A=A.width;else Q??(Q=A);A!==void 0&&this._setWidth(A,I.width),Q!==void 0&&this._setHeight(Q,I.height)}_updateSkew(){let A=this._rotation,Q=this._skew;this._cx=Math.cos(A+Q._y),this._sx=Math.sin(A+Q._y),this._cy=-Math.sin(A-Q._x),this._sy=Math.cos(A-Q._x)}updateTransform(A){return this.position.set(typeof A.x==="number"?A.x:this.position.x,typeof A.y==="number"?A.y:this.position.y),this.scale.set(typeof A.scaleX==="number"?A.scaleX||1:this.scale.x,typeof A.scaleY==="number"?A.scaleY||1:this.scale.y),this.rotation=typeof A.rotation==="number"?A.rotation:this.rotation,this.skew.set(typeof A.skewX==="number"?A.skewX:this.skew.x,typeof A.skewY==="number"?A.skewY:this.skew.y),this.pivot.set(typeof A.pivotX==="number"?A.pivotX:this.pivot.x,typeof A.pivotY==="number"?A.pivotY:this.pivot.y),this.origin.set(typeof A.originX==="number"?A.originX:this.origin.x,typeof A.originY==="number"?A.originY:this.origin.y),this}setFromMatrix(A){A.decompose(this)}updateLocalTransform(){let A=this._didContainerChangeTick;if(this._didLocalTransformChangeId===A)return;this._didLocalTransformChangeId=A;let Q=this.localTransform,I=this._scale,B=this._pivot,E=this._origin,C=this._position,J=I._x,K=I._y,H=B._x,Z=B._y,q=-E._x,w=-E._y;Q.a=this._cx*J,Q.b=this._sx*J,Q.c=this._cy*K,Q.d=this._sy*K,Q.tx=C._x-(H*Q.a+Z*Q.c)+(q*Q.a+w*Q.c)-q,Q.ty=C._y-(H*Q.b+Z*Q.d)+(q*Q.b+w*Q.d)-w}set alpha(A){if(A===this.localAlpha)return;this.localAlpha=A,this._updateFlags|=nC,this._onUpdate()}get alpha(){return this.localAlpha}set tint(A){let I=JA.shared.setValue(A??16777215).toBgrNumber();if(I===this.localColor)return;this.localColor=I,this._updateFlags|=nC,this._onUpdate()}get tint(){return lQ(this.localColor)}set blendMode(A){if(this.localBlendMode===A)return;if(this.parentRenderGroup)this.parentRenderGroup.structureDidChange=!0;this._updateFlags|=ZJ,this.localBlendMode=A,this._onUpdate()}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(A){let Q=A?2:0;if((this.localDisplayStatus&2)===Q)return;if(this.parentRenderGroup)this.parentRenderGroup.structureDidChange=!0;this._updateFlags|=oE,this.localDisplayStatus^=2,this._onUpdate()}get culled(){return!(this.localDisplayStatus&4)}set culled(A){let Q=A?0:4;if((this.localDisplayStatus&4)===Q)return;if(this.parentRenderGroup)this.parentRenderGroup.structureDidChange=!0;this._updateFlags|=oE,this.localDisplayStatus^=4,this._onUpdate()}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(A){let Q=A?1:0;if((this.localDisplayStatus&1)===Q)return;if(this._updateFlags|=oE,this.localDisplayStatus^=1,this.parentRenderGroup)this.parentRenderGroup.structureDidChange=!0;this._onUpdate()}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(A=!1){if(this.destroyed)return;this.destroyed=!0;let Q;if(this.children.length)Q=this.removeChildren(0,this.children.length);if(this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof A==="boolean"?A:A?.children)&&Q)for(let B=0;B<Q.length;++B)Q[B].destroy(A);this.renderGroup?.destroy(),this.renderGroup=null}};p.mixin(QA,Tq,nq,B5,eq,rq,dq,uq,Q5,Rq,yq,sq,xq)});var SQ;var gB=Y(()=>{SQ=((A)=>{return A[A.INTERACTION=50]="INTERACTION",A[A.HIGH=25]="HIGH",A[A.NORMAL=0]="NORMAL",A[A.LOW=-25]="LOW",A[A.UTILITY=-50]="UTILITY",A})(SQ||{})});class oC{constructor(A,Q=null,I=0,B=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=A,this._context=Q,this.priority=I,this._once=B}match(A,Q=null){return this._fn===A&&this._context===Q}emit(A){if(this._fn)if(this._context)this._fn.call(this._context,A);else this._fn(A);let Q=this.next;if(this._once)this.destroy(!0);if(this._destroyed)this.next=null;return Q}connect(A){if(this.previous=A,A.next)A.next.previous=this;this.next=A.next,A.next=this}destroy(A=!1){if(this._destroyed=!0,this._fn=null,this._context=null,this.previous)this.previous.next=this.next;if(this.next)this.next.previous=this.previous;let Q=this.next;return this.next=A?null:Q,this.previous=null,Q}}var q5=()=>{};var fk=class A{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new oC(null,null,1/0),this.deltaMS=1/A.targetFPMS,this.elapsedMS=1/A.targetFPMS,this._tick=(Q)=>{if(this._requestId=null,this.started){if(this.update(Q),this.started&&this._requestId===null&&this._head.next)this._requestId=requestAnimationFrame(this._tick)}}}_requestIfNeeded(){if(this._requestId===null&&this._head.next)this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick)}_cancelIfNeeded(){if(this._requestId!==null)cancelAnimationFrame(this._requestId),this._requestId=null}_startIfPossible(){if(this.started)this._requestIfNeeded();else if(this.autoStart)this.start()}add(Q,I,B=SQ.NORMAL){return this._addListener(new oC(Q,I,B))}addOnce(Q,I,B=SQ.NORMAL){return this._addListener(new oC(Q,I,B,!0))}_addListener(Q){let I=this._head.next,B=this._head;if(!I)Q.connect(B);else{while(I){if(Q.priority>I.priority){Q.connect(B);break}B=I,I=I.next}if(!Q.previous)Q.connect(B)}return this._startIfPossible(),this}remove(Q,I){let B=this._head.next;while(B)if(B.match(Q,I))B=B.destroy();else B=B.next;if(!this._head.next)this._cancelIfNeeded();return this}get count(){if(!this._head)return 0;let Q=0,I=this._head;while(I=I.next)Q++;return Q}start(){if(!this.started)this.started=!0,this._requestIfNeeded()}stop(){if(this.started)this.started=!1,this._cancelIfNeeded()}destroy(){if(!this._protected){this.stop();let Q=this._head.next;while(Q)Q=Q.destroy(!0);this._head.destroy(),this._head=null}}update(Q=performance.now()){let I;if(Q>this.lastTime){if(I=this.elapsedMS=Q-this.lastTime,I>this._maxElapsedMS)I=this._maxElapsedMS;if(I*=this.speed,this._minElapsedMS){let C=Q-this._lastFrame|0;if(C<this._minElapsedMS)return;this._lastFrame=Q-C%this._minElapsedMS}this.deltaMS=I,this.deltaTime=this.deltaMS*A.targetFPMS;let B=this._head,E=B.next;while(E)E=E.emit(this);if(!B.next)this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=Q}get FPS(){return 1000/this.elapsedMS}get minFPS(){return 1000/this._maxElapsedMS}set minFPS(Q){let I=Math.min(this.maxFPS,Q),B=Math.min(Math.max(0,I)/1000,A.targetFPMS);this._maxElapsedMS=1/B}get maxFPS(){if(this._minElapsedMS)return Math.round(1000/this._minElapsedMS);return 0}set maxFPS(Q){if(Q===0)this._minElapsedMS=0;else{let I=Math.max(this.minFPS,Q);this._minElapsedMS=1/(I/1000)}}static get shared(){if(!A._shared){let Q=A._shared=new A;Q.autoStart=!0,Q._protected=!0}return A._shared}static get system(){if(!A._system){let Q=A._system=new A;Q.autoStart=!0,Q._protected=!0}return A._system}},SA;var wB=Y(()=>{gB();q5();fk.targetFPMS=0.06;SA=fk});class sC{constructor(A){if(this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;let Q=this._canvas.getBoundingClientRect(),I=this._canvas.width,B=this._canvas.height,E=Q.width/I*this._renderer.resolution,C=Q.height/B*this._renderer.resolution,J=Q.left,K=Q.top,H=`translate(${J}px, ${K}px) scale(${E}, ${C})`;if(H!==this._lastTransform)this._domElement.style.transform=H,this._lastTransform=H},this._domElement=A.domElement,this._renderer=A.renderer,globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)return;this._canvas=this._renderer.canvas,this._attachObserver()}get canvas(){return this._canvas}ensureAttached(){if(!this._domElement.parentNode&&this._canvas.parentNode)this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation()}_attachObserver(){if("ResizeObserver"in globalThis){if(this._observer)this._observer.disconnect(),this._observer=null;this._observer=new ResizeObserver((A)=>{for(let Q of A){if(Q.target!==this._canvas)continue;let I=this.canvas.width,B=this.canvas.height,E=Q.contentRect.width/I*this._renderer.resolution,C=Q.contentRect.height/B*this._renderer.resolution;if(this._lastScaleX!==E||this._lastScaleY!==C)this.updateTranslation(),this._lastScaleX=E,this._lastScaleY=C}}),this._observer.observe(this._canvas)}else if(!this._tickerAttached)SA.shared.add(this.updateTranslation,this,SQ.HIGH)}destroy(){if(this._observer)this._observer.disconnect(),this._observer=null;else if(this._tickerAttached)SA.shared.remove(this.updateTranslation);this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}var mH=Y(()=>{gB();wB()});class _B{constructor(A){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=_B.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new UA,this.page=new UA,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=A}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){if(this.manager&&(!this.path||this.path[this.path.length-1]!==this.target))this.path=this.target?this.manager.propagationPath(this.target):[];return this.path}initEvent(A,Q,I){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(A,Q,I,B,E){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){if(this.nativeEvent instanceof Event&&this.nativeEvent.cancelable)this.nativeEvent.preventDefault();this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var qJ=Y(()=>{aQ()});function TP(A){return function(Q){return Q.test(A)}}function cH(A){var Q={userAgent:"",platform:"",maxTouchPoints:0};if(!A&&typeof navigator!=="undefined")Q={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};else if(typeof A==="string")Q.userAgent=A;else if(A&&A.userAgent)Q={userAgent:A.userAgent,platform:A.platform,maxTouchPoints:A.maxTouchPoints||0};var I=Q.userAgent,B=I.split("[FBAN");if(typeof B[1]!=="undefined")I=B[0];if(B=I.split("Twitter"),typeof B[1]!=="undefined")I=B[0];var E=TP(I),C={apple:{phone:E(P2)&&!E(NE),ipod:E(yk),tablet:!E(P2)&&(E(vk)||lk(Q))&&!E(NE),universal:E(Tk),device:(E(P2)||E(yk)||E(vk)||E(Tk)||lk(Q))&&!E(NE)},amazon:{phone:E(wJ),tablet:!E(wJ)&&E(w5),device:E(wJ)||E(w5)},android:{phone:!E(NE)&&E(wJ)||!E(NE)&&E(M2),tablet:!E(NE)&&!E(wJ)&&!E(M2)&&(E(w5)||E(hk)),device:!E(NE)&&(E(wJ)||E(w5)||E(M2)||E(hk))||E(/\bokhttp\b/i)},windows:{phone:E(NE),tablet:E(xk),device:E(NE)||E(xk)},other:{blackberry:E(mk),blackberry10:E(ck),opera:E(dk),firefox:E(uk),chrome:E(pk),device:E(mk)||E(ck)||E(dk)||E(uk)||E(pk)},any:!1,phone:!1,tablet:!1};return C.any=C.apple.device||C.android.device||C.windows.device||C.other.device,C.phone=C.apple.phone||C.android.phone||C.windows.phone,C.tablet=C.apple.tablet||C.android.tablet||C.windows.tablet,C}var P2,yk,vk,Tk,M2,hk,wJ,w5,NE,xk,mk,ck,dk,pk,uk,lk=function(A){return typeof A!=="undefined"&&A.platform==="MacIntel"&&typeof A.maxTouchPoints==="number"&&A.maxTouchPoints>1&&typeof MSStream==="undefined"};var g2=Y(()=>{P2=/iPhone/i,yk=/iPod/i,vk=/iPad/i,Tk=/\biOS-universal(?:.+)Mac\b/i,M2=/\bAndroid(?:.+)Mobile\b/i,hk=/Android/i,wJ=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,w5=/Silk/i,NE=/Windows Phone/i,xk=/\bWindows(?:.+)ARM\b/i,mk=/BlackBerry/i,ck=/BB10/i,dk=/Opera Mini/i,pk=/\b(CriOS|Chrome)(?:.+)Mobile/i,uk=/Mobile(?:.+)Firefox\b/i});var ik=Y(()=>{g2();g2()});var hP,sE;var Y5=Y(()=>{ik();hP=cH.default??cH,sE=hP(globalThis.navigator)});var xP=9,nk=100,mP=0,cP=0,ok=2,sk=1,dP=-1000,pP=-1000,uP=2,_2=class A{constructor(Q,I=sE){if(this._mobileInfo=I,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,I.tablet||I.phone)this._createTouchHook();this._renderer=Q}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){let Q=document.createElement("button");Q.style.width=`${sk}px`,Q.style.height=`${sk}px`,Q.style.position="absolute",Q.style.top=`${dP}px`,Q.style.left=`${pP}px`,Q.style.zIndex=uP.toString(),Q.style.backgroundColor="#FF0000",Q.title="select to enable accessibility for this content",Q.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(Q),this._hookDiv=Q}_destroyTouchHook(){if(!this._hookDiv)return;document.body.removeChild(this._hookDiv),this._hookDiv=null}_activate(){if(this._isActive)return;if(this._isActive=!0,!this._div)this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${mP}px`,this._div.style.left=`${cP}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=ok.toString(),this._canvasObserver=new sC({domElement:this._div,renderer:this._renderer});if(this._activateOnTab)globalThis.addEventListener("keydown",this._boundOnKeyDown,!1);if(this._deactivateOnMouseMove)globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);let Q=this._renderer.view.canvas;if(!Q.parentNode){let I=new MutationObserver(()=>{if(Q.parentNode)I.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup()});I.observe(document.body,{childList:!0,subtree:!0})}else this._canvasObserver.ensureAttached(),this._initAccessibilitySetup()}_initAccessibilitySetup(){if(this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered)this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!this._isActive||this._isMobileAccessibility)return;if(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab)globalThis.addEventListener("keydown",this._boundOnKeyDown,!1);this._renderer.runners.postrender.remove(this);for(let Q of this._children){if(Q._accessibleDiv?.parentNode)Q._accessibleDiv.parentNode.removeChild(Q._accessibleDiv),Q._accessibleDiv=null;Q._accessibleActive=!1}for(let Q in this._pools)this._pools[Q].forEach((B)=>{if(B.parentNode)B.parentNode.removeChild(B)}),delete this._pools[Q];if(this._div?.parentNode)this._div.parentNode.removeChild(this._div);this._pools={},this._children=[]}_updateAccessibleObjects(Q){if(!Q.visible||!Q.accessibleChildren)return;if(Q.accessible){if(!Q._accessibleActive)this._addChild(Q);Q._renderId=this._renderId}let I=Q.children;if(I)for(let B=0;B<I.length;B++)this._updateAccessibleObjects(I[B])}init(Q){let B={accessibilityOptions:{...A.defaultOptions,...Q?.accessibilityOptions||{}}};if(this.debug=B.accessibilityOptions.debug,this._activateOnTab=B.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=B.accessibilityOptions.deactivateOnMouseMove,B.accessibilityOptions.enabledByDefault)this._activate();this._renderer.runners.postrender.remove(this)}postrender(){let Q=performance.now();if(this._mobileInfo.android.device&&Q<this._androidUpdateCount)return;if(this._androidUpdateCount=Q+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests)return;let I=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let B of this._children)if(B._renderId===this._renderId)I.add(this._children.indexOf(B))}for(let B=this._children.length-1;B>=0;B--){let E=this._children[B];if(!I.has(B)){if(E._accessibleDiv&&E._accessibleDiv.parentNode)E._accessibleDiv.parentNode.removeChild(E._accessibleDiv),this._getPool(E.accessibleType).push(E._accessibleDiv),E._accessibleDiv=null;E._accessibleActive=!1,BJ(this._children,B,1)}}if(this._renderer.renderingToScreen)this._canvasObserver.ensureAttached();for(let B=0;B<this._children.length;B++){let E=this._children[B];if(!E._accessibleActive||!E._accessibleDiv)continue;let C=E._accessibleDiv,J=E.hitArea||E.getBounds().rectangle;if(E.hitArea){let K=E.worldTransform;C.style.left=`${K.tx+J.x*K.a}px`,C.style.top=`${K.ty+J.y*K.d}px`,C.style.width=`${J.width*K.a}px`,C.style.height=`${J.height*K.d}px`}else this._capHitArea(J),C.style.left=`${J.x}px`,C.style.top=`${J.y}px`,C.style.width=`${J.width}px`,C.style.height=`${J.height}px`}this._renderId++}_updateDebugHTML(Q){Q.innerHTML=`type: ${Q.type}</br> title : ${Q.title}</br> tabIndex: ${Q.tabIndex}`}_capHitArea(Q){if(Q.x<0)Q.width+=Q.x,Q.x=0;if(Q.y<0)Q.height+=Q.y,Q.y=0;let{width:I,height:B}=this._renderer;if(Q.x+Q.width>I)Q.width=I-Q.x;if(Q.y+Q.height>B)Q.height=B-Q.y}_addChild(Q){let B=this._getPool(Q.accessibleType).pop();if(B)B.innerHTML="",B.removeAttribute("title"),B.removeAttribute("aria-label"),B.tabIndex=0;else{if(Q.accessibleType==="button")B=document.createElement("button");else if(B=document.createElement(Q.accessibleType),B.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,Q.accessibleText)B.innerText=Q.accessibleText;if(B.style.width=`${nk}px`,B.style.height=`${nk}px`,B.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",B.style.position="absolute",B.style.zIndex=ok.toString(),B.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome"))B.setAttribute("aria-live","off");else B.setAttribute("aria-live","polite");if(navigator.userAgent.match(/rv:.*Gecko\//))B.setAttribute("aria-relevant","additions");else B.setAttribute("aria-relevant","text");B.addEventListener("click",this._onClick.bind(this)),B.addEventListener("focus",this._onFocus.bind(this)),B.addEventListener("focusout",this._onFocusOut.bind(this))}if(B.style.pointerEvents=Q.accessiblePointerEvents,B.type=Q.accessibleType,Q.accessibleTitle&&Q.accessibleTitle!==null)B.title=Q.accessibleTitle;else if(!Q.accessibleHint||Q.accessibleHint===null)B.title=`container ${Q.tabIndex}`;if(Q.accessibleHint&&Q.accessibleHint!==null)B.setAttribute("aria-label",Q.accessibleHint);if(Q.interactive)B.tabIndex=Q.tabIndex;else B.tabIndex=0;if(this.debug)this._updateDebugHTML(B);Q._accessibleActive=!0,Q._accessibleDiv=B,B.container=Q,this._children.push(Q),this._div.appendChild(Q._accessibleDiv)}_dispatchEvent(Q,I){let{container:B}=Q.target,E=this._renderer.events.rootBoundary,C=Object.assign(new _B(E),{target:B});E.rootTarget=this._renderer.lastObjectRendered,I.forEach((J)=>E.dispatchEvent(C,J))}_onClick(Q){this._dispatchEvent(Q,["click","pointertap","tap"])}_onFocus(Q){if(!Q.target.getAttribute("aria-live"))Q.target.setAttribute("aria-live","assertive");this._dispatchEvent(Q,["mouseover"])}_onFocusOut(Q){if(!Q.target.getAttribute("aria-live"))Q.target.setAttribute("aria-live","polite");this._dispatchEvent(Q,["mouseout"])}_onKeyDown(Q){if(Q.keyCode!==xP||!this._activateOnTab)return;this._activate()}_onMouseMove(Q){if(Q.movementX===0&&Q.movementY===0)return;this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(Q){if(Q)this._activate();else this._deactivate()}_getPool(Q){if(!this._pools[Q])this._pools[Q]=[];return this._pools[Q]}},$5;var U5=Y(()=>{mH();qJ();M();Y5();gH();_2.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"accessibility"};_2.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};$5=_2});var V5;var N5=Y(()=>{V5={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1}});var ak=Y(()=>{M();TQ();U5();N5();p.add($5);p.mixin(QA,V5)});class rk{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(A){this.removeTickerListener(),this.events=A,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(A){this._pauseUpdate=A}addTickerListener(){if(this._tickerAdded||!this.domElement)return;SA.system.add(this._tickerUpdate,this,SQ.INTERACTION),this._tickerAdded=!0}removeTickerListener(){if(!this._tickerAdded)return;SA.system.remove(this._tickerUpdate,this),this._tickerAdded=!1}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let A=this.events._rootPointerEvent;if(this.events.supportsTouchEvents&&A.pointerType==="touch")return;globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:A.clientX,clientY:A.clientY,pointerType:A.pointerType,pointerId:A.pointerId}):new MouseEvent("mousemove",{clientX:A.clientX,clientY:A.clientY}))}_tickerUpdate(A){if(this._deltaTime+=A.deltaTime,this._deltaTime<this.interactionFrequency)return;this._deltaTime=0,this._update()}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}}var SI;var dH=Y(()=>{gB();wB();SI=new rk});var SB;var YJ=Y(()=>{aQ();qJ();SB=class SB extends _B{constructor(){super(...arguments);this.client=new UA,this.movement=new UA,this.offset=new UA,this.global=new UA,this.screen=new UA}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(A,Q,I){return A.worldTransform.applyInverse(I||this.global,Q)}getModifierState(A){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(A)}initMouseEvent(A,Q,I,B,E,C,J,K,H,Z,q,w,$,U,V){throw new Error("Method not implemented.")}}});var tQ;var pH=Y(()=>{YJ();tQ=class tQ extends SB{constructor(){super(...arguments);this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){if(this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove")return[this];return[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}});var YB;var uH=Y(()=>{YJ();YB=class YB extends SB{constructor(){super(...arguments);this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};YB.DOM_DELTA_PIXEL=0;YB.DOM_DELTA_LINE=1;YB.DOM_DELTA_PAGE=2});class aC{constructor(A){this.dispatch=new mA,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=A,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(A,Q){if(!this.mappingTable[A])this.mappingTable[A]=[];this.mappingTable[A].push({fn:Q,priority:0}),this.mappingTable[A].sort((I,B)=>I.priority-B.priority)}dispatchEvent(A,Q){A.propagationStopped=!1,A.propagationImmediatelyStopped=!1,this.propagate(A,Q),this.dispatch.emit(Q||A.type,A)}mapEvent(A){if(!this.rootTarget)return;let Q=this.mappingTable[A.type];if(Q)for(let I=0,B=Q.length;I<B;I++)Q[I].fn(A);else n(`[EventBoundary]: Event mapping not defined for ${A.type}`)}hitTest(A,Q){SI.pauseUpdate=!0;let B=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",E=this[B](this.rootTarget,this.rootTarget.eventMode,iP.set(A,Q),this.hitTestFn,this.hitPruneFn);return E&&E[0]}propagate(A,Q){if(!A.target)return;let I=A.composedPath();A.eventPhase=A.CAPTURING_PHASE;for(let B=0,E=I.length-1;B<E;B++)if(A.currentTarget=I[B],this.notifyTarget(A,Q),A.propagationStopped||A.propagationImmediatelyStopped)return;if(A.eventPhase=A.AT_TARGET,A.currentTarget=A.target,this.notifyTarget(A,Q),A.propagationStopped||A.propagationImmediatelyStopped)return;A.eventPhase=A.BUBBLING_PHASE;for(let B=I.length-2;B>=0;B--)if(A.currentTarget=I[B],this.notifyTarget(A,Q),A.propagationStopped||A.propagationImmediatelyStopped)return}all(A,Q,I=this._allInteractiveElements){if(I.length===0)return;A.eventPhase=A.BUBBLING_PHASE;let B=Array.isArray(Q)?Q:[Q];for(let E=I.length-1;E>=0;E--)B.forEach((C)=>{A.currentTarget=I[E],this.notifyTarget(A,C)})}propagationPath(A){let Q=[A];for(let I=0;I<lP&&(A!==this.rootTarget&&A.parent);I++){if(!A.parent)throw new Error("Cannot find propagation path to disconnected target");Q.push(A.parent),A=A.parent}return Q.reverse(),Q}hitTestMoveRecursive(A,Q,I,B,E,C=!1){let J=!1;if(this._interactivePrune(A))return null;if(A.eventMode==="dynamic"||Q==="dynamic")SI.pauseUpdate=!1;if(A.interactiveChildren&&A.children){let Z=A.children;for(let q=Z.length-1;q>=0;q--){let w=Z[q],$=this.hitTestMoveRecursive(w,this._isInteractive(Q)?Q:w.eventMode,I,B,E,C||E(A,I));if($){if($.length>0&&!$[$.length-1].parent)continue;let U=A.isInteractive();if($.length>0||U){if(U)this._allInteractiveElements.push(A);$.push(A)}if(this._hitElements.length===0)this._hitElements=$;J=!0}}}let K=this._isInteractive(Q),H=A.isInteractive();if(H&&H)this._allInteractiveElements.push(A);if(C||this._hitElements.length>0)return null;if(J)return this._hitElements;if(K&&(!E(A,I)&&B(A,I)))return H?[A]:[];return null}hitTestRecursive(A,Q,I,B,E){if(this._interactivePrune(A)||E(A,I))return null;if(A.eventMode==="dynamic"||Q==="dynamic")SI.pauseUpdate=!1;if(A.interactiveChildren&&A.children){let K=A.children,H=I;for(let Z=K.length-1;Z>=0;Z--){let q=K[Z],w=this.hitTestRecursive(q,this._isInteractive(Q)?Q:q.eventMode,H,B,E);if(w){if(w.length>0&&!w[w.length-1].parent)continue;let $=A.isInteractive();if(w.length>0||$)w.push(A);return w}}}let C=this._isInteractive(Q),J=A.isInteractive();if(C&&B(A,I))return J?[A]:[];return null}_isInteractive(A){return A==="static"||A==="dynamic"}_interactivePrune(A){if(!A||!A.visible||!A.renderable||!A.measurable)return!0;if(A.eventMode==="none")return!0;if(A.eventMode==="passive"&&!A.interactiveChildren)return!0;return!1}hitPruneFn(A,Q){if(A.hitArea){if(A.worldTransform.applyInverse(Q,lH),!A.hitArea.contains(lH.x,lH.y))return!0}if(A.effects&&A.effects.length)for(let I=0;I<A.effects.length;I++){let B=A.effects[I];if(B.containsPoint){if(!B.containsPoint(Q,this.hitTestFn))return!0}}return!1}hitTestFn(A,Q){if(A.hitArea)return!0;if(A?.containsPoint)return A.worldTransform.applyInverse(Q,lH),A.containsPoint(lH);return!1}notifyTarget(A,Q){if(!A.currentTarget.isInteractive())return;Q??(Q=A.type);let I=`on${Q}`;A.currentTarget[I]?.(A);let B=A.eventPhase===A.CAPTURING_PHASE||A.eventPhase===A.AT_TARGET?`${Q}capture`:Q;if(this._notifyListeners(A,B),A.eventPhase===A.AT_TARGET)this._notifyListeners(A,Q)}mapPointerDown(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}let Q=this.createPointerEvent(A);if(this.dispatchEvent(Q,"pointerdown"),Q.pointerType==="touch")this.dispatchEvent(Q,"touchstart");else if(Q.pointerType==="mouse"||Q.pointerType==="pen"){let B=Q.button===2;this.dispatchEvent(Q,B?"rightdown":"mousedown")}let I=this.trackingData(A.pointerId);I.pressTargetsByButton[A.button]=Q.composedPath(),this.freeEvent(Q)}mapPointerMove(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let Q=this.createPointerEvent(A);this._isPointerMoveEvent=!1;let I=Q.pointerType==="mouse"||Q.pointerType==="pen",B=this.trackingData(A.pointerId),E=this.findMountedTarget(B.overTargets);if(B.overTargets?.length>0&&E!==Q.target){let K=A.type==="mousemove"?"mouseout":"pointerout",H=this.createPointerEvent(A,K,E);if(this.dispatchEvent(H,"pointerout"),I)this.dispatchEvent(H,"mouseout");if(!Q.composedPath().includes(E)){let Z=this.createPointerEvent(A,"pointerleave",E);Z.eventPhase=Z.AT_TARGET;while(Z.target&&!Q.composedPath().includes(Z.target)){if(Z.currentTarget=Z.target,this.notifyTarget(Z),I)this.notifyTarget(Z,"mouseleave");Z.target=Z.target.parent}this.freeEvent(Z)}this.freeEvent(H)}if(E!==Q.target){let K=A.type==="mousemove"?"mouseover":"pointerover",H=this.clonePointerEvent(Q,K);if(this.dispatchEvent(H,"pointerover"),I)this.dispatchEvent(H,"mouseover");let Z=E?.parent;while(Z&&Z!==this.rootTarget.parent){if(Z===Q.target)break;Z=Z.parent}if(!Z||Z===this.rootTarget.parent){let w=this.clonePointerEvent(Q,"pointerenter");w.eventPhase=w.AT_TARGET;while(w.target&&w.target!==E&&w.target!==this.rootTarget.parent){if(w.currentTarget=w.target,this.notifyTarget(w),I)this.notifyTarget(w,"mouseenter");w.target=w.target.parent}this.freeEvent(w)}this.freeEvent(H)}let C=[],J=this.enableGlobalMoveEvents??!0;if(this.moveOnAll?C.push("pointermove"):this.dispatchEvent(Q,"pointermove"),J&&C.push("globalpointermove"),Q.pointerType==="touch")this.moveOnAll?C.splice(1,0,"touchmove"):this.dispatchEvent(Q,"touchmove"),J&&C.push("globaltouchmove");if(I)this.moveOnAll?C.splice(1,0,"mousemove"):this.dispatchEvent(Q,"mousemove"),J&&C.push("globalmousemove"),this.cursor=Q.target?.cursor;if(C.length>0)this.all(Q,C);this._allInteractiveElements.length=0,this._hitElements.length=0,B.overTargets=Q.composedPath(),this.freeEvent(Q)}mapPointerOver(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}let Q=this.trackingData(A.pointerId),I=this.createPointerEvent(A),B=I.pointerType==="mouse"||I.pointerType==="pen";if(this.dispatchEvent(I,"pointerover"),B)this.dispatchEvent(I,"mouseover");if(I.pointerType==="mouse")this.cursor=I.target?.cursor;let E=this.clonePointerEvent(I,"pointerenter");E.eventPhase=E.AT_TARGET;while(E.target&&E.target!==this.rootTarget.parent){if(E.currentTarget=E.target,this.notifyTarget(E),B)this.notifyTarget(E,"mouseenter");E.target=E.target.parent}Q.overTargets=I.composedPath(),this.freeEvent(I),this.freeEvent(E)}mapPointerOut(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}let Q=this.trackingData(A.pointerId);if(Q.overTargets){let I=A.pointerType==="mouse"||A.pointerType==="pen",B=this.findMountedTarget(Q.overTargets),E=this.createPointerEvent(A,"pointerout",B);if(this.dispatchEvent(E),I)this.dispatchEvent(E,"mouseout");let C=this.createPointerEvent(A,"pointerleave",B);C.eventPhase=C.AT_TARGET;while(C.target&&C.target!==this.rootTarget.parent){if(C.currentTarget=C.target,this.notifyTarget(C),I)this.notifyTarget(C,"mouseleave");C.target=C.target.parent}Q.overTargets=null,this.freeEvent(E),this.freeEvent(C)}this.cursor=null}mapPointerUp(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}let Q=performance.now(),I=this.createPointerEvent(A);if(this.dispatchEvent(I,"pointerup"),I.pointerType==="touch")this.dispatchEvent(I,"touchend");else if(I.pointerType==="mouse"||I.pointerType==="pen"){let J=I.button===2;this.dispatchEvent(I,J?"rightup":"mouseup")}let B=this.trackingData(A.pointerId),E=this.findMountedTarget(B.pressTargetsByButton[A.button]),C=E;if(E&&!I.composedPath().includes(E)){let J=E;while(J&&!I.composedPath().includes(J)){if(I.currentTarget=J,this.notifyTarget(I,"pointerupoutside"),I.pointerType==="touch")this.notifyTarget(I,"touchendoutside");else if(I.pointerType==="mouse"||I.pointerType==="pen"){let K=I.button===2;this.notifyTarget(I,K?"rightupoutside":"mouseupoutside")}J=J.parent}delete B.pressTargetsByButton[A.button],C=J}if(C){let J=this.clonePointerEvent(I,"click");if(J.target=C,J.path=null,!B.clicksByButton[A.button])B.clicksByButton[A.button]={clickCount:0,target:J.target,timeStamp:Q};let K=B.clicksByButton[A.button];if(K.target===J.target&&Q-K.timeStamp<200)++K.clickCount;else K.clickCount=1;if(K.target=J.target,K.timeStamp=Q,J.detail=K.clickCount,J.pointerType==="mouse"){let H=J.button===2;this.dispatchEvent(J,H?"rightclick":"click")}else if(J.pointerType==="touch")this.dispatchEvent(J,"tap");this.dispatchEvent(J,"pointertap"),this.freeEvent(J)}this.freeEvent(I)}mapPointerUpOutside(A){if(!(A instanceof tQ)){n("EventBoundary cannot map a non-pointer event as a pointer event");return}let Q=this.trackingData(A.pointerId),I=this.findMountedTarget(Q.pressTargetsByButton[A.button]),B=this.createPointerEvent(A);if(I){let E=I;while(E){if(B.currentTarget=E,this.notifyTarget(B,"pointerupoutside"),B.pointerType==="touch")this.notifyTarget(B,"touchendoutside");else if(B.pointerType==="mouse"||B.pointerType==="pen")this.notifyTarget(B,B.button===2?"rightupoutside":"mouseupoutside");E=E.parent}delete Q.pressTargetsByButton[A.button]}this.freeEvent(B)}mapWheel(A){if(!(A instanceof YB)){n("EventBoundary cannot map a non-wheel event as a wheel event");return}let Q=this.createWheelEvent(A);this.dispatchEvent(Q),this.freeEvent(Q)}findMountedTarget(A){if(!A)return null;let Q=A[0];for(let I=1;I<A.length;I++)if(A[I].parent===Q)Q=A[I];else break;return Q}createPointerEvent(A,Q,I){let B=this.allocateEvent(tQ);if(this.copyPointerData(A,B),this.copyMouseData(A,B),this.copyData(A,B),B.nativeEvent=A.nativeEvent,B.originalEvent=A,B.target=I??this.hitTest(B.global.x,B.global.y)??this._hitElements[0],typeof Q==="string")B.type=Q;return B}createWheelEvent(A){let Q=this.allocateEvent(YB);return this.copyWheelData(A,Q),this.copyMouseData(A,Q),this.copyData(A,Q),Q.nativeEvent=A.nativeEvent,Q.originalEvent=A,Q.target=this.hitTest(Q.global.x,Q.global.y),Q}clonePointerEvent(A,Q){let I=this.allocateEvent(tQ);return I.nativeEvent=A.nativeEvent,I.originalEvent=A.originalEvent,this.copyPointerData(A,I),this.copyMouseData(A,I),this.copyData(A,I),I.target=A.target,I.path=A.composedPath().slice(),I.type=Q??I.type,I}copyWheelData(A,Q){Q.deltaMode=A.deltaMode,Q.deltaX=A.deltaX,Q.deltaY=A.deltaY,Q.deltaZ=A.deltaZ}copyPointerData(A,Q){if(!(A instanceof tQ&&Q instanceof tQ))return;Q.pointerId=A.pointerId,Q.width=A.width,Q.height=A.height,Q.isPrimary=A.isPrimary,Q.pointerType=A.pointerType,Q.pressure=A.pressure,Q.tangentialPressure=A.tangentialPressure,Q.tiltX=A.tiltX,Q.tiltY=A.tiltY,Q.twist=A.twist}copyMouseData(A,Q){if(!(A instanceof SB&&Q instanceof SB))return;Q.altKey=A.altKey,Q.button=A.button,Q.buttons=A.buttons,Q.client.copyFrom(A.client),Q.ctrlKey=A.ctrlKey,Q.metaKey=A.metaKey,Q.movement.copyFrom(A.movement),Q.screen.copyFrom(A.screen),Q.shiftKey=A.shiftKey,Q.global.copyFrom(A.global)}copyData(A,Q){Q.isTrusted=A.isTrusted,Q.srcElement=A.srcElement,Q.timeStamp=performance.now(),Q.type=A.type,Q.detail=A.detail,Q.view=A.view,Q.which=A.which,Q.layer.copyFrom(A.layer),Q.page.copyFrom(A.page)}trackingData(A){if(!this.mappingState.trackingData[A])this.mappingState.trackingData[A]={pressTargetsByButton:{},clicksByButton:{},overTarget:null};return this.mappingState.trackingData[A]}allocateEvent(A){if(!this.eventPool.has(A))this.eventPool.set(A,[]);let Q=this.eventPool.get(A).pop()||new A(this);return Q.eventPhase=Q.NONE,Q.currentTarget=null,Q.defaultPrevented=!1,Q.path=null,Q.target=null,Q}freeEvent(A){if(A.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let Q=A.constructor;if(!this.eventPool.has(Q))this.eventPool.set(Q,[]);this.eventPool.get(Q).push(A)}_notifyListeners(A,Q){let I=A.currentTarget._events[Q];if(!I)return;if("fn"in I){if(I.once)A.currentTarget.removeListener(Q,I.fn,void 0,!0);I.fn.call(I.context,A)}else for(let B=0,E=I.length;B<E&&!A.propagationImmediatelyStopped;B++){if(I[B].once)A.currentTarget.removeListener(Q,I[B].fn,void 0,!0);I[B].fn.call(I[B].context,A)}}}var lP=2048,iP,lH;var z5=Y(()=>{yQ();aQ();_A();dH();YJ();pH();uH();iP=new UA,lH=new UA});var nP=1,oP,S2=class A{constructor(Q){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=Q,this.rootBoundary=new aC(null),SI.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new tQ(null),this._rootWheelEvent=new YB(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...A.defaultEventFeatures},{set:(I,B,E)=>{if(B==="globalMove")this.rootBoundary.enableGlobalMoveEvents=E;return I[B]=E,!0}}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(Q){let{canvas:I,resolution:B}=this.renderer;this.setTargetElement(I),this.resolution=B,A._defaultEventMode=Q.eventMode??"passive",Object.assign(this.features,Q.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(Q){this.resolution=Q}destroy(){SI.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(Q){Q||(Q="default");let I=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas)I=!1;if(this._currentCursor===Q)return;this._currentCursor=Q;let B=this.cursorStyles[Q];if(B)switch(typeof B){case"string":if(I)this.domElement.style.cursor=B;break;case"function":B(Q);break;case"object":if(I)Object.assign(this.domElement.style,B);break}else if(I&&typeof Q==="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,Q))this.domElement.style.cursor=Q}get pointer(){return this._rootPointerEvent}_onPointerDown(Q){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let I=this._normalizeToPointerData(Q);if(this.autoPreventDefault&&I[0].isNormalized){if(Q.cancelable||!("cancelable"in Q))Q.preventDefault()}for(let B=0,E=I.length;B<E;B++){let C=I[B],J=this._bootstrapEvent(this._rootPointerEvent,C);this.rootBoundary.mapEvent(J)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(Q){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,SI.pointerMoved();let I=this._normalizeToPointerData(Q);for(let B=0,E=I.length;B<E;B++){let C=this._bootstrapEvent(this._rootPointerEvent,I[B]);this.rootBoundary.mapEvent(C)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(Q){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let I=Q.target;if(Q.composedPath&&Q.composedPath().length>0)I=Q.composedPath()[0];let B=I!==this.domElement?"outside":"",E=this._normalizeToPointerData(Q);for(let C=0,J=E.length;C<J;C++){let K=this._bootstrapEvent(this._rootPointerEvent,E[C]);K.type+=B,this.rootBoundary.mapEvent(K)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(Q){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let I=this._normalizeToPointerData(Q);for(let B=0,E=I.length;B<E;B++){let C=this._bootstrapEvent(this._rootPointerEvent,I[B]);this.rootBoundary.mapEvent(C)}this.setCursor(this.rootBoundary.cursor)}onWheel(Q){if(!this.features.wheel)return;let I=this.normalizeWheelEvent(Q);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(I)}setTargetElement(Q){this._removeEvents(),this.domElement=Q,SI.domElement=Q,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;SI.addTickerListener();let Q=this.domElement.style;if(Q){if(globalThis.navigator.msPointerEnabled)Q.msContentZooming="none",Q.msTouchAction="none";else if(this.supportsPointerEvents)Q.touchAction="none"}if(this.supportsPointerEvents)globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0);else if(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents)this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0);this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;SI.removeTickerListener();let Q=this.domElement.style;if(Q){if(globalThis.navigator.msPointerEnabled)Q.msContentZooming="",Q.msTouchAction="";else if(this.supportsPointerEvents)Q.touchAction=""}if(this.supportsPointerEvents)globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0);else if(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents)this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0);this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(Q,I,B){let E=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},C=1/this.resolution;Q.x=(I-E.left)*(this.domElement.width/E.width)*C,Q.y=(B-E.top)*(this.domElement.height/E.height)*C}_normalizeToPointerData(Q){let I=[];if(this.supportsTouchEvents&&Q instanceof TouchEvent)for(let B=0,E=Q.changedTouches.length;B<E;B++){let C=Q.changedTouches[B];if(typeof C.button==="undefined")C.button=0;if(typeof C.buttons==="undefined")C.buttons=1;if(typeof C.isPrimary==="undefined")C.isPrimary=Q.touches.length===1&&Q.type==="touchstart";if(typeof C.width==="undefined")C.width=C.radiusX||1;if(typeof C.height==="undefined")C.height=C.radiusY||1;if(typeof C.tiltX==="undefined")C.tiltX=0;if(typeof C.tiltY==="undefined")C.tiltY=0;if(typeof C.pointerType==="undefined")C.pointerType="touch";if(typeof C.pointerId==="undefined")C.pointerId=C.identifier||0;if(typeof C.pressure==="undefined")C.pressure=C.force||0.5;if(typeof C.twist==="undefined")C.twist=0;if(typeof C.tangentialPressure==="undefined")C.tangentialPressure=0;if(typeof C.layerX==="undefined")C.layerX=C.offsetX=C.clientX;if(typeof C.layerY==="undefined")C.layerY=C.offsetY=C.clientY;C.isNormalized=!0,C.type=Q.type,I.push(C)}else if(!globalThis.MouseEvent||Q instanceof MouseEvent&&(!this.supportsPointerEvents||!(Q instanceof globalThis.PointerEvent))){let B=Q;if(typeof B.isPrimary==="undefined")B.isPrimary=!0;if(typeof B.width==="undefined")B.width=1;if(typeof B.height==="undefined")B.height=1;if(typeof B.tiltX==="undefined")B.tiltX=0;if(typeof B.tiltY==="undefined")B.tiltY=0;if(typeof B.pointerType==="undefined")B.pointerType="mouse";if(typeof B.pointerId==="undefined")B.pointerId=nP;if(typeof B.pressure==="undefined")B.pressure=0.5;if(typeof B.twist==="undefined")B.twist=0;if(typeof B.tangentialPressure==="undefined")B.tangentialPressure=0;B.isNormalized=!0,I.push(B)}else I.push(Q);return I}normalizeWheelEvent(Q){let I=this._rootWheelEvent;return this._transferMouseData(I,Q),I.deltaX=Q.deltaX,I.deltaY=Q.deltaY,I.deltaZ=Q.deltaZ,I.deltaMode=Q.deltaMode,this.mapPositionToPoint(I.screen,Q.clientX,Q.clientY),I.global.copyFrom(I.screen),I.offset.copyFrom(I.screen),I.nativeEvent=Q,I.type=Q.type,I}_bootstrapEvent(Q,I){if(Q.originalEvent=null,Q.nativeEvent=I,Q.pointerId=I.pointerId,Q.width=I.width,Q.height=I.height,Q.isPrimary=I.isPrimary,Q.pointerType=I.pointerType,Q.pressure=I.pressure,Q.tangentialPressure=I.tangentialPressure,Q.tiltX=I.tiltX,Q.tiltY=I.tiltY,Q.twist=I.twist,this._transferMouseData(Q,I),this.mapPositionToPoint(Q.screen,I.clientX,I.clientY),Q.global.copyFrom(Q.screen),Q.offset.copyFrom(Q.screen),Q.isTrusted=I.isTrusted,Q.type==="pointerleave")Q.type="pointerout";if(Q.type.startsWith("mouse"))Q.type=Q.type.replace("mouse","pointer");if(Q.type.startsWith("touch"))Q.type=oP[Q.type]||Q.type;return Q}_transferMouseData(Q,I){Q.isTrusted=I.isTrusted,Q.srcElement=I.srcElement,Q.timeStamp=performance.now(),Q.type=I.type,Q.altKey=I.altKey,Q.button=I.button,Q.buttons=I.buttons,Q.client.x=I.clientX,Q.client.y=I.clientY,Q.ctrlKey=I.ctrlKey,Q.metaKey=I.metaKey,Q.movement.x=I.movementX,Q.movement.y=I.movementY,Q.page.x=I.pageX,Q.page.y=I.pageY,Q.relatedTarget=null,Q.shiftKey=I.shiftKey}},$J;var iH=Y(()=>{M();z5();dH();pH();uH();oP={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};S2.extension={name:"events",type:[N.WebGLSystem,N.CanvasSystem,N.WebGPUSystem],priority:-1};S2.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};$J=S2});var D5;var W5=Y(()=>{iH();qJ();D5={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(A){this.eventMode=A?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??$J.defaultEventMode},set eventMode(A){this._internalEventMode=A},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(A,Q,I){let B=typeof I==="boolean"&&I||typeof I==="object"&&I.capture,E=typeof I==="object"?I.signal:void 0,C=typeof I==="object"?I.once===!0:!1,J=typeof Q==="function"?void 0:Q;A=B?`${A}capture`:A;let K=typeof Q==="function"?Q:Q.handleEvent,H=this;if(E)E.addEventListener("abort",()=>{H.off(A,K,J)});if(C)H.once(A,K,J);else H.on(A,K,J)},removeEventListener(A,Q,I){let B=typeof I==="boolean"&&I||typeof I==="object"&&I.capture,E=typeof Q==="function"?void 0:Q;A=B?`${A}capture`:A,Q=typeof Q==="function"?Q:Q.handleEvent,this.off(A,Q,E)},dispatchEvent(A){if(!(A instanceof _B))throw new Error("Container cannot propagate events outside of the Federated Events API");return A.defaultPrevented=!1,A.path=null,A.target=this,A.manager.dispatchEvent(A),!A.defaultPrevented}}});var tk=Y(()=>{M();TQ();iH();W5();p.add($J);p.mixin(QA,D5)});var QQ;var kI=Y(()=>{QQ=((A)=>{return A[A.Low=0]="Low",A[A.Normal=1]="Normal",A[A.High=2]="High",A})(QQ||{})});var X5;var k5=Y(()=>{X5={createCanvas:(A,Q)=>{let I=document.createElement("canvas");return I.width=A,I.height=Q,I},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(A,Q)=>fetch(A,Q),parseXML:(A)=>{return new DOMParser().parseFromString(A,"text/xml")}}});var ek,u;var jA=Y(()=>{k5();ek=X5,u={get(){return ek},set(A){ek=A}}});function $B(A){if(typeof A!=="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(A)}`)}function nH(A){return A.split("?")[0].split("#")[0]}function sP(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aP(A,Q,I){return A.replace(new RegExp(sP(Q),"g"),I)}function rP(A,Q){let I="",B=0,E=-1,C=0,J=-1;for(let K=0;K<=A.length;++K){if(K<A.length)J=A.charCodeAt(K);else if(J===47)break;else J=47;if(J===47){if(E===K-1||C===1);else if(E!==K-1&&C===2){if(I.length<2||B!==2||I.charCodeAt(I.length-1)!==46||I.charCodeAt(I.length-2)!==46){if(I.length>2){let H=I.lastIndexOf("/");if(H!==I.length-1){if(H===-1)I="",B=0;else I=I.slice(0,H),B=I.length-1-I.lastIndexOf("/");E=K,C=0;continue}}else if(I.length===2||I.length===1){I="",B=0,E=K,C=0;continue}}if(Q){if(I.length>0)I+="/..";else I="..";B=2}}else{if(I.length>0)I+=`/${A.slice(E+1,K)}`;else I=A.slice(E+1,K);B=K-E-1}E=K,C=0}else if(J===46&&C!==-1)++C;else C=-1}return I}var qQ;var bB=Y(()=>{jA();qQ={toPosix(A){return aP(A,"\\","/")},isUrl(A){return/^https?:/.test(this.toPosix(A))},isDataUrl(A){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(A)},isBlobUrl(A){return A.startsWith("blob:")},hasProtocol(A){return/^[^/:]+:/.test(this.toPosix(A))},getProtocol(A){$B(A),A=this.toPosix(A);let Q=/^file:\/\/\//.exec(A);if(Q)return Q[0];let I=/^[^/:]+:\/{0,2}/.exec(A);if(I)return I[0];return""},toAbsolute(A,Q,I){if($B(A),this.isDataUrl(A)||this.isBlobUrl(A))return A;let B=nH(this.toPosix(Q??u.get().getBaseUrl())),E=nH(this.toPosix(I??this.rootname(B)));if(A=this.toPosix(A),A.startsWith("/"))return qQ.join(E,A.slice(1));return this.isAbsolute(A)?A:this.join(B,A)},normalize(A){if($B(A),A.length===0)return".";if(this.isDataUrl(A)||this.isBlobUrl(A))return A;A=this.toPosix(A);let Q="",I=A.startsWith("/");if(this.hasProtocol(A))Q=this.rootname(A),A=A.slice(Q.length);let B=A.endsWith("/");if(A=rP(A,!1),A.length>0&&B)A+="/";if(I)return`/${A}`;return Q+A},isAbsolute(A){if($B(A),A=this.toPosix(A),this.hasProtocol(A))return!0;return A.startsWith("/")},join(...A){if(A.length===0)return".";let Q;for(let I=0;I<A.length;++I){let B=A[I];if($B(B),B.length>0)if(Q===void 0)Q=B;else{let E=A[I-1]??"";if(this.joinExtensions.includes(this.extname(E).toLowerCase()))Q+=`/../${B}`;else Q+=`/${B}`}}if(Q===void 0)return".";return this.normalize(Q)},dirname(A){if($B(A),A.length===0)return".";A=this.toPosix(A);let Q=A.charCodeAt(0),I=Q===47,B=-1,E=!0,C=this.getProtocol(A),J=A;A=A.slice(C.length);for(let K=A.length-1;K>=1;--K)if(Q=A.charCodeAt(K),Q===47){if(!E){B=K;break}}else E=!1;if(B===-1)return I?"/":this.isUrl(J)?C+A:C;if(I&&B===1)return"//";return C+A.slice(0,B)},rootname(A){$B(A),A=this.toPosix(A);let Q="";if(A.startsWith("/"))Q="/";else Q=this.getProtocol(A);if(this.isUrl(A)){let I=A.indexOf("/",Q.length);if(I!==-1)Q=A.slice(0,I);else Q=A;if(!Q.endsWith("/"))Q+="/"}return Q},basename(A,Q){if($B(A),Q)$B(Q);A=nH(this.toPosix(A));let I=0,B=-1,E=!0,C;if(Q!==void 0&&Q.length>0&&Q.length<=A.length){if(Q.length===A.length&&Q===A)return"";let J=Q.length-1,K=-1;for(C=A.length-1;C>=0;--C){let H=A.charCodeAt(C);if(H===47){if(!E){I=C+1;break}}else{if(K===-1)E=!1,K=C+1;if(J>=0)if(H===Q.charCodeAt(J)){if(--J===-1)B=C}else J=-1,B=K}}if(I===B)B=K;else if(B===-1)B=A.length;return A.slice(I,B)}for(C=A.length-1;C>=0;--C)if(A.charCodeAt(C)===47){if(!E){I=C+1;break}}else if(B===-1)E=!1,B=C+1;if(B===-1)return"";return A.slice(I,B)},extname(A){$B(A),A=nH(this.toPosix(A));let Q=-1,I=0,B=-1,E=!0,C=0;for(let J=A.length-1;J>=0;--J){let K=A.charCodeAt(J);if(K===47){if(!E){I=J+1;break}continue}if(B===-1)E=!1,B=J+1;if(K===46){if(Q===-1)Q=J;else if(C!==1)C=1}else if(Q!==-1)C=-1}if(Q===-1||B===-1||C===0||C===1&&Q===B-1&&Q===I+1)return"";return A.slice(Q,B)},parse(A){$B(A);let Q={root:"",dir:"",base:"",ext:"",name:""};if(A.length===0)return Q;A=nH(this.toPosix(A));let I=A.charCodeAt(0),B=this.isAbsolute(A),E,C="";if(Q.root=this.rootname(A),B||this.hasProtocol(A))E=1;else E=0;let J=-1,K=0,H=-1,Z=!0,q=A.length-1,w=0;for(;q>=E;--q){if(I=A.charCodeAt(q),I===47){if(!Z){K=q+1;break}continue}if(H===-1)Z=!1,H=q+1;if(I===46){if(J===-1)J=q;else if(w!==1)w=1}else if(J!==-1)w=-1}if(J===-1||H===-1||w===0||w===1&&J===H-1&&J===K+1){if(H!==-1)if(K===0&&B)Q.base=Q.name=A.slice(1,H);else Q.base=Q.name=A.slice(K,H)}else{if(K===0&&B)Q.name=A.slice(1,J),Q.base=A.slice(1,H);else Q.name=A.slice(K,J),Q.base=A.slice(K,H);Q.ext=A.slice(J,H)}if(Q.dir=this.dirname(A),C)Q.dir=C+Q.dir;return Q},sep:"/",delimiter:":",joinExtensions:[".html"]}});var iQ=(A,Q,I=!1)=>{if(!Array.isArray(A))A=[A];if(!Q)return A;return A.map((B)=>{if(typeof B==="string"||I)return Q(B);return B})};var rC=()=>{};function AF(A,Q,I,B,E){let C=Q[I];for(let J=0;J<C.length;J++){let K=C[J];if(I<Q.length-1)AF(A.replace(B[I],K),Q,I+1,B,E);else E.push(A.replace(B[I],K))}}function F5(A){let Q=/\{(.*?)\}/g,I=A.match(Q),B=[];if(I){let E=[];I.forEach((C)=>{let J=C.substring(1,C.length-1).split(",");E.push(J)}),AF(A,E,0,I,B)}else B.push(A);return B}var O5=()=>{};var zE=(A)=>!Array.isArray(A);var UJ=()=>{};class eQ{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(A,Q)=>`${A}${this._bundleIdConnector}${Q}`,extractAssetIdFromBundle:(A,Q)=>Q.replace(`${A}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(A){if(this._bundleIdConnector=A.connector??this._bundleIdConnector,this._createBundleAssetId=A.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=A.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...A){A.forEach((Q)=>{if(this._preferredOrder.push(Q),!Q.priority)Q.priority=Object.keys(Q.params)}),this._resolverHash={}}set basePath(A){this._basePath=A}get basePath(){return this._basePath}set rootPath(A){this._rootPath=A}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(A){if(typeof A==="string")this._defaultSearchParams=A;else{let Q=A;this._defaultSearchParams=Object.keys(Q).map((I)=>`${encodeURIComponent(I)}=${encodeURIComponent(Q[I])}`).join("&")}}getAlias(A){let{alias:Q,src:I}=A;return iQ(Q||I,(E)=>{if(typeof E==="string")return E;if(Array.isArray(E))return E.map((C)=>C?.src??C);if(E?.src)return E.src;return E},!0)}addManifest(A){if(this._manifest)n("[Resolver] Manifest already exists, this will be overwritten");this._manifest=A,A.bundles.forEach((Q)=>{this.addBundle(Q.name,Q.assets)})}addBundle(A,Q){let I=[],B=Q;if(!Array.isArray(Q))B=Object.entries(Q).map(([E,C])=>{if(typeof C==="string"||Array.isArray(C))return{alias:E,src:C};return{alias:E,...C}});B.forEach((E)=>{let{src:C,alias:J}=E,K;if(typeof J==="string"){let H=this._createBundleAssetId(A,J);I.push(H),K=[J,H]}else{let H=J.map((Z)=>this._createBundleAssetId(A,Z));I.push(...H),K=[...J,...H]}this.add({...E,...{alias:K,src:C}})}),this._bundles[A]=I}add(A){let Q=[];if(Array.isArray(A))Q.push(...A);else Q.push(A);let I;I=(E)=>{if(this.hasKey(E))n(`[Resolver] already has key: ${E} overwriting`)},iQ(Q).forEach((E)=>{let{src:C}=E,{data:J,format:K,loadParser:H,parser:Z}=E,q=iQ(C).map((V)=>{if(typeof V==="string")return F5(V);return Array.isArray(V)?V:[V]}),w=this.getAlias(E);Array.isArray(w)?w.forEach(I):I(w);let $=[],U=(V)=>{let z=this._parsers.find((D)=>D.test(V));return{src:V,...z?.parse(V)}};q.forEach((V)=>{V.forEach((z)=>{let D={};if(typeof z!=="object")D=U(z);else{if(J=z.data??J,K=z.format??K,z.loadParser||z.parser)H=z.loadParser??H,Z=z.parser??Z;D={...U(z.src),...z}}if(!w)throw new Error(`[Resolver] alias is undefined for this asset: ${D.src}`);D=this._buildResolvedAsset(D,{aliases:w,data:J,format:K,loadParser:H,parser:Z,progressSize:E.progressSize}),$.push(D)})}),w.forEach((V)=>{this._assetMap[V]=$})})}resolveBundle(A){let Q=zE(A);A=iQ(A);let I={};return A.forEach((B)=>{let E=this._bundles[B];if(E){let C=this.resolve(E),J={};for(let K in C){let H=C[K];J[this._extractAssetIdFromBundle(B,K)]=H}I[B]=J}}),Q?I[A[0]]:I}resolveUrl(A){let Q=this.resolve(A);if(typeof A!=="string"){let I={};for(let B in Q)I[B]=Q[B].src;return I}return Q.src}resolve(A){let Q=zE(A);A=iQ(A);let I={};return A.forEach((B)=>{if(!this._resolverHash[B])if(this._assetMap[B]){let E=this._assetMap[B],C=this._getPreferredOrder(E);C?.priority.forEach((J)=>{C.params[J].forEach((K)=>{let H=E.filter((Z)=>{if(Z[J])return Z[J]===K;return!1});if(H.length)E=H})}),this._resolverHash[B]=E[0]}else this._resolverHash[B]=this._buildResolvedAsset({alias:[B],src:B},{});I[B]=this._resolverHash[B]}),Q?I[A[0]]:I}hasKey(A){return!!this._assetMap[A]}hasBundle(A){return!!this._bundles[A]}_getPreferredOrder(A){for(let Q=0;Q<A.length;Q++){let I=A[Q],B=this._preferredOrder.find((E)=>E.params.format.includes(I.format));if(B)return B}return this._preferredOrder[0]}_appendDefaultSearchParams(A){if(!this._defaultSearchParams)return A;let Q=/\?/.test(A)?"&":"?";return`${A}${Q}${this._defaultSearchParams}`}_buildResolvedAsset(A,Q){let{aliases:I,data:B,loadParser:E,parser:C,format:J,progressSize:K}=Q;if(this._basePath||this._rootPath)A.src=qQ.toAbsolute(A.src,this._basePath,this._rootPath);if(A.alias=I??A.alias??[A.src],A.src=this._appendDefaultSearchParams(A.src),A.data={...B||{},...A.data},A.loadParser=E??A.loadParser,A.parser=C??A.parser,A.format=J??A.format??b2(A.src),K!==void 0)A.progressSize=K;return A}}function b2(A){return A.split(".").pop().split("?").shift().split("#").shift()}var DE=Y(()=>{_A();bB();rC();O5();UJ();eQ.RETINA_PREFIX=/@([0-9\.]+)x/});var tC=(A,Q)=>{let I=Q.split("?")[1];if(I)A+=`?${I}`;return A};var oH=()=>{};var QF=class A{constructor(Q,I){this.linkedSheets=[];let B=Q;if(Q?.source instanceof GA)B={texture:Q,data:I};let{texture:E,data:C,cachePrefix:J=""}=B;this.cachePrefix=J,this._texture=E instanceof v?E:null,this.textureSource=E.source,this.textures={},this.animations={},this.data=C;let K=parseFloat(C.meta.scale);if(K)this.resolution=K,E.source.resolution=this.resolution;else this.resolution=E.source._resolution;this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise((Q)=>{if(this._callback=Q,this._batchIndex=0,this._frameKeys.length<=A.BATCH_SIZE)this._processFrames(0),this._processAnimations(),this._parseComplete();else this._nextBatch()})}parseSync(){return this._processFrames(0,!0),this._processAnimations(),this.textures}_processFrames(Q,I=!1){let B=Q,E=I?1/0:A.BATCH_SIZE;while(B-Q<E&&B<this._frameKeys.length){let C=this._frameKeys[B],J=this._frames[C],K=J.frame;if(K){let H=null,Z=null,q=J.trimmed!==!1&&J.sourceSize?J.sourceSize:J.frame,w=new EA(0,0,Math.floor(q.w)/this.resolution,Math.floor(q.h)/this.resolution);if(J.rotated)H=new EA(Math.floor(K.x)/this.resolution,Math.floor(K.y)/this.resolution,Math.floor(K.h)/this.resolution,Math.floor(K.w)/this.resolution);else H=new EA(Math.floor(K.x)/this.resolution,Math.floor(K.y)/this.resolution,Math.floor(K.w)/this.resolution,Math.floor(K.h)/this.resolution);if(J.trimmed!==!1&&J.spriteSourceSize)Z=new EA(Math.floor(J.spriteSourceSize.x)/this.resolution,Math.floor(J.spriteSourceSize.y)/this.resolution,Math.floor(K.w)/this.resolution,Math.floor(K.h)/this.resolution);this.textures[C]=new v({source:this.textureSource,frame:H,orig:w,trim:Z,rotate:J.rotated?2:0,defaultAnchor:J.anchor,defaultBorders:J.borders,label:C.toString()})}B++}}_processAnimations(){let Q=this.data.animations||{};for(let I in Q){this.animations[I]=[];for(let B=0;B<Q[I].length;B++){let E=Q[I][B];this.animations[I].push(this.textures[E])}}}_parseComplete(){let Q=this._callback;this._callback=null,this._batchIndex=0,Q.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*A.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{if(this._batchIndex*A.BATCH_SIZE<this._frameKeys.length)this._nextBatch();else this._processAnimations(),this._parseComplete()},0)}destroy(Q=!1){for(let I in this.textures)this.textures[I].destroy();if(this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,Q)this._texture?.destroy(),this.textureSource.destroy();this._texture=null,this.textureSource=null,this.linkedSheets=[]}},sH;var G5=Y(()=>{ZQ();WQ();FA();QF.BATCH_SIZE=1000;sH=QF});function IF(A,Q,I){let B={};if(A.forEach((E)=>{B[E]=Q}),Object.keys(Q.textures).forEach((E)=>{B[`${Q.cachePrefix}${E}`]=Q.textures[E]}),!I){let E=qQ.dirname(A[0]);Q.linkedSheets.forEach((C,J)=>{let K=IF([`${E}/${Q.data.meta.related_multi_packs[J]}`],C,!0);Object.assign(B,K)})}return B}var tP,j5;var L5=Y(()=>{kI();DE();oH();M();FA();bB();G5();tP=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];j5={extension:N.Asset,cache:{test:(A)=>A instanceof sH,getCacheableAssets:(A,Q)=>IF(A,Q,!1)},resolver:{extension:{type:N.ResolveParser,name:"resolveSpritesheet"},test:(A)=>{let I=A.split("?")[0].split("."),B=I.pop(),E=I.pop();return B==="json"&&tP.includes(E)},parse:(A)=>{let Q=A.split(".");return{resolution:parseFloat(eQ.RETINA_PREFIX.exec(A)?.[1]??"1"),format:Q[Q.length-2],src:A}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:N.LoadParser,priority:QQ.Normal,name:"spritesheetLoader"},async testParse(A,Q){return qQ.extname(Q.src).toLowerCase()===".json"&&!!A.frames},async parse(A,Q,I){let{texture:B,imageFilename:E,textureOptions:C,cachePrefix:J}=Q?.data??{},K=qQ.dirname(Q.src);if(K&&K.lastIndexOf("/")!==K.length-1)K+="/";let H;if(B instanceof v)H=B;else{let w=tC(K+(E??A.meta.image),Q.src);H=(await I.load([{src:w,data:C}]))[w]}let Z=new sH({texture:H.source,data:A,cachePrefix:J});await Z.parse();let q=A?.meta?.related_multi_packs;if(Array.isArray(q)){let w=[];for(let U of q){if(typeof U!=="string")continue;let V=K+U;if(Q.data?.ignoreMultiPack)continue;V=tC(V,Q.src),w.push(I.load({src:V,data:{textureOptions:C,ignoreMultiPack:!0}}))}let $=await Promise.all(w);Z.linkedSheets=$,$.forEach((U)=>{U.linkedSheets=[Z].concat(Z.linkedSheets.filter((V)=>V!==U))})}return Z},async unload(A,Q,I){await I.unload(A.textureSource._sourceOrigin),A.destroy(!1)}}}});var R5=Y(()=>{M();L5();p.add(j5)});function VJ(A,Q,I){let{width:B,height:E}=I.orig,C=I.trim;if(C){let{width:J,height:K}=C;A.minX=C.x-Q._x*B,A.maxX=A.minX+J,A.minY=C.y-Q._y*E,A.maxY=A.minY+K}else A.minX=-Q._x*B,A.maxX=A.minX+B,A.minY=-Q._y*E,A.maxY=A.minY+E}var aH=()=>{};var wQ;var uI=Y(()=>{_Q();TQ();wQ=class wQ extends QA{constructor(A){super(A);this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new RA(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=A.autoGarbageCollect??!0}get bounds(){if(!this._boundsDirty)return this._bounds;return this.updateBounds(),this._boundsDirty=!1,this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(A){this._roundPixels=A?1:0}containsPoint(A){let Q=this.bounds,{x:I,y:B}=A;return I>=Q.minX&&I<=Q.maxX&&B>=Q.minY&&B<=Q.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let A=this.renderGroup||this.parentRenderGroup;if(A)A.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(let A in this._gpuData)this._gpuData[A]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(A){this.unload(),super.destroy(A),this._bounds=null}collectRenderablesSimple(A,Q,I){let{renderPipes:B}=Q;B.blendMode.pushBlendMode(this,this.groupBlendMode,A);let C=B[this.renderPipeId];if(C?.addRenderable)C.addRenderable(this,A);this.didViewUpdate=!1;let J=this.children,K=J.length;for(let H=0;H<K;H++)J[H].collectRenderables(A,Q,I);B.blendMode.popBlendMode(A)}}});var bQ;var fB=Y(()=>{HE();FA();aH();gA();uI();bQ=class bQ extends wQ{constructor(A=v.EMPTY){if(A instanceof v)A={texture:A};let{texture:Q=v.EMPTY,anchor:I,roundPixels:B,width:E,height:C,...J}=A;super({label:"Sprite",...J});if(this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new xA({_onUpdate:()=>{this.onViewUpdate()}}),I)this.anchor=I;else if(Q.defaultAnchor)this.anchor=Q.defaultAnchor;if(this.texture=Q,this.allowChildren=!1,this.roundPixels=B??!1,E!==void 0)this.width=E;if(C!==void 0)this.height=C}static from(A,Q=!1){if(A instanceof v)return new bQ(A);return new bQ(v.from(A,Q))}set texture(A){A||(A=v.EMPTY);let Q=this._texture;if(Q===A)return;if(Q&&Q.dynamic)Q.off("update",this.onViewUpdate,this);if(A.dynamic)A.on("update",this.onViewUpdate,this);if(this._texture=A,this._width)this._setWidth(this._width,this._texture.orig.width);if(this._height)this._setHeight(this._height,this._texture.orig.height);this.onViewUpdate()}get texture(){return this._texture}get visualBounds(){return VJ(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return c("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){let A=this._anchor,Q=this._texture,I=this._bounds,{width:B,height:E}=Q.orig;I.minX=-A._x*B,I.maxX=I.minX+B,I.minY=-A._y*E,I.maxY=I.minY+E}destroy(A=!1){if(super.destroy(A),typeof A==="boolean"?A:A?.texture){let I=typeof A==="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(A){typeof A==="number"?this._anchor.set(A):this._anchor.copyFrom(A)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(A){this._setWidth(A,this._texture.orig.width),this._width=A}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(A){this._setHeight(A,this._texture.orig.height),this._height=A}getSize(A){return A||(A={}),A.width=Math.abs(this.scale.x)*this._texture.orig.width,A.height=Math.abs(this.scale.y)*this._texture.orig.height,A}setSize(A,Q){if(typeof A==="object")Q=A.height??A.width,A=A.width;else Q??(Q=A);A!==void 0&&this._setWidth(A,this._texture.orig.width),Q!==void 0&&this._setHeight(Q,this._texture.orig.height)}}});function eC(A,Q,I){let B=eP;A.measurable=!0,MB(A,I,B),Q.addBoundsMask(B),A.measurable=!1}var eP;var NJ=Y(()=>{_Q();pE();eP=new RA});function A0(A,Q,I){let B=qI.get();A.measurable=!0;let E=zQ.get().identity(),C=BF(A,I,E);lE(A,B,C),A.measurable=!1,Q.addBoundsMask(B),zQ.return(E),qI.return(B)}function BF(A,Q,I){if(!A)return n("Mask bounds, renderable is not inside the root container"),I;if(A!==Q)BF(A.parent,Q,I),A.updateLocalTransform(),I.append(A.localTransform);return I}var zJ=Y(()=>{KJ();qE();_A()});class DJ{constructor(A){if(this.priority=0,this.inverse=!1,this.pipe="alphaMask",A?.mask)this.init(A.mask)}init(A){this.mask=A,this.renderMaskToTexture=!(A instanceof bQ),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){if(this.mask===null)return;this.mask.measurable=!0,this.mask=null}addBounds(A,Q){if(!this.inverse)eC(this.mask,A,Q)}addLocalBounds(A,Q){A0(this.mask,A,Q)}containsPoint(A,Q){let I=this.mask;return Q(I,A)}destroy(){this.reset()}static test(A){return A instanceof bQ}}var P5=Y(()=>{M();fB();NJ();zJ();DJ.extension=N.MaskEffect});class WJ{constructor(A){if(this.priority=0,this.pipe="colorMask",A?.mask)this.init(A.mask)}init(A){this.mask=A}destroy(){}static test(A){return typeof A==="number"}}var M5=Y(()=>{M();WJ.extension=N.MaskEffect});class XJ{constructor(A){if(this.priority=0,this.pipe="stencilMask",A?.mask)this.init(A.mask)}init(A){this.mask=A,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){if(this.mask===null)return;this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(A,Q){eC(this.mask,A,Q)}addLocalBounds(A,Q){A0(this.mask,A,Q)}containsPoint(A,Q){let I=this.mask;return Q(I,A)}destroy(){this.reset()}static test(A){return A instanceof QA}}var g5=Y(()=>{M();TQ();NJ();zJ();XJ.extension=N.MaskEffect});var GQ;var yB=Y(()=>{jA();M();WQ();GQ=class GQ extends GA{constructor(A){if(!A.resource)A.resource=u.get().createCanvas();if(!A.width){if(A.width=A.resource.width,!A.autoDensity)A.width/=A.resolution}if(!A.height){if(A.height=A.resource.height,!A.autoDensity)A.height/=A.resolution}super(A);this.uploadMethodId="image",this.autoDensity=A.autoDensity,this.resizeCanvas(),this.transparent=!!A.transparent}resizeCanvas(){if(this.autoDensity&&"style"in this.resource)this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`;if(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight}resize(A=this.width,Q=this.height,I=this._resolution){let B=super.resize(A,Q,I);if(B)this.resizeCanvas();return B}static test(A){return globalThis.HTMLCanvasElement&&A instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&A instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};GQ.extension=N.TextureSource});var wI;var aE=Y(()=>{M();WQ();wI=class wI extends GA{constructor(A){super(A);this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(A){return globalThis.HTMLImageElement&&A instanceof HTMLImageElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap||globalThis.VideoFrame&&A instanceof VideoFrame}};wI.extension=N.TextureSource});async function kJ(){return f2??(f2=(async()=>{let Q=u.get().createCanvas(1,1).getContext("webgl");if(!Q)return"premultiply-alpha-on-upload";let I=await new Promise((J)=>{let K=document.createElement("video");K.onloadeddata=()=>J(K),K.onerror=()=>J(null),K.autoplay=!1,K.crossOrigin="anonymous",K.preload="auto",K.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",K.load()});if(!I)return"premultiply-alpha-on-upload";let B=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,B);let E=Q.createFramebuffer();Q.bindFramebuffer(Q.FRAMEBUFFER,E),Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,B,0),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),Q.pixelStorei(Q.UNPACK_COLORSPACE_CONVERSION_WEBGL,Q.NONE),Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,I);let C=new Uint8Array(4);return Q.readPixels(0,0,1,1,Q.RGBA,Q.UNSIGNED_BYTE,C),Q.deleteFramebuffer(E),Q.deleteTexture(B),Q.getExtension("WEBGL_lose_context")?.loseContext(),C[0]<=C[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),f2}var f2;var rH=Y(()=>{jA()});var _5,WE;var tH=Y(()=>{M();wB();rH();WQ();_5=class A extends GA{constructor(Q){super(Q);if(this.isReady=!1,this.uploadMethodId="video",Q={...A.defaultOptions,...Q},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=Q.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=Q.autoPlay!==!1,this.alphaMode=Q.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),Q.autoLoad!==!1)this.load()}updateFrame(){if(this.destroyed)return;if(this._updateFPS){let Q=SA.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-Q)}if(!this._updateFPS||this._msToNextUpdate<=0)this._msToNextUpdate=this._updateFPS?Math.floor(1000/this._updateFPS):0;if(this.isValid)this.update()}_videoFrameRequestCallback(){if(this.updateFrame(),this.destroyed)this._videoFrameRequestCallbackHandle=null;else this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let Q=this.resource,I=this.options;if((Q.readyState===Q.HAVE_ENOUGH_DATA||Q.readyState===Q.HAVE_FUTURE_DATA)&&Q.width&&Q.height)Q.complete=!0;if(Q.addEventListener("play",this._onPlayStart),Q.addEventListener("pause",this._onPlayStop),Q.addEventListener("seeked",this._onSeeked),!this._isSourceReady()){if(!I.preload)Q.addEventListener("canplay",this._onCanPlay);Q.addEventListener("canplaythrough",this._onCanPlayThrough),Q.addEventListener("error",this._onError,!0)}else this._mediaReady();return this.alphaMode=await kJ(),this._load=new Promise((B,E)=>{if(this.isValid)B(this);else{if(this._resolve=B,this._reject=E,I.preloadTimeoutMs!==void 0)this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${I.preloadTimeoutMs}ms`))});Q.load()}}),this._load}_onError(Q){if(this.resource.removeEventListener("error",this._onError,!0),this.emit("error",Q),this._reject)this._reject(Q),this._reject=null,this._resolve=null}_isSourcePlaying(){let Q=this.resource;return!Q.paused&&!Q.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){if(!this.isValid)this._mediaReady();this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){if(this._autoUpdate&&!this._isSourcePlaying())this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){if(this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout)clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0;this._mediaReady()}_mediaReady(){let Q=this.resource;if(this.isValid)this.isReady=!0,this.resize(Q.videoWidth,Q.videoHeight);if(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve)this._resolve(this),this._resolve=null,this._reject=null;if(this._isSourcePlaying())this._onPlayStart();else if(this.autoPlay)this.resource.play()}destroy(){this._configureAutoUpdate();let Q=this.resource;if(Q)Q.removeEventListener("play",this._onPlayStart),Q.removeEventListener("pause",this._onPlayStop),Q.removeEventListener("seeked",this._onSeeked),Q.removeEventListener("canplay",this._onCanPlay),Q.removeEventListener("canplaythrough",this._onCanPlayThrough),Q.removeEventListener("error",this._onError,!0),Q.pause(),Q.src="",Q.load();super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(Q){if(Q!==this._autoUpdate)this._autoUpdate=Q,this._configureAutoUpdate()}get updateFPS(){return this._updateFPS}set updateFPS(Q){if(Q!==this._updateFPS)this._updateFPS=Q,this._configureAutoUpdate()}_configureAutoUpdate(){if(this._autoUpdate&&this._isSourcePlaying())if(!this._updateFPS&&this.resource.requestVideoFrameCallback){if(this._isConnectedToTicker)SA.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0;if(this._videoFrameRequestCallbackHandle===null)this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}else{if(this._videoFrameRequestCallbackHandle!==null)this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null;if(!this._isConnectedToTicker)SA.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0}else{if(this._videoFrameRequestCallbackHandle!==null)this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null;if(this._isConnectedToTicker)SA.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0}}static test(Q){return globalThis.HTMLVideoElement&&Q instanceof HTMLVideoElement}};_5.extension=N.TextureSource;_5.defaultOptions={...GA.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_5.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};WE=_5});class EF{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(A){return this._cache.has(A)}get(A){let Q=this._cache.get(A);if(!Q)n(`[Assets] Asset id ${A} was not found in the Cache`);return Q}set(A,Q){let I=iQ(A),B;for(let K=0;K<this.parsers.length;K++){let H=this.parsers[K];if(H.test(Q)){B=H.getCacheableAssets(I,Q);break}}let E=new Map(Object.entries(B||{}));if(!B)I.forEach((K)=>{E.set(K,Q)});let C=[...E.keys()],J={cacheKeys:C,keys:I};I.forEach((K)=>{this._cacheMap.set(K,J)}),C.forEach((K)=>{let H=B?B[K]:Q;if(this._cache.has(K)&&this._cache.get(K)!==H)n("[Cache] already has key:",K);this._cache.set(K,E.get(K))})}remove(A){if(!this._cacheMap.has(A)){n(`[Assets] Asset id ${A} was not found in the Cache`);return}let Q=this._cacheMap.get(A);Q.cacheKeys.forEach((B)=>{this._cache.delete(B)}),Q.keys.forEach((B)=>{this._cacheMap.delete(B)})}get parsers(){return this._parsers}}var LA;var lI=Y(()=>{_A();rC();LA=new EF});function CF(A={}){let Q=A&&A.resource,I=Q?A.resource:A,B=Q?A:{resource:A};for(let E=0;E<y2.length;E++){let C=y2[E];if(C.test(I))return new C(B)}throw new Error(`Could not find a source type for resource: ${B.resource}`)}function v2(A={},Q=!1){let I=A&&A.resource,B=I?A.resource:A,E=I?A:{resource:A};if(!Q&&LA.has(B))return LA.get(B);let C=new v({source:CF(E)});if(C.on("destroy",()=>{if(LA.has(B))LA.remove(B)}),!Q)LA.set(B,C);return C}function T2(A,Q=!1){if(typeof A==="string")return LA.get(A);else if(A instanceof GA)return new v({source:A});return v2(A,Q)}var y2;var S5=Y(()=>{lI();M();WQ();FA();y2=[];p.handleByList(N.TextureSource,y2);v.from=T2;GA.from=CF});var b5=Y(()=>{M();P5();M5();g5();vH();yB();aE();tH();S5();_H();p.add(DJ,WJ,XJ,WE,wI,GQ,iE)});class FJ{constructor(A){this._renderer=A}push(A,Q,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:Q,filterEffect:A})}pop(A,Q,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(A){if(A.action==="pushFilter")this._renderer.filter.push(A);else if(A.action==="popFilter")this._renderer.filter.pop()}destroy(){this._renderer=null}}var f5=Y(()=>{M();FJ.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"filter"}});function UB(A,Q){let I=JF[A];if(I===void 0){if(h2[Q]===void 0)h2[Q]=1;JF[A]=I=h2[Q]++}return I}var h2,JF;var Q0=Y(()=>{h2=Object.create(null),JF=Object.create(null)});function OJ(){if(!y5||y5?.isContextLost())y5=u.get().createCanvas().getContext("webgl",{});return y5}var y5;var eH=Y(()=>{jA()});function T5(){if(!v5){v5="mediump";let A=OJ();if(A){if(A.getShaderPrecisionFormat)v5=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT).precision?"highp":"mediump"}}return v5}var v5;var h5=Y(()=>{eH()});function x5(A,Q,I){if(Q)return A;if(I)return A=A.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${A}
        `;return`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${A}
        `}var m5=()=>{};function c5(A,Q,I){let B=I?Q.maxSupportedFragmentPrecision:Q.maxSupportedVertexPrecision;if(A.substring(0,9)!=="precision"){let E=I?Q.requestedFragmentPrecision:Q.requestedVertexPrecision;if(E==="highp"&&B!=="highp")E="mediump";return`precision ${E} float;
${A}`}else if(B!=="highp"&&A.substring(0,15)==="precision highp")return A.replace("precision highp","precision mediump");return A}var d5=()=>{};function p5(A,Q){if(!Q)return A;return`#version 300 es
${A}`}var u5=()=>{};function l5(A,{name:Q="pixi-program"},I=!0){Q=Q.replace(/\s+/g,"-"),Q+=I?"-fragment":"-vertex";let B=I?AM:QM;if(B[Q])B[Q]++,Q+=`-${B[Q]}`;else B[Q]=1;if(A.indexOf("#define SHADER_NAME")!==-1)return A;return`${`#define SHADER_NAME ${Q}`}
${A}`}var AM,QM;var i5=Y(()=>{AM={},QM={}});function n5(A,Q){if(!Q)return A;return A.replace("#version 300 es","")}var o5=()=>{};var x2,AZ,KF=class A{constructor(Q){Q={...A.defaultOptions,...Q};let I=Q.fragment.indexOf("#version 300 es")!==-1,B={stripVersion:I,ensurePrecision:{requestedFragmentPrecision:Q.preferredFragmentPrecision,requestedVertexPrecision:Q.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:T5()},setProgramName:{name:Q.name},addProgramDefines:I,insertVersion:I},E=Q.fragment,C=Q.vertex;Object.keys(x2).forEach((J)=>{let K=B[J];E=x2[J](E,K,!0),C=x2[J](C,K,!1)}),this.fragment=E,this.vertex=C,this.transformFeedbackVaryings=Q.transformFeedbackVaryings,this._key=UB(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,AZ[this._cacheKey]=null}static from(Q){let I=`${Q.vertex}:${Q.fragment}`;if(!AZ[I])AZ[I]=new A(Q),AZ[I]._cacheKey=I;return AZ[I]}},aA;var AI=Y(()=>{Q0();h5();m5();d5();u5();i5();o5();x2={stripVersion:n5,ensurePrecision:c5,addProgramDefines:x5,setProgramName:l5,insertVersion:p5},AZ=Object.create(null);KF.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};aA=KF});function QI(A){return HF[A]??HF.float32}var HF;var XE=Y(()=>{HF={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}}});function qF(A,Q){let I;while((I=ZF.exec(A))!==null){let B=IM[I[3]]??"float32";Q[I[2]]={location:parseInt(I[1],10),format:B,stride:QI(B).stride,offset:0,instance:!1,start:0}}ZF.lastIndex=0}function BM(A){return A.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}function s5({source:A,entryPoint:Q}){let I={},B=BM(A),E=B.indexOf(`fn ${Q}(`);if(E===-1)return I;let C=B.indexOf("->",E);if(C===-1)return I;let J=B.substring(E,C);if(qF(J,I),Object.keys(I).length===0){let K=J.match(/\(\s*\w+\s*:\s*(\w+)/);if(K){let H=K[1],Z=new RegExp(`struct\\s+${H}\\s*\\{([^}]+)\\}`,"s"),q=B.match(Z);if(q)qF(q[1],I)}}return I}var IM,ZF;var a5=Y(()=>{XE();IM={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",vec2i:"sint32x2",vec3i:"sint32x3",vec4i:"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",vec2u:"uint32x2",vec3u:"uint32x3",vec4u:"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"},ZF=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|\)|$)/g});function GJ(A){let Q=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,I=/@group\((\d+)\)/,B=/@binding\((\d+)\)/,E=/var(<[^>]+>)? (\w+)/,C=/:\s*([\w<>]+)/,J=/struct\s+(\w+)\s*{([^}]+)}/g,K=/(\w+)\s*:\s*([\w\<\>]+)/g,H=/struct\s+(\w+)/,Z=A.match(Q)?.map((w)=>({group:parseInt(w.match(I)[1],10),binding:parseInt(w.match(B)[1],10),name:w.match(E)[2],isUniform:w.match(E)[1]==="<uniform>",type:w.match(C)[1]}));if(!Z)return{groups:[],structs:[]};let q=A.match(J)?.map((w)=>{let $=w.match(H)[1],U=w.match(K).reduce((V,z)=>{let[D,W]=z.split(":");return V[D.trim()]=W.trim(),V},{});if(!U)return null;return{name:$,members:U}}).filter(({name:w})=>Z.some(($)=>$.type===w||$.type.includes(`<${w}>`)))??[];return{groups:Z,structs:q}}var r5=()=>{};var vB;var t5=Y(()=>{vB=((A)=>{return A[A.VERTEX=1]="VERTEX",A[A.FRAGMENT=2]="FRAGMENT",A[A.COMPUTE=4]="COMPUTE",A})(vB||{})});function e5({groups:A}){let Q=[];for(let I=0;I<A.length;I++){let B=A[I];if(!Q[B.group])Q[B.group]=[];if(B.isUniform)Q[B.group].push({binding:B.binding,visibility:vB.VERTEX|vB.FRAGMENT,buffer:{type:"uniform"}});else if(B.type==="sampler")Q[B.group].push({binding:B.binding,visibility:vB.FRAGMENT,sampler:{type:"filtering"}});else if(B.type==="texture_2d"||B.type.startsWith("texture_2d<"))Q[B.group].push({binding:B.binding,visibility:vB.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}});else if(B.type==="texture_2d_array"||B.type.startsWith("texture_2d_array<"))Q[B.group].push({binding:B.binding,visibility:vB.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d-array",multisampled:!1}});else if(B.type==="texture_cube"||B.type.startsWith("texture_cube<"))Q[B.group].push({binding:B.binding,visibility:vB.FRAGMENT,texture:{sampleType:"float",viewDimension:"cube",multisampled:!1}})}for(let I=0;I<Q.length;I++)Q[I]||(Q[I]=[]);return Q}var A7=Y(()=>{t5()});function Q7({groups:A}){let Q=[];for(let I=0;I<A.length;I++){let B=A[I];if(!Q[B.group])Q[B.group]={};Q[B.group][B.name]=B.binding}return Q}var I7=()=>{};function B7(A,Q){let I=new Set,B=new Set,E=[...A.structs,...Q.structs].filter((J)=>{if(I.has(J.name))return!1;return I.add(J.name),!0}),C=[...A.groups,...Q.groups].filter((J)=>{let K=`${J.name}-${J.binding}`;if(B.has(K))return!1;return B.add(K),!0});return{structs:E,groups:C}}var E7=()=>{};class rA{constructor(A){this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:Q,vertex:I,layout:B,gpuLayout:E,name:C}=A;if(this.name=C,this.fragment=Q,this.vertex=I,Q.source===I.source){let J=GJ(Q.source);this.structsAndGroups=J}else{let J=GJ(I.source),K=GJ(Q.source);this.structsAndGroups=B7(J,K)}this.layout=B??Q7(this.structsAndGroups),this.gpuLayout=E??e5(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:A,fragment:Q}=this,I=A.source+Q.source+A.entryPoint+Q.entryPoint;this._layoutKey=UB(I,"program")}get attributeData(){return this._attributeData??(this._attributeData=s5(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,QZ[this._cacheKey]=null}static from(A){let Q=`${A.vertex.source}:${A.fragment.source}:${A.fragment.entryPoint}:${A.vertex.entryPoint}`;if(!QZ[Q])QZ[Q]=new rA(A),QZ[Q]._cacheKey=Q;return QZ[Q]}}var QZ;var YI=Y(()=>{Q0();a5();r5();A7();I7();E7();QZ=Object.create(null)});class fQ{constructor(A){this.resources=Object.create(null),this._dirty=!0;let Q=0;for(let I in A){let B=A[I];this.setResource(B,Q++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let A=[],Q=0;for(let I in this.resources)A[Q++]=this.resources[I]._resourceId;this._key=A.join("|")}setResource(A,Q){let I=this.resources[Q];if(A===I)return;if(I)A.off?.("change",this.onResourceChange,this);A.on?.("change",this.onResourceChange,this),this.resources[Q]=A,this._dirty=!0}getResource(A){return this.resources[A]}_touch(A,Q){let I=this.resources;for(let B in I)I[B]._gcLastUsed=A,I[B]._touched=Q}destroy(){let A=this.resources;for(let Q in A)A[Q]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(A){if(this._dirty=!0,A.destroyed){let Q=this.resources;for(let I in Q)if(Q[I]===A)Q[I]=null}else this._updateKey()}}var TB=()=>{};var cA;var nQ=Y(()=>{cA=((A)=>{return A[A.WEBGL=1]="WEBGL",A[A.WEBGPU=2]="WEBGPU",A[A.CANVAS=4]="CANVAS",A[A.BOTH=3]="BOTH",A})(cA||{})});var IZ,C7;var J7=Y(()=>{IZ=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],C7=IZ.reduce((A,Q)=>{return A[Q]=!0,A},{})});function K7(A,Q){switch(A){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*Q);case"vec3<f32>":return new Float32Array(3*Q);case"vec4<f32>":return new Float32Array(4*Q);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var H7=()=>{};var wF=class A{constructor(Q,I){this._touched=0,this.uid=VA("uniform"),this._resourceType="uniformGroup",this._resourceId=VA("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,I={...A.defaultOptions,...I},this.uniformStructures=Q;let B={};for(let E in Q){let C=Q[E];if(C.name=E,C.size=C.size??1,!C7[C.type]){let J=C.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(J){let[,K,H]=J;throw new Error(`Uniform type ${C.type} is not supported. Use type: '${K}', size: ${H} instead.`)}throw new Error(`Uniform type ${C.type} is not supported. Supported uniform types are: ${IZ.join(", ")}`)}C.value??(C.value=K7(C.type,C.size)),B[E]=C.value}this.uniforms=B,this._dirtyId=1,this.ubo=I.ubo,this.isStatic=I.isStatic,this._signature=UB(Object.keys(B).map((E)=>`${E}-${Q[E].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}},PA;var XQ=Y(()=>{HQ();Q0();J7();H7();wF.defaultOptions={ubo:!1,isStatic:!1};PA=wF});var BQ;var bI=Y(()=>{yQ();HQ();AI();TB();YI();nQ();XQ();BQ=class BQ extends mA{constructor(A){super();this.uid=VA("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:Q,glProgram:I,groups:B,resources:E,compatibleRenderers:C,groupMap:J}=A;if(this.gpuProgram=Q,this.glProgram=I,C===void 0){if(C=0,Q)C|=cA.WEBGPU;if(I)C|=cA.WEBGL}this.compatibleRenderers=C;let K={};if(!E&&!B)E={};if(E&&B)throw new Error("[Shader] Cannot have both resources and groups");else if(!Q&&B&&!J)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");else if(!Q&&B&&J)for(let H in J)for(let Z in J[H]){let q=J[H][Z];K[q]={group:H,binding:Z,name:q}}else if(Q&&B&&!J){let H=Q.structsAndGroups.groups;J={},H.forEach((Z)=>{J[Z.group]=J[Z.group]||{},J[Z.group][Z.binding]=Z.name,K[Z.name]=Z})}else if(E){if(B={},J={},Q)Q.structsAndGroups.groups.forEach((q)=>{J[q.group]=J[q.group]||{},J[q.group][q.binding]=q.name,K[q.name]=q});let H=0;for(let Z in E){if(K[Z])continue;if(!B[99])B[99]=new fQ,this._ownedBindGroups.push(B[99]);K[Z]={group:99,binding:H,name:Z},J[99]=J[99]||{},J[99][H]=Z,H++}for(let Z in E){let q=Z,w=E[Z];if(!w.source&&!w._resourceType)w=new PA(w);let $=K[q];if($){if(!B[$.group])B[$.group]=new fQ,this._ownedBindGroups.push(B[$.group]);B[$.group].setResource(w,$.binding)}}}this.groups=B,this._uniformBindMap=J,this.resources=this._buildResourceAccessor(B,K)}addResource(A,Q,I){var B,E;if((B=this._uniformBindMap)[Q]||(B[Q]={}),(E=this._uniformBindMap[Q])[I]||(E[I]=A),!this.groups[Q])this.groups[Q]=new fQ,this._ownedBindGroups.push(this.groups[Q])}_buildResourceAccessor(A,Q){let I={};for(let B in Q){let E=Q[B];Object.defineProperty(I,E.name,{get(){return A[E.group].getResource(E.binding)},set(C){A[E.group].setResource(C,E.binding)}})}return I}destroy(A=!1){if(this._destroyed)return;if(this._destroyed=!0,this.emit("destroy",this),A)this.gpuProgram?.destroy(),this.glProgram?.destroy();this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach((Q)=>{Q.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(A){let{gpu:Q,gl:I,...B}=A,E,C;if(Q)E=rA.from(Q);if(I)C=aA.from(I);return new BQ({gpuProgram:E,glProgram:C,...B})}}});var EM,m2=class A{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1)}set blend(Q){if(!!(this.data&1)!==Q)this.data^=1}get offsets(){return!!(this.data&2)}set offsets(Q){if(!!(this.data&2)!==Q)this.data^=2}set cullMode(Q){if(Q==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=Q==="front"}get cullMode(){if(!this.culling)return"none";return this.clockwiseFrontFace?"front":"back"}get culling(){return!!(this.data&4)}set culling(Q){if(!!(this.data&4)!==Q)this.data^=4}get depthTest(){return!!(this.data&8)}set depthTest(Q){if(!!(this.data&8)!==Q)this.data^=8}get depthMask(){return!!(this.data&32)}set depthMask(Q){if(!!(this.data&32)!==Q)this.data^=32}get clockwiseFrontFace(){return!!(this.data&16)}set clockwiseFrontFace(Q){if(!!(this.data&16)!==Q)this.data^=16}get blendMode(){return this._blendMode}set blendMode(Q){this.blend=Q!=="none",this._blendMode=Q,this._blendModeId=EM[Q]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(Q){this.offsets=!!Q,this._polygonOffset=Q}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let Q=new A;return Q.depthTest=!1,Q.blend=!0,Q}},oA;var $I=Y(()=>{EM={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10};m2.default2d=m2.for2d();oA=m2});var YF,hQ;var iI=Y(()=>{AI();YI();bI();$I();YF=class A extends BQ{constructor(Q){Q={...A.defaultOptions,...Q};super(Q);if(this.enabled=!0,this._state=oA.for2d(),this.blendMode=Q.blendMode,this.padding=Q.padding,typeof Q.antialias==="boolean")this.antialias=Q.antialias?"on":"off";else this.antialias=Q.antialias;if(this.resolution=Q.resolution,this.blendRequired=Q.blendRequired,this.clipToViewport=Q.clipToViewport,this.addResource("uTexture",0,1),Q.blendRequired)this.addResource("uBackTexture",0,3)}apply(Q,I,B,E){Q.applyFilter(this,I,B,E)}get blendMode(){return this._state.blendMode}set blendMode(Q){this._state.blendMode=Q}static from(Q){let{gpu:I,gl:B,...E}=Q,C,J;if(I)C=rA.from(I);if(B)J=aA.from(B);return new A({gpuProgram:C,glProgram:J,...E})}};YF.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};hQ=YF});var kE=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var I0=()=>{};var Z7=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`;var q7=()=>{};var BZ=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`;var w7=()=>{};var EZ;var Y7=Y(()=>{AI();YI();iI();I0();q7();w7();EZ=class EZ extends hQ{constructor(){let A=rA.from({vertex:{source:BZ,entryPoint:"mainVertex"},fragment:{source:BZ,entryPoint:"mainFragment"},name:"passthrough-filter"}),Q=aA.from({vertex:kE,fragment:Z7,name:"passthrough-filter"});super({gpuProgram:A,glProgram:Q})}}});var OA;var VB=Y(()=>{OA=((A)=>{return A[A.MAP_READ=1]="MAP_READ",A[A.MAP_WRITE=2]="MAP_WRITE",A[A.COPY_SRC=4]="COPY_SRC",A[A.COPY_DST=8]="COPY_DST",A[A.INDEX=16]="INDEX",A[A.VERTEX=32]="VERTEX",A[A.UNIFORM=64]="UNIFORM",A[A.STORAGE=128]="STORAGE",A[A.INDIRECT=256]="INDIRECT",A[A.QUERY_RESOLVE=512]="QUERY_RESOLVE",A[A.STATIC=1024]="STATIC",A})(OA||{})});var YQ;var hB=Y(()=>{yQ();HQ();VB();YQ=class YQ extends mA{constructor(A){let{data:Q,size:I}=A,{usage:B,label:E,shrinkToFit:C}=A;super();if(this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=VA("buffer"),this._resourceType="buffer",this._resourceId=VA("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,Q instanceof Array)Q=new Float32Array(Q);this._data=Q,I??(I=Q?.byteLength);let J=!!Q;this.descriptor={size:I,usage:B,mappedAtCreation:J,label:E},this.shrinkToFit=C??!0}get data(){return this._data}set data(A){this.setDataWithSize(A,A.length,!0)}get dataInt32(){if(!this._dataInt32)this._dataInt32=new Int32Array(this.data.buffer);return this._dataInt32}get static(){return!!(this.descriptor.usage&OA.STATIC)}set static(A){if(A)this.descriptor.usage|=OA.STATIC;else this.descriptor.usage&=~OA.STATIC}setDataWithSize(A,Q,I){if(this._updateID++,this._updateSize=Q*A.BYTES_PER_ELEMENT,this._data===A){if(I)this.emit("update",this);return}let B=this._data;if(this._data=A,this._dataInt32=null,!B||B.length!==A.length){if(!this.shrinkToFit&&B&&A.byteLength<B.byteLength){if(I)this.emit("update",this)}else this.descriptor.size=A.byteLength,this._resourceId=VA("resource"),this.emit("change",this);return}if(I)this.emit("update",this)}update(A){this._updateSize=A??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(let A in this._gpuData)this._gpuData[A]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}});function CZ(A,Q){if(!(A instanceof YQ)){let I=Q?OA.INDEX:OA.VERTEX;if(A instanceof Array)if(Q)A=new Uint32Array(A),I=OA.INDEX|OA.COPY_DST;else A=new Float32Array(A),I=OA.VERTEX|OA.COPY_DST;A=new YQ({data:A,label:Q?"index-mesh-buffer":"vertex-mesh-buffer",usage:I})}return A}var $7=Y(()=>{hB();VB()});function U7(A,Q,I){let B=A.getAttribute(Q);if(!B)return I.minX=0,I.minY=0,I.maxX=0,I.maxY=0,I;let E=B.buffer.data,C=1/0,J=1/0,K=-1/0,H=-1/0,Z=E.BYTES_PER_ELEMENT,q=(B.offset||0)/Z,w=(B.stride||8)/Z;for(let $=q;$<E.length;$+=w){let U=E[$],V=E[$+1];if(U>K)K=U;if(V>H)H=V;if(U<C)C=U;if(V<J)J=V}return I.minX=C,I.minY=J,I.maxX=K,I.maxY=H,I}var V7=()=>{};function CM(A){if(A instanceof YQ||Array.isArray(A)||A.BYTES_PER_ELEMENT)A={buffer:A};return A.buffer=CZ(A.buffer,!1),A}var UI;var FE=Y(()=>{yQ();_Q();HQ();hB();$7();V7();UI=class UI extends mA{constructor(A={}){super();this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=VA("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new RA,this._boundsDirty=!0;let{attributes:Q,indexBuffer:I,topology:B}=A;if(this.buffers=[],this.attributes={},Q)for(let E in Q)this.addAttribute(E,Q[E]);if(this.instanceCount=A.instanceCount??1,I)this.addIndex(I);this.topology=B||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(A){return this.attributes[A]}getIndex(){return this.indexBuffer}getBuffer(A){return this.getAttribute(A).buffer}getSize(){for(let A in this.attributes){let Q=this.attributes[A];return Q.buffer.data.length/(Q.stride/4||Q.size)}return 0}addAttribute(A,Q){let I=CM(Q);if(this.buffers.indexOf(I.buffer)===-1)this.buffers.push(I.buffer),I.buffer.on("update",this.onBufferUpdate,this),I.buffer.on("change",this.onBufferUpdate,this);this.attributes[A]=I}addIndex(A){this.indexBuffer=CZ(A,!0),this.buffers.push(this.indexBuffer)}get bounds(){if(!this._boundsDirty)return this._bounds;return this._boundsDirty=!1,U7(this,"aPosition",this._bounds)}unload(){this.emit("unload",this);for(let A in this._gpuData)this._gpuData[A]?.destroy();this._gpuData=Object.create(null)}destroy(A=!1){if(this.emit("destroy",this),this.removeAllListeners(),A)this.buffers.forEach((Q)=>Q.destroy());this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}});function JZ(A,Q,I,B,E,C){let J=A-I,K=Q-B,H=E-I,Z=C-B,q=J*H+K*Z,w=H*H+Z*Z,$=-1;if(w!==0)$=q/w;let U,V;if($<0)U=I,V=B;else if($>1)U=E,V=C;else U=I+$*H,V=B+$*Z;let z=A-U,D=Q-V;return z*z+D*D}var KZ=()=>{};function HZ(A,Q,I,B,E,C,J,K){let H=J-I,Z=K-B,q=E-I,w=C-B,$=A-I,U=Q-B,V=H*H+Z*Z,z=H*q+Z*w,D=H*$+Z*U,W=q*q+w*w,j=q*$+w*U,O=1/(V*W-z*z),F=(W*D-z*j)*O,L=(V*j-z*D)*O;return F>=0&&L>=0&&F+L<1}var N7=()=>{};class jJ{constructor(A=0,Q=0,I=0){this.type="circle",this.x=A,this.y=Q,this.radius=I}clone(){return new jJ(this.x,this.y,this.radius)}contains(A,Q){if(this.radius<=0)return!1;let I=this.radius*this.radius,B=this.x-A,E=this.y-Q;return B*=B,E*=E,B+E<=I}strokeContains(A,Q,I,B=0.5){if(this.radius===0)return!1;let E=this.x-A,C=this.y-Q,J=this.radius,K=(1-B)*I,H=Math.sqrt(E*E+C*C);return H<=J+K&&H>J-(I-K)}getBounds(A){return A||(A=new EA),A.x=this.x-this.radius,A.y=this.y-this.radius,A.width=this.radius*2,A.height=this.radius*2,A}copyFrom(A){return this.x=A.x,this.y=A.y,this.radius=A.radius,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}var z7=Y(()=>{ZQ()});class LJ{constructor(A=0,Q=0,I=0,B=0){this.type="ellipse",this.x=A,this.y=Q,this.halfWidth=I,this.halfHeight=B}clone(){return new LJ(this.x,this.y,this.halfWidth,this.halfHeight)}contains(A,Q){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let I=(A-this.x)/this.halfWidth,B=(Q-this.y)/this.halfHeight;return I*=I,B*=B,I+B<=1}strokeContains(A,Q,I,B=0.5){let{halfWidth:E,halfHeight:C}=this;if(E<=0||C<=0)return!1;let J=I*(1-B),K=I-J,H=E-K,Z=C-K,q=E+J,w=C+J,$=A-this.x,U=Q-this.y,V=$*$/(H*H)+U*U/(Z*Z),z=$*$/(q*q)+U*U/(w*w);return V>1&&z<=1}getBounds(A){return A||(A=new EA),A.x=this.x-this.halfWidth,A.y=this.y-this.halfHeight,A.width=this.halfWidth*2,A.height=this.halfHeight*2,A}copyFrom(A){return this.x=A.x,this.y=A.y,this.halfWidth=A.halfWidth,this.halfHeight=A.halfHeight,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}var D7=Y(()=>{ZQ()});class rE{constructor(...A){this.type="polygon";let Q=Array.isArray(A[0])?A[0]:A;if(typeof Q[0]!=="number"){let I=[];for(let B=0,E=Q.length;B<E;B++)I.push(Q[B].x,Q[B].y);Q=I}this.points=Q,this.closePath=!0}isClockwise(){let A=0,Q=this.points,I=Q.length;for(let B=0;B<I;B+=2){let E=Q[B],C=Q[B+1],J=Q[(B+2)%I],K=Q[(B+3)%I];A+=(J-E)*(K+C)}return A<0}containsPolygon(A){let Q=this.getBounds(JM),I=A.getBounds(KM);if(!Q.containsRect(I))return!1;let B=A.points;for(let E=0;E<B.length;E+=2){let C=B[E],J=B[E+1];if(!this.contains(C,J))return!1}return!0}clone(){let A=this.points.slice(),Q=new rE(A);return Q.closePath=this.closePath,Q}contains(A,Q){let I=!1,B=this.points.length/2;for(let E=0,C=B-1;E<B;C=E++){let J=this.points[E*2],K=this.points[E*2+1],H=this.points[C*2],Z=this.points[C*2+1];if(K>Q!==Z>Q&&A<(H-J)*((Q-K)/(Z-K))+J)I=!I}return I}strokeContains(A,Q,I,B=0.5){let E=I*I,C=E*(1-B),J=E-C,{points:K}=this,H=K.length-(this.closePath?0:2);for(let Z=0;Z<H;Z+=2){let q=K[Z],w=K[Z+1],$=K[(Z+2)%K.length],U=K[(Z+3)%K.length],V=JZ(A,Q,q,w,$,U),z=Math.sign(($-q)*(Q-w)-(U-w)*(A-q));if(V<=(z<0?J:C))return!0}return!1}getBounds(A){A||(A=new EA);let Q=this.points,I=1/0,B=-1/0,E=1/0,C=-1/0;for(let J=0,K=Q.length;J<K;J+=2){let H=Q[J],Z=Q[J+1];I=H<I?H:I,B=H>B?H:B,E=Z<E?Z:E,C=Z>C?Z:C}return A.x=I,A.width=B-I,A.y=E,A.height=C-E,A}copyFrom(A){return this.points=A.points.slice(),this.closePath=A.closePath,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((A,Q)=>`${A}, ${Q}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return c("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return c("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}var JM,KM;var W7=Y(()=>{gA();KZ();ZQ()});class RJ{constructor(A=0,Q=0,I=0,B=0,E=20){this.type="roundedRectangle",this.x=A,this.y=Q,this.width=I,this.height=B,this.radius=E}getBounds(A){return A||(A=new EA),A.x=this.x,A.y=this.y,A.width=this.width,A.height=this.height,A}clone(){return new RJ(this.x,this.y,this.width,this.height,this.radius)}copyFrom(A){return this.x=A.x,this.y=A.y,this.width=A.width,this.height=A.height,this}copyTo(A){return A.copyFrom(this),A}contains(A,Q){if(this.width<=0||this.height<=0)return!1;if(A>=this.x&&A<=this.x+this.width){if(Q>=this.y&&Q<=this.y+this.height){let I=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(Q>=this.y+I&&Q<=this.y+this.height-I||A>=this.x+I&&A<=this.x+this.width-I)return!0;let B=A-(this.x+I),E=Q-(this.y+I),C=I*I;if(B*B+E*E<=C)return!0;if(B=A-(this.x+this.width-I),B*B+E*E<=C)return!0;if(E=Q-(this.y+this.height-I),B*B+E*E<=C)return!0;if(B=A-(this.x+I),B*B+E*E<=C)return!0}}return!1}strokeContains(A,Q,I,B=0.5){let{x:E,y:C,width:J,height:K,radius:H}=this,Z=I*(1-B),q=I-Z,w=E+H,$=C+H,U=J-H*2,V=K-H*2,z=E+J,D=C+K;if((A>=E-Z&&A<=E+q||A>=z-q&&A<=z+Z)&&Q>=$&&Q<=$+V)return!0;if((Q>=C-Z&&Q<=C+q||Q>=D-q&&Q<=D+Z)&&A>=w&&A<=w+U)return!0;return A<w&&Q<$&&X7(A,Q,w,$,H,q,Z)||A>z-H&&Q<$&&X7(A,Q,z-H,$,H,q,Z)||A>z-H&&Q>D-H&&X7(A,Q,z-H,D-H,H,q,Z)||A<w&&Q>D-H&&X7(A,Q,w,D-H,H,q,Z)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var X7=(A,Q,I,B,E,C,J)=>{let K=A-I,H=Q-B,Z=Math.sqrt(K*K+H*H);return Z>=E-C&&Z<=E+J};var k7=Y(()=>{ZQ()});var c2=Y(()=>{KZ();ZQ()});var d2=Y(()=>{VE();NA();PH();mC();KZ();HE();aQ();N7();z7();D7();W7();ZQ();k7();c2()});function PJ(A,Q){Q.clear();let I=Q.matrix;for(let B=0;B<A.length;B++){let E=A[B];if(E.globalDisplayStatus<7)continue;let C=E.renderGroup??E.parentRenderGroup;if(C?.isCachedAsTexture)Q.matrix=$F.copyFrom(C.textureOffsetInverseTransform).append(E.worldTransform);else if(C?._parentCacheAsTextureRenderGroup)Q.matrix=$F.copyFrom(C._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(E.groupTransform);else Q.matrix=E.worldTransform;Q.addBounds(E.bounds)}return Q.matrix=I,Q}var $F;var ZZ=Y(()=>{d2();NA();$F=new x});class UF{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new RA,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}}class MJ{constructor(A){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new PA({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new fQ({}),this.renderer=A}get activeBackTexture(){return this._activeFilterData?.backTexture}push(A){let Q=this.renderer,I=A.filterEffect.filters,B=this._pushFilterData();B.skip=!1,B.filters=I,B.container=A.container,B.outputRenderSurface=Q.renderTarget.renderSurface;let E=Q.renderTarget.renderTarget.colorTexture.source,C=E.resolution,J=E.antialias;if(I.every(($)=>!$.enabled)){B.skip=!0;return}let K=B.bounds;if(this._calculateFilterArea(A,K),this._calculateFilterBounds(B,Q.renderTarget.rootViewPort,J,C,1),B.skip)return;let H=this._getPreviousFilterData(),Z=this._findFilterResolution(C),q=0,w=0;if(H)q=H.bounds.minX,w=H.bounds.minY;this._calculateGlobalFrame(B,q,w,Z,E.width,E.height),this._setupFilterTextures(B,K,Q,H)}generateFilteredTexture({texture:A,filters:Q}){let I=this._pushFilterData();this._activeFilterData=I,I.skip=!1,I.filters=Q;let B=A.source,E=B.resolution,C=B.antialias;if(Q.every(($)=>!$.enabled))return I.skip=!0,A;let J=I.bounds;if(J.addRect(A.frame),this._calculateFilterBounds(I,J.rectangle,C,E,0),I.skip)return A;let K=E,H=0,Z=0;this._calculateGlobalFrame(I,H,Z,K,B.width,B.height),I.outputRenderSurface=hA.getOptimalTexture(J.width,J.height,I.resolution,I.antialias),I.backTexture=v.EMPTY,I.inputTexture=A,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(I,!0);let w=I.outputRenderSurface;return w.source.alphaMode="premultiplied-alpha",w}pop(){let A=this.renderer,Q=this._popFilterData();if(Q.skip)return;if(A.globalUniforms.pop(),A.renderTarget.finishRenderPass(),this._activeFilterData=Q,this._applyFiltersToTexture(Q,!1),Q.blendRequired)hA.returnTexture(Q.backTexture);hA.returnTexture(Q.inputTexture)}getBackTexture(A,Q,I){let B=A.colorTexture.source._resolution,E=hA.getOptimalTexture(Q.width,Q.height,B,!1),C=Q.minX,J=Q.minY;if(I)C-=I.minX,J-=I.minY;C=Math.floor(C*B),J=Math.floor(J*B);let K=Math.ceil(Q.width*B),H=Math.ceil(Q.height*B);return this.renderer.renderTarget.copyToTexture(A,E,{x:C,y:J},{width:K,height:H},{x:0,y:0}),E}applyFilter(A,Q,I,B){let E=this.renderer,C=this._activeFilterData,K=C.outputRenderSurface===I,H=E.renderTarget.rootRenderTarget.colorTexture.source._resolution,Z=this._findFilterResolution(H),q=0,w=0;if(K){let U=this._findPreviousFilterOffset();q=U.x,w=U.y}this._updateFilterUniforms(Q,I,C,q,w,Z,K,B);let $=A.enabled?A:this._getPassthroughFilter();this._setupBindGroupsAndRender($,Q,E)}calculateSpriteMatrix(A,Q){let I=this._activeFilterData,B=A.set(I.inputTexture._source.width,0,0,I.inputTexture._source.height,I.bounds.minX,I.bounds.minY),E=Q.worldTransform.copyTo(x.shared),C=Q.renderGroup||Q.parentRenderGroup;if(C&&C.cacheToLocalTransform)E.prepend(C.cacheToLocalTransform);return E.invert(),B.prepend(E),B.scale(1/Q.texture.orig.width,1/Q.texture.orig.height),B.translate(Q.anchor.x,Q.anchor.y),B}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??(this._passthroughFilter=new EZ),this._passthroughFilter}_setupBindGroupsAndRender(A,Q,I){if(I.renderPipes.uniformBatch){let B=I.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(B,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);if(this._globalFilterBindGroup.setResource(Q.source,1),this._globalFilterBindGroup.setResource(Q.source.style,2),A.groups[0]=this._globalFilterBindGroup,I.encoder.draw({geometry:qM,shader:A,state:A._state,topology:"triangle-list"}),I.type===cA.WEBGL)I.renderTarget.finishRenderPass()}_setupFilterTextures(A,Q,I,B){if(A.backTexture=v.EMPTY,A.inputTexture=hA.getOptimalTexture(Q.width,Q.height,A.resolution,A.antialias),A.blendRequired){I.renderTarget.finishRenderPass();let E=I.renderTarget.getRenderTarget(A.outputRenderSurface);A.backTexture=this.getBackTexture(E,Q,B?.bounds)}I.renderTarget.bind(A.inputTexture,!0),I.globalUniforms.push({offset:Q})}_calculateGlobalFrame(A,Q,I,B,E,C){let J=A.globalFrame;J.x=Q*B,J.y=I*B,J.width=E*B,J.height=C*B}_updateFilterUniforms(A,Q,I,B,E,C,J,K){let H=this._filterGlobalUniforms.uniforms,Z=H.uOutputFrame,q=H.uInputSize,w=H.uInputPixel,$=H.uInputClamp,U=H.uGlobalFrame,V=H.uOutputTexture;if(J)Z[0]=I.bounds.minX-B,Z[1]=I.bounds.minY-E;else Z[0]=0,Z[1]=0;Z[2]=A.frame.width,Z[3]=A.frame.height,q[0]=A.source.width,q[1]=A.source.height,q[2]=1/q[0],q[3]=1/q[1],w[0]=A.source.pixelWidth,w[1]=A.source.pixelHeight,w[2]=1/w[0],w[3]=1/w[1],$[0]=0.5*w[2],$[1]=0.5*w[3],$[2]=A.frame.width*q[2]-0.5*w[2],$[3]=A.frame.height*q[3]-0.5*w[3];let z=this.renderer.renderTarget.rootRenderTarget.colorTexture;if(U[0]=B*C,U[1]=E*C,U[2]=z.source.width*C,U[3]=z.source.height*C,Q instanceof v)Q.source.resource=null;let D=this.renderer.renderTarget.getRenderTarget(Q);if(this.renderer.renderTarget.bind(Q,!!K),Q instanceof v)V[0]=Q.frame.width,V[1]=Q.frame.height;else V[0]=D.width,V[1]=D.height;V[2]=D.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(A){let Q=this._filterStackIndex-1;while(Q>0&&this._filterStack[Q].skip)--Q;return Q>0&&this._filterStack[Q].inputTexture?this._filterStack[Q].inputTexture.source._resolution:A}_findPreviousFilterOffset(){let A=0,Q=0,I=this._filterStackIndex;while(I>0){I--;let B=this._filterStack[I];if(!B.skip){A=B.bounds.minX,Q=B.bounds.minY;break}}return{x:A,y:Q}}_calculateFilterArea(A,Q){if(A.renderables)PJ(A.renderables,Q);else if(A.filterEffect.filterArea)Q.clear(),Q.addRect(A.filterEffect.filterArea),Q.applyMatrix(A.container.worldTransform);else A.container.getFastGlobalBounds(!0,Q);if(A.container){let B=(A.container.renderGroup||A.container.parentRenderGroup).cacheToLocalTransform;if(B)Q.applyMatrix(B)}}_applyFiltersToTexture(A,Q){let{inputTexture:I,bounds:B,filters:E,firstEnabledIndex:C,lastEnabledIndex:J}=A;if(this._globalFilterBindGroup.setResource(I.source.style,2),this._globalFilterBindGroup.setResource(A.backTexture.source,3),C===J)E[C].apply(this,I,A.outputRenderSurface,Q);else{let K=A.inputTexture,H=hA.getOptimalTexture(B.width,B.height,K.source._resolution,!1),Z=H;for(let q=C;q<J;q++){let w=E[q];if(!w.enabled)continue;w.apply(this,K,Z,!0);let $=K;K=Z,Z=$}E[J].apply(this,K,A.outputRenderSurface,Q),hA.returnTexture(H)}}_calculateFilterBounds(A,Q,I,B,E){let C=this.renderer,J=A.bounds,K=A.filters,H=1/0,Z=0,q=!0,w=!1,$=!1,U=!0,V=-1,z=-1;for(let D=0;D<K.length;D++){let W=K[D];if(!W.enabled)continue;if(V===-1)V=D;if(z=D,H=Math.min(H,W.resolution==="inherit"?B:W.resolution),Z+=W.padding,W.antialias==="off")q=!1;else if(W.antialias==="inherit")q&&(q=I);if(!W.clipToViewport)U=!1;if(!(W.compatibleRenderers&C.type)){$=!1;break}if(W.blendRequired&&!(C.backBuffer?.useBackBuffer??!0)){n("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),$=!1;break}$=!0,w||(w=W.blendRequired)}if(!$){A.skip=!0;return}if(U)J.fitBounds(0,Q.width/B,0,Q.height/B);if(J.scale(H).ceil().scale(1/H).pad((Z|0)*E),!J.isPositive){A.skip=!0;return}A.antialias=q,A.resolution=H,A.blendRequired=w,A.firstEnabledIndex=V,A.lastEnabledIndex=z}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let A,Q=this._filterStackIndex-1;while(Q>0)if(Q--,A=this._filterStack[Q],!A.skip)break;return A}_pushFilterData(){let A=this._filterStack[this._filterStackIndex];if(!A)A=this._filterStack[this._filterStackIndex]=new UF;return this._filterStackIndex++,A}}var qM;var F7=Y(()=>{M();Y7();NA();TB();FE();XQ();FA();pI();nQ();_Q();ZZ();_A();qM=new UI({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});MJ.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"filter"}});var p2=Y(()=>{M();f5();F7();p.add(MJ);p.add(FJ)});var wM={};var VF=Y(()=>{ak();tk();R5();b5();p2()});var u2;var l2=Y(()=>{M();u2={extension:{type:N.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(() => (VF(),wM))}}});var YM={};var NF=Y(()=>{R5();b5();p2()});var i2;var n2=Y(()=>{M();i2={extension:{type:N.Environment,name:"webworker",priority:0},test:()=>typeof self!=="undefined"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(() => (NF(),YM))}}});var zF=Y(()=>{U5();N5()});var O7=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`;var G7=()=>{};var j7=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var L7=()=>{};var R7=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;var P7=()=>{};function DF(A){let{source:Q,functions:I,main:B}=A;return Q.replace("{FUNCTIONS}",I).replace("{MAIN}",B)}var XA;var EQ=Y(()=>{AI();YI();XQ();FA();iI();G7();L7();P7();XA=class XA extends hQ{constructor(A){let Q=A.gpu,I=DF({source:R7,...Q}),B=rA.from({vertex:{source:I,entryPoint:"mainVertex"},fragment:{source:I,entryPoint:"mainFragment"}}),E=A.gl,C=DF({source:O7,...E}),J=aA.from({vertex:j7,fragment:C}),K=new PA({uBlend:{value:1,type:"f32"}});super({gpuProgram:B,glProgram:J,blendRequired:!0,resources:{blendUniforms:K,uBackTexture:v.EMPTY}})}}});var tE=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `;var gJ=()=>{};var eE=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;var _J=()=>{};var M7;var o2=Y(()=>{M();EQ();gJ();_J();M7=class M7 extends XA{constructor(){super({gl:{functions:`
                ${tE}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${eE}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};M7.extension={name:"color",type:N.BlendMode}});var g7;var s2=Y(()=>{M();EQ();g7=class g7 extends XA{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};g7.extension={name:"color-burn",type:N.BlendMode}});var _7;var a2=Y(()=>{M();EQ();_7=class _7 extends XA{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};_7.extension={name:"color-dodge",type:N.BlendMode}});var S7;var r2=Y(()=>{M();EQ();S7=class S7 extends XA{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};S7.extension={name:"darken",type:N.BlendMode}});var b7;var t2=Y(()=>{M();EQ();b7=class b7 extends XA{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};b7.extension={name:"difference",type:N.BlendMode}});var f7;var e2=Y(()=>{M();EQ();f7=class f7 extends XA{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};f7.extension={name:"divide",type:N.BlendMode}});var y7;var AD=Y(()=>{M();EQ();y7=class y7 extends XA{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};y7.extension={name:"exclusion",type:N.BlendMode}});var v7;var QD=Y(()=>{M();EQ();v7=class v7 extends XA{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};v7.extension={name:"hard-light",type:N.BlendMode}});var T7;var ID=Y(()=>{M();EQ();T7=class T7 extends XA{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};T7.extension={name:"hard-mix",type:N.BlendMode}});var h7;var BD=Y(()=>{M();EQ();h7=class h7 extends XA{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};h7.extension={name:"lighten",type:N.BlendMode}});var x7;var ED=Y(()=>{M();EQ();x7=class x7 extends XA{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};x7.extension={name:"linear-burn",type:N.BlendMode}});var m7;var CD=Y(()=>{M();EQ();m7=class m7 extends XA{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};m7.extension={name:"linear-dodge",type:N.BlendMode}});var c7;var JD=Y(()=>{M();EQ();c7=class c7 extends XA{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};c7.extension={name:"linear-light",type:N.BlendMode}});var d7;var KD=Y(()=>{M();EQ();gJ();_J();d7=class d7 extends XA{constructor(){super({gl:{functions:`
                ${tE}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${eE}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};d7.extension={name:"luminosity",type:N.BlendMode}});var p7;var HD=Y(()=>{M();EQ();p7=class p7 extends XA{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};p7.extension={name:"negation",type:N.BlendMode}});var u7;var ZD=Y(()=>{M();EQ();u7=class u7 extends XA{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};u7.extension={name:"overlay",type:N.BlendMode}});var l7;var qD=Y(()=>{M();EQ();l7=class l7 extends XA{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};l7.extension={name:"pin-light",type:N.BlendMode}});var i7;var wD=Y(()=>{M();EQ();gJ();_J();i7=class i7 extends XA{constructor(){super({gl:{functions:`
                ${tE}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${eE}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};i7.extension={name:"saturation",type:N.BlendMode}});var n7;var YD=Y(()=>{M();EQ();n7=class n7 extends XA{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};n7.extension={name:"soft-light",type:N.BlendMode}});var o7;var $D=Y(()=>{M();EQ();o7=class o7 extends XA{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};o7.extension={name:"subtract",type:N.BlendMode}});var s7;var UD=Y(()=>{M();EQ();s7=class s7 extends XA{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};s7.extension={name:"vivid-light",type:N.BlendMode}});var WF=Y(()=>{o2();s2();a2();r2();t2();e2();AD();QD();ID();BD();ED();CD();JD();KD();HD();ZD();qD();wD();YD();$D();UD()});async function a7(A){if(A)return;for(let Q=0;Q<VD.length;Q++){let I=VD[Q];if(I.value.test()){await I.value.load();return}}}var VD;var r7=Y(()=>{M();VD=[];p.handleByNamedList(N.Environment,VD)});function SJ(){if(typeof qZ==="boolean")return qZ;try{qZ=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch(A){qZ=!1}return qZ}var qZ;var wZ=()=>{};function A1(A,Q,I=2){let B=Q&&Q.length,E=B?Q[0]*I:A.length,C=kF(A,0,E,I,!0),J=[];if(!C||C.next===C.prev)return J;let K,H,Z;if(B)C=zM(A,Q,C,I);if(A.length>80*I){K=A[0],H=A[1];let q=K,w=H;for(let $=I;$<E;$+=I){let U=A[$],V=A[$+1];if(U<K)K=U;if(V<H)H=V;if(U>q)q=U;if(V>w)w=V}Z=Math.max(q-K,w-H),Z=Z!==0?32767/Z:0}return $Z(C,J,I,K,H,Z,0),J}function kF(A,Q,I,B,E){let C;if(E===PM(A,Q,I,B)>0)for(let J=Q;J<I;J+=B)C=XF(J/B|0,A[J],A[J+1],C);else for(let J=I-B;J>=Q;J-=B)C=XF(J/B|0,A[J],A[J+1],C);if(C&&bJ(C,C.next))VZ(C),C=C.next;return C}function B0(A,Q){if(!A)return A;if(!Q)Q=A;let I=A,B;do if(B=!1,!I.steiner&&(bJ(I,I.next)||$Q(I.prev,I,I.next)===0)){if(VZ(I),I=Q=I.prev,I===I.next)break;B=!0}else I=I.next;while(B||I!==Q);return Q}function $Z(A,Q,I,B,E,C,J){if(!A)return;if(!J&&C)FM(A,B,E,C);let K=A;while(A.prev!==A.next){let{prev:H,next:Z}=A;if(C?UM(A,B,E,C):$M(A)){Q.push(H.i,A.i,Z.i),VZ(A),A=Z.next,K=Z.next;continue}if(A=Z,A===K){if(!J)$Z(B0(A),Q,I,B,E,C,1);else if(J===1)A=VM(B0(A),Q),$Z(A,Q,I,B,E,C,2);else if(J===2)NM(A,Q,I,B,E,C);break}}}function $M(A){let Q=A.prev,I=A,B=A.next;if($Q(Q,I,B)>=0)return!1;let E=Q.x,C=I.x,J=B.x,K=Q.y,H=I.y,Z=B.y,q=Math.min(E,C,J),w=Math.min(K,H,Z),$=Math.max(E,C,J),U=Math.max(K,H,Z),V=B.next;while(V!==Q){if(V.x>=q&&V.x<=$&&V.y>=w&&V.y<=U&&YZ(E,K,C,H,J,Z,V.x,V.y)&&$Q(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function UM(A,Q,I,B){let E=A.prev,C=A,J=A.next;if($Q(E,C,J)>=0)return!1;let K=E.x,H=C.x,Z=J.x,q=E.y,w=C.y,$=J.y,U=Math.min(K,H,Z),V=Math.min(q,w,$),z=Math.max(K,H,Z),D=Math.max(q,w,$),W=ND(U,V,Q,I,B),j=ND(z,D,Q,I,B),O=A.prevZ,F=A.nextZ;while(O&&O.z>=W&&F&&F.z<=j){if(O.x>=U&&O.x<=z&&O.y>=V&&O.y<=D&&O!==E&&O!==J&&YZ(K,q,H,w,Z,$,O.x,O.y)&&$Q(O.prev,O,O.next)>=0)return!1;if(O=O.prevZ,F.x>=U&&F.x<=z&&F.y>=V&&F.y<=D&&F!==E&&F!==J&&YZ(K,q,H,w,Z,$,F.x,F.y)&&$Q(F.prev,F,F.next)>=0)return!1;F=F.nextZ}while(O&&O.z>=W){if(O.x>=U&&O.x<=z&&O.y>=V&&O.y<=D&&O!==E&&O!==J&&YZ(K,q,H,w,Z,$,O.x,O.y)&&$Q(O.prev,O,O.next)>=0)return!1;O=O.prevZ}while(F&&F.z<=j){if(F.x>=U&&F.x<=z&&F.y>=V&&F.y<=D&&F!==E&&F!==J&&YZ(K,q,H,w,Z,$,F.x,F.y)&&$Q(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function VM(A,Q){let I=A;do{let B=I.prev,E=I.next.next;if(!bJ(B,E)&&OF(B,I,I.next,E)&&UZ(B,E)&&UZ(E,B))Q.push(B.i,I.i,E.i),VZ(I),VZ(I.next),I=A=E;I=I.next}while(I!==A);return B0(I)}function NM(A,Q,I,B,E,C){let J=A;do{let K=J.next.next;while(K!==J.prev){if(J.i!==K.i&&jM(J,K)){let H=GF(J,K);J=B0(J,J.next),H=B0(H,H.next),$Z(J,Q,I,B,E,C,0),$Z(H,Q,I,B,E,C,0);return}K=K.next}J=J.next}while(J!==A)}function zM(A,Q,I,B){let E=[];for(let C=0,J=Q.length;C<J;C++){let K=Q[C]*B,H=C<J-1?Q[C+1]*B:A.length,Z=kF(A,K,H,B,!1);if(Z===Z.next)Z.steiner=!0;E.push(GM(Z))}E.sort(DM);for(let C=0;C<E.length;C++)I=WM(E[C],I);return I}function DM(A,Q){let I=A.x-Q.x;if(I===0){if(I=A.y-Q.y,I===0){let B=(A.next.y-A.y)/(A.next.x-A.x),E=(Q.next.y-Q.y)/(Q.next.x-Q.x);I=B-E}}return I}function WM(A,Q){let I=XM(A,Q);if(!I)return Q;let B=GF(I,A);return B0(B,B.next),B0(I,I.next)}function XM(A,Q){let I=Q,B=A.x,E=A.y,C=-1/0,J;if(bJ(A,I))return I;do{if(bJ(A,I.next))return I.next;else if(E<=I.y&&E>=I.next.y&&I.next.y!==I.y){let w=I.x+(E-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(w<=B&&w>C){if(C=w,J=I.x<I.next.x?I:I.next,w===B)return J}}I=I.next}while(I!==Q);if(!J)return null;let K=J,H=J.x,Z=J.y,q=1/0;I=J;do{if(B>=I.x&&I.x>=H&&B!==I.x&&FF(E<Z?B:C,E,H,Z,E<Z?C:B,E,I.x,I.y)){let w=Math.abs(E-I.y)/(B-I.x);if(UZ(I,A)&&(w<q||w===q&&(I.x>J.x||I.x===J.x&&kM(J,I))))J=I,q=w}I=I.next}while(I!==K);return J}function kM(A,Q){return $Q(A.prev,A,Q.prev)<0&&$Q(Q.next,A,A.next)<0}function FM(A,Q,I,B){let E=A;do{if(E.z===0)E.z=ND(E.x,E.y,Q,I,B);E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==A);E.prevZ.nextZ=null,E.prevZ=null,OM(E)}function OM(A){let Q,I=1;do{let B=A,E;A=null;let C=null;Q=0;while(B){Q++;let J=B,K=0;for(let Z=0;Z<I;Z++)if(K++,J=J.nextZ,!J)break;let H=I;while(K>0||H>0&&J){if(K!==0&&(H===0||!J||B.z<=J.z))E=B,B=B.nextZ,K--;else E=J,J=J.nextZ,H--;if(C)C.nextZ=E;else A=E;E.prevZ=C,C=E}B=J}C.nextZ=null,I*=2}while(Q>1);return A}function ND(A,Q,I,B,E){return A=(A-I)*E|0,Q=(Q-B)*E|0,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,Q=(Q|Q<<8)&16711935,Q=(Q|Q<<4)&252645135,Q=(Q|Q<<2)&858993459,Q=(Q|Q<<1)&1431655765,A|Q<<1}function GM(A){let Q=A,I=A;do{if(Q.x<I.x||Q.x===I.x&&Q.y<I.y)I=Q;Q=Q.next}while(Q!==A);return I}function FF(A,Q,I,B,E,C,J,K){return(E-J)*(Q-K)>=(A-J)*(C-K)&&(A-J)*(B-K)>=(I-J)*(Q-K)&&(I-J)*(C-K)>=(E-J)*(B-K)}function YZ(A,Q,I,B,E,C,J,K){return!(A===J&&Q===K)&&FF(A,Q,I,B,E,C,J,K)}function jM(A,Q){return A.next.i!==Q.i&&A.prev.i!==Q.i&&!LM(A,Q)&&(UZ(A,Q)&&UZ(Q,A)&&RM(A,Q)&&($Q(A.prev,A,Q.prev)||$Q(A,Q.prev,Q))||bJ(A,Q)&&$Q(A.prev,A,A.next)>0&&$Q(Q.prev,Q,Q.next)>0)}function $Q(A,Q,I){return(Q.y-A.y)*(I.x-Q.x)-(Q.x-A.x)*(I.y-Q.y)}function bJ(A,Q){return A.x===Q.x&&A.y===Q.y}function OF(A,Q,I,B){let E=e7($Q(A,Q,I)),C=e7($Q(A,Q,B)),J=e7($Q(I,B,A)),K=e7($Q(I,B,Q));if(E!==C&&J!==K)return!0;if(E===0&&t7(A,I,Q))return!0;if(C===0&&t7(A,B,Q))return!0;if(J===0&&t7(I,A,B))return!0;if(K===0&&t7(I,Q,B))return!0;return!1}function t7(A,Q,I){return Q.x<=Math.max(A.x,I.x)&&Q.x>=Math.min(A.x,I.x)&&Q.y<=Math.max(A.y,I.y)&&Q.y>=Math.min(A.y,I.y)}function e7(A){return A>0?1:A<0?-1:0}function LM(A,Q){let I=A;do{if(I.i!==A.i&&I.next.i!==A.i&&I.i!==Q.i&&I.next.i!==Q.i&&OF(I,I.next,A,Q))return!0;I=I.next}while(I!==A);return!1}function UZ(A,Q){return $Q(A.prev,A,A.next)<0?$Q(A,Q,A.next)>=0&&$Q(A,A.prev,Q)>=0:$Q(A,Q,A.prev)<0||$Q(A,A.next,Q)<0}function RM(A,Q){let I=A,B=!1,E=(A.x+Q.x)/2,C=(A.y+Q.y)/2;do{if(I.y>C!==I.next.y>C&&I.next.y!==I.y&&E<(I.next.x-I.x)*(C-I.y)/(I.next.y-I.y)+I.x)B=!B;I=I.next}while(I!==A);return B}function GF(A,Q){let I=zD(A.i,A.x,A.y),B=zD(Q.i,Q.x,Q.y),E=A.next,C=Q.prev;return A.next=Q,Q.prev=A,I.next=E,E.prev=I,B.next=I,I.prev=B,C.next=B,B.prev=C,B}function XF(A,Q,I,B){let E=zD(A,Q,I);if(!B)E.prev=E,E.next=E;else E.next=B.next,E.prev=B,B.next.prev=E,B.next=E;return E}function VZ(A){if(A.next.prev=A.prev,A.prev.next=A.next,A.prevZ)A.prevZ.nextZ=A.nextZ;if(A.nextZ)A.nextZ.prevZ=A.prevZ}function zD(A,Q,I){return{i:A,x:Q,y:I,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function PM(A,Q,I,B){let E=0;for(let C=Q,J=I-B;C<I;C+=B)E+=(A[J]-A[C])*(A[C+1]+A[J+1]),J=C;return E}var Q1;var NZ=Y(()=>{yQ();Q1=A1.default||A1});var PQ;var AC=Y(()=>{PQ=((A)=>{return A[A.NONE=0]="NONE",A[A.COLOR=16384]="COLOR",A[A.STENCIL=1024]="STENCIL",A[A.DEPTH=256]="DEPTH",A[A.COLOR_DEPTH=16640]="COLOR_DEPTH",A[A.COLOR_STENCIL=17408]="COLOR_STENCIL",A[A.DEPTH_STENCIL=1280]="DEPTH_STENCIL",A[A.ALL=17664]="ALL",A})(PQ||{})});class E0{constructor(A){this.items=[],this._name=A}emit(A,Q,I,B,E,C,J,K){let{name:H,items:Z}=this;for(let q=0,w=Z.length;q<w;q++)Z[q][H](A,Q,I,B,E,C,J,K);return this}add(A){if(A[this._name])this.remove(A),this.items.push(A);return this}remove(A){let Q=this.items.indexOf(A);if(Q!==-1)this.items.splice(Q,1);return this}contains(A){return this.items.indexOf(A)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}var zZ=()=>{};var MM,jF,nI;var QC=Y(()=>{IQ();r7();TQ();wZ();HQ();gA();ZE();NZ();AC();zZ();yQ();MM=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],jF=class A extends mA{constructor(Q){super();this.tick=0,this.uid=VA("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=Q.type,this.name=Q.name,this.config=Q;let I=[...MM,...this.config.runners??[]];this._addRunners(...I),this._unsafeEvalCheck()}async init(Q={}){let I=Q.skipExtensionImports===!0?!0:Q.manageImports===!1;await a7(I),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let B in this._systemsHash)Q={...this._systemsHash[B].constructor.defaultOptions,...Q};Q={...A.defaultOptions,...Q},this._roundPixels=Q.roundPixels?1:0;for(let B=0;B<this.runners.init.items.length;B++)await this.runners.init.items[B].init(Q);this._initOptions=Q}render(Q,I){this.tick++;let B=Q;if(B instanceof QA){if(B={container:B},I)c(BA,"passing a second argument is deprecated, please use render options instead"),B.target=I.renderTexture}if(B.target||(B.target=this.view.renderTarget),B.target===this.view.renderTarget)this._lastObjectRendered=B.container,B.clearColor??(B.clearColor=this.background.colorRgba),B.clear??(B.clear=this.background.clearBeforeRender);if(B.clearColor){let E=Array.isArray(B.clearColor)&&B.clearColor.length===4;B.clearColor=E?B.clearColor:JA.shared.setValue(B.clearColor).toArray()}if(!B.transform)B.container.updateLocalTransform(),B.transform=B.container.localTransform;if(!B.container.visible)return;B.container.enableRenderGroup(),this.runners.prerender.emit(B),this.runners.renderStart.emit(B),this.runners.render.emit(B),this.runners.renderEnd.emit(B),this.runners.postrender.emit(B)}resize(Q,I,B){let E=this.view.resolution;if(this.view.resize(Q,I,B),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),B!==void 0&&B!==E)this.runners.resolutionChange.emit(B)}clear(Q={}){let I=this;Q.target||(Q.target=I.renderTarget.renderTarget),Q.clearColor||(Q.clearColor=this.background.colorRgba),Q.clear??(Q.clear=PQ.ALL);let{clear:B,clearColor:E,target:C,mipLevel:J,layer:K}=Q;JA.shared.setValue(E??this.background.colorRgba),I.renderTarget.clear(C,B,JA.shared.toArray(),J??0,K??0)}get resolution(){return this.view.resolution}set resolution(Q){this.view.resolution=Q,this.runners.resolutionChange.emit(Q)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...Q){Q.forEach((I)=>{this.runners[I]=new E0(I)})}_addSystems(Q){let I;for(I in Q){let B=Q[I];this._addSystem(B.value,B.name)}}_addSystem(Q,I){let B=new Q(this);if(this[I])throw new Error(`Whoops! The name "${I}" is already in use`);this[I]=B,this._systemsHash[I]=B;for(let E in this.runners)this.runners[E].add(B);return this}_addPipes(Q,I){let B=I.reduce((E,C)=>{return E[C.name]=C.value,E},{});Q.forEach((E)=>{let{value:C,name:J}=E,K=B[J];this.renderPipes[J]=new C(this,K?new K:null),this.runners.destroy.add(this.renderPipes[J])})}destroy(Q=!1){if(this.runners.destroy.items.reverse(),this.runners.destroy.emit(Q),Q===!0||typeof Q==="object"&&Q.releaseGlobalResources)WI.release();Object.values(this.runners).forEach((I)=>{I.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(Q){return this.textureGenerator.generateTexture(Q)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!SJ())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};jF.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};nI=jF});function xB(A){if(I1!==void 0)return I1;return I1=(()=>{let Q={stencil:!0,failIfMajorPerformanceCaveat:A??nI.defaultOptions.failIfMajorPerformanceCaveat};try{if(!u.get().getWebGLRenderingContext())return!1;let B=u.get().createCanvas().getContext("webgl",Q),E=!!B?.getContextAttributes()?.stencil;if(B){let C=B.getExtension("WEBGL_lose_context");if(C)C.loseContext()}return B=null,E}catch(I){return!1}})(),I1}var I1;var C0=Y(()=>{jA();QC()});async function mB(A={}){if(B1!==void 0)return B1;return B1=await(async()=>{let Q=u.get().getNavigator().gpu;if(!Q)return!1;try{return await(await Q.requestAdapter(A)).requestDevice(),!0}catch(I){return!1}})(),B1}var B1;var J0=Y(()=>{jA()});function IC(A,Q,I){let B=2166136261;for(let E=0;E<Q;E++)B^=A[E].uid,B=Math.imul(B,16777619),B>>>=0;return LF[B]||gM(A,Q,B,I)}function gM(A,Q,I,B){let E={},C=0;for(let K=0;K<B;K++){let H=K<Q?A[K]:v.EMPTY.source;E[C++]=H.source,E[C++]=H.style}let J=new fQ(E);return LF[I]=J,J}var LF;var fJ=Y(()=>{TB();FA();LF={}});function DZ(A,Q,I){if(A)for(let B in A){let E=B.toLocaleLowerCase(),C=Q[E];if(C){let J=A[B];if(B==="header")J=J.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"");if(I)C.push(`//----${I}----//`);C.push(J)}else n(`${B} placement hook does not exist in shader`)}}var E1=Y(()=>{_A()});function WZ(A){let Q={};return(A.match(_M)?.map((B)=>B.replace(/[{()}]/g,""))??[]).forEach((B)=>{Q[B]=[]}),Q}var _M;var C1=Y(()=>{_M=/\{\{(.*?)\}\}/g});function RF(A,Q){let I,B=/@in\s+([^;]+);/g;while((I=B.exec(A))!==null)Q.push(I[1])}function XZ(A,Q,I=!1){let B=[];RF(Q,B),A.forEach((K)=>{if(K.header)RF(K.header,B)});let E=B;if(I)E.sort();let C=E.map((K,H)=>`       @location(${H}) ${K},`).join(`
`),J=Q.replace(/@in\s+[^;]+;\s*/g,"");return J=J.replace("{{in}}",`
${C}
`),J}var J1=()=>{};function PF(A,Q){let I,B=/@out\s+([^;]+);/g;while((I=B.exec(A))!==null)Q.push(I[1])}function SM(A){let I=/\b(\w+)\s*:/g.exec(A);return I?I[1]:""}function bM(A){let Q=/@.*?\s+/g;return A.replace(Q,"")}function K1(A,Q){let I=[];PF(Q,I),A.forEach((H)=>{if(H.header)PF(H.header,I)});let B=0,E=I.sort().map((H)=>{if(H.indexOf("builtin")>-1)return H;return`@location(${B++}) ${H}`}).join(`,
`),C=I.sort().map((H)=>`       var ${bM(H)};`).join(`
`),J=`return VSOutput(
            ${I.sort().map((H)=>` ${SM(H)}`).join(`,
`)});`,K=Q.replace(/@out\s+[^;]+;\s*/g,"");return K=K.replace("{{struct}}",`
${E}
`),K=K.replace("{{start}}",`
${C}
`),K=K.replace("{{return}}",`
${J}
`),K}var H1=()=>{};function kZ(A,Q){let I=A;for(let B in Q){let E=Q[B];if(E.join(`
`).length)I=I.replace(`{{${B}}}`,`//-----${B} START-----//
${E.join(`
`)}
//----${B} FINISH----//`);else I=I.replace(`{{${B}}}`,"")}return I}var Z1=()=>{};function q1({template:A,bits:Q}){let I=MF(A,Q);if(BC[I])return BC[I];let{vertex:B,fragment:E}=yM(A,Q);return BC[I]=gF(B,E,Q),BC[I]}function w1({template:A,bits:Q}){let I=MF(A,Q);if(BC[I])return BC[I];return BC[I]=gF(A.vertex,A.fragment,Q),BC[I]}function yM(A,Q){let I=Q.map((J)=>J.vertex).filter((J)=>!!J),B=Q.map((J)=>J.fragment).filter((J)=>!!J),E=XZ(I,A.vertex,!0);E=K1(I,E);let C=XZ(B,A.fragment,!0);return{vertex:E,fragment:C}}function MF(A,Q){return Q.map((I)=>{if(!DD.has(I))DD.set(I,fM++);return DD.get(I)}).sort((I,B)=>I-B).join("-")+A.vertex+A.fragment}function gF(A,Q,I){let B=WZ(A),E=WZ(Q);return I.forEach((C)=>{DZ(C.vertex,B,C.name),DZ(C.fragment,E,C.name)}),{vertex:kZ(A,B),fragment:kZ(Q,E)}}var BC,DD,fM=0;var Y1=Y(()=>{E1();C1();J1();H1();Z1();BC=Object.create(null),DD=new Map});var $1=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,U1=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,V1=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,N1=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`;var z1=()=>{};var D1,W1;var X1=Y(()=>{D1={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},W1={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}}});function oI({bits:A,name:Q}){let I=q1({template:{fragment:U1,vertex:$1},bits:[D1,...A]});return rA.from({name:Q,vertex:{source:I.vertex,entryPoint:"main"},fragment:{source:I.fragment,entryPoint:"main"}})}function sI({bits:A,name:Q}){return new aA({name:Q,...w1({template:{vertex:V1,fragment:N1},bits:[W1,...A]})})}var cB=Y(()=>{AI();YI();Y1();z1();X1()});var EC,CC;var K0=Y(()=>{EC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},CC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}}});function vM(A){let Q=[];if(A===1)Q.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),Q.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let I=0;for(let B=0;B<A;B++)Q.push(`@group(1) @binding(${I++}) var textureSource${B+1}: texture_2d<f32>;`),Q.push(`@group(1) @binding(${I++}) var textureSampler${B+1}: sampler;`)}return Q.join(`
`)}function TM(A){let Q=[];if(A===1)Q.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{Q.push("switch vTextureId {");for(let I=0;I<A;I++){if(I===A-1)Q.push("  default:{");else Q.push(`  case ${I}:{`);Q.push(`      outColor = textureSampleGrad(textureSource${I+1}, textureSampler${I+1}, vUV, uvDx, uvDy);`),Q.push("      break;}")}Q.push("}")}return Q.join(`
`)}function JC(A){if(!WD[A])WD[A]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${vM(A)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${TM(A)}
            `}};return WD[A]}function hM(A){let Q=[];for(let I=0;I<A;I++){if(I>0)Q.push("else");if(I<A-1)Q.push(`if(vTextureId < ${I}.5)`);Q.push("{"),Q.push(`	outColor = texture(uTextures[${I}], vUV);`),Q.push("}")}return Q.join(`
`)}function KC(A){if(!XD[A])XD[A]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${A}];

            `,main:`

                ${hM(A)}
            `}};return XD[A]}var WD,XD;var H0=Y(()=>{WD={};XD={}});var OE,k1,HC;var ZC=Y(()=>{OE={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},k1={...OE,vertex:{...OE.vertex,header:OE.vertex.header.replace("group(1)","group(2)")}},HC={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}});var aI,rI;var dB=Y(()=>{aI={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},rI={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}}});class yJ{constructor(){this._maxTextures=0}contextChange(A){let Q=new PA({uTransformMatrix:{value:new x,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=A.limits.maxBatchableTextures;let I=oI({name:"graphics",bits:[EC,JC(this._maxTextures),k1,aI]});this.shader=new BQ({gpuProgram:I,resources:{localUniforms:Q}})}execute(A,Q){let I=Q.context,B=I.customShader||this.shader,E=A.renderer,C=E.graphicsContext,{batcher:J,instructions:K}=C.getContextRenderData(I),H=E.encoder;H.setGeometry(J.geometry,B.gpuProgram);let Z=E.globalUniforms.bindGroup;H.setBindGroup(0,Z,B.gpuProgram);let q=E.renderPipes.uniformBatch.getUniformBindGroup(B.resources.localUniforms,!0);H.setBindGroup(2,q,B.gpuProgram);let w=K.instructions,$=null;for(let U=0;U<K.instructionSize;U++){let V=w[U];if(V.topology!==$)$=V.topology,H.setPipelineFromGeometryProgramAndState(J.geometry,B.gpuProgram,A.state,V.topology);if(B.groups[1]=V.bindGroup,!V.gpuBindGroup){let z=V.textures;V.bindGroup=IC(z.textures,z.count,this._maxTextures),V.gpuBindGroup=E.bindGroup.getBindGroup(V.bindGroup,B.gpuProgram,1)}H.setBindGroup(1,V.bindGroup,B.gpuProgram),H.renderPassEncoder.drawIndexed(V.size,1,V.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}var F1=Y(()=>{M();NA();fJ();cB();K0();H0();ZC();dB();bI();XQ();yJ.extension={type:[N.WebGPUPipesAdaptor],name:"graphics"}});var O1,G1;var FZ=Y(()=>{O1={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},G1={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}}});class vJ{init(){let A=oI({name:"mesh",bits:[OE,O1,aI]});this._shader=new BQ({gpuProgram:A,resources:{uTexture:v.EMPTY._source,uSampler:v.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new x}}}})}execute(A,Q){let I=A.renderer,B=Q._shader;if(!B)B=this._shader,B.groups[2]=I.texture.getTextureBindGroup(Q.texture);else if(!B.gpuProgram){n("Mesh shader has no gpuProgram",Q.shader);return}let E=B.gpuProgram;if(E.autoAssignGlobalUniforms)B.groups[0]=I.globalUniforms.bindGroup;if(E.autoAssignLocalUniforms){let C=A.localUniforms;B.groups[1]=I.renderPipes.uniformBatch.getUniformBindGroup(C,!0)}I.encoder.draw({geometry:Q._geometry,shader:B,state:Q.state})}destroy(){this._shader.destroy(!0),this._shader=null}}var j1=Y(()=>{M();NA();cB();ZC();dB();FZ();bI();FA();_A();vJ.extension={type:[N.WebGPUPipesAdaptor],name:"mesh"}});class TJ{start(A,Q,I){let B=A.renderer,E=B.encoder,C=I.gpuProgram;this._shader=I,this._geometry=Q,E.setGeometry(Q,C),L1.blendMode="normal",B.pipeline.getPipeline(Q,C,L1);let J=B.globalUniforms.bindGroup;E.resetBindGroup(1),E.setBindGroup(0,J,C)}execute(A,Q){let I=this._shader.gpuProgram,B=A.renderer,E=B.encoder;if(!Q.bindGroup){let K=Q.textures;Q.bindGroup=IC(K.textures,K.count,B.limits.maxBatchableTextures)}L1.blendMode=Q.blendMode;let C=B.bindGroup.getBindGroup(Q.bindGroup,I,1),J=B.pipeline.getPipeline(this._geometry,I,L1,Q.topology);Q.bindGroup._touch(B.gc.now,B.tick),E.setPipeline(J),E.renderPassEncoder.setBindGroup(1,C),E.renderPassEncoder.drawIndexed(Q.size,1,Q.start)}}var L1;var R1=Y(()=>{M();$I();fJ();L1=oA.for2d();TJ.extension={type:[N.WebGPUPipesAdaptor],name:"batch"}});class qC{constructor(A){this._renderer=A}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(A,Q){this._renderer.renderPipes.batch.break(Q),Q.add(A)}execute(A){if(!A.isRenderable)return;A.render(this._renderer)}destroy(){this._renderer=null}}var OZ=Y(()=>{M();qC.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"customRender"}});class NB{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}var Z0=()=>{};function q0(A,Q){let I=A.instructionSet,B=I.instructions;for(let E=0;E<I.instructionSize;E++){let C=B[E];Q[C.renderPipeId].execute(C)}}var GZ=()=>{};class wC{constructor(A){this._renderer=A}addRenderGroup(A,Q){if(A.isCachedAsTexture)this._addRenderableCacheAsTexture(A,Q);else this._addRenderableDirect(A,Q)}execute(A){if(!A.isRenderable)return;if(A.isCachedAsTexture)this._executeCacheAsTexture(A);else this._executeDirect(A)}destroy(){this._renderer=null}_addRenderableDirect(A,Q){if(this._renderer.renderPipes.batch.break(Q),A._batchableRenderGroup)yA.return(A._batchableRenderGroup),A._batchableRenderGroup=null;Q.add(A)}_addRenderableCacheAsTexture(A,Q){let I=A._batchableRenderGroup??(A._batchableRenderGroup=yA.get(NB));I.renderable=A.root,I.transform=A.root.relativeGroupTransform,I.texture=A.texture,I.bounds=A._textureBounds,Q.add(A),this._renderer.renderPipes.blendMode.pushBlendMode(A,A.root.groupBlendMode,Q),this._renderer.renderPipes.batch.addToBatch(I,Q),this._renderer.renderPipes.blendMode.popBlendMode(Q)}_executeCacheAsTexture(A){if(A.textureNeedsUpdate){A.textureNeedsUpdate=!1;let Q=new x().translate(-A._textureBounds.x,-A._textureBounds.y);this._renderer.renderTarget.push(A.texture,!0,null,A.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:Q,worldColor:4294967295,offset:{x:0,y:0}}),q0(A,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}A._batchableRenderGroup._batcher.updateElement(A._batchableRenderGroup),A._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(A){this._renderer.globalUniforms.push({worldTransformMatrix:A.inverseParentTextureTransform,worldColor:A.worldColorAlpha}),q0(A,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}var jZ=Y(()=>{M();NA();dI();Z0();GZ();wC.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"renderGroup"}});function w0(A,Q){Q||(Q=0);for(let I=Q;I<A.length;I++)if(A[I])A[I]=null;else break}var LZ=()=>{};function RZ(A,Q=!1){kD(A);let I=A.childrenToUpdate,B=A.updateTick++;for(let E in I){let C=Number(E),J=I[E],K=J.list,H=J.index;for(let Z=0;Z<H;Z++){let q=K[Z];if(q.parentRenderGroup===A&&q.relativeRenderGroupDepth===C)P1(q,B,0)}w0(K,H),J.index=0}if(Q)for(let E=0;E<A.renderGroupChildren.length;E++)RZ(A.renderGroupChildren[E],Q)}function kD(A){let Q=A.root,I;if(A.renderGroupParent){let B=A.renderGroupParent;A.worldTransform.appendFrom(Q.relativeGroupTransform,B.worldTransform),A.worldColor=uE(Q.groupColor,B.worldColor),I=Q.groupAlpha*B.worldAlpha}else A.worldTransform.copyFrom(Q.localTransform),A.worldColor=Q.localColor,I=Q.localAlpha;I=I<0?0:I>1?1:I,A.worldAlpha=I,A.worldColorAlpha=A.worldColor+((I*255|0)<<24)}function P1(A,Q,I){if(Q===A.updateTick)return;A.updateTick=Q,A.didChange=!1;let B=A.localTransform;A.updateLocalTransform();let E=A.parent;if(E&&!E.renderGroup){if(I|=A._updateFlags,A.relativeGroupTransform.appendFrom(B,E.relativeGroupTransform),I&_F)SF(A,E,I)}else if(I=A._updateFlags,A.relativeGroupTransform.copyFrom(B),I&_F)SF(A,xM,I);if(!A.renderGroup){let C=A.children,J=C.length;for(let Z=0;Z<J;Z++)P1(C[Z],Q,I);let K=A.parentRenderGroup,H=A;if(H.renderPipeId&&!K.structureDidChange)K.updateRenderable(H)}}function SF(A,Q,I){if(I&nC){A.groupColor=uE(A.localColor,Q.groupColor);let B=A.localAlpha*Q.groupAlpha;B=B<0?0:B>1?1:B,A.groupAlpha=B,A.groupColorAlpha=A.groupColor+((B*255|0)<<24)}if(I&ZJ)A.groupBlendMode=A.localBlendMode==="inherit"?Q.groupBlendMode:A.localBlendMode;if(I&oE)A.globalDisplayStatus=A.localDisplayStatus&Q.globalDisplayStatus;A._updateFlags=0}var xM,_F;var M1=Y(()=>{TQ();LZ();SH();xM=new QA,_F=oE|nC|ZJ});function g1(A,Q){let{list:I}=A.childrenRenderablesToUpdate,B=!1;for(let E=0;E<A.childrenRenderablesToUpdate.index;E++){let C=I[E];if(B=Q[C.renderPipeId].validateRenderable(C),B)break}return A.structureDidChange=B,B}var _1=()=>{};class hJ{constructor(A){this._renderer=A}render({container:A,transform:Q}){let I=A.parent,B=A.renderGroup.renderGroupParent;A.parent=null,A.renderGroup.renderGroupParent=null;let E=this._renderer,C=mM;if(Q)C.copyFrom(A.renderGroup.localTransform),A.renderGroup.localTransform.copyFrom(Q);let J=E.renderPipes;if(this._updateCachedRenderGroups(A.renderGroup,null),this._updateRenderGroups(A.renderGroup),E.globalUniforms.start({worldTransformMatrix:Q?A.renderGroup.localTransform:A.renderGroup.worldTransform,worldColor:A.renderGroup.worldColorAlpha}),q0(A.renderGroup,J),J.uniformBatch)J.uniformBatch.renderEnd();if(Q)A.renderGroup.localTransform.copyFrom(C);A.parent=I,A.renderGroup.renderGroupParent=B}destroy(){this._renderer=null}_updateCachedRenderGroups(A,Q){if(A._parentCacheAsTextureRenderGroup=Q,A.isCachedAsTexture){if(!A.textureNeedsUpdate)return;Q=A}for(let I=A.renderGroupChildren.length-1;I>=0;I--)this._updateCachedRenderGroups(A.renderGroupChildren[I],Q);if(A.invalidateMatrices(),A.isCachedAsTexture){if(A.textureNeedsUpdate){let I=A.root.getLocalBounds(),B=this._renderer,E=A.textureOptions.resolution||B.view.resolution,C=A.textureOptions.antialias??B.view.antialias,J=A.textureOptions.scaleMode??"linear",K=A.texture;if(I.ceil(),A.texture)hA.returnTexture(A.texture,!0);let H=hA.getOptimalTexture(I.width,I.height,E,C);if(H._source.style=new DQ({scaleMode:J}),A.texture=H,A._textureBounds||(A._textureBounds=new RA),A._textureBounds.copyFrom(I),K!==A.texture){if(A.renderGroupParent)A.renderGroupParent.structureDidChange=!0}}}else if(A.texture)hA.returnTexture(A.texture,!0),A.texture=null}_updateRenderGroups(A){let Q=this._renderer,I=Q.renderPipes;if(A.runOnRender(Q),A.instructionSet.renderPipes=I,!A.structureDidChange)g1(A,I);else w0(A.childrenRenderablesToUpdate.list,0);if(RZ(A),A.structureDidChange)A.structureDidChange=!1,this._buildInstructions(A,Q);else this._updateRenderables(A);if(A.childrenRenderablesToUpdate.index=0,Q.renderPipes.batch.upload(A.instructionSet),A.isCachedAsTexture&&!A.textureNeedsUpdate)return;for(let B=0;B<A.renderGroupChildren.length;B++)this._updateRenderGroups(A.renderGroupChildren[B])}_updateRenderables(A){let{list:Q,index:I}=A.childrenRenderablesToUpdate;for(let B=0;B<I;B++){let E=Q[B];if(E.didViewUpdate)A.updateRenderable(E)}w0(Q,I)}_buildInstructions(A,Q){let{root:I,instructionSet:B}=A;B.reset();let E=Q.renderPipes?Q:Q.batch.renderer,C=E.renderPipes;if(C.batch.buildStart(B),C.blendMode.buildStart(),C.colorMask.buildStart(),I.sortableChildren)I.sortChildren();I.collectRenderablesWithEffects(B,E,null),C.batch.buildEnd(B),C.blendMode.buildEnd(B)}}var mM;var S1=Y(()=>{M();NA();pI();qB();_Q();LZ();GZ();M1();_1();mM=new x;hJ.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"renderGroup"}});class YC{constructor(A){this._renderer=A}addRenderable(A,Q){let I=this._getGpuSprite(A);if(A.didViewUpdate)this._updateBatchableSprite(A,I);this._renderer.renderPipes.batch.addToBatch(I,Q)}updateRenderable(A){let Q=this._getGpuSprite(A);if(A.didViewUpdate)this._updateBatchableSprite(A,Q);Q._batcher.updateElement(Q)}validateRenderable(A){let Q=this._getGpuSprite(A);return!Q._batcher.checkAndUpdateTexture(Q,A._texture)}_updateBatchableSprite(A,Q){Q.bounds=A.visualBounds,Q.texture=A._texture}_getGpuSprite(A){return A._gpuData[this._renderer.uid]||this._initGPUSprite(A)}_initGPUSprite(A){let Q=new NB;return Q.renderable=A,Q.transform=A.groupTransform,Q.texture=A._texture,Q.bounds=A.visualBounds,Q.roundPixels=this._renderer._roundPixels|A._roundPixels,A._gpuData[this._renderer.uid]=Q,Q}destroy(){this._renderer=null}}var PZ=Y(()=>{M();Z0();YC.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"sprite"}});var $C="8.16.0";var MZ=Y(()=>{yQ()});class xJ{static init(){globalThis.__PIXI_APP_INIT__?.(this,$C)}static destroy(){}}class mJ{constructor(A){this._renderer=A}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,$C)}destroy(){this._renderer=null}}var gZ=Y(()=>{M();MZ();xJ.extension=N.Application;mJ.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"initHook",priority:-10}});class zB{constructor(A){if(typeof A==="number")this.rawBinaryData=new ArrayBuffer(A);else if(A instanceof Uint8Array)this.rawBinaryData=A.buffer;else this.rawBinaryData=A;this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){if(!this._int8View)this._int8View=new Int8Array(this.rawBinaryData);return this._int8View}get uint8View(){if(!this._uint8View)this._uint8View=new Uint8Array(this.rawBinaryData);return this._uint8View}get int16View(){if(!this._int16View)this._int16View=new Int16Array(this.rawBinaryData);return this._int16View}get int32View(){if(!this._int32View)this._int32View=new Int32Array(this.rawBinaryData);return this._int32View}get float64View(){if(!this._float64Array)this._float64Array=new Float64Array(this.rawBinaryData);return this._float64Array}get bigUint64View(){if(!this._bigUint64Array)this._bigUint64Array=new BigUint64Array(this.rawBinaryData);return this._bigUint64Array}view(A){return this[`${A}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(A){switch(A){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${A} isn't a valid view type`)}}}var _Z=()=>{};function Y0(A,Q,I,B){if(I??(I=0),B??(B=Math.min(A.byteLength-I,Q.byteLength)),!(I&7)&&!(B&7)){let E=B/8;new Float64Array(Q,0,E).set(new Float64Array(A,I,E))}else if(!(I&3)&&!(B&3)){let E=B/4;new Float32Array(Q,0,E).set(new Float32Array(A,I,E))}else new Uint8Array(Q).set(new Uint8Array(A,I,B))}var SZ=()=>{};var b1,lA;var GE=Y(()=>{b1={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},lA=((A)=>{return A[A.DISABLED=0]="DISABLED",A[A.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",A[A.MASK_ACTIVE=2]="MASK_ACTIVE",A[A.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",A[A.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",A[A.NONE=5]="NONE",A})(lA||{})});function DB(A,Q){if(Q.alphaMode==="no-premultiply-alpha")return b1[A]||A;return A}var $0=Y(()=>{GE()});function dM(A){let Q="";for(let I=0;I<A;++I){if(I>0)Q+=`
else `;if(I<A-1)Q+=`if(test == ${I}.0){}`}return Q}function cJ(A,Q){if(A===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let I=Q.createShader(Q.FRAGMENT_SHADER);try{while(!0){let B=cM.replace(/%forloop%/gi,dM(A));if(Q.shaderSource(I,B),Q.compileShader(I),!Q.getShaderParameter(I,Q.COMPILE_STATUS))A=A/2|0;else break}}finally{Q.deleteShader(I)}return A}var cM;var bZ=Y(()=>{cM=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});function f1(){if(dJ)return dJ;let A=OJ();return dJ=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),dJ=cJ(dJ,A),A.getExtension("WEBGL_lose_context")?.loseContext(),dJ}var dJ=null;var y1=Y(()=>{eH();bZ()});class fZ{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let A=0;A<this.count;A++){let Q=this.textures[A];this.textures[A]=null,this.ids[Q.uid]=null}this.count=0}}var v1=()=>{};class h1{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new fZ,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null,this.elements=null}}function bF(){return T1>0?vZ[--T1]:new h1}function fF(A){A.elements=null,vZ[T1++]=A}var vZ,T1=0,yZ=0,yF=class A{constructor(Q){if(this.uid=VA("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Q={...A.defaultOptions,...Q},!Q.maxTextures)c("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),Q.maxTextures=f1();let{maxTextures:I,attributesInitialSize:B,indicesInitialSize:E}=Q;this.attributeBuffer=new zB(B*4),this.indexBuffer=new Uint16Array(E),this.maxTextures=I}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let Q=0;Q<this.batchIndex;Q++)fF(this.batches[Q]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(Q){this._elements[this.elementSize++]=Q,Q._indexStart=this.indexSize,Q._attributeStart=this.attributeSize,Q._batcher=this,this.indexSize+=Q.indexSize,this.attributeSize+=Q.attributeSize*this.vertexSize}checkAndUpdateTexture(Q,I){let B=Q._batch.textures.ids[I._source.uid];if(!B&&B!==0)return!1;return Q._textureId=B,Q.texture=I,!0}updateElement(Q){this.dirty=!0;let I=this.attributeBuffer;if(Q.packAsQuad)this.packQuadAttributes(Q,I.float32View,I.uint32View,Q._attributeStart,Q._textureId);else this.packAttributes(Q,I.float32View,I.uint32View,Q._attributeStart,Q._textureId)}break(Q){let I=this._elements;if(!I[this.elementStart])return;let B=bF(),E=B.textures;E.clear();let C=I[this.elementStart],J=DB(C.blendMode,C.texture._source),K=C.topology;if(this.attributeSize*4>this.attributeBuffer.size)this._resizeAttributeBuffer(this.attributeSize*4);if(this.indexSize>this.indexBuffer.length)this._resizeIndexBuffer(this.indexSize);let H=this.attributeBuffer.float32View,Z=this.attributeBuffer.uint32View,q=this.indexBuffer,w=this._batchIndexSize,$=this._batchIndexStart,U="startBatch",V=[],z=this.maxTextures;for(let D=this.elementStart;D<this.elementSize;++D){let W=I[D];I[D]=null;let O=W.texture._source,F=DB(W.blendMode,O),L=J!==F||K!==W.topology;if(O._batchTick===yZ&&!L){if(W._textureId=O._textureBindLocation,w+=W.indexSize,W.packAsQuad)this.packQuadAttributes(W,H,Z,W._attributeStart,W._textureId),this.packQuadIndex(q,W._indexStart,W._attributeStart/this.vertexSize);else this.packAttributes(W,H,Z,W._attributeStart,W._textureId),this.packIndex(W,q,W._indexStart,W._attributeStart/this.vertexSize);W._batch=B,V.push(W);continue}if(O._batchTick=yZ,E.count>=z||L)this._finishBatch(B,$,w-$,E,J,K,Q,U,V),U="renderBatch",$=w,J=F,K=W.topology,B=bF(),E=B.textures,E.clear(),V=[],++yZ;if(W._textureId=O._textureBindLocation=E.count,E.ids[O.uid]=E.count,E.textures[E.count++]=O,W._batch=B,V.push(W),w+=W.indexSize,W.packAsQuad)this.packQuadAttributes(W,H,Z,W._attributeStart,W._textureId),this.packQuadIndex(q,W._indexStart,W._attributeStart/this.vertexSize);else this.packAttributes(W,H,Z,W._attributeStart,W._textureId),this.packIndex(W,q,W._indexStart,W._attributeStart/this.vertexSize)}if(E.count>0)this._finishBatch(B,$,w-$,E,J,K,Q,U,V),$=w,++yZ;this.elementStart=this.elementSize,this._batchIndexStart=$,this._batchIndexSize=w}_finishBatch(Q,I,B,E,C,J,K,H,Z){Q.gpuBindGroup=null,Q.bindGroup=null,Q.action=H,Q.batcher=this,Q.textures=E,Q.blendMode=C,Q.topology=J,Q.start=I,Q.size=B,Q.elements=Z,++yZ,this.batches[this.batchIndex++]=Q,K.add(Q)}finish(Q){this.break(Q)}ensureAttributeBuffer(Q){if(Q*4<=this.attributeBuffer.size)return;this._resizeAttributeBuffer(Q*4)}ensureIndexBuffer(Q){if(Q<=this.indexBuffer.length)return;this._resizeIndexBuffer(Q)}_resizeAttributeBuffer(Q){let I=Math.max(Q,this.attributeBuffer.size*2),B=new zB(I);Y0(this.attributeBuffer.rawBinaryData,B.rawBinaryData),this.attributeBuffer=B}_resizeIndexBuffer(Q){let I=this.indexBuffer,B=Math.max(Q,I.length*1.5);B+=B%2;let E=B>65535?new Uint32Array(B):new Uint16Array(B);if(E.BYTES_PER_ELEMENT!==I.BYTES_PER_ELEMENT)for(let C=0;C<I.length;C++)E[C]=I[C];else Y0(I.buffer,E.buffer);this.indexBuffer=E}packQuadIndex(Q,I,B){Q[I]=B+0,Q[I+1]=B+1,Q[I+2]=B+2,Q[I+3]=B+0,Q[I+4]=B+2,Q[I+5]=B+3}packIndex(Q,I,B,E){let{indices:C,indexSize:J,indexOffset:K,attributeOffset:H}=Q;for(let Z=0;Z<J;Z++)I[B++]=E+C[Z+K]-H}destroy(Q={}){if(this.batches===null)return;for(let I=0;I<this.batchIndex;I++)fF(this.batches[I]);if(this.batches=null,this.geometry.destroy(!0),this.geometry=null,Q.shader)this.shader?.destroy(),this.shader=null;for(let I=0;I<this._elements.length;I++)if(this._elements[I])this._elements[I]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}},x1;var m1=Y(()=>{HQ();_Z();gA();ZE();SZ();$0();y1();v1();vZ=[];WI.register({clear:()=>{if(vZ.length>0){for(let A of vZ)if(A)A.destroy()}vZ.length=0,T1=0}});yF.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};x1=yF});var pM,uM,TZ;var c1=Y(()=>{hB();VB();FE();pM=new Float32Array(1),uM=new Uint32Array(1);TZ=class TZ extends UI{constructor(){let Q=new YQ({data:pM,label:"attribute-batch-buffer",usage:OA.VERTEX|OA.COPY_DST,shrinkToFit:!1}),I=new YQ({data:uM,label:"index-batch-buffer",usage:OA.INDEX|OA.COPY_DST,shrinkToFit:!1}),B=24;super({attributes:{aPosition:{buffer:Q,format:"float32x2",stride:24,offset:0},aUV:{buffer:Q,format:"float32x2",stride:24,offset:8},aColor:{buffer:Q,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:Q,format:"uint16x2",stride:24,offset:20}},indexBuffer:I})}}});function UC(A){let Q=vF[A];if(Q)return Q;let I=new Int32Array(A);for(let B=0;B<A;B++)I[B]=B;return Q=vF[A]=new PA({uTextures:{value:I,type:"i32",size:A}},{isStatic:!0}),Q}var vF;var pJ=Y(()=>{XQ();vF={}});var uJ;var d1=Y(()=>{cB();K0();H0();dB();pJ();bI();uJ=class uJ extends BQ{constructor(A){let Q=sI({name:"batch",bits:[CC,KC(A),rI]}),I=oI({name:"batch",bits:[EC,JC(A),aI]});super({glProgram:Q,gpuProgram:I,resources:{batchSamplers:UC(A)}});this.maxTextures=A}}});var hZ=null,TF,U0;var xZ=Y(()=>{M();m1();c1();d1();TF=class A extends x1{constructor(Q){super(Q);this.geometry=new TZ,this.name=A.extension.name,this.vertexSize=6,hZ??(hZ=new uJ(Q.maxTextures)),this.shader=hZ}packAttributes(Q,I,B,E,C){let J=C<<16|Q.roundPixels&65535,K=Q.transform,H=K.a,Z=K.b,q=K.c,w=K.d,$=K.tx,U=K.ty,{positions:V,uvs:z}=Q,D=Q.color,W=Q.attributeOffset,j=W+Q.attributeSize;for(let O=W;O<j;O++){let F=O*2,L=V[F],R=V[F+1];I[E++]=H*L+q*R+$,I[E++]=w*R+Z*L+U,I[E++]=z[F],I[E++]=z[F+1],B[E++]=D,B[E++]=J}}packQuadAttributes(Q,I,B,E,C){let{texture:J,transform:K}=Q,H=K.a,Z=K.b,q=K.c,w=K.d,$=K.tx,U=K.ty,V=Q.bounds,z=V.maxX,D=V.minX,W=V.maxY,j=V.minY,O=J.uvs,F=Q.color,L=C<<16|Q.roundPixels&65535;I[E+0]=H*D+q*j+$,I[E+1]=w*j+Z*D+U,I[E+2]=O.x0,I[E+3]=O.y0,B[E+4]=F,B[E+5]=L,I[E+6]=H*z+q*j+$,I[E+7]=w*j+Z*z+U,I[E+8]=O.x1,I[E+9]=O.y1,B[E+10]=F,B[E+11]=L,I[E+12]=H*z+q*W+$,I[E+13]=w*W+Z*z+U,I[E+14]=O.x2,I[E+15]=O.y2,B[E+16]=F,B[E+17]=L,I[E+18]=H*D+q*W+$,I[E+19]=w*W+Z*D+U,I[E+20]=O.x3,I[E+21]=O.y3,B[E+22]=F,B[E+23]=L}_updateMaxTextures(Q){if(this.shader.maxTextures===Q)return;hZ=new uJ(Q),this.shader=hZ}destroy(){this.shader=null,super.destroy()}};TF.extension={type:[N.Batcher],name:"default"};U0=TF});var FD=class A{constructor(Q,I){this.state=oA.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=Q,this._adaptor=I,this._adaptor.init?.(this)}static getBatcher(Q){return new this._availableBatchers[Q]}buildStart(Q){let I=this._batchersByInstructionSet[Q.uid];if(!I)I=this._batchersByInstructionSet[Q.uid]=Object.create(null),I.default||(I.default=new U0({maxTextures:this.renderer.limits.maxBatchableTextures}));this._activeBatches=I,this._activeBatch=this._activeBatches.default;for(let B in this._activeBatches)this._activeBatches[B].begin()}addToBatch(Q,I){if(this._activeBatch.name!==Q.batcherName){this._activeBatch.break(I);let B=this._activeBatches[Q.batcherName];if(!B)B=this._activeBatches[Q.batcherName]=A.getBatcher(Q.batcherName),B.begin();this._activeBatch=B}this._activeBatch.add(Q)}break(Q){this._activeBatch.break(Q)}buildEnd(Q){this._activeBatch.break(Q);let I=this._activeBatches;for(let B in I){let E=I[B],C=E.geometry;C.indexBuffer.setDataWithSize(E.indexBuffer,E.indexSize,!0),C.buffers[0].setDataWithSize(E.attributeBuffer.float32View,E.attributeSize,!1)}}upload(Q){let I=this._batchersByInstructionSet[Q.uid];for(let B in I){let E=I[B],C=E.geometry;if(E.dirty)E.dirty=!1,C.buffers[0].update(E.attributeSize*4)}}execute(Q){if(Q.action==="startBatch"){let I=Q.batcher,B=I.geometry,E=I.shader;this._adaptor.start(this,B,E)}this._adaptor.execute(this,Q)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let Q in this._activeBatches)this._activeBatches[Q].destroy();this._activeBatches=null}},V0;var mZ=Y(()=>{M();$I();xZ();FD.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"batch"};FD._availableBatchers=Object.create(null);V0=FD;p.handleByMap(N.Batcher,V0._availableBatchers);p.add(U0)});var p1=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`;var u1=()=>{};var l1=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`;var i1=()=>{};var cZ=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;var n1=()=>{};var dZ;var o1=Y(()=>{NA();AI();YI();XQ();TH();iI();u1();i1();n1();dZ=class dZ extends hQ{constructor(A){let{sprite:Q,...I}=A,B=new lC(Q.texture),E=new PA({uFilterMatrix:{value:new x,type:"mat3x3<f32>"},uMaskClamp:{value:B.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:A.inverse?1:0,type:"f32"}}),C=rA.from({vertex:{source:cZ,entryPoint:"mainVertex"},fragment:{source:cZ,entryPoint:"mainFragment"}}),J=aA.from({vertex:l1,fragment:p1,name:"mask-filter"});super({...I,gpuProgram:C,glProgram:J,clipToViewport:!1,resources:{filterUniforms:E,uMaskTexture:Q.texture.source}});this.sprite=Q,this._textureMatrix=B}set inverse(A){this.resources.filterUniforms.uniforms.uInverse=A?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(A,Q,I,B){this._textureMatrix.texture=this.sprite.texture,A.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,A.applyFilter(this,Q,I,B)}}});class VC{constructor(A){this._activeMaskStage=[],this._renderer=A}push(A,Q,I){let B=this._renderer;if(B.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1,maskedContainer:Q}),A.inverse=Q._maskOptions.inverse,A.renderMaskToTexture){let E=A.mask;E.includeInBuild=!0,E.collectRenderables(I,B,null),E.includeInBuild=!1}B.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:A,maskedContainer:Q,inverse:Q._maskOptions.inverse,canBundle:!1})}pop(A,Q,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1})}execute(A){let Q=this._renderer,I=A.mask.renderMaskToTexture;if(A.action==="pushMaskBegin"){let B=yA.get(hF);if(B.inverse=A.inverse,I){A.mask.mask.measurable=!0;let E=MB(A.mask.mask,!0,lM);A.mask.mask.measurable=!1,E.ceil();let C=Q.renderTarget.renderTarget.colorTexture.source,J=hA.getOptimalTexture(E.width,E.height,C._resolution,C.antialias);Q.renderTarget.push(J,!0),Q.globalUniforms.push({offset:E,worldColor:4294967295});let K=B.sprite;K.texture=J,K.worldTransform.tx=E.minX,K.worldTransform.ty=E.minY,this._activeMaskStage.push({filterEffect:B,maskedContainer:A.maskedContainer,filterTexture:J})}else B.sprite=A.mask.mask,this._activeMaskStage.push({filterEffect:B,maskedContainer:A.maskedContainer})}else if(A.action==="pushMaskEnd"){let B=this._activeMaskStage[this._activeMaskStage.length-1];if(I){if(Q.type===cA.WEBGL)Q.renderTarget.finishRenderPass();Q.renderTarget.pop(),Q.globalUniforms.pop()}Q.filter.push({renderPipeId:"filter",action:"pushFilter",container:B.maskedContainer,filterEffect:B.filterEffect,canBundle:!1})}else if(A.action==="popMaskEnd"){Q.filter.pop();let B=this._activeMaskStage.pop();if(I)hA.returnTexture(B.filterTexture);yA.return(B.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}var lM,hF;var pZ=Y(()=>{M();EJ();o1();_Q();pE();fB();dI();FA();pI();nQ();lM=new RA;hF=class hF extends PB{constructor(){super();this.filters=[new dZ({sprite:new bQ(v.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(A){this.filters[0].sprite=A}get inverse(){return this.filters[0].inverse}set inverse(A){this.filters[0].inverse=A}};VC.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"alphaMask"}});class lJ{constructor(A){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=A}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(A,Q,I){this._renderer.renderPipes.batch.break(I);let E=this._colorStack;E[this._colorStackIndex]=E[this._colorStackIndex-1]&A.mask;let C=this._colorStack[this._colorStackIndex];if(C!==this._currentColor)this._currentColor=C,I.add({renderPipeId:"colorMask",colorMask:C,canBundle:!1});this._colorStackIndex++}pop(A,Q,I){this._renderer.renderPipes.batch.break(I);let E=this._colorStack;this._colorStackIndex--;let C=E[this._colorStackIndex-1];if(C!==this._currentColor)this._currentColor=C,I.add({renderPipeId:"colorMask",colorMask:C,canBundle:!1})}execute(A){this._renderer.colorMask.setMask(A.colorMask)}destroy(){this._renderer=null,this._colorStack=null}}var s1=Y(()=>{M();lJ.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"colorMask"}});class iJ{constructor(A){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=A}push(A,Q,I){var B;let E=A,C=this._renderer;C.renderPipes.batch.break(I),C.renderPipes.blendMode.setBlendMode(E.mask,"none",I),I.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1});let J=E.mask;if(J.includeInBuild=!0,!this._maskHash.has(E))this._maskHash.set(E,{instructionsStart:0,instructionsLength:0});let K=this._maskHash.get(E);K.instructionsStart=I.instructionSize,J.collectRenderables(I,C,null),J.includeInBuild=!1,C.renderPipes.batch.break(I),I.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1});let H=I.instructionSize-K.instructionsStart-1;K.instructionsLength=H;let Z=C.renderTarget.renderTarget.uid;(B=this._maskStackHash)[Z]??(B[Z]=0)}pop(A,Q,I){let B=A,E=this._renderer;E.renderPipes.batch.break(I),E.renderPipes.blendMode.setBlendMode(B.mask,"none",I),I.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:Q._maskOptions.inverse,canBundle:!1});let C=this._maskHash.get(A);for(let J=0;J<C.instructionsLength;J++)I.instructions[I.instructionSize++]=I.instructions[C.instructionsStart++];I.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(A){var Q;let I=this._renderer,B=I,E=I.renderTarget.renderTarget.uid,C=(Q=this._maskStackHash)[E]??(Q[E]=0);if(A.action==="pushMaskBegin")B.renderTarget.ensureDepthStencil(),B.stencil.setStencilMode(lA.RENDERING_MASK_ADD,C),C++,B.colorMask.setMask(0);else if(A.action==="pushMaskEnd"){if(A.inverse)B.stencil.setStencilMode(lA.INVERSE_MASK_ACTIVE,C);else B.stencil.setStencilMode(lA.MASK_ACTIVE,C);B.colorMask.setMask(15)}else if(A.action==="popMaskBegin"){if(B.colorMask.setMask(0),C!==0)B.stencil.setStencilMode(lA.RENDERING_MASK_REMOVE,C);else B.renderTarget.clear(null,PQ.STENCIL),B.stencil.setStencilMode(lA.DISABLED,C);C--}else if(A.action==="popMaskEnd"){if(A.inverse)B.stencil.setStencilMode(lA.INVERSE_MASK_ACTIVE,C);else B.stencil.setStencilMode(lA.MASK_ACTIVE,C);B.colorMask.setMask(15)}this._maskStackHash[E]=C}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}var a1=Y(()=>{M();AC();GE();iJ.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"stencilMask"}});var OD=class A{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new JA(0),this.color=this._backgroundColor,this.alpha=1}init(Q){Q={...A.defaultOptions,...Q},this.clearBeforeRender=Q.clearBeforeRender,this.color=Q.background||Q.backgroundColor||this._backgroundColor,this.alpha=Q.backgroundAlpha,this._backgroundColor.setAlpha(Q.backgroundAlpha)}get color(){return this._backgroundColor}set color(Q){if(JA.shared.setValue(Q).alpha<1&&this._backgroundColor.alpha===1)n("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application.");this._backgroundColor.setValue(Q)}get alpha(){return this._backgroundColor.alpha}set alpha(Q){this._backgroundColor.setAlpha(Q)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}},r1;var t1=Y(()=>{IQ();M();_A();OD.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"background",priority:0};OD.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};r1=OD});class NC{constructor(A){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=A,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}pushBlendMode(A,Q,I){this._blendModeStack.push(Q),this.setBlendMode(A,Q,I)}popBlendMode(A){this._blendModeStack.pop();let Q=this._blendModeStack[this._activeBlendMode.length-1]??"normal";this.setBlendMode(null,Q,A)}setBlendMode(A,Q,I){let B=A instanceof nE;if(this._activeBlendMode===Q){if(this._isAdvanced&&A&&!B)this._renderableList?.push(A);return}if(this._isAdvanced)this._endAdvancedBlendMode(I);if(this._activeBlendMode=Q,!A)return;if(this._isAdvanced=!!uZ[Q],this._isAdvanced)this._beginAdvancedBlendMode(A,I)}_beginAdvancedBlendMode(A,Q){this._renderer.renderPipes.batch.break(Q);let I=this._activeBlendMode;if(!uZ[I]){n(`Unable to assign BlendMode: '${I}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let B=this._ensureFilterEffect(I),E=A instanceof nE,C={renderPipeId:"filter",action:"pushFilter",filterEffect:B,renderables:E?null:[A],container:E?A.root:null,canBundle:!1};this._renderableList=C.renderables,Q.add(C)}_ensureFilterEffect(A){let Q=this._filterHash[A];if(!Q)Q=this._filterHash[A]=new PB,Q.filters=[new uZ[A]];return Q}_endAdvancedBlendMode(A){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(A),A.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(A){if(!this._isAdvanced)return;this._endAdvancedBlendMode(A)}destroy(){this._renderer=null,this._renderableList=null;for(let A in this._filterHash)this._filterHash[A].destroy();this._filterHash=null}}var uZ;var lZ=Y(()=>{M();EJ();hH();_A();uZ={};p.handle(N.BlendMode,(A)=>{if(!A.name)throw new Error("BlendMode extension must have a name property");uZ[A.name]=A.ref},(A)=>{delete uZ[A.name]});NC.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"blendMode"}});var GD,jD=class A{constructor(Q){this._renderer=Q}_normalizeOptions(Q,I={}){if(Q instanceof QA||Q instanceof v)return{target:Q,...I};return{...I,...Q}}async image(Q){let I=u.get().createImage();return I.src=await this.base64(Q),I}async base64(Q){Q=this._normalizeOptions(Q,A.defaultImageOptions);let{format:I,quality:B}=Q,E=this.canvas(Q);if(E.toBlob!==void 0)return new Promise((C,J)=>{E.toBlob((K)=>{if(!K){J(new Error("ICanvas.toBlob failed!"));return}let H=new FileReader;H.onload=()=>C(H.result),H.onerror=J,H.readAsDataURL(K)},GD[I],B)});if(E.toDataURL!==void 0)return E.toDataURL(GD[I],B);if(E.convertToBlob!==void 0){let C=await E.convertToBlob({type:GD[I],quality:B});return new Promise((J,K)=>{let H=new FileReader;H.onload=()=>J(H.result),H.onerror=K,H.readAsDataURL(C)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(Q){Q=this._normalizeOptions(Q);let I=Q.target,B=this._renderer;if(I instanceof v)return B.texture.generateCanvas(I);let E=B.textureGenerator.generateTexture(Q),C=B.texture.generateCanvas(E);return E.destroy(!0),C}pixels(Q){Q=this._normalizeOptions(Q);let I=Q.target,B=this._renderer,E=I instanceof v?I:B.textureGenerator.generateTexture(Q),C=B.texture.getPixels(E);if(I instanceof QA)E.destroy(!0);return C}texture(Q){if(Q=this._normalizeOptions(Q),Q.target instanceof v)return Q.target;return this._renderer.textureGenerator.generateTexture(Q)}download(Q){Q=this._normalizeOptions(Q);let I=this.canvas(Q),B=document.createElement("a");B.download=Q.filename??"image.png",B.href=I.toDataURL("image/png"),document.body.appendChild(B),B.click(),document.body.removeChild(B)}log(Q){let I=Q.width??200;Q=this._normalizeOptions(Q);let B=this.canvas(Q),E=B.toDataURL();console.log(`[Pixi Texture] ${B.width}px ${B.height}px`);let C=["font-size: 1px;",`padding: ${I}px 300px;`,`background: url(${E}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",C)}destroy(){this._renderer=null}},e1;var A4=Y(()=>{jA();M();TQ();FA();GD={png:"image/png",jpg:"image/jpeg",webp:"image/webp"};jD.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"extract"};jD.defaultImageOptions={format:"png",quality:1};e1=jD});var nJ;var Q4=Y(()=>{WQ();FA();nJ=class nJ extends v{static create(A){let{dynamic:Q,...I}=A;return new nJ({source:new GA(I),dynamic:Q??!1})}resize(A,Q,I){return this.source.resize(A,Q,I),this}}});class oJ{constructor(A){this._renderer=A}generateTexture(A){if(A instanceof QA)A={target:A,frame:void 0,textureSourceOptions:{},resolution:void 0};let Q=A.resolution||this._renderer.resolution,I=A.antialias||this._renderer.view.antialias,B=A.target,E=A.clearColor;if(E)E=Array.isArray(E)&&E.length===4?E:JA.shared.setValue(E).toArray();else E=oM;let C=A.frame?.copyTo(iM)||lE(B,nM).rectangle;C.width=Math.max(C.width,1/Q)|0,C.height=Math.max(C.height,1/Q)|0;let J=nJ.create({...A.textureSourceOptions,width:C.width,height:C.height,resolution:Q,antialias:I}),K=x.shared.translate(-C.x,-C.y);return this._renderer.render({container:B,transform:K,target:J,clearColor:E}),J.source.updateMipmaps(),J}destroy(){this._renderer=null}}var iM,nM,oM;var I4=Y(()=>{IQ();M();NA();ZQ();_Q();KJ();TQ();Q4();iM=new EA,nM=new RA,oM=[0,0,0,0];oJ.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"textureGenerator"}});function B4(A){let Q=!1;for(let B in A)if(A[B]==null){Q=!0;break}if(!Q)return A;let I=Object.create(null);for(let B in A){let E=A[B];if(E)I[B]=E}return I}function E4(A){let Q=0;for(let I=0;I<A.length;I++)if(A[I]==null)Q++;else A[I-Q]=A[I];return A.length-=Q,A}var C4=()=>{};var LD=class A{constructor(Q){this._managedResources=[],this._managedResourceHashes=[],this._managedCollections=[],this._ready=!1,this._renderer=Q}init(Q){Q={...A.defaultOptions,...Q},this.maxUnusedTime=Q.gcMaxUnusedTime,this._frequency=Q.gcFrequency,this.enabled=Q.gcActive,this.now=performance.now()}get enabled(){return!!this._handler}set enabled(Q){if(this.enabled===Q)return;if(Q)this._handler=this._renderer.scheduler.repeat(()=>{this._ready=!0},this._frequency,!1),this._collectionsHandler=this._renderer.scheduler.repeat(()=>{for(let I of this._managedCollections){let{context:B,collection:E,type:C}=I;if(C==="hash")B[E]=B4(B[E]);else B[E]=E4(B[E])}},this._frequency);else this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._collectionsHandler),this._handler=0,this._collectionsHandler=0}prerender({container:Q}){this.now=performance.now(),Q.renderGroup.gcTick=this._renderer.tick++,this._updateInstructionGCTick(Q.renderGroup,Q.renderGroup.gcTick)}postrender(){if(!this._ready||!this.enabled)return;this.run(),this._ready=!1}_updateInstructionGCTick(Q,I){Q.instructionSet.gcTick=I,Q.gcTick=I;for(let B of Q.renderGroupChildren)this._updateInstructionGCTick(B,I)}addCollection(Q,I,B){this._managedCollections.push({context:Q,collection:I,type:B})}addResource(Q,I){if(Q._gcLastUsed!==-1){Q._gcLastUsed=this.now,Q._onTouch?.(this.now);return}let B=this._managedResources.length;Q._gcData={index:B,type:I},Q._gcLastUsed=this.now,Q._onTouch?.(this.now),Q.once("unload",this.removeResource,this),this._managedResources.push(Q)}removeResource(Q){let I=Q._gcData;if(!I)return;let B=I.index,E=this._managedResources.length-1;if(B!==E){let C=this._managedResources[E];this._managedResources[B]=C,C._gcData.index=B}this._managedResources.length--,Q._gcData=null,Q._gcLastUsed=-1}addResourceHash(Q,I,B,E=0){this._managedResourceHashes.push({context:Q,hash:I,type:B,priority:E}),this._managedResourceHashes.sort((C,J)=>C.priority-J.priority)}run(){let Q=performance.now(),I=this._managedResourceHashes;for(let E of I)this.runOnHash(E,Q);let B=0;for(let E=0;E<this._managedResources.length;E++){let C=this._managedResources[E];B=this.runOnResource(C,Q,B)}this._managedResources.length=B}updateRenderableGCTick(Q,I){let B=Q.renderGroup??Q.parentRenderGroup,E=B?.instructionSet?.gcTick??-1;if((B?.gcTick??0)===E)Q._gcLastUsed=I,Q._onTouch?.(I)}runOnResource(Q,I,B){let E=Q._gcData;if(E.type==="renderable")this.updateRenderableGCTick(Q,I);if(I-Q._gcLastUsed<this.maxUnusedTime||!Q.autoGarbageCollect)this._managedResources[B]=Q,E.index=B,B++;else Q.unload(),Q._gcData=null,Q._gcLastUsed=-1,Q.off("unload",this.removeResource,this);return B}_createHashClone(Q,I){let B=Object.create(null);for(let E in Q){if(E===I)break;if(Q[E]!==null)B[E]=Q[E]}return B}runOnHash(Q,I){let{context:B,hash:E,type:C}=Q,J=B[E],K=null,H=0;for(let Z in J){let q=J[Z];if(q===null){if(H++,H===1e4&&!K)K=this._createHashClone(J,Z);continue}if(q._gcLastUsed===-1){if(q._gcLastUsed=I,q._onTouch?.(I),K)K[Z]=q;continue}if(C==="renderable")this.updateRenderableGCTick(q,I);if(!(I-q._gcLastUsed<this.maxUnusedTime)&&q.autoGarbageCollect){if(!K)if(H+1!==1e4)J[Z]=null,H++;else K=this._createHashClone(J,Z);if(C==="renderable"){let $=q,U=$.renderGroup??$.parentRenderGroup;if(U)U.structureDidChange=!0}q.unload(),q._gcData=null,q._gcLastUsed=-1}else if(K)K[Z]=q}if(K)B[E]=K}destroy(){this.enabled=!1,this._managedResources.forEach((Q)=>{Q.off("unload",this.removeResource,this)}),this._managedResources.length=0,this._managedResourceHashes.length=0,this._managedCollections.length=0,this._renderer=null}},J4;var K4=Y(()=>{M();C4();LD.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"gc",priority:0};LD.defaultOptions={gcActive:!0,gcMaxUnusedTime:60000,gcFrequency:30000};J4=LD});function tI(A,Q,I){let B=(A>>24&255)/255;Q[I++]=(A&255)/255*B,Q[I++]=(A>>8&255)/255*B,Q[I++]=(A>>16&255)/255*B,Q[I++]=B}var zC=()=>{};class sJ{constructor(A){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=A}reset(){this._stackIndex=0;for(let A=0;A<this._activeUniforms.length;A++)this._uniformsPool.push(this._activeUniforms[A]);for(let A=0;A<this._activeBindGroups.length;A++)this._bindGroupPool.push(this._activeBindGroups[A]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(A){this.reset(),this.push(A)}bind({size:A,projectionMatrix:Q,worldTransformMatrix:I,worldColor:B,offset:E}){let C=this._renderer.renderTarget.renderTarget,J=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:C,worldTransformMatrix:new x,worldColor:4294967295,offset:new UA},K={projectionMatrix:Q||this._renderer.renderTarget.projectionMatrix,resolution:A||C.size,worldTransformMatrix:I||J.worldTransformMatrix,worldColor:B||J.worldColor,offset:E||J.offset,bindGroup:null},H=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(H);let Z=H.uniforms;Z.uProjectionMatrix=K.projectionMatrix,Z.uResolution=K.resolution,Z.uWorldTransformMatrix.copyFrom(K.worldTransformMatrix),Z.uWorldTransformMatrix.tx-=K.offset.x,Z.uWorldTransformMatrix.ty-=K.offset.y,tI(K.worldColor,Z.uWorldColorAlpha,0),H.update();let q;if(this._renderer.renderPipes.uniformBatch)q=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(H,!1);else q=this._bindGroupPool.pop()||new fQ,this._activeBindGroups.push(q),q.setResource(H,0);K.bindGroup=q,this._currentGlobalUniformData=K}push(A){this.bind(A),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){if(this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===cA.WEBGL)this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new PA({uProjectionMatrix:{value:new x,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new x,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}}var H4=Y(()=>{M();NA();aQ();zC();TB();nQ();XQ();sJ.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"globalUniforms"}});class aJ{constructor(){this._tasks=[],this._offset=0}init(){SA.system.add(this._update,this)}repeat(A,Q,I=!0){let B=sM++,E=0;if(I)this._offset+=1000,E=this._offset;return this._tasks.push({func:A,duration:Q,start:performance.now(),offset:E,last:performance.now(),repeat:!0,id:B}),B}cancel(A){for(let Q=0;Q<this._tasks.length;Q++)if(this._tasks[Q].id===A){this._tasks.splice(Q,1);return}}_update(){let A=performance.now();for(let Q=0;Q<this._tasks.length;Q++){let I=this._tasks[Q];if(A-I.offset-I.last>=I.duration){let B=A-I.start;I.func(B),I.last=A}}}destroy(){SA.system.remove(this._update,this),this._tasks.length=0}}var sM=1;var Z4=Y(()=>{M();wB();aJ.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"scheduler",priority:0}});function q4(A){if(xF)return;if(u.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let Q=[`%c  %c  %c  %c  %c PixiJS %c v${$C} (${A}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...Q)}else if(globalThis.console)globalThis.console.log(`PixiJS ${$C} - ${A} - http://www.pixijs.com/`);xF=!0}var xF=!1;var w4=Y(()=>{jA();MZ()});class N0{constructor(A){this._renderer=A}init(A){if(A.hello){let Q=this._renderer.name;if(this._renderer.type===cA.WEBGL)Q+=` ${this._renderer.context.webGLVersion}`;q4(Q)}}}var Y4=Y(()=>{M();w4();nQ();N0.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"hello",priority:-2};N0.defaultOptions={hello:!1}});var RD=class A{constructor(Q){this._renderer=Q}init(Q){Q={...A.defaultOptions,...Q},this.maxUnusedTime=Q.renderableGCMaxUnusedTime}get enabled(){return c("8.15.0","RenderableGCSystem.enabled is deprecated, please use the GCSystem.enabled instead."),this._renderer.gc.enabled}set enabled(Q){c("8.15.0","RenderableGCSystem.enabled is deprecated, please use the GCSystem.enabled instead."),this._renderer.gc.enabled=Q}addManagedHash(Q,I){c("8.15.0","RenderableGCSystem.addManagedHash is deprecated, please use the GCSystem.addCollection instead."),this._renderer.gc.addCollection(Q,I,"hash")}addManagedArray(Q,I){c("8.15.0","RenderableGCSystem.addManagedArray is deprecated, please use the GCSystem.addCollection instead."),this._renderer.gc.addCollection(Q,I,"array")}addRenderable(Q){c("8.15.0","RenderableGCSystem.addRenderable is deprecated, please use the GCSystem instead."),this._renderer.gc.addResource(Q,"renderable")}run(){c("8.15.0","RenderableGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.run()}destroy(){this._renderer=null}},$4;var U4=Y(()=>{M();gA();RD.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"renderableGC",priority:0};RD.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:60000,renderableGCFrequency:30000};$4=RD});var PD=class A{get count(){return this._renderer.tick}get checkCount(){return this._checkCount}set checkCount(Q){c("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._checkCount=Q}get maxIdle(){return this._renderer.gc.maxUnusedTime/1000*60}set maxIdle(Q){c("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.maxUnusedTime=Q/60*1000}get checkCountMax(){return Math.floor(this._renderer.gc._frequency/1000)}set checkCountMax(Q){c("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead.")}get active(){return this._renderer.gc.enabled}set active(Q){c("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.enabled=Q}constructor(Q){this._renderer=Q,this._checkCount=0}init(Q){if(Q.textureGCActive!==A.defaultOptions.textureGCActive)this.active=Q.textureGCActive;if(Q.textureGCMaxIdle!==A.defaultOptions.textureGCMaxIdle)this.maxIdle=Q.textureGCMaxIdle;if(Q.textureGCCheckCountMax!==A.defaultOptions.textureGCCheckCountMax)this.checkCountMax=Q.textureGCCheckCountMax}run(){c("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.run()}destroy(){this._renderer=null}},V4;var N4=Y(()=>{M();gA();PD.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"textureGC"};PD.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};V4=PD});var mF=class A{constructor(Q={}){if(this.uid=VA("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,Q={...A.defaultOptions,...Q},this.stencil=Q.stencil,this.depth=Q.depth,this.isRoot=Q.isRoot,typeof Q.colorTextures==="number"){this._managedColorTextures=!0;for(let I=0;I<Q.colorTextures;I++)this.colorTextures.push(new GA({width:Q.width,height:Q.height,resolution:Q.resolution,antialias:Q.antialias}))}else{this.colorTextures=[...Q.colorTextures.map((B)=>B.source)];let I=this.colorTexture.source;this.resize(I.width,I.height,I._resolution)}if(this.colorTexture.source.on("resize",this.onSourceResize,this),Q.depthStencilTexture||this.stencil)if(Q.depthStencilTexture instanceof v||Q.depthStencilTexture instanceof GA)this.depthStencilTexture=Q.depthStencilTexture.source;else this.ensureDepthStencilTexture()}get size(){let Q=this._size;return Q[0]=this.pixelWidth,Q[1]=this.pixelHeight,Q}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(Q){this.resize(Q.width,Q.height,Q._resolution,!0)}ensureDepthStencilTexture(){if(!this.depthStencilTexture)this.depthStencilTexture=new GA({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1})}resize(Q,I,B=this.resolution,E=!1){if(this.dirtyId++,this.colorTextures.forEach((C,J)=>{if(E&&J===0)return;C.source.resize(Q,I,B)}),this.depthStencilTexture)this.depthStencilTexture.source.resize(Q,I,B)}destroy(){if(this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures)this.colorTextures.forEach((Q)=>{Q.destroy()});if(this.depthStencilTexture)this.depthStencilTexture.destroy(),delete this.depthStencilTexture}},z0;var iZ=Y(()=>{HQ();WQ();FA();mF.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};z0=mF});function tJ(A,Q){if(!rJ.has(A)){let I=new v({source:new GQ({resource:A,...Q})}),B=()=>{if(rJ.get(A)===I)rJ.delete(A)};I.once("destroy",B),I.source.once("destroy",B),rJ.set(A,I)}return rJ.get(A)}var rJ;var nZ=Y(()=>{ZE();yB();FA();rJ=new Map;WI.register(rJ)});var MD=class A{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(Q){this.texture.source.autoDensity=Q}get resolution(){return this.texture.source._resolution}set resolution(Q){this.texture.source.resize(this.texture.source.width,this.texture.source.height,Q)}init(Q){if(Q={...A.defaultOptions,...Q},Q.view)c(BA,"ViewSystem.view has been renamed to ViewSystem.canvas"),Q.canvas=Q.view;this.screen=new EA(0,0,Q.width,Q.height),this.canvas=Q.canvas||u.get().createCanvas(),this.antialias=!!Q.antialias,this.texture=tJ(this.canvas,Q),this.renderTarget=new z0({colorTextures:[this.texture],depth:!!Q.depth,isRoot:!0}),this.texture.source.transparent=Q.backgroundAlpha<1,this.resolution=Q.resolution}resize(Q,I,B){this.texture.source.resize(Q,I,B),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(Q=!1){if((typeof Q==="boolean"?Q:!!Q?.removeView)&&this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);this.texture.destroy()}},z4;var D4=Y(()=>{jA();M();ZQ();gA();iZ();nZ();MD.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"view",priority:0};MD.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};z4=MD});var DC,eJ;var AK=Y(()=>{OZ();jZ();S1();PZ();gZ();mZ();pZ();s1();a1();t1();lZ();A4();I4();K4();H4();Z4();Y4();U4();N4();D4();DC=[r1,sJ,N0,z4,hJ,J4,V4,oJ,e1,mJ,$4,aJ],eJ=[NC,V0,YC,wC,VC,iJ,lJ,qC]});class QK{constructor(A){this._hash=Object.create(null),this._renderer=A}contextChange(A){this._gpu=A}getBindGroup(A,Q,I){return A._updateKey(),this._hash[A._key]||this._createBindGroup(A,Q,I)}_createBindGroup(A,Q,I){let B=this._gpu.device,E=Q.layout[I],C=[],J=this._renderer;for(let Z in E){let q=A.resources[Z]??A.resources[E[Z]],w;if(q._resourceType==="uniformGroup"){let $=q;J.ubo.updateUniformGroup($);let U=$.buffer;w={buffer:J.buffer.getGPUBuffer(U),offset:0,size:U.descriptor.size}}else if(q._resourceType==="buffer"){let $=q;w={buffer:J.buffer.getGPUBuffer($),offset:0,size:$.descriptor.size}}else if(q._resourceType==="bufferResource"){let $=q;w={buffer:J.buffer.getGPUBuffer($.buffer),offset:$.offset,size:$.size}}else if(q._resourceType==="textureSampler"){let $=q;w=J.texture.getGpuSampler($)}else if(q._resourceType==="textureSource"){let $=q;w=J.texture.getTextureView($)}C.push({binding:E[Z],resource:w})}let K=J.shader.getProgramData(Q).bindGroups[I],H=B.createBindGroup({layout:K,entries:C});return this._hash[A._key]=H,H}destroy(){this._hash=null,this._renderer=null}}var W4=Y(()=>{M();QK.extension={type:[N.WebGPUSystem],name:"bindGroup"}});class vA{constructor(A){this.items=Object.create(null);let{renderer:Q,type:I,onUnload:B,priority:E,name:C}=A;this._renderer=Q,Q.gc.addResourceHash(this,"items",I,E??0),this._onUnload=B,this.name=C}add(A){if(this.items[A.uid])return!1;return this.items[A.uid]=A,A.once("unload",this.remove,this),A._gcLastUsed=this._renderer.gc.now,!0}remove(A,...Q){if(!this.items[A.uid])return;let I=A._gpuData[this._renderer.uid];if(!I)return;this._onUnload?.(A,...Q),I.destroy(),A._gpuData[this._renderer.uid]=null,this.items[A.uid]=null}removeAll(...A){Object.values(this.items).forEach((Q)=>Q&&this.remove(Q,...A))}destroy(...A){this.removeAll(...A),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}var xQ=()=>{};class X4{constructor(A){this.gpuBuffer=A}destroy(){this.gpuBuffer.destroy(),this.gpuBuffer=null}}class IK{constructor(A){this._renderer=A,this._managedBuffers=new vA({renderer:A,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"gpuBuffer"})}contextChange(A){this._gpu=A}getGPUBuffer(A){return A._gcLastUsed=this._renderer.gc.now,A._gpuData[this._renderer.uid]?.gpuBuffer||this.createGPUBuffer(A)}updateBuffer(A){let Q=this.getGPUBuffer(A),I=A.data;if(A._updateID&&I)A._updateID=0,this._gpu.device.queue.writeBuffer(Q,0,I.buffer,0,(A._updateSize||I.byteLength)+3&-4);return Q}destroyAll(){this._managedBuffers.removeAll()}onBufferUnload(A){A.off("update",this.updateBuffer,this),A.off("change",this.onBufferChange,this)}createGPUBuffer(A){let Q=this._gpu.device.createBuffer(A.descriptor);if(A._updateID=0,A._resourceId=VA("resource"),A.data)Y0(A.data.buffer,Q.getMappedRange(),A.data.byteOffset,A.data.byteLength),Q.unmap();if(A._gpuData[this._renderer.uid]=new X4(Q),this._managedBuffers.add(A))A.on("update",this.updateBuffer,this),A.on("change",this.onBufferChange,this);return Q}onBufferChange(A){this._managedBuffers.remove(A),A._updateID=0,this.createGPUBuffer(A)}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gpu=null}}var k4=Y(()=>{M();xQ();HQ();SZ();IK.extension={type:[N.WebGPUSystem],name:"buffer"}});class BK{constructor(A){this._colorMaskCache=15,this._renderer=A}setMask(A){if(this._colorMaskCache===A)return;this._colorMaskCache=A,this._renderer.pipeline.setColorMask(A)}destroy(){this._renderer=null,this._colorMaskCache=null}}var F4=Y(()=>{M();BK.extension={type:[N.WebGPUSystem],name:"colorMask"}});class D0{constructor(A){this._renderer=A}async init(A){if(this._initPromise)return this._initPromise;return this._initPromise=(A.gpu?Promise.resolve(A.gpu):this._createDeviceAndAdaptor(A)).then((Q)=>{this.gpu=Q,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise}contextChange(A){this._renderer.gpu=A}async _createDeviceAndAdaptor(A){let Q=await u.get().getNavigator().gpu.requestAdapter({powerPreference:A.powerPreference,forceFallbackAdapter:A.forceFallbackAdapter}),I=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter((E)=>Q.features.has(E)),B=await Q.requestDevice({requiredFeatures:I});return{adapter:Q,device:B}}destroy(){this.gpu=null,this._renderer=null}}var O4=Y(()=>{jA();M();D0.extension={type:[N.WebGPUSystem],name:"device"};D0.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}});class EK{constructor(A){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=A}renderStart(){this.commandFinished=new Promise((A)=>{this._resolveCommandFinished=A}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(A){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(A.descriptor)}endRenderPass(){if(this.renderPassEncoder)this.renderPassEncoder.end();this.renderPassEncoder=null}setViewport(A){this.renderPassEncoder.setViewport(A.x,A.y,A.width,A.height,0,1)}setPipelineFromGeometryProgramAndState(A,Q,I,B){let E=this._renderer.pipeline.getPipeline(A,Q,I,B);this.setPipeline(E)}setPipeline(A){if(this._boundPipeline===A)return;this._boundPipeline=A,this.renderPassEncoder.setPipeline(A)}_setVertexBuffer(A,Q){if(this._boundVertexBuffer[A]===Q)return;this._boundVertexBuffer[A]=Q,this.renderPassEncoder.setVertexBuffer(A,this._renderer.buffer.updateBuffer(Q))}_setIndexBuffer(A){if(this._boundIndexBuffer===A)return;this._boundIndexBuffer=A;let Q=A.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(A),Q)}resetBindGroup(A){this._boundBindGroup[A]=null}setBindGroup(A,Q,I){if(this._boundBindGroup[A]===Q)return;this._boundBindGroup[A]=Q,Q._touch(this._renderer.gc.now,this._renderer.tick);let B=this._renderer.bindGroup.getBindGroup(Q,I,A);this.renderPassEncoder.setBindGroup(A,B)}setGeometry(A,Q){let I=this._renderer.pipeline.getBufferNamesToBind(A,Q);for(let B in I)this._setVertexBuffer(parseInt(B,10),A.attributes[I[B]].buffer);if(A.indexBuffer)this._setIndexBuffer(A.indexBuffer)}_setShaderBindGroups(A,Q){for(let I in A.groups){let B=A.groups[I];if(!Q)this._syncBindGroup(B);this.setBindGroup(I,B,A.gpuProgram)}}_syncBindGroup(A){for(let Q in A.resources){let I=A.resources[Q];if(I.isUniformGroup)this._renderer.ubo.updateUniformGroup(I)}}draw(A){let{geometry:Q,shader:I,state:B,topology:E,size:C,start:J,instanceCount:K,skipSync:H}=A;if(this.setPipelineFromGeometryProgramAndState(Q,I.gpuProgram,B,E),this.setGeometry(Q,I.gpuProgram),this._setShaderBindGroups(I,H),Q.indexBuffer)this.renderPassEncoder.drawIndexed(C||Q.indexBuffer.data.length,K??Q.instanceCount,J||0);else this.renderPassEncoder.draw(C||Q.getSize(),K??Q.instanceCount,J||0)}finishRenderPass(){if(this.renderPassEncoder)this.renderPassEncoder.end(),this.renderPassEncoder=null}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let A=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1],this._renderer.renderTarget.mipLevel,this._renderer.renderTarget.layer);this.renderPassEncoder=this.commandEncoder.beginRenderPass(A);let Q=this._boundPipeline,I={...this._boundVertexBuffer},B=this._boundIndexBuffer,E={...this._boundBindGroup};this._clearCache();let C=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(C.x,C.y,C.width,C.height,0,1),this.setPipeline(Q);for(let J in I)this._setVertexBuffer(J,I[J]);for(let J in E)this.setBindGroup(J,E[J],null);this._setIndexBuffer(B)}_clearCache(){for(let A=0;A<16;A++)this._boundBindGroup[A]=null,this._boundVertexBuffer[A]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(A){this._gpu=A}}var G4=Y(()=>{M();EK.extension={type:[N.WebGPUSystem],name:"encoder",priority:1}});class CK{constructor(A){this._renderer=A}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}var j4=Y(()=>{M();CK.extension={type:[N.WebGPUSystem],name:"limits"}});class JK{constructor(A){this._renderTargetStencilState=Object.create(null),this._renderer=A,A.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(A){let Q=this._renderTargetStencilState[A.uid];if(!Q)Q=this._renderTargetStencilState[A.uid]={stencilMode:lA.DISABLED,stencilReference:0};this._activeRenderTarget=A,this.setStencilMode(Q.stencilMode,Q.stencilReference)}setStencilMode(A,Q){let I=this._renderTargetStencilState[this._activeRenderTarget.uid];I.stencilMode=A,I.stencilReference=Q;let B=this._renderer;B.pipeline.setStencilMode(A),B.encoder.renderPassEncoder.setStencilReference(Q)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}var L4=Y(()=>{M();GE();JK.extension={type:[N.WebGPUSystem],name:"stencil"}});class W0{constructor(A){this._syncFunctionHash=Object.create(null),this._adaptor=A,this._systemCheck()}_systemCheck(){if(!SJ())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(A){let Q=this.getUniformGroupData(A);A.buffer||(A.buffer=new YQ({data:new Float32Array(Q.layout.size/4),usage:OA.UNIFORM|OA.COPY_DST}))}getUniformGroupData(A){return this._syncFunctionHash[A._signature]||this._initUniformGroup(A)}_initUniformGroup(A){let Q=A._signature,I=this._syncFunctionHash[Q];if(!I){let B=Object.keys(A.uniformStructures).map((J)=>A.uniformStructures[J]),E=this._adaptor.createUboElements(B),C=this._generateUboSync(E.uboElements);I=this._syncFunctionHash[Q]={layout:E,syncFunction:C}}return this._syncFunctionHash[Q]}_generateUboSync(A){return this._adaptor.generateUboSync(A)}syncUniformGroup(A,Q,I){let B=this.getUniformGroupData(A);A.buffer||(A.buffer=new YQ({data:new Float32Array(B.layout.size/4),usage:OA.UNIFORM|OA.COPY_DST}));let E=null;if(!Q)Q=A.buffer.data,E=A.buffer.dataInt32;return I||(I=0),B.syncFunction(A.uniforms,Q,E,I),!0}updateUniformGroup(A){if(A.isStatic&&!A._dirtyId)return!1;A._dirtyId=0;let Q=this.syncUniformGroup(A);return A.buffer.update(),Q}destroy(){this._syncFunctionHash=null}}var oZ=Y(()=>{wZ();hB();VB()});function R4(A){let Q=A.map((B)=>({data:B,offset:0,size:0})),I=0;for(let B=0;B<Q.length;B++){let E=Q[B],C=X0[E.data.type].size,J=X0[E.data.type].align;if(!X0[E.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${E.data.type}`);if(E.data.size>1)C=Math.max(C,J)*E.data.size;I=Math.ceil(I/J)*J,E.size=C,E.offset=I,I+=C}return I=Math.ceil(I/16)*16,{uboElements:Q,size:I}}var X0;var sZ=Y(()=>{X0={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}}});var WB;var aZ=Y(()=>{WB=[{type:"mat3x3<f32>",test:(A)=>{return A.value.a!==void 0},ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:(A)=>A.type==="vec4<f32>"&&A.size===1&&A.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:(A)=>A.type==="vec2<f32>"&&A.size===1&&A.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:(A)=>A.type==="vec4<f32>"&&A.size===1&&A.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:(A)=>A.type==="vec3<f32>"&&A.size===1&&A.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}]});function KK(A,Q,I,B){let E=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],C=0;for(let K=0;K<A.length;K++){let H=A[K],Z=H.data.name,q=!1,w=0;for(let $=0;$<WB.length;$++)if(WB[$].test(H.data)){w=H.offset/4,E.push(`name = "${Z}";`,`offset += ${w-C};`,WB[$][Q]||WB[$].ubo),q=!0;break}if(!q)if(H.data.size>1)w=H.offset/4,E.push(I(H,w-C));else{let $=B[H.data.type];w=H.offset/4,E.push(`
                    v = uv.${Z};
                    offset += ${w-C};
                    ${$};
                `)}C=w}let J=E.join(`
`);return new Function("uv","data","dataInt32","offset",J)}var rZ=Y(()=>{aZ()});function HK(A,Q){return`
        for (let i = 0; i < ${A*Q}; i++) {
            data[offset + (((i / ${A})|0) * 4) + (i % ${A})] = v[i];
        }
    `}var tZ,P4;var eZ=Y(()=>{tZ={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":HK(3,2),"mat4x2<f32>":HK(4,2),"mat2x3<f32>":HK(2,3),"mat4x3<f32>":HK(4,3),"mat2x4<f32>":HK(2,4),"mat3x4<f32>":HK(3,4)},P4={...tZ,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `}});function M4(A,Q){let{size:I,align:B}=X0[A.data.type],E=(B-I)/4,C=A.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${A.data.name};
         ${Q!==0?`offset += ${Q};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${A.data.size*(I/4)}; i++)
         {
             for(var j = 0; j < ${I/4}; j++)
             {
                 ${C}[arrayOffset++] = v[t++];
             }
             ${E!==0?`arrayOffset += ${E};`:""}
         }
     `}var g4=Y(()=>{sZ()});function _4(A){return KK(A,"uboWgsl",M4,P4)}var S4=Y(()=>{rZ();eZ();g4()});var ZK;var b4=Y(()=>{M();oZ();sZ();S4();ZK=class ZK extends W0{constructor(){super({createUboElements:R4,generateUboSync:_4})}};ZK.extension={type:[N.WebGPUSystem],name:"ubo"}});var jE;var qK=Y(()=>{yQ();HQ();jE=class jE extends mA{constructor({buffer:A,offset:Q,size:I}){super();this.uid=VA("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=VA("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=A,this.offset=Q|0,this.size=I,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=VA("resource"),this.emit("change",this)}destroy(A=!1){if(this.destroyed=!0,A)this.buffer.destroy();this.emit("change",this),this.buffer=null,this.removeAllListeners()}}});class A6{constructor({minUniformOffsetAlignment:A}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=A,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(A){if(A>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${A*4}`);let Q=this.byteIndex,I=Q+A*4;if(I=Math.ceil(I/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,I>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=I,Q}addGroup(A){let Q=this.addEmptyGroup(A.length);for(let I=0;I<A.length;I++)this.data[Q/4+I]=A[I];return Q}destroy(){this.data=null}}var f4=()=>{};class wK{constructor(A){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=A,this._batchBuffer=new A6({minUniformOffsetAlignment:WC});let Q=256/WC;for(let I=0;I<Q;I++){let B=OA.UNIFORM|OA.COPY_DST;if(I===0)B|=OA.COPY_SRC;this._buffers.push(new YQ({data:this._batchBuffer.data,usage:B}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){this._bindGroupHash=Object.create(null),this._batchBuffer.clear()}getUniformBindGroup(A,Q){if(!Q&&this._bindGroupHash[A.uid])return this._bindGroupHash[A.uid];this._renderer.ubo.ensureUniformGroup(A);let I=A.buffer.data,B=this._batchBuffer.addEmptyGroup(I.length);return this._renderer.ubo.syncUniformGroup(A,this._batchBuffer.data,B/4),this._bindGroupHash[A.uid]=this._getBindGroup(B/WC),this._bindGroupHash[A.uid]}getUboResource(A){this._renderer.ubo.updateUniformGroup(A);let Q=A.buffer.data,I=this._batchBuffer.addGroup(Q);return this._getBufferResource(I/WC)}getArrayBindGroup(A){let Q=this._batchBuffer.addGroup(A);return this._getBindGroup(Q/WC)}getArrayBufferResource(A){let I=this._batchBuffer.addGroup(A)/WC;return this._getBufferResource(I)}_getBufferResource(A){if(!this._bufferResources[A]){let Q=this._buffers[A%2];this._bufferResources[A]=new jE({buffer:Q,offset:(A/2|0)*256,size:WC})}return this._bufferResources[A]}_getBindGroup(A){if(!this._bindGroups[A]){let Q=new fQ({0:this._getBufferResource(A)});this._bindGroups[A]=Q}return this._bindGroups[A]}_uploadBindGroups(){let A=this._renderer.buffer,Q=this._buffers[0];Q.update(this._batchBuffer.byteIndex),A.updateBuffer(Q);let I=this._renderer.gpu.device.createCommandEncoder();for(let B=1;B<this._buffers.length;B++){let E=this._buffers[B];I.copyBufferToBuffer(A.getGPUBuffer(Q),WC,A.getGPUBuffer(E),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([I.finish()])}destroy(){for(let A=0;A<this._bindGroups.length;A++)this._bindGroups[A]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let A=0;A<this._buffers.length;A++)this._buffers[A].destroy();this._buffers=null;for(let A=0;A<this._bufferResources.length;A++)this._bufferResources[A].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._renderer=null}}var WC=128;var y4=Y(()=>{M();hB();qK();VB();f4();TB();wK.extension={type:[N.WebGPUPipes],name:"uniformBatch"}});function YK(A,Q){for(let I in A.attributes){let B=A.attributes[I],E=Q[I];if(E)B.format??(B.format=E.format),B.offset??(B.offset=E.offset),B.instance??(B.instance=E.instance);else n(`Attribute ${I} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}aM(A)}function aM(A){let{buffers:Q,attributes:I}=A,B={},E={};for(let C in Q){let J=Q[C];B[J.uid]=0,E[J.uid]=0}for(let C in I){let J=I[C];B[J.buffer.uid]+=QI(J.format).stride}for(let C in I){let J=I[C];J.stride??(J.stride=B[J.buffer.uid]),J.start??(J.start=E[J.buffer.uid]),E[J.buffer.uid]+=QI(J.format).stride}}var Q6=Y(()=>{_A();XE()});var eI;var I6=Y(()=>{GE();eI=[];eI[lA.NONE]=void 0;eI[lA.DISABLED]={stencilWriteMask:0,stencilReadMask:0};eI[lA.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};eI[lA.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};eI[lA.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};eI[lA.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}}});function tM(A,Q,I,B,E){return A<<24|Q<<16|I<<10|B<<5|E}function eM(A,Q,I,B,E){return I<<8|A<<5|B<<3|E<<1|Q}class $K{constructor(A){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._colorTargetCount=1,this._renderer=A}contextChange(A){this._gpu=A,this.setStencilMode(lA.DISABLED),this._updatePipeHash()}setMultisampleCount(A){if(this._multisampleCount===A)return;this._multisampleCount=A,this._updatePipeHash()}setRenderTarget(A){this._multisampleCount=A.msaaSamples,this._depthStencilAttachment=A.descriptor.depthStencilAttachment?1:0,this._colorTargetCount=A.colorTargetCount,this._updatePipeHash()}setColorMask(A){if(this._colorMask===A)return;this._colorMask=A,this._updatePipeHash()}setStencilMode(A){if(this._stencilMode===A)return;this._stencilMode=A,this._stencilState=eI[A],this._updatePipeHash()}setPipeline(A,Q,I,B){let E=this.getPipeline(A,Q,I);B.setPipeline(E)}getPipeline(A,Q,I,B){if(!A._layoutKey)YK(A,Q.attributeData),this._generateBufferKey(A);B||(B=A.topology);let E=tM(A._layoutKey,Q._layoutKey,I.data,I._blendModeId,rM[B]);if(this._pipeCache[E])return this._pipeCache[E];return this._pipeCache[E]=this._createPipeline(A,Q,I,B),this._pipeCache[E]}_createPipeline(A,Q,I,B){let E=this._gpu.device,C=this._createVertexBufferLayouts(A,Q),J=this._renderer.state.getColorTargets(I,this._colorTargetCount),K=this._stencilMode===lA.RENDERING_MASK_ADD?0:this._colorMask;for(let w=0;w<J.length;w++)J[w].writeMask=K;let H=this._renderer.shader.getProgramData(Q).pipeline,Z={vertex:{module:this._getModule(Q.vertex.source),entryPoint:Q.vertex.entryPoint,buffers:C},fragment:{module:this._getModule(Q.fragment.source),entryPoint:Q.fragment.entryPoint,targets:J},primitive:{topology:B,cullMode:I.cullMode},layout:H,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};if(this._depthStencilAttachment)Z.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:I.depthTest,depthCompare:I.depthTest?"less":"always"};return E.createRenderPipeline(Z)}_getModule(A){return this._moduleCache[A]||this._createModule(A)}_createModule(A){let Q=this._gpu.device;return this._moduleCache[A]=Q.createShaderModule({code:A}),this._moduleCache[A]}_generateBufferKey(A){let Q=[],I=0,B=Object.keys(A.attributes).sort();for(let C=0;C<B.length;C++){let J=A.attributes[B[C]];Q[I++]=J.offset,Q[I++]=J.format,Q[I++]=J.stride,Q[I++]=J.instance}let E=Q.join("|");return A._layoutKey=UB(E,"geometry"),A._layoutKey}_generateAttributeLocationsKey(A){let Q=[],I=0,B=Object.keys(A.attributeData).sort();for(let C=0;C<B.length;C++){let J=A.attributeData[B[C]];Q[I++]=J.location}let E=Q.join("|");return A._attributeLocationsKey=UB(E,"programAttributes"),A._attributeLocationsKey}getBufferNamesToBind(A,Q){let I=A._layoutKey<<16|Q._attributeLocationsKey;if(this._bindingNamesCache[I])return this._bindingNamesCache[I];let B=this._createVertexBufferLayouts(A,Q),E=Object.create(null),C=Q.attributeData;for(let J=0;J<B.length;J++){let H=Object.values(B[J].attributes)[0].shaderLocation;for(let Z in C)if(C[Z].location===H){E[J]=Z;break}}return this._bindingNamesCache[I]=E,E}_createVertexBufferLayouts(A,Q){if(!Q._attributeLocationsKey)this._generateAttributeLocationsKey(Q);let I=A._layoutKey<<16|Q._attributeLocationsKey;if(this._bufferLayoutsCache[I])return this._bufferLayoutsCache[I];let B=[];return A.buffers.forEach((E)=>{let C={arrayStride:0,stepMode:"vertex",attributes:[]},J=C.attributes;for(let K in Q.attributeData){let H=A.attributes[K];if((H.divisor??1)!==1)n(`Attribute ${K} has an invalid divisor value of '${H.divisor}'. WebGPU only supports a divisor value of 1`);if(H.buffer===E)C.arrayStride=H.stride,C.stepMode=H.instance?"instance":"vertex",J.push({shaderLocation:Q.attributeData[K].location,offset:H.offset,format:H.format})}if(J.length)B.push(C)}),this._bufferLayoutsCache[I]=B,B}_updatePipeHash(){let A=eM(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment,this._colorTargetCount);if(!this._pipeStateCaches[A])this._pipeStateCaches[A]=Object.create(null);this._pipeCache=this._pipeStateCaches[A]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}var rM;var v4=Y(()=>{M();_A();Q6();GE();Q0();I6();rM={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};$K.extension={type:[N.WebGPUSystem],name:"pipeline"}});function T4(A,Q,I,B,E,C){let J=C?1:-1;return A.identity(),A.a=1/B*2,A.d=J*(1/E*2),A.tx=-1-Q*A.a,A.ty=-J-I*A.d,A}var h4=()=>{};function x4(A){let Q=A.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&Q instanceof HTMLCanvasElement&&document.body.contains(Q)}var m4=()=>{};class LE{constructor(A){this.rootViewPort=new EA,this.viewport=new EA,this.mipLevel=0,this.layer=0,this.onRenderTargetChange=new E0("onRenderTargetChange"),this.projectionMatrix=new x,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=A,A.gc.addCollection(this,"_gpuRenderTargetHash","hash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:A,clear:Q,clearColor:I,frame:B,mipLevel:E,layer:C}){this._renderTargetStack.length=0,this.push(A,Q,I,B,E??0,C??0),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=x4(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(A,Q=!0,I,B,E=0,C=0){let J=this.getRenderTarget(A),K=this.renderTarget!==J;this.renderTarget=J,this.renderSurface=A;let H=this.getGpuRenderTarget(J);if(J.pixelWidth!==H.width||J.pixelHeight!==H.height)this.adaptor.resizeGpuRenderTarget(J),H.width=J.pixelWidth,H.height=J.pixelHeight;let Z=J.colorTexture,q=this.viewport,w=Z.arrayLayerCount||1;if((C|0)!==C)C|=0;if(C<0||C>=w)throw new Error(`[RenderTargetSystem] layer ${C} is out of bounds (arrayLayerCount=${w}).`);this.mipLevel=E|0,this.layer=C|0;let $=Math.max(Z.pixelWidth>>E,1),U=Math.max(Z.pixelHeight>>E,1);if(!B&&A instanceof v)B=A.frame;if(B){let V=Z._resolution,z=1<<Math.max(E|0,0),D=B.x*V+0.5|0,W=B.y*V+0.5|0,j=B.width*V+0.5|0,O=B.height*V+0.5|0,F=Math.floor(D/z),L=Math.floor(W/z),R=Math.ceil(j/z),_=Math.ceil(O/z);F=Math.min(Math.max(F,0),$-1),L=Math.min(Math.max(L,0),U-1),R=Math.min(Math.max(R,1),$-F),_=Math.min(Math.max(_,1),U-L),q.x=F,q.y=L,q.width=R,q.height=_}else q.x=0,q.y=0,q.width=$,q.height=U;if(T4(this.projectionMatrix,0,0,q.width/Z.resolution,q.height/Z.resolution,!J.isRoot),this.adaptor.startRenderPass(J,Q,I,q,E,C),K)this.onRenderTargetChange.emit(J);return J}clear(A,Q=PQ.ALL,I,B=this.mipLevel,E=this.layer){if(!Q)return;if(A)A=this.getRenderTarget(A);this.adaptor.clear(A||this.renderTarget,Q,I,this.viewport,B,E)}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(A,Q=PQ.ALL,I,B,E=0,C=0){let J=this.bind(A,Q,I,B,E,C);return this._renderTargetStack.push({renderTarget:J,frame:B,mipLevel:E,layer:C}),J}pop(){this._renderTargetStack.pop();let A=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(A.renderTarget,!1,null,A.frame,A.mipLevel,A.layer)}getRenderTarget(A){if(A.isTexture)A=A.source;return this._renderSurfaceToRenderTargetHash.get(A)??this._initRenderTarget(A)}copyToTexture(A,Q,I,B,E){if(I.x<0)B.width+=I.x,E.x-=I.x,I.x=0;if(I.y<0)B.height+=I.y,E.y-=I.y,I.y=0;let{pixelWidth:C,pixelHeight:J}=A;return B.width=Math.min(B.width,C-I.x),B.height=Math.min(B.height,J-I.y),this.adaptor.copyToTexture(A,Q,I,B,E)}ensureDepthStencil(){if(!this.renderTarget.stencil)this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport,0,this.layer)}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((A,Q)=>{if(A!==Q)A.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(A){let Q=null;if(GQ.test(A))A=tJ(A).source;if(A instanceof z0)Q=A;else if(A instanceof GA){if(Q=new z0({colorTextures:[A]}),A.source instanceof GQ)Q.isRoot=!0;A.once("destroy",()=>{Q.destroy(),this._renderSurfaceToRenderTargetHash.delete(A);let I=this._gpuRenderTargetHash[Q.uid];if(I)this._gpuRenderTargetHash[Q.uid]=null,this.adaptor.destroyGpuRenderTarget(I)})}return this._renderSurfaceToRenderTargetHash.set(A,Q),Q}getGpuRenderTarget(A){return this._gpuRenderTargetHash[A.uid]||(this._gpuRenderTargetHash[A.uid]=this.adaptor.initGpuRenderTarget(A))}resetState(){this.renderTarget=null,this.renderSurface=null}}var UK=Y(()=>{NA();ZQ();AC();h4();zZ();yB();WQ();FA();nZ();m4();iZ()});class B6{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}var c4=()=>{};class E6{init(A,Q){this._renderer=A,this._renderTargetSystem=Q}copyToTexture(A,Q,I,B,E){let C=this._renderer,J=this._getGpuColorTexture(A),K=C.texture.getGpuSource(Q.source);return C.encoder.commandEncoder.copyTextureToTexture({texture:J,origin:I},{texture:K,origin:E},B),Q}startRenderPass(A,Q=!0,I,B,E=0,C=0){let K=this._renderTargetSystem.getGpuRenderTarget(A);if(C!==0&&K.msaaTextures?.length)throw new Error("[RenderTargetSystem] Rendering to array layers is not supported with MSAA render targets.");if(E>0&&K.msaaTextures?.length)throw new Error("[RenderTargetSystem] Rendering to mip levels is not supported with MSAA render targets.");let H=this.getDescriptor(A,Q,I,E,C);K.descriptor=H,this._renderer.pipeline.setRenderTarget(K),this._renderer.encoder.beginRenderPass(K),this._renderer.encoder.setViewport(B)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(A){let Q=this._renderTargetSystem.getGpuRenderTarget(A);if(Q.contexts[0])return Q.contexts[0].getCurrentTexture();return this._renderer.texture.getGpuSource(A.colorTextures[0].source)}getDescriptor(A,Q,I,B=0,E=0){if(typeof Q==="boolean")Q=Q?PQ.ALL:PQ.NONE;let C=this._renderTargetSystem,J=C.getGpuRenderTarget(A),K=A.colorTextures.map((q,w)=>{let $=J.contexts[w],U,V;if($){if(E!==0)throw new Error("[RenderTargetSystem] Rendering to array layers is not supported for canvas targets.");U=$.getCurrentTexture().createView()}else U=this._renderer.texture.getGpuSource(q).createView({dimension:"2d",baseMipLevel:B,mipLevelCount:1,baseArrayLayer:E,arrayLayerCount:1});if(J.msaaTextures[w])V=U,U=this._renderer.texture.getTextureView(J.msaaTextures[w]);let z=Q&PQ.COLOR?"clear":"load";return I??(I=C.defaultClearColor),{view:U,resolveTarget:V,clearValue:I,storeOp:"store",loadOp:z}}),H;if((A.stencil||A.depth)&&!A.depthStencilTexture)A.ensureDepthStencilTexture(),A.depthStencilTexture.source.sampleCount=J.msaa?4:1;if(A.depthStencilTexture){let q=Q&PQ.STENCIL?"clear":"load",w=Q&PQ.DEPTH?"clear":"load";H={view:this._renderer.texture.getGpuSource(A.depthStencilTexture.source).createView({dimension:"2d",baseMipLevel:B,mipLevelCount:1,baseArrayLayer:E,arrayLayerCount:1}),stencilStoreOp:"store",stencilLoadOp:q,depthClearValue:1,depthLoadOp:w,depthStoreOp:"store"}}return{colorAttachments:K,depthStencilAttachment:H}}clear(A,Q=!0,I,B,E=0,C=0){if(!Q)return;let{gpu:J,encoder:K}=this._renderer,H=J.device;if(K.commandEncoder===null){let q=H.createCommandEncoder(),w=this.getDescriptor(A,Q,I,E,C),$=q.beginRenderPass(w);$.setViewport(B.x,B.y,B.width,B.height,0,1),$.end();let U=q.finish();H.queue.submit([U])}else this.startRenderPass(A,Q,I,B,E,C)}initGpuRenderTarget(A){A.isRoot=!0;let Q=new B6;if(Q.colorTargetCount=A.colorTextures.length,A.colorTextures.forEach((I,B)=>{if(I instanceof GQ){let E=I.resource.getContext("webgpu"),C=I.transparent?"premultiplied":"opaque";try{E.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:C})}catch(J){console.error(J)}Q.contexts[B]=E}if(Q.msaa=I.source.antialias,I.source.antialias){let E=new GA({width:0,height:0,sampleCount:4,arrayLayerCount:I.source.arrayLayerCount});Q.msaaTextures[B]=E}}),Q.msaa){if(Q.msaaSamples=4,A.depthStencilTexture)A.depthStencilTexture.source.sampleCount=4}return Q}destroyGpuRenderTarget(A){A.contexts.forEach((Q)=>{Q.unconfigure()}),A.msaaTextures.forEach((Q)=>{Q.destroy()}),A.msaaTextures.length=0,A.contexts.length=0}ensureDepthStencilTexture(A){let Q=this._renderTargetSystem.getGpuRenderTarget(A);if(A.depthStencilTexture&&Q.msaa)A.depthStencilTexture.source.sampleCount=4}resizeGpuRenderTarget(A){let Q=this._renderTargetSystem.getGpuRenderTarget(A);if(Q.width=A.width,Q.height=A.height,Q.msaa)A.colorTextures.forEach((I,B)=>{Q.msaaTextures[B]?.resize(I.source.width,I.source.height,I.source._resolution)})}}var d4=Y(()=>{AC();yB();WQ();c4()});var VK;var p4=Y(()=>{M();UK();d4();VK=class VK extends LE{constructor(A){super(A);this.adaptor=new E6,this.adaptor.init(A,this)}};VK.extension={type:[N.WebGPUSystem],name:"renderTarget"}});class NK{constructor(){this._gpuProgramData=Object.create(null)}contextChange(A){this._gpu=A}getProgramData(A){return this._gpuProgramData[A._layoutKey]||this._createGPUProgramData(A)}_createGPUProgramData(A){let Q=this._gpu.device,I=A.gpuLayout.map((E)=>Q.createBindGroupLayout({entries:E})),B={bindGroupLayouts:I};return this._gpuProgramData[A._layoutKey]={bindGroups:I,pipeline:Q.createPipelineLayout(B)},this._gpuProgramData[A._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}var u4=Y(()=>{M();NK.extension={type:[N.WebGPUSystem],name:"shader"}});var oQ;var l4=Y(()=>{oQ={};oQ.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};oQ.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};oQ.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};oQ.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};oQ.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};oQ.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};oQ["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};oQ["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};oQ["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};oQ.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};oQ.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};oQ.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}});class zK{constructor(){this.defaultState=new oA,this.defaultState.blend=!0}contextChange(A){this.gpu=A}getColorTargets(A,Q){let I=oQ[A.blendMode]||oQ.normal,B=[],E={format:"bgra8unorm",writeMask:0,blend:I};for(let C=0;C<Q;C++)B[C]=E;return B}destroy(){this.gpu=null}}var i4=Y(()=>{M();$I();l4();zK.extension={type:[N.WebGPUSystem],name:"state"}});class n4{constructor(A){this._canvasPool=Object.create(null),this.canvasOptions=A||{},this.enableFullScreen=!1}_createCanvasAndContext(A,Q){let I=u.get().createCanvas();I.width=A,I.height=Q;let B=I.getContext("2d");return{canvas:I,context:B}}getOptimalCanvasAndContext(A,Q,I=1){A=Math.ceil(A*I-0.000001),Q=Math.ceil(Q*I-0.000001),A=ZB(A),Q=ZB(Q);let B=(A<<17)+(Q<<1);if(!this._canvasPool[B])this._canvasPool[B]=[];let E=this._canvasPool[B].pop();if(!E)E=this._createCanvasAndContext(A,Q);return E}returnCanvasAndContext(A){let Q=A.canvas,{width:I,height:B}=Q,E=(I<<17)+(B<<1);A.context.resetTransform(),A.context.clearRect(0,0,I,B),this._canvasPool[E].push(A)}clear(){this._canvasPool={}}}var mQ;var RE=Y(()=>{jA();mC();ZE();mQ=new n4;WI.register(mQ)});var o4;var s4=Y(()=>{o4={type:"image",upload(A,Q,I,B=0){let E=A.resource,C=(A.pixelWidth|0)*(A.pixelHeight|0),J=E.byteLength/C;I.device.queue.writeTexture({texture:Q,origin:{x:0,y:0,z:B}},E,{offset:0,rowsPerImage:A.pixelHeight,bytesPerRow:A.pixelWidth*J},{width:A.pixelWidth,height:A.pixelHeight,depthOrArrayLayers:1})}}});var C6,A3,a4;var r4=Y(()=>{C6={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},A3={blockBytes:4,blockWidth:1,blockHeight:1},a4={type:"compressed",upload(A,Q,I,B=0){let{pixelWidth:E,pixelHeight:C}=A,J=C6[A.format]||A3;for(let K=0;K<A.resource.length;K++){let H=A.resource[K],Z=Math.ceil(E/J.blockWidth)*J.blockBytes;I.device.queue.writeTexture({texture:Q,mipLevel:K,origin:{x:0,y:0,z:B}},H,{offset:0,bytesPerRow:Z},{width:Math.ceil(E/J.blockWidth)*J.blockWidth,height:Math.ceil(C/J.blockHeight)*J.blockHeight,depthOrArrayLayers:1}),E=Math.max(E>>1,1),C=Math.max(C>>1,1)}}}});function t4(A){return{type:"cube",upload(Q,I,B){let E=Q.faces;for(let C=0;C<cF.length;C++){let J=cF[C],K=E[J];(A[K.uploadMethodId]||A.image).upload(K,I,B,C)}}}}var cF;var e4=Y(()=>{cF=["right","left","top","bottom","front","back"]});var DK;var J6=Y(()=>{jA();_A();DK={type:"image",upload(A,Q,I,B=0){let E=A.resource;if(!E)return;if(globalThis.HTMLImageElement&&E instanceof HTMLImageElement){let H=u.get().createCanvas(E.width,E.height);H.getContext("2d").drawImage(E,0,0,E.width,E.height),A.resource=H,n("ImageSource: Image element passed, converting to canvas and replacing resource.")}let C=Math.min(Q.width,A.resourceWidth||A.pixelWidth),J=Math.min(Q.height,A.resourceHeight||A.pixelHeight),K=A.alphaMode==="premultiply-alpha-on-upload";I.device.queue.copyExternalImageToTexture({source:E},{texture:Q,origin:{x:0,y:0,z:B},premultipliedAlpha:K},{width:C,height:J})}}});var Aw;var Qw=Y(()=>{J6();Aw={type:"video",upload(A,Q,I,B){DK.upload(A,Q,I,B)}}});class K6{constructor(A){this.device=A,this.sampler=A.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(A){let Q=this.pipelines[A];if(!Q){if(!this.mipmapShaderModule)this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `});Q=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:A}]}}),this.pipelines[A]=Q}return Q}generateMipmap(A){let Q=this._getMipmapPipeline(A.format);if(A.dimension==="3d"||A.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let I=A,B=A.depthOrArrayLayers||1,E=A.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!E){let K={size:{width:Math.ceil(A.width/2),height:Math.ceil(A.height/2),depthOrArrayLayers:B},format:A.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:A.mipLevelCount-1};I=this.device.createTexture(K)}let C=this.device.createCommandEncoder({}),J=Q.getBindGroupLayout(0);for(let K=0;K<B;++K){let H=A.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:K,arrayLayerCount:1}),Z=E?1:0;for(let q=1;q<A.mipLevelCount;++q){let w=I.createView({baseMipLevel:Z++,mipLevelCount:1,dimension:"2d",baseArrayLayer:K,arrayLayerCount:1}),$=C.beginRenderPass({colorAttachments:[{view:w,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),U=this.device.createBindGroup({layout:J,entries:[{binding:0,resource:this.sampler},{binding:1,resource:H}]});$.setPipeline(Q),$.setBindGroup(0,U),$.draw(3,1,0,0),$.end(),H=w}}if(!E){let K={width:Math.ceil(A.width/2),height:Math.ceil(A.height/2),depthOrArrayLayers:B};for(let H=1;H<A.mipLevelCount;++H)C.copyTextureToTexture({texture:I,mipLevel:H-1},{texture:A,mipLevel:H},K),K.width=Math.ceil(K.width/2),K.height=Math.ceil(K.height/2)}if(this.device.queue.submit([C.finish()]),!E)I.destroy();return A}}var Iw=()=>{};class H6{constructor(A){this.textureView=null,this.gpuTexture=A}destroy(){this.gpuTexture.destroy(),this.textureView=null,this.gpuTexture=null}}class WK{constructor(A){this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._renderer=A,A.gc.addCollection(this,"_bindGroupHash","hash"),this._managedTextures=new vA({renderer:A,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"gpuTextureSource"});let Q={image:DK,buffer:o4,video:Aw,compressed:a4};this._uploads={...Q,cube:t4(Q)}}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(A){this._gpu=A}initSource(A){return A._gpuData[this._renderer.uid]?.gpuTexture||this._initSource(A)}_initSource(A){if(A.autoGenerateMipmaps){let H=Math.max(A.pixelWidth,A.pixelHeight);A.mipLevelCount=Math.floor(Math.log2(H))+1}let Q=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;if(A.uploadMethodId!=="compressed")Q|=GPUTextureUsage.RENDER_ATTACHMENT,Q|=GPUTextureUsage.COPY_SRC;let I=C6[A.format]||{blockBytes:4,blockWidth:1,blockHeight:1},B=Math.ceil(A.pixelWidth/I.blockWidth)*I.blockWidth,E=Math.ceil(A.pixelHeight/I.blockHeight)*I.blockHeight,C={label:A.label,size:{width:B,height:E,depthOrArrayLayers:A.arrayLayerCount},format:A.format,sampleCount:A.sampleCount,mipLevelCount:A.mipLevelCount,dimension:A.dimension,usage:Q},J=this._gpu.device.createTexture(C);if(A._gpuData[this._renderer.uid]=new H6(J),this._managedTextures.add(A))A.on("update",this.onSourceUpdate,this),A.on("resize",this.onSourceResize,this),A.on("updateMipmaps",this.onUpdateMipmaps,this);return this.onSourceUpdate(A),J}onSourceUpdate(A){let Q=this.getGpuSource(A);if(!Q)return;if(this._uploads[A.uploadMethodId])this._uploads[A.uploadMethodId].upload(A,Q,this._gpu);if(A.autoGenerateMipmaps&&A.mipLevelCount>1)this.onUpdateMipmaps(A)}onUpdateMipmaps(A){if(!this._mipmapGenerator)this._mipmapGenerator=new K6(this._gpu.device);let Q=this.getGpuSource(A);this._mipmapGenerator.generateMipmap(Q)}onSourceUnload(A){A.off("update",this.onSourceUpdate,this),A.off("resize",this.onSourceResize,this),A.off("updateMipmaps",this.onUpdateMipmaps,this)}onSourceResize(A){A._gcLastUsed=this._renderer.gc.now;let Q=A._gpuData[this._renderer.uid],I=Q?.gpuTexture;if(!I)this.initSource(A);else if(I.width!==A.pixelWidth||I.height!==A.pixelHeight)Q.destroy(),this._bindGroupHash[A.uid]=null,A._gpuData[this._renderer.uid]=null,this.initSource(A)}_initSampler(A){return this._gpuSamplers[A._resourceId]=this._gpu.device.createSampler(A),this._gpuSamplers[A._resourceId]}getGpuSampler(A){return this._gpuSamplers[A._resourceId]||this._initSampler(A)}getGpuSource(A){return A._gcLastUsed=this._renderer.gc.now,A._gpuData[this._renderer.uid]?.gpuTexture||this.initSource(A)}getTextureBindGroup(A){return this._bindGroupHash[A.uid]||this._createTextureBindGroup(A)}_createTextureBindGroup(A){let Q=A.source;return this._bindGroupHash[A.uid]=new fQ({0:Q,1:Q.style,2:new PA({uTextureMatrix:{type:"mat3x3<f32>",value:A.textureMatrix.mapCoord}})}),this._bindGroupHash[A.uid]}getTextureView(A){let Q=A.source;Q._gcLastUsed=this._renderer.gc.now;let I=Q._gpuData[this._renderer.uid];if(!I)this.initSource(Q),I=Q._gpuData[this._renderer.uid];return I.textureView||(I.textureView=I.gpuTexture.createView({dimension:Q.viewDimension})),I.textureView}generateCanvas(A){let Q=this._renderer,I=Q.gpu.device.createCommandEncoder(),B=u.get().createCanvas();B.width=A.source.pixelWidth,B.height=A.source.pixelHeight;let E=B.getContext("webgpu");return E.configure({device:Q.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:u.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),I.copyTextureToTexture({texture:Q.texture.getGpuSource(A.source),origin:{x:0,y:0}},{texture:E.getCurrentTexture()},{width:B.width,height:B.height}),Q.gpu.device.queue.submit([I.finish()]),B}getPixels(A){let Q=this.generateCanvas(A),I=mQ.getOptimalCanvasAndContext(Q.width,Q.height),B=I.context;B.drawImage(Q,0,0);let{width:E,height:C}=Q,J=B.getImageData(0,0,E,C),K=new Uint8ClampedArray(J.data.buffer);return mQ.returnCanvasAndContext(I),{pixels:K,width:E,height:C}}destroy(){this._managedTextures.destroy();for(let A of Object.keys(this._bindGroupHash)){let Q=Number(A);this._bindGroupHash[Q]?.destroy()}this._renderer=null,this._gpu=null,this._mipmapGenerator=null,this._gpuSamplers=null,this._bindGroupHash=null}}var Z6=Y(()=>{jA();M();xQ();XQ();RE();TB();s4();r4();e4();J6();Qw();Iw();WK.extension={type:[N.WebGPUSystem],name:"texture"}});var lF={};jH(lF,{WebGPURenderer:()=>Bw});var Q3,I3,B3,dF,pF,uF,Bw;var Ew=Y(()=>{M();F1();j1();R1();QC();AK();nQ();W4();k4();F4();O4();G4();j4();L4();b4();y4();v4();p4();u4();i4();Z6();Q3=[...DC,ZK,EK,D0,CK,IK,WK,VK,NK,zK,$K,BK,JK,QK],I3=[...eJ,wK],B3=[TJ,vJ,yJ],dF=[],pF=[],uF=[];p.handleByNamedList(N.WebGPUSystem,dF);p.handleByNamedList(N.WebGPUPipes,pF);p.handleByNamedList(N.WebGPUPipesAdaptor,uF);p.add(...Q3,...I3,...B3);Bw=class Bw extends nI{constructor(){let A={name:"webgpu",type:cA.WEBGPU,systems:dF,renderPipes:pF,renderPipeAdaptors:uF};super(A)}}});class XK{contextChange(A){let Q=new PA({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new x,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),I=A.limits.maxBatchableTextures,B=sI({name:"graphics",bits:[CC,KC(I),HC,rI]});this.shader=new BQ({glProgram:B,resources:{localUniforms:Q,batchSamplers:UC(I)}})}execute(A,Q){let I=Q.context,B=I.customShader||this.shader,E=A.renderer,C=E.graphicsContext,{batcher:J,instructions:K}=C.getContextRenderData(I);B.groups[0]=E.globalUniforms.bindGroup,E.state.set(A.state),E.shader.bind(B),E.geometry.bind(J.geometry,B.glProgram);let H=K.instructions;for(let Z=0;Z<K.instructionSize;Z++){let q=H[Z];if(q.size){for(let w=0;w<q.textures.count;w++)E.texture.bind(q.textures.textures[w],w);E.geometry.draw(q.topology,q.size,q.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}var Cw=Y(()=>{M();NA();cB();K0();H0();ZC();dB();pJ();bI();XQ();XK.extension={type:[N.WebGLPipesAdaptor],name:"graphics"}});class kK{init(){let A=sI({name:"mesh",bits:[HC,G1,rI]});this._shader=new BQ({glProgram:A,resources:{uTexture:v.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new x}}}})}execute(A,Q){let I=A.renderer,B=Q._shader;if(!B){B=this._shader;let E=Q.texture,C=E.source;B.resources.uTexture=C,B.resources.uSampler=C.style,B.resources.textureUniforms.uniforms.uTextureMatrix=E.textureMatrix.mapCoord}else if(!B.glProgram){n("Mesh shader has no glProgram",Q.shader);return}B.groups[100]=I.globalUniforms.bindGroup,B.groups[101]=A.localUniformsBindGroup,I.encoder.draw({geometry:Q._geometry,shader:B,state:Q.state})}destroy(){this._shader.destroy(!0),this._shader=null}}var Jw=Y(()=>{M();NA();cB();ZC();dB();FZ();bI();FA();_A();kK.extension={type:[N.WebGLPipesAdaptor],name:"mesh"}});class FK{constructor(){this._tempState=oA.for2d(),this._didUploadHash={}}init(A){A.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(A,Q,I){let B=A.renderer,E=this._didUploadHash[I.uid];if(B.shader.bind(I,E),!E)this._didUploadHash[I.uid]=!0;B.shader.updateUniformGroup(B.globalUniforms.uniformGroup),B.geometry.bind(Q,I.glProgram)}execute(A,Q){let I=A.renderer;this._tempState.blendMode=Q.blendMode,I.state.set(this._tempState);let B=Q.textures.textures;for(let E=0;E<Q.textures.count;E++)I.texture.bind(B[E],E);I.geometry.draw(Q.topology,Q.size,Q.start)}}var Kw=Y(()=>{M();$I();FK.extension={type:[N.WebGLPipesAdaptor],name:"batch"}});var k0;var Hw=Y(()=>{k0=((A)=>{return A[A.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",A[A.ARRAY_BUFFER=34962]="ARRAY_BUFFER",A[A.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",A})(k0||{})});class q6{constructor(A,Q){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=A||null,this.updateID=-1,this.byteLength=-1,this.type=Q}destroy(){this.buffer=null,this.updateID=-1,this.byteLength=-1,this.type=-1,this._lastBindBaseLocation=-1,this._lastBindCallId=-1}}var Zw=()=>{};class OK{constructor(A){this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=A,this._managedBuffers=new vA({renderer:A,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"glBuffer"})}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gl=null,this._boundBufferBases={}}contextChange(){this._gl=this._renderer.gl,this.destroyAll(!0),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(A){return A._gcLastUsed=this._renderer.gc.now,A._gpuData[this._renderer.uid]||this.createGLBuffer(A)}bind(A){let{_gl:Q}=this,I=this.getGlBuffer(A);Q.bindBuffer(I.type,I.buffer)}bindBufferBase(A,Q){let{_gl:I}=this;if(this._boundBufferBases[Q]!==A)this._boundBufferBases[Q]=A,A._lastBindBaseLocation=Q,I.bindBufferBase(I.UNIFORM_BUFFER,Q,A.buffer)}nextBindBase(A){if(this._bindCallId++,this._minBaseLocation=0,A){if(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1)this._nextBindBaseIndex=1}}freeLocationForBufferBase(A){let Q=this.getLastBindBaseLocation(A);if(Q>=this._minBaseLocation)return A._lastBindCallId=this._bindCallId,Q;let I=0,B=this._nextBindBaseIndex;while(I<2){if(B>=this._maxBindings)B=this._minBaseLocation,I++;let E=this._boundBufferBases[B];if(E&&E._lastBindCallId===this._bindCallId){B++;continue}break}if(Q=B,this._nextBindBaseIndex=B+1,I>=2)return-1;return A._lastBindCallId=this._bindCallId,this._boundBufferBases[Q]=null,Q}getLastBindBaseLocation(A){let Q=A._lastBindBaseLocation;if(this._boundBufferBases[Q]===A)return Q;return-1}bindBufferRange(A,Q,I,B){let{_gl:E}=this;I||(I=0),Q||(Q=0),this._boundBufferBases[Q]=null,E.bindBufferRange(E.UNIFORM_BUFFER,Q||0,A.buffer,I*256,B||256)}updateBuffer(A){let{_gl:Q}=this,I=this.getGlBuffer(A);if(A._updateID===I.updateID)return I;I.updateID=A._updateID,Q.bindBuffer(I.type,I.buffer);let B=A.data,E=A.descriptor.usage&OA.STATIC?Q.STATIC_DRAW:Q.DYNAMIC_DRAW;if(B)if(I.byteLength>=B.byteLength)Q.bufferSubData(I.type,0,B,0,A._updateSize/B.BYTES_PER_ELEMENT);else I.byteLength=B.byteLength,Q.bufferData(I.type,B,E);else I.byteLength=A.descriptor.size,Q.bufferData(I.type,I.byteLength,E);return I}destroyAll(A=!1){this._managedBuffers.removeAll(A)}onBufferUnload(A,Q=!1){let I=A._gpuData[this._renderer.uid];if(!I)return;if(!Q)this._gl.deleteBuffer(I.buffer)}createGLBuffer(A){let{_gl:Q}=this,I=k0.ARRAY_BUFFER;if(A.descriptor.usage&OA.INDEX)I=k0.ELEMENT_ARRAY_BUFFER;else if(A.descriptor.usage&OA.UNIFORM)I=k0.UNIFORM_BUFFER;let B=new q6(Q.createBuffer(),I);return A._gpuData[this._renderer.uid]=B,this._managedBuffers.add(A),B}resetState(){this._boundBufferBases=Object.create(null)}}var qw=Y(()=>{M();xQ();VB();Hw();Zw();OK.extension={type:[N.WebGLSystem],name:"buffer"}});var gD=class A{constructor(Q){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=Q,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(Q){this.gl=Q,this._renderer.gl=Q}init(Q){Q={...A.defaultOptions,...Q};let I=this.multiView=Q.multiView;if(Q.context&&I)n("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),I=!1;if(I)this.canvas=u.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height);else this.canvas=this._renderer.view.canvas;if(Q.context)this.initFromContext(Q.context);else{let B=this._renderer.background.alpha<1,E=Q.premultipliedAlpha??!0,C=Q.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(Q.preferWebGLVersion,{alpha:B,premultipliedAlpha:E,antialias:C,stencil:!0,preserveDrawingBuffer:Q.preserveDrawingBuffer,powerPreference:Q.powerPreference??"default"})}}ensureCanvasSize(Q){if(!this.multiView){if(Q!==this.canvas)n("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:I}=this;if(I.width<Q.width||I.height<Q.height)I.width=Math.max(Q.width,Q.width),I.height=Math.max(Q.height,Q.height)}initFromContext(Q){this.gl=Q,this.webGLVersion=Q instanceof u.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(Q),this._renderer.runners.contextChange.emit(Q);let I=this._renderer.view.canvas;I.addEventListener("webglcontextlost",this.handleContextLost,!1),I.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(Q,I){let B,E=this.canvas;if(Q===2)B=E.getContext("webgl2",I);if(!B){if(B=E.getContext("webgl",I),!B)throw new Error("This browser does not support WebGL. Try using the canvas renderer")}this.gl=B,this.initFromContext(this.gl)}getExtensions(){let{gl:Q}=this,I={anisotropicFiltering:Q.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:Q.getExtension("OES_texture_float_linear"),s3tc:Q.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Q.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Q.getExtension("WEBGL_compressed_texture_etc"),etc1:Q.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Q.getExtension("WEBGL_compressed_texture_pvrtc")||Q.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Q.getExtension("WEBGL_compressed_texture_atc"),astc:Q.getExtension("WEBGL_compressed_texture_astc"),bptc:Q.getExtension("EXT_texture_compression_bptc"),rgtc:Q.getExtension("EXT_texture_compression_rgtc"),loseContext:Q.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...I,drawBuffers:Q.getExtension("WEBGL_draw_buffers"),depthTexture:Q.getExtension("WEBGL_depth_texture"),vertexArrayObject:Q.getExtension("OES_vertex_array_object")||Q.getExtension("MOZ_OES_vertex_array_object")||Q.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:Q.getExtension("OES_element_index_uint"),floatTexture:Q.getExtension("OES_texture_float"),floatTextureLinear:Q.getExtension("OES_texture_float_linear"),textureHalfFloat:Q.getExtension("OES_texture_half_float"),textureHalfFloatLinear:Q.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:Q.getExtension("ANGLE_instanced_arrays"),srgb:Q.getExtension("EXT_sRGB")};else{this.extensions={...I,colorBufferFloat:Q.getExtension("EXT_color_buffer_float")};let B=Q.getExtension("WEBGL_provoking_vertex");if(B)B.provokingVertexWEBGL(B.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(Q){if(Q.preventDefault(),this._contextLossForced)this._contextLossForced=!1,setTimeout(()=>{if(this.gl.isContextLost())this.extensions.loseContext?.restoreContext()},0)}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){let Q=this._renderer.view.canvas;this._renderer=null,Q.removeEventListener("webglcontextlost",this.handleContextLost),Q.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(Q){let I=Q.getContextAttributes();if(I&&!I.stencil)n("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let B=this.supports,E=this.webGLVersion===2,C=this.extensions;if(B.uint32Indices=E||!!C.uint32ElementIndex,B.uniformBufferObject=E,B.vertexArrayObject=E||!!C.vertexArrayObject,B.srgbTextures=E||!!C.srgb,B.nonPowOf2wrapping=E,B.nonPowOf2mipmaps=E,B.msaa=E,!B.uint32Indices)n("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}},ww;var Yw=Y(()=>{jA();M();_A();gD.extension={type:[N.WebGLSystem],name:"context"};gD.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};ww=gD});var GK,F0,bA;var jK=Y(()=>{GK=((A)=>{return A[A.RGBA=6408]="RGBA",A[A.RGB=6407]="RGB",A[A.RG=33319]="RG",A[A.RED=6403]="RED",A[A.RGBA_INTEGER=36249]="RGBA_INTEGER",A[A.RGB_INTEGER=36248]="RGB_INTEGER",A[A.RG_INTEGER=33320]="RG_INTEGER",A[A.RED_INTEGER=36244]="RED_INTEGER",A[A.ALPHA=6406]="ALPHA",A[A.LUMINANCE=6409]="LUMINANCE",A[A.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",A[A.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",A[A.DEPTH_STENCIL=34041]="DEPTH_STENCIL",A})(GK||{}),F0=((A)=>{return A[A.TEXTURE_2D=3553]="TEXTURE_2D",A[A.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",A[A.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",A[A.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",A[A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",A[A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",A[A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",A})(F0||{}),bA=((A)=>{return A[A.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",A[A.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",A[A.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",A[A.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",A[A.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",A[A.UNSIGNED_INT=5125]="UNSIGNED_INT",A[A.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",A[A.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",A[A.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",A[A.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",A[A.BYTE=5120]="BYTE",A[A.SHORT=5122]="SHORT",A[A.INT=5124]="INT",A[A.FLOAT=5126]="FLOAT",A[A.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",A[A.HALF_FLOAT=36193]="HALF_FLOAT",A})(bA||{})});function $w(A){return iF[A]??iF.float32}var iF;var Uw=Y(()=>{jK();iF={uint8x2:bA.UNSIGNED_BYTE,uint8x4:bA.UNSIGNED_BYTE,sint8x2:bA.BYTE,sint8x4:bA.BYTE,unorm8x2:bA.UNSIGNED_BYTE,unorm8x4:bA.UNSIGNED_BYTE,snorm8x2:bA.BYTE,snorm8x4:bA.BYTE,uint16x2:bA.UNSIGNED_SHORT,uint16x4:bA.UNSIGNED_SHORT,sint16x2:bA.SHORT,sint16x4:bA.SHORT,unorm16x2:bA.UNSIGNED_SHORT,unorm16x4:bA.UNSIGNED_SHORT,snorm16x2:bA.SHORT,snorm16x4:bA.SHORT,float16x2:bA.HALF_FLOAT,float16x4:bA.HALF_FLOAT,float32:bA.FLOAT,float32x2:bA.FLOAT,float32x3:bA.FLOAT,float32x4:bA.FLOAT,uint32:bA.UNSIGNED_INT,uint32x2:bA.UNSIGNED_INT,uint32x3:bA.UNSIGNED_INT,uint32x4:bA.UNSIGNED_INT,sint32:bA.INT,sint32x2:bA.INT,sint32x3:bA.INT,sint32x4:bA.INT}});class Vw{constructor(){this.vaoCache=Object.create(null)}destroy(){this.vaoCache=Object.create(null)}}class LK{constructor(A){this._renderer=A,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._managedGeometries=new vA({renderer:A,type:"resource",onUnload:this.onGeometryUnload.bind(this),name:"glGeometry"})}contextChange(){let A=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");this.destroyAll(!0);let Q=this._renderer.context.extensions.vertexArrayObject;if(Q)A.createVertexArray=()=>Q.createVertexArrayOES(),A.bindVertexArray=(B)=>Q.bindVertexArrayOES(B),A.deleteVertexArray=(B)=>Q.deleteVertexArrayOES(B);let I=this._renderer.context.extensions.vertexAttribDivisorANGLE;if(I)A.drawArraysInstanced=(B,E,C,J)=>{I.drawArraysInstancedANGLE(B,E,C,J)},A.drawElementsInstanced=(B,E,C,J,K)=>{I.drawElementsInstancedANGLE(B,E,C,J,K)},A.vertexAttribDivisor=(B,E)=>I.vertexAttribDivisorANGLE(B,E);this._activeGeometry=null,this._activeVao=null}bind(A,Q){let I=this.gl;this._activeGeometry=A;let B=this.getVao(A,Q);if(this._activeVao!==B)this._activeVao=B,I.bindVertexArray(B);this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let A=this._activeGeometry,Q=this._renderer.buffer;for(let I=0;I<A.buffers.length;I++){let B=A.buffers[I];Q.updateBuffer(B)}A._gcLastUsed=this._renderer.gc.now}checkCompatibility(A,Q){let I=A.attributes,B=Q._attributeData;for(let E in B)if(!I[E])throw new Error(`shader and geometry incompatible, geometry missing the "${E}" attribute`)}getSignature(A,Q){let I=A.attributes,B=Q._attributeData,E=["g",A.uid];for(let C in I)if(B[C])E.push(C,B[C].location);return E.join("-")}getVao(A,Q){return A._gpuData[this._renderer.uid]?.vaoCache[Q._key]||this.initGeometryVao(A,Q)}initGeometryVao(A,Q,I=!0){let B=this._renderer.gl,E=this._renderer.buffer;this._renderer.shader._getProgramData(Q),this.checkCompatibility(A,Q);let C=this.getSignature(A,Q),J=A._gpuData[this._renderer.uid];if(!J)J=new Vw,A._gpuData[this._renderer.uid]=J,this._managedGeometries.add(A);let K=J.vaoCache,H=K[C];if(H)return K[Q._key]=H,H;YK(A,Q._attributeData);let Z=A.buffers;H=B.createVertexArray(),B.bindVertexArray(H);for(let q=0;q<Z.length;q++){let w=Z[q];E.bind(w)}return this.activateVao(A,Q),K[Q._key]=H,K[C]=H,B.bindVertexArray(null),H}onGeometryUnload(A,Q=!1){let I=A._gpuData[this._renderer.uid];if(!I)return;let B=I.vaoCache;if(!Q)for(let E in B){if(this._activeVao!==B[E])this.resetState();this.gl.deleteVertexArray(B[E])}}destroyAll(A=!1){this._managedGeometries.removeAll(A)}activateVao(A,Q){let I=this._renderer.gl,B=this._renderer.buffer,E=A.attributes;if(A.indexBuffer)B.bind(A.indexBuffer);let C=null;for(let J in E){let K=E[J],H=K.buffer,Z=B.getGlBuffer(H),q=Q._attributeData[J];if(q){if(C!==Z)B.bind(H),C=Z;let w=q.location;I.enableVertexAttribArray(w);let $=QI(K.format),U=$w(K.format);if(q.format?.substring(1,4)==="int")I.vertexAttribIPointer(w,$.size,U,K.stride,K.offset);else I.vertexAttribPointer(w,$.size,U,$.normalised,K.stride,K.offset);if(K.instance)if(this.hasInstance){let V=K.divisor??1;I.vertexAttribDivisor(w,V)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(A,Q,I,B){let{gl:E}=this._renderer,C=this._activeGeometry,J=E3[A||C.topology];if(B??(B=C.instanceCount),C.indexBuffer){let K=C.indexBuffer.data.BYTES_PER_ELEMENT,H=K===2?E.UNSIGNED_SHORT:E.UNSIGNED_INT;if(B!==1)E.drawElementsInstanced(J,Q||C.indexBuffer.data.length,H,(I||0)*K,B);else E.drawElements(J,Q||C.indexBuffer.data.length,H,(I||0)*K)}else if(B!==1)E.drawArraysInstanced(J,I||0,Q||C.getSize(),B);else E.drawArrays(J,I||0,Q||C.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._managedGeometries.destroy(),this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}var E3;var Nw=Y(()=>{M();xQ();XE();Q6();Uw();E3={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};LK.extension={type:[N.WebGLSystem],name:"geometry"}});var C3,_D=class A{constructor(Q){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=Q}init(Q={}){let{useBackBuffer:I,antialias:B}={...A.defaultOptions,...Q};if(this.useBackBuffer=I,this._antialias=B,!this._renderer.context.supports.msaa)n("antialiasing, is not supported on when using the back buffer"),this._antialias=!1;this._state=oA.for2d();let E=new aA({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new BQ({glProgram:E,resources:{uTexture:v.WHITE.source}})}renderStart(Q){let I=this._renderer.renderTarget.getRenderTarget(Q.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!I.isRoot,this._useBackBufferThisRender){let B=this._renderer.renderTarget.getRenderTarget(Q.target);this._targetTexture=B.colorTexture,Q.target=this._getBackBufferTexture(B.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let Q=this._renderer;if(Q.renderTarget.finishRenderPass(),!this._useBackBufferThisRender)return;Q.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,Q.encoder.draw({geometry:C3,shader:this._bigTriangleShader,state:this._state})}_getBackBufferTexture(Q){return this._backBufferTexture=this._backBufferTexture||new v({source:new GA({width:Q.width,height:Q.height,resolution:Q._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(Q.width,Q.height,Q._resolution),this._backBufferTexture}destroy(){if(this._backBufferTexture)this._backBufferTexture.destroy(),this._backBufferTexture=null}},zw;var Dw=Y(()=>{M();_A();FE();bI();$I();WQ();FA();AI();C3=new UI({attributes:{aPosition:[-1,-1,3,-1,-1,3]}});_D.extension={type:[N.WebGLSystem],name:"backBuffer",priority:1};_D.defaultOptions={useBackBuffer:!1};zw=_D});class RK{constructor(A){this._colorMaskCache=15,this._renderer=A}setMask(A){if(this._colorMaskCache===A)return;this._colorMaskCache=A,this._renderer.gl.colorMask(!!(A&8),!!(A&4),!!(A&2),!!(A&1))}}var Ww=Y(()=>{M();RK.extension={type:[N.WebGLSystem],name:"colorMask"}});class PK{constructor(A){this.commandFinished=Promise.resolve(),this._renderer=A}setGeometry(A,Q){this._renderer.geometry.bind(A,Q.glProgram)}finishRenderPass(){}draw(A){let Q=this._renderer,{geometry:I,shader:B,state:E,skipSync:C,topology:J,size:K,start:H,instanceCount:Z}=A;if(Q.shader.bind(B,C),Q.geometry.bind(I,Q.shader._activeProgram),E)Q.state.set(E);Q.geometry.draw(J,K,H,Z??I.instanceCount)}destroy(){this._renderer=null}}var Xw=Y(()=>{M();PK.extension={type:[N.WebGLSystem],name:"encoder"}});class MK{constructor(A){this._renderer=A}contextChange(){let A=this._renderer.gl;this.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=cJ(this.maxTextures,A);let Q=this._renderer.context.webGLVersion===2;this.maxUniformBindings=Q?A.getParameter(A.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}}var kw=Y(()=>{M();bZ();MK.extension={type:[N.WebGLSystem],name:"limits"}});class gK{constructor(A){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:lA.NONE},this._renderTargetStencilState=Object.create(null),A.renderTarget.onRenderTargetChange.add(this)}contextChange(A){this._gl=A,this._comparisonFuncMapping={always:A.ALWAYS,never:A.NEVER,equal:A.EQUAL,"not-equal":A.NOTEQUAL,less:A.LESS,"less-equal":A.LEQUAL,greater:A.GREATER,"greater-equal":A.GEQUAL},this._stencilOpsMapping={keep:A.KEEP,zero:A.ZERO,replace:A.REPLACE,invert:A.INVERT,"increment-clamp":A.INCR,"decrement-clamp":A.DECR,"increment-wrap":A.INCR_WRAP,"decrement-wrap":A.DECR_WRAP},this.resetState()}onRenderTargetChange(A){if(this._activeRenderTarget===A)return;this._activeRenderTarget=A;let Q=this._renderTargetStencilState[A.uid];if(!Q)Q=this._renderTargetStencilState[A.uid]={stencilMode:lA.DISABLED,stencilReference:0};this.setStencilMode(Q.stencilMode,Q.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=lA.NONE,this._stencilCache.stencilReference=0}setStencilMode(A,Q){let I=this._renderTargetStencilState[this._activeRenderTarget.uid],B=this._gl,E=eI[A],C=this._stencilCache;if(I.stencilMode=A,I.stencilReference=Q,A===lA.DISABLED){if(this._stencilCache.enabled)this._stencilCache.enabled=!1,B.disable(B.STENCIL_TEST);return}if(!this._stencilCache.enabled)this._stencilCache.enabled=!0,B.enable(B.STENCIL_TEST);if(A!==C.stencilMode||C.stencilReference!==Q)C.stencilMode=A,C.stencilReference=Q,B.stencilFunc(this._comparisonFuncMapping[E.stencilBack.compare],Q,255),B.stencilOp(B.KEEP,B.KEEP,this._stencilOpsMapping[E.stencilBack.passOp])}}var Fw=Y(()=>{M();I6();GE();gK.extension={type:[N.WebGLSystem],name:"stencil"}});function Ow(A){let Q=A.map((C)=>({data:C,offset:0,size:0})),I=16,B=0,E=0;for(let C=0;C<Q.length;C++){let J=Q[C];if(B=w6[J.data.type],!B)throw new Error(`Unknown type ${J.data.type}`);if(J.data.size>1)B=Math.max(B,16)*J.data.size;let K=B===12?16:B;J.size=B;let H=E%16;if(H>0&&16-H<K)E+=(16-H)%16;else E+=(B-H%B)%B;J.offset=E,E+=B}return E=Math.ceil(E/16)*16,{uboElements:Q,size:E}}var w6;var Y6=Y(()=>{w6={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64}});function Gw(A,Q){let I=Math.max(w6[A.data.type]/16,1),B=A.data.value.length/A.data.size,E=(4-B%4)%4,C=A.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${A.data.name};
        offset += ${Q};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${A.data.size*I}; i++)
        {
            for(var j = 0; j < ${B}; j++)
            {
                ${C}[arrayOffset++] = v[t++];
            }
            ${E!==0?`arrayOffset += ${E};`:""}
        }
    `}var jw=Y(()=>{Y6()});function Lw(A){return KK(A,"uboStd40",Gw,tZ)}var Rw=Y(()=>{rZ();eZ();jw()});var _K;var Pw=Y(()=>{M();oZ();Y6();Rw();_K=class _K extends W0{constructor(){super({createUboElements:Ow,generateUboSync:Lw})}};_K.extension={type:[N.WebGLSystem],name:"ubo"}});class $6{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this._attachedMipLevel=0,this._attachedLayer=0,this.msaaRenderBuffer=[]}}var Mw=()=>{};class U6{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new EA}init(A,Q){this._renderer=A,this._renderTargetSystem=Q,A.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new EA;let A=this._renderer.gl;this._drawBuffersCache=[];for(let Q=1;Q<=16;Q++)this._drawBuffersCache[Q]=Array.from({length:Q},(I,B)=>A.COLOR_ATTACHMENT0+B)}copyToTexture(A,Q,I,B,E){let C=this._renderTargetSystem,J=this._renderer,K=C.getGpuRenderTarget(A),H=J.gl;return this.finishRenderPass(A),H.bindFramebuffer(H.FRAMEBUFFER,K.resolveTargetFramebuffer),J.texture.bind(Q,0),H.copyTexSubImage2D(H.TEXTURE_2D,0,E.x,E.y,I.x,I.y,B.width,B.height),Q}startRenderPass(A,Q=!0,I,B,E=0,C=0){let J=this._renderTargetSystem,K=A.colorTexture,H=J.getGpuRenderTarget(A);if(C!==0&&this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to array layers requires WebGL2.");if(E>0){if(H.msaa)throw new Error("[RenderTargetSystem] Rendering to mip levels is not supported with MSAA render targets.");if(this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to mip levels requires WebGL2.")}let Z=B.y;if(A.isRoot)Z=K.pixelHeight-B.height-B.y;A.colorTextures.forEach(($)=>{this._renderer.texture.unbind($)});let q=this._renderer.gl;if(q.bindFramebuffer(q.FRAMEBUFFER,H.framebuffer),!A.isRoot&&(H._attachedMipLevel!==E||H._attachedLayer!==C))A.colorTextures.forEach(($,U)=>{let V=this._renderer.texture.getGlSource($);if(V.target===q.TEXTURE_2D){if(C!==0)throw new Error("[RenderTargetSystem] layer must be 0 when rendering to 2D textures in WebGL.");q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0+U,q.TEXTURE_2D,V.texture,E)}else if(V.target===q.TEXTURE_2D_ARRAY){if(this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to 2D array textures requires WebGL2.");q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0+U,V.texture,E,C)}else if(V.target===q.TEXTURE_CUBE_MAP){if(C<0||C>5)throw new Error("[RenderTargetSystem] Cube map layer must be between 0 and 5.");q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0+U,q.TEXTURE_CUBE_MAP_POSITIVE_X+C,V.texture,E)}else throw new Error("[RenderTargetSystem] Unsupported texture target for render-to-layer in WebGL.")}),H._attachedMipLevel=E,H._attachedLayer=C;if(A.colorTextures.length>1)this._setDrawBuffers(A,q);let w=this._viewPortCache;if(w.x!==B.x||w.y!==Z||w.width!==B.width||w.height!==B.height)w.x=B.x,w.y=Z,w.width=B.width,w.height=B.height,q.viewport(B.x,Z,B.width,B.height);if(!H.depthStencilRenderBuffer&&(A.stencil||A.depth))this._initStencil(H);this.clear(A,Q,I)}finishRenderPass(A){let I=this._renderTargetSystem.getGpuRenderTarget(A);if(!I.msaa)return;let B=this._renderer.gl;B.bindFramebuffer(B.FRAMEBUFFER,I.resolveTargetFramebuffer),B.bindFramebuffer(B.READ_FRAMEBUFFER,I.framebuffer),B.blitFramebuffer(0,0,I.width,I.height,0,0,I.width,I.height,B.COLOR_BUFFER_BIT,B.NEAREST),B.bindFramebuffer(B.FRAMEBUFFER,I.framebuffer)}initGpuRenderTarget(A){let I=this._renderer.gl,B=new $6;if(B._attachedMipLevel=0,B._attachedLayer=0,A.colorTexture instanceof GQ)return this._renderer.context.ensureCanvasSize(A.colorTexture.resource),B.framebuffer=null,B;return this._initColor(A,B),I.bindFramebuffer(I.FRAMEBUFFER,null),B}destroyGpuRenderTarget(A){let Q=this._renderer.gl;if(A.framebuffer)Q.deleteFramebuffer(A.framebuffer),A.framebuffer=null;if(A.resolveTargetFramebuffer)Q.deleteFramebuffer(A.resolveTargetFramebuffer),A.resolveTargetFramebuffer=null;if(A.depthStencilRenderBuffer)Q.deleteRenderbuffer(A.depthStencilRenderBuffer),A.depthStencilRenderBuffer=null;A.msaaRenderBuffer.forEach((I)=>{Q.deleteRenderbuffer(I)}),A.msaaRenderBuffer=null}clear(A,Q,I,B,E=0,C=0){if(!Q)return;if(C!==0)throw new Error("[RenderTargetSystem] Clearing array layers is not supported in WebGL renderer.");let J=this._renderTargetSystem;if(typeof Q==="boolean")Q=Q?PQ.ALL:PQ.NONE;let K=this._renderer.gl;if(Q&PQ.COLOR){I??(I=J.defaultClearColor);let H=this._clearColorCache,Z=I;if(H[0]!==Z[0]||H[1]!==Z[1]||H[2]!==Z[2]||H[3]!==Z[3])H[0]=Z[0],H[1]=Z[1],H[2]=Z[2],H[3]=Z[3],K.clearColor(Z[0],Z[1],Z[2],Z[3])}K.clear(Q)}resizeGpuRenderTarget(A){if(A.isRoot)return;let I=this._renderTargetSystem.getGpuRenderTarget(A);if(this._resizeColor(A,I),A.stencil||A.depth)this._resizeStencil(I)}_initColor(A,Q){let I=this._renderer,B=I.gl,E=B.createFramebuffer();if(Q.resolveTargetFramebuffer=E,B.bindFramebuffer(B.FRAMEBUFFER,E),Q.width=A.colorTexture.source.pixelWidth,Q.height=A.colorTexture.source.pixelHeight,A.colorTextures.forEach((J,K)=>{let H=J.source;if(H.antialias)if(I.context.supports.msaa)Q.msaa=!0;else n("[RenderTexture] Antialiasing on textures is not supported in WebGL1");I.texture.bindSource(H,0);let Z=I.texture.getGlSource(H),q=Z.texture;if(Z.target===B.TEXTURE_2D)B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+K,B.TEXTURE_2D,q,0);else if(Z.target===B.TEXTURE_2D_ARRAY){if(I.context.webGLVersion<2)throw new Error("[RenderTargetSystem] TEXTURE_2D_ARRAY requires WebGL2.");B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+K,q,0,0)}else if(Z.target===B.TEXTURE_CUBE_MAP)B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+K,B.TEXTURE_CUBE_MAP_POSITIVE_X,q,0);else throw new Error("[RenderTargetSystem] Unsupported texture target for framebuffer attachment.")}),Q.msaa){let J=B.createFramebuffer();Q.framebuffer=J,B.bindFramebuffer(B.FRAMEBUFFER,J),A.colorTextures.forEach((K,H)=>{let Z=B.createRenderbuffer();Q.msaaRenderBuffer[H]=Z})}else Q.framebuffer=E;this._resizeColor(A,Q)}_resizeColor(A,Q){let I=A.colorTexture.source;if(Q.width=I.pixelWidth,Q.height=I.pixelHeight,Q._attachedMipLevel=0,Q._attachedLayer=0,A.colorTextures.forEach((B,E)=>{if(E===0)return;B.source.resize(I.width,I.height,I._resolution)}),Q.msaa){let B=this._renderer,E=B.gl,C=Q.framebuffer;E.bindFramebuffer(E.FRAMEBUFFER,C),A.colorTextures.forEach((J,K)=>{let H=J.source;B.texture.bindSource(H,0);let q=B.texture.getGlSource(H).internalFormat,w=Q.msaaRenderBuffer[K];E.bindRenderbuffer(E.RENDERBUFFER,w),E.renderbufferStorageMultisample(E.RENDERBUFFER,4,q,H.pixelWidth,H.pixelHeight),E.framebufferRenderbuffer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0+K,E.RENDERBUFFER,w)})}}_initStencil(A){if(A.framebuffer===null)return;let Q=this._renderer.gl,I=Q.createRenderbuffer();A.depthStencilRenderBuffer=I,Q.bindRenderbuffer(Q.RENDERBUFFER,I),Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_STENCIL_ATTACHMENT,Q.RENDERBUFFER,I),this._resizeStencil(A)}_resizeStencil(A){let Q=this._renderer.gl;if(Q.bindRenderbuffer(Q.RENDERBUFFER,A.depthStencilRenderBuffer),A.msaa)Q.renderbufferStorageMultisample(Q.RENDERBUFFER,4,Q.DEPTH24_STENCIL8,A.width,A.height);else Q.renderbufferStorage(Q.RENDERBUFFER,this._renderer.context.webGLVersion===2?Q.DEPTH24_STENCIL8:Q.DEPTH_STENCIL,A.width,A.height)}prerender(A){let Q=A.colorTexture.resource;if(this._renderer.context.multiView&&GQ.test(Q))this._renderer.context.ensureCanvasSize(Q)}postrender(A){if(!this._renderer.context.multiView)return;if(GQ.test(A.colorTexture.resource)){let Q=this._renderer.context.canvas,I=A.colorTexture;I.context2D.drawImage(Q,0,I.pixelHeight-Q.height)}}_setDrawBuffers(A,Q){let I=A.colorTextures.length,B=this._drawBuffersCache[I];if(this._renderer.context.webGLVersion===1){let E=this._renderer.context.extensions.drawBuffers;if(!E)n("[RenderTexture] This WebGL1 context does not support rendering to multiple targets");else E.drawBuffersWEBGL(B)}else Q.drawBuffers(B)}}var gw=Y(()=>{ZQ();_A();yB();AC();Mw()});var SK;var _w=Y(()=>{M();UK();gw();SK=class SK extends LE{constructor(A){super(A);this.adaptor=new U6,this.adaptor.init(A,this)}};SK.extension={type:[N.WebGLSystem],name:"renderTarget"}});function Sw(A,Q){let I=[],B=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],E=!1,C=0,J=Q._getProgramData(A.glProgram);for(let H in A.groups){let Z=A.groups[H];I.push(`
            resources = g[${H}].resources;
        `);for(let q in Z.resources){let w=Z.resources[q];if(w instanceof PA)if(w.ubo){let $=A._uniformBindMap[H][Number(q)];I.push(`
                        sS.bindUniformBlock(
                            resources[${q}],
                            '${$}',
                            ${A.glProgram._uniformBlockData[$].index}
                        );
                    `)}else I.push(`
                        ugS.updateUniformGroup(resources[${q}], p, sD);
                    `);else if(w instanceof jE){let $=A._uniformBindMap[H][Number(q)];I.push(`
                    sS.bindUniformBlock(
                        resources[${q}],
                        '${$}',
                        ${A.glProgram._uniformBlockData[$].index}
                    );
                `)}else if(w instanceof GA){let $=A._uniformBindMap[H][q],U=J.uniformData[$];if(U){if(!E)E=!0,B.push(`
                        var tS = r.texture;
                        `);Q._gl.uniform1i(U.location,C),I.push(`
                        tS.bind(resources[${q}], ${C});
                    `),C++}}}}let K=[...B,...I].join(`
`);return new Function("r","s","sD",K)}var bw=Y(()=>{qK();XQ();WQ()});class V6{constructor(A,Q){this.program=A,this.uniformData=Q,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}var fw=()=>{};function N6(A,Q,I){let B=A.createShader(Q);return A.shaderSource(B,I),A.compileShader(B),B}var yw=()=>{};function SD(A){let Q=new Array(A);for(let I=0;I<Q.length;I++)Q[I]=!1;return Q}function bK(A,Q){switch(A){case"float":return 0;case"vec2":return new Float32Array(2*Q);case"vec3":return new Float32Array(3*Q);case"vec4":return new Float32Array(4*Q);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*Q);case"ivec3":return new Int32Array(3*Q);case"ivec4":return new Int32Array(4*Q);case"uvec2":return new Uint32Array(2*Q);case"uvec3":return new Uint32Array(3*Q);case"uvec4":return new Uint32Array(4*Q);case"bool":return!1;case"bvec2":return SD(2*Q);case"bvec3":return SD(3*Q);case"bvec4":return SD(4*Q);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var z6=()=>{};function D6(A,Q){if(!vw){let I=Object.keys(nF);vw={};for(let B=0;B<I.length;++B){let E=I[B];vw[A[E]]=nF[E]}}return vw[Q]}function Tw(A,Q){let I=D6(A,Q);return J3[I]||"float32"}var vw=null,nF,J3;var W6=Y(()=>{nF={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},J3={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"}});function hw(A,Q,I=!1){let B={},E=Q.getProgramParameter(A,Q.ACTIVE_ATTRIBUTES);for(let J=0;J<E;J++){let K=Q.getActiveAttrib(A,J);if(K.name.startsWith("gl_"))continue;let H=Tw(Q,K.type);B[K.name]={location:0,format:H,stride:QI(H).stride,offset:0,instance:!1,start:0}}let C=Object.keys(B);if(I){C.sort((J,K)=>J>K?1:-1);for(let J=0;J<C.length;J++)B[C[J]].location=J,Q.bindAttribLocation(A,J,C[J]);Q.linkProgram(A)}else for(let J=0;J<C.length;J++)B[C[J]].location=Q.getAttribLocation(A,C[J]);return B}var xw=Y(()=>{XE();W6()});function mw(A,Q){if(!Q.ACTIVE_UNIFORM_BLOCKS)return{};let I={},B=Q.getProgramParameter(A,Q.ACTIVE_UNIFORM_BLOCKS);for(let E=0;E<B;E++){let C=Q.getActiveUniformBlockName(A,E),J=Q.getUniformBlockIndex(A,C),K=Q.getActiveUniformBlockParameter(A,E,Q.UNIFORM_BLOCK_DATA_SIZE);I[C]={name:C,index:J,size:K}}return I}var cw=()=>{};function dw(A,Q){let I={},B=Q.getProgramParameter(A,Q.ACTIVE_UNIFORMS);for(let E=0;E<B;E++){let C=Q.getActiveUniform(A,E),J=C.name.replace(/\[.*?\]$/,""),K=!!C.name.match(/\[.*?\]$/),H=D6(Q,C.type);I[J]={name:J,index:E,type:H,size:C.size,isArray:K,value:bK(H,C.size)}}return I}var pw=Y(()=>{z6();W6()});function oF(A,Q){let I=A.getShaderSource(Q).split(`
`).map((Z,q)=>`${q}: ${Z}`),B=A.getShaderInfoLog(Q),E=B.split(`
`),C={},J=E.map((Z)=>parseFloat(Z.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter((Z)=>{if(Z&&!C[Z])return C[Z]=!0,!0;return!1}),K=[""];J.forEach((Z)=>{I[Z-1]=`%c${I[Z-1]}%c`,K.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let H=I.join(`
`);K[0]=H,console.error(B),console.groupCollapsed("click to view full shader code"),console.warn(...K),console.groupEnd()}function uw(A,Q,I,B){if(!A.getProgramParameter(Q,A.LINK_STATUS)){if(!A.getShaderParameter(I,A.COMPILE_STATUS))oF(A,I);if(!A.getShaderParameter(B,A.COMPILE_STATUS))oF(A,B);if(console.error("PixiJS Error: Could not initialize shader."),A.getProgramInfoLog(Q)!=="")console.warn("PixiJS Warning: gl.getProgramInfoLog()",A.getProgramInfoLog(Q))}}var lw=()=>{};function iw(A,Q){let I=N6(A,A.VERTEX_SHADER,Q.vertex),B=N6(A,A.FRAGMENT_SHADER,Q.fragment),E=A.createProgram();A.attachShader(E,I),A.attachShader(E,B);let C=Q.transformFeedbackVaryings;if(C)if(typeof A.transformFeedbackVaryings!=="function")n("TransformFeedback is not supported but TransformFeedbackVaryings are given.");else A.transformFeedbackVaryings(E,C.names,C.bufferMode==="separate"?A.SEPARATE_ATTRIBS:A.INTERLEAVED_ATTRIBS);if(A.linkProgram(E),!A.getProgramParameter(E,A.LINK_STATUS))uw(A,E,I,B);Q._attributeData=hw(E,A,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(Q.vertex)),Q._uniformData=dw(E,A),Q._uniformBlockData=mw(E,A),A.deleteShader(I),A.deleteShader(B);let J={};for(let H in Q._uniformData){let Z=Q._uniformData[H];J[H]={location:A.getUniformLocation(E,H),value:bK(Z.type,Z.size)}}return new V6(E,J)}var nw=Y(()=>{_A();fw();yw();z6();xw();cw();pw();lw()});class fK{constructor(A){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=A}contextChange(A){this._gl=A,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(A,Q){if(this._setProgram(A.glProgram),Q)return;ow.textureCount=0,ow.blockIndex=0;let I=this._shaderSyncFunctions[A.glProgram._key];if(!I)I=this._shaderSyncFunctions[A.glProgram._key]=this._generateShaderSync(A,this);this._renderer.buffer.nextBindBase(!!A.glProgram.transformFeedbackVaryings),I(this._renderer,A,ow)}updateUniformGroup(A){this._renderer.uniformGroup.updateUniformGroup(A,this._activeProgram,ow)}bindUniformBlock(A,Q,I=0){let B=this._renderer.buffer,E=this._getProgramData(this._activeProgram),C=A._bufferResource;if(!C)this._renderer.ubo.updateUniformGroup(A);let J=A.buffer,K=B.updateBuffer(J),H=B.freeLocationForBufferBase(K);if(C){let{offset:q,size:w}=A;if(q===0&&w===J.data.byteLength)B.bindBufferBase(K,H);else B.bindBufferRange(K,H,q)}else if(B.getLastBindBaseLocation(K)!==H)B.bindBufferBase(K,H);let Z=this._activeProgram._uniformBlockData[Q].index;if(E.uniformBlockBindings[I]===H)return;E.uniformBlockBindings[I]=H,this._renderer.gl.uniformBlockBinding(E.program,Z,H)}_setProgram(A){if(this._activeProgram===A)return;this._activeProgram=A;let Q=this._getProgramData(A);this._gl.useProgram(Q.program)}_getProgramData(A){return this._programDataHash[A._key]||this._createProgramData(A)}_createProgramData(A){let Q=A._key;return this._programDataHash[Q]=iw(this._gl,A),this._programDataHash[Q]}destroy(){for(let A of Object.keys(this._programDataHash))this._programDataHash[A].destroy();this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(A,Q){return Sw(A,Q)}resetState(){this._activeProgram=null}}var ow;var sw=Y(()=>{M();bw();nw();ow={textureCount:0,blockIndex:0};fK.extension={type:[N.WebGLSystem],name:"shader"}});var aw,rw;var tw=Y(()=>{aw={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},rw={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}});function ew(A,Q){let I=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let B in A.uniforms){if(!Q[B]){if(A.uniforms[B]instanceof PA)if(A.uniforms[B].ubo)I.push(`
                        renderer.shader.bindUniformBlock(uv.${B}, "${B}");
                    `);else I.push(`
                        renderer.shader.updateUniformGroup(uv.${B});
                    `);else if(A.uniforms[B]instanceof jE)I.push(`
                        renderer.shader.bindBufferResource(uv.${B}, "${B}");
                    `);continue}let E=A.uniformStructures[B],C=!1;for(let J=0;J<WB.length;J++){let K=WB[J];if(E.type===K.type&&K.test(E)){I.push(`name = "${B}";`,WB[J].uniform),C=!0;break}}if(!C){let K=(E.size===1?aw:rw)[E.type].replace("location",`ud["${B}"].location`);I.push(`
            cu = ud["${B}"];
            cv = cu.value;
            v = uv["${B}"];
            ${K};`)}}return new Function("ud","uv","renderer","syncData",I.join(`
`))}var AY=Y(()=>{qK();XQ();aZ();tw()});class yK{constructor(A){this._cache={},this._uniformGroupSyncHash={},this._renderer=A,this.gl=null,this._cache={}}contextChange(A){this.gl=A}updateUniformGroup(A,Q,I){let B=this._renderer.shader._getProgramData(Q);if(!A.isStatic||A._dirtyId!==B.uniformDirtyGroups[A.uid])B.uniformDirtyGroups[A.uid]=A._dirtyId,this._getUniformSyncFunction(A,Q)(B.uniformData,A.uniforms,this._renderer,I)}_getUniformSyncFunction(A,Q){return this._uniformGroupSyncHash[A._signature]?.[Q._key]||this._createUniformSyncFunction(A,Q)}_createUniformSyncFunction(A,Q){let I=this._uniformGroupSyncHash[A._signature]||(this._uniformGroupSyncHash[A._signature]={}),B=this._getSignature(A,Q._uniformData,"u");if(!this._cache[B])this._cache[B]=this._generateUniformsSync(A,Q._uniformData);return I[Q._key]=this._cache[B],I[Q._key]}_generateUniformsSync(A,Q){return ew(A,Q)}_getSignature(A,Q,I){let B=A.uniforms,E=[`${I}-`];for(let C in B)if(E.push(C),Q[C])E.push(Q[C].type);return E.join("-")}destroy(){this._renderer=null,this._cache=null}}var QY=Y(()=>{M();AY();yK.extension={type:[N.WebGLSystem],name:"uniformGroup"}});function IY(A){let Q={};if(Q.normal=[A.ONE,A.ONE_MINUS_SRC_ALPHA],Q.add=[A.ONE,A.ONE],Q.multiply=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],Q.screen=[A.ONE,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],Q.none=[0,0],Q["normal-npm"]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],Q["add-npm"]=[A.SRC_ALPHA,A.ONE,A.ONE,A.ONE],Q["screen-npm"]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],Q.erase=[A.ZERO,A.ONE_MINUS_SRC_ALPHA],!(A instanceof u.get().getWebGLRenderingContext()))Q.min=[A.ONE,A.ONE,A.ONE,A.ONE,A.MIN,A.MIN],Q.max=[A.ONE,A.ONE,A.ONE,A.ONE,A.MAX,A.MAX];else{let B=A.getExtension("EXT_blend_minmax");if(B)Q.min=[A.ONE,A.ONE,A.ONE,A.ONE,B.MIN_EXT,B.MIN_EXT],Q.max=[A.ONE,A.ONE,A.ONE,A.ONE,B.MAX_EXT,B.MAX_EXT]}return Q}var BY=Y(()=>{jA()});var K3=0,H3=1,Z3=2,q3=3,w3=4,Y3=5,sF=class A{constructor(Q){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[K3]=this.setBlend,this.map[H3]=this.setOffset,this.map[Z3]=this.setCullFace,this.map[q3]=this.setDepthTest,this.map[w3]=this.setFrontFace,this.map[Y3]=this.setDepthMask,this.checks=[],this.defaultState=oA.for2d(),Q.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(Q){if(this._invertFrontFace=!Q.isRoot,this._cullFace)this.setFrontFace(this._frontFace);else this._frontFaceDirty=!0}contextChange(Q){this.gl=Q,this.blendModesMap=IY(Q),this.resetState()}set(Q){if(Q||(Q=this.defaultState),this.stateId!==Q.data){let I=this.stateId^Q.data,B=0;while(I){if(I&1)this.map[B].call(this,!!(Q.data&1<<B));I>>=1,B++}this.stateId=Q.data}for(let I=0;I<this.checks.length;I++)this.checks[I](this,Q)}forceState(Q){Q||(Q=this.defaultState);for(let I=0;I<this.map.length;I++)this.map[I].call(this,!!(Q.data&1<<I));for(let I=0;I<this.checks.length;I++)this.checks[I](this,Q);this.stateId=Q.data}setBlend(Q){this._updateCheck(A._checkBlendMode,Q),this.gl[Q?"enable":"disable"](this.gl.BLEND)}setOffset(Q){this._updateCheck(A._checkPolygonOffset,Q),this.gl[Q?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(Q){this.gl[Q?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(Q){this.gl.depthMask(Q)}setCullFace(Q){if(this._cullFace=Q,this.gl[Q?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty)this.setFrontFace(this._frontFace)}setFrontFace(Q){this._frontFace=Q,this._frontFaceDirty=!1;let I=this._invertFrontFace?!Q:Q;if(this._glFrontFace!==I)this._glFrontFace=I,this.gl.frontFace(this.gl[I?"CW":"CCW"])}setBlendMode(Q){if(!this.blendModesMap[Q])Q="normal";if(Q===this.blendMode)return;this.blendMode=Q;let I=this.blendModesMap[Q],B=this.gl;if(I.length===2)B.blendFunc(I[0],I[1]);else B.blendFuncSeparate(I[0],I[1],I[2],I[3]);if(I.length===6)this._blendEq=!0,B.blendEquationSeparate(I[4],I[5]);else if(this._blendEq)this._blendEq=!1,B.blendEquationSeparate(B.FUNC_ADD,B.FUNC_ADD)}setPolygonOffset(Q,I){this.gl.polygonOffset(Q,I)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(Q,I){let B=this.checks.indexOf(Q);if(I&&B===-1)this.checks.push(Q);else if(!I&&B!==-1)this.checks.splice(B,1)}static _checkBlendMode(Q,I){Q.setBlendMode(I.blendMode)}static _checkPolygonOffset(Q,I){Q.setPolygonOffset(1,I.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}},EY;var CY=Y(()=>{M();$I();BY();sF.extension={type:[N.WebGLSystem],name:"state"};EY=sF});class vK{constructor(A){this.target=F0.TEXTURE_2D,this._layerInitMask=0,this.texture=A,this.width=-1,this.height=-1,this.type=bA.UNSIGNED_BYTE,this.internalFormat=GK.RGBA,this.format=GK.RGBA,this.samplerType=0}destroy(){}}var X6=Y(()=>{jK()});var JY;var KY=Y(()=>{JY={id:"buffer",upload(A,Q,I,B,E,C=!1){let J=E||Q.target;if(!C&&(Q.width===A.width&&Q.height===A.height))I.texSubImage2D(J,0,0,0,A.width,A.height,Q.format,Q.type,A.resource);else I.texImage2D(J,0,Q.internalFormat,A.width,A.height,0,Q.format,Q.type,A.resource);Q.width=A.width,Q.height=A.height}}});var $3,HY;var ZY=Y(()=>{$3={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},HY={id:"compressed",upload(A,Q,I,B,E,C){let J=E??Q.target;I.pixelStorei(I.UNPACK_ALIGNMENT,4);let{pixelWidth:K,pixelHeight:H}=A,Z=!!$3[A.format];for(let q=0;q<A.resource.length;q++){let w=A.resource[q];if(Z)I.compressedTexImage2D(J,q,Q.internalFormat,K,H,0,w);else I.texImage2D(J,q,Q.internalFormat,K,H,0,Q.format,Q.type,w);K=Math.max(K>>1,1),H=Math.max(H>>1,1)}}}});function qY(A){return{id:"cube",upload(Q,I,B,E){let C=Q.faces;for(let J=0;J<aF.length;J++){let K=aF[J],H=C[K];(A[H.uploadMethodId]||A.image).upload(H,I,B,E,F0.TEXTURE_CUBE_MAP_POSITIVE_X+J,(I._layerInitMask&1<<J)===0),I._layerInitMask|=1<<J}I.width=Q.pixelWidth,I.height=Q.pixelHeight}}}var aF;var wY=Y(()=>{jK();aF=["right","left","top","bottom","front","back"]});function U3(A,Q,I,B,E,C,J,K,H,Z){if(!Z){if(H)A.texImage2D(Q,0,I.internalFormat,B,E,0,I.format,I.type,null);A.texSubImage2D(Q,0,0,0,C,J,I.format,I.type,K);return}if(!H){A.texSubImage2D(Q,0,0,0,I.format,I.type,K);return}A.texImage2D(Q,0,I.internalFormat,B,E,0,I.format,I.type,K)}function V3(A,Q,I,B,E,C,J,K,H,Z){if(!Z){if(H)A.texImage2D(Q,0,I.internalFormat,B,E,0,I.format,I.type,null);A.texSubImage2D(Q,0,0,0,I.format,I.type,K);return}if(!H){A.texSubImage2D(Q,0,0,0,I.format,I.type,K);return}A.texImage2D(Q,0,I.internalFormat,I.format,I.type,K)}var TK;var k6=Y(()=>{TK={id:"image",upload(A,Q,I,B,E,C=!1){let J=E||Q.target,K=A.pixelWidth,H=A.pixelHeight,Z=A.resourceWidth,q=A.resourceHeight,w=B===2,$=C||Q.width!==K||Q.height!==H,U=Z>=K&&q>=H,V=A.resource;(w?U3:V3)(I,J,Q,K,H,Z,q,V,$,U),Q.width=K,Q.height=H}}});function hK(){let{userAgent:A}=u.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(A)}var F6=Y(()=>{jA()});var N3,YY;var $Y=Y(()=>{F6();k6();N3=hK(),YY={id:"video",upload(A,Q,I,B,E,C=N3){if(!A.isValid){let J=E??Q.target;I.texImage2D(J,0,Q.internalFormat,1,1,0,Q.format,Q.type,null);return}TK.upload(A,Q,I,B,E,C)}}});var O6,UY,xK,VY;var NY=Y(()=>{O6={linear:9729,nearest:9728},UY={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},xK={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},VY={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}});function G6(A,Q,I,B,E,C,J,K){let H=C;if(!K||A.addressModeU!=="repeat"||A.addressModeV!=="repeat"||A.addressModeW!=="repeat"){let Z=xK[J?"clamp-to-edge":A.addressModeU],q=xK[J?"clamp-to-edge":A.addressModeV],w=xK[J?"clamp-to-edge":A.addressModeW];if(Q[E](H,Q.TEXTURE_WRAP_S,Z),Q[E](H,Q.TEXTURE_WRAP_T,q),Q.TEXTURE_WRAP_R)Q[E](H,Q.TEXTURE_WRAP_R,w)}if(!K||A.magFilter!=="linear")Q[E](H,Q.TEXTURE_MAG_FILTER,O6[A.magFilter]);if(I){if(!K||A.mipmapFilter!=="linear"){let Z=UY[A.minFilter][A.mipmapFilter];Q[E](H,Q.TEXTURE_MIN_FILTER,Z)}}else Q[E](H,Q.TEXTURE_MIN_FILTER,O6[A.minFilter]);if(B&&A.maxAnisotropy>1){let Z=Math.min(A.maxAnisotropy,Q.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT));Q[E](H,B.TEXTURE_MAX_ANISOTROPY_EXT,Z)}if(A.compare)Q[E](H,Q.TEXTURE_COMPARE_FUNC,VY[A.compare])}var zY=Y(()=>{NY()});function DY(A){return{r8unorm:A.RED,r8snorm:A.RED,r8uint:A.RED,r8sint:A.RED,r16uint:A.RED,r16sint:A.RED,r16float:A.RED,rg8unorm:A.RG,rg8snorm:A.RG,rg8uint:A.RG,rg8sint:A.RG,r32uint:A.RED,r32sint:A.RED,r32float:A.RED,rg16uint:A.RG,rg16sint:A.RG,rg16float:A.RG,rgba8unorm:A.RGBA,"rgba8unorm-srgb":A.RGBA,rgba8snorm:A.RGBA,rgba8uint:A.RGBA,rgba8sint:A.RGBA,bgra8unorm:A.RGBA,"bgra8unorm-srgb":A.RGBA,rgb9e5ufloat:A.RGB,rgb10a2unorm:A.RGBA,rg11b10ufloat:A.RGB,rg32uint:A.RG,rg32sint:A.RG,rg32float:A.RG,rgba16uint:A.RGBA,rgba16sint:A.RGBA,rgba16float:A.RGBA,rgba32uint:A.RGBA,rgba32sint:A.RGBA,rgba32float:A.RGBA,stencil8:A.STENCIL_INDEX8,depth16unorm:A.DEPTH_COMPONENT,depth24plus:A.DEPTH_COMPONENT,"depth24plus-stencil8":A.DEPTH_STENCIL,depth32float:A.DEPTH_COMPONENT,"depth32float-stencil8":A.DEPTH_STENCIL}}var WY=()=>{};function XY(A,Q){let I={},B=A.RGBA;if(!(A instanceof u.get().getWebGLRenderingContext()))I={"rgba8unorm-srgb":A.SRGB8_ALPHA8,"bgra8unorm-srgb":A.SRGB8_ALPHA8},B=A.RGBA8;else if(Q.srgb)I={"rgba8unorm-srgb":Q.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":Q.srgb.SRGB8_ALPHA8_EXT};return{r8unorm:A.R8,r8snorm:A.R8_SNORM,r8uint:A.R8UI,r8sint:A.R8I,r16uint:A.R16UI,r16sint:A.R16I,r16float:A.R16F,rg8unorm:A.RG8,rg8snorm:A.RG8_SNORM,rg8uint:A.RG8UI,rg8sint:A.RG8I,r32uint:A.R32UI,r32sint:A.R32I,r32float:A.R32F,rg16uint:A.RG16UI,rg16sint:A.RG16I,rg16float:A.RG16F,rgba8unorm:A.RGBA,...I,rgba8snorm:A.RGBA8_SNORM,rgba8uint:A.RGBA8UI,rgba8sint:A.RGBA8I,bgra8unorm:B,rgb9e5ufloat:A.RGB9_E5,rgb10a2unorm:A.RGB10_A2,rg11b10ufloat:A.R11F_G11F_B10F,rg32uint:A.RG32UI,rg32sint:A.RG32I,rg32float:A.RG32F,rgba16uint:A.RGBA16UI,rgba16sint:A.RGBA16I,rgba16float:A.RGBA16F,rgba32uint:A.RGBA32UI,rgba32sint:A.RGBA32I,rgba32float:A.RGBA32F,stencil8:A.STENCIL_INDEX8,depth16unorm:A.DEPTH_COMPONENT16,depth24plus:A.DEPTH_COMPONENT24,"depth24plus-stencil8":A.DEPTH24_STENCIL8,depth32float:A.DEPTH_COMPONENT32F,"depth32float-stencil8":A.DEPTH32F_STENCIL8,...Q.s3tc?{"bc1-rgba-unorm":Q.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":Q.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":Q.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...Q.s3tc_sRGB?{"bc1-rgba-unorm-srgb":Q.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":Q.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":Q.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...Q.rgtc?{"bc4-r-unorm":Q.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":Q.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":Q.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":Q.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...Q.bptc?{"bc6h-rgb-float":Q.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":Q.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":Q.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":Q.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...Q.etc?{"etc2-rgb8unorm":Q.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":Q.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":Q.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":Q.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":Q.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":Q.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":Q.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":Q.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...Q.astc?{"astc-4x4-unorm":Q.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":Q.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":Q.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":Q.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":Q.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":Q.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":Q.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":Q.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":Q.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":Q.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":Q.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":Q.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":Q.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":Q.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":Q.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}var kY=Y(()=>{jA()});function FY(A){return{r8unorm:A.UNSIGNED_BYTE,r8snorm:A.BYTE,r8uint:A.UNSIGNED_BYTE,r8sint:A.BYTE,r16uint:A.UNSIGNED_SHORT,r16sint:A.SHORT,r16float:A.HALF_FLOAT,rg8unorm:A.UNSIGNED_BYTE,rg8snorm:A.BYTE,rg8uint:A.UNSIGNED_BYTE,rg8sint:A.BYTE,r32uint:A.UNSIGNED_INT,r32sint:A.INT,r32float:A.FLOAT,rg16uint:A.UNSIGNED_SHORT,rg16sint:A.SHORT,rg16float:A.HALF_FLOAT,rgba8unorm:A.UNSIGNED_BYTE,"rgba8unorm-srgb":A.UNSIGNED_BYTE,rgba8snorm:A.BYTE,rgba8uint:A.UNSIGNED_BYTE,rgba8sint:A.BYTE,bgra8unorm:A.UNSIGNED_BYTE,"bgra8unorm-srgb":A.UNSIGNED_BYTE,rgb9e5ufloat:A.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:A.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:A.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:A.UNSIGNED_INT,rg32sint:A.INT,rg32float:A.FLOAT,rgba16uint:A.UNSIGNED_SHORT,rgba16sint:A.SHORT,rgba16float:A.HALF_FLOAT,rgba32uint:A.UNSIGNED_INT,rgba32sint:A.INT,rgba32float:A.FLOAT,stencil8:A.UNSIGNED_BYTE,depth16unorm:A.UNSIGNED_SHORT,depth24plus:A.UNSIGNED_INT,"depth24plus-stencil8":A.UNSIGNED_INT_24_8,depth32float:A.FLOAT,"depth32float-stencil8":A.FLOAT_32_UNSIGNED_INT_24_8_REV}}var OY=()=>{};function GY(A){return{"2d":A.TEXTURE_2D,cube:A.TEXTURE_CUBE_MAP,"1d":null,"3d":A?.TEXTURE_3D||null,"2d-array":A?.TEXTURE_2D_ARRAY||null,"cube-array":A?.TEXTURE_CUBE_MAP_ARRAY||null}}var jY=()=>{};var LY=()=>{};class mK{constructor(A){this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=A,this._managedTextures=new vA({renderer:A,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"glTexture"});let Q={image:TK,buffer:JY,video:YY,compressed:HY};this._uploads={...Q,cube:qY(Q)}}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(A){if(this._gl=A,!this._mapFormatToInternalFormat)this._mapFormatToInternalFormat=XY(A,this._renderer.context.extensions),this._mapFormatToType=FY(A),this._mapFormatToFormat=DY(A),this._mapViewDimensionToGlTarget=GY(A);this._managedTextures.removeAll(!0),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let Q=0;Q<16;Q++)this.bind(v.EMPTY,Q)}initSource(A){this.bind(A)}bind(A,Q=0){let I=A.source;if(A){if(this.bindSource(I,Q),this._useSeparateSamplers)this._bindSampler(I.style,Q)}else if(this.bindSource(null,Q),this._useSeparateSamplers)this._bindSampler(null,Q)}bindSource(A,Q=0){let I=this._gl;if(A._gcLastUsed=this._renderer.gc.now,this._boundTextures[Q]!==A){this._boundTextures[Q]=A,this._activateLocation(Q),A||(A=v.EMPTY.source);let B=this.getGlSource(A);I.bindTexture(B.target,B.texture)}}_bindSampler(A,Q=0){let I=this._gl;if(!A){this._boundSamplers[Q]=null,I.bindSampler(Q,null);return}let B=this._getGlSampler(A);if(this._boundSamplers[Q]!==B)this._boundSamplers[Q]=B,I.bindSampler(Q,B)}unbind(A){let Q=A.source,I=this._boundTextures,B=this._gl;for(let E=0;E<I.length;E++)if(I[E]===Q){this._activateLocation(E);let C=this.getGlSource(Q);B.bindTexture(C.target,null),I[E]=null}}_activateLocation(A){if(this._activeTextureLocation!==A)this._activeTextureLocation=A,this._gl.activeTexture(this._gl.TEXTURE0+A)}_initSource(A){let Q=this._gl,I=new vK(Q.createTexture());if(I.type=this._mapFormatToType[A.format],I.internalFormat=this._mapFormatToInternalFormat[A.format],I.format=this._mapFormatToFormat[A.format],I.target=this._mapViewDimensionToGlTarget[A.viewDimension],I.target===null)throw new Error(`Unsupported view dimension: ${A.viewDimension} with this webgl version: ${this._renderer.context.webGLVersion}`);if(A.uploadMethodId==="cube")I.target=Q.TEXTURE_CUBE_MAP;if(A.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||A.isPowerOfTwo)){let E=Math.max(A.width,A.height);A.mipLevelCount=Math.floor(Math.log2(E))+1}if(A._gpuData[this._renderer.uid]=I,this._managedTextures.add(A))A.on("update",this.onSourceUpdate,this),A.on("resize",this.onSourceUpdate,this),A.on("styleChange",this.onStyleChange,this),A.on("updateMipmaps",this.onUpdateMipmaps,this);return this.onSourceUpdate(A),this.updateStyle(A,!1),I}onStyleChange(A){this.updateStyle(A,!1)}updateStyle(A,Q){let I=this._gl,B=this.getGlSource(A);I.bindTexture(B.target,B.texture),this._boundTextures[this._activeTextureLocation]=A,G6(A.style,I,A.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",B.target,!this._renderer.context.supports.nonPowOf2wrapping&&!A.isPowerOfTwo,Q)}onSourceUnload(A,Q=!1){let I=A._gpuData[this._renderer.uid];if(!I)return;if(!Q)this.unbind(A),this._gl.deleteTexture(I.texture);A.off("update",this.onSourceUpdate,this),A.off("resize",this.onSourceUpdate,this),A.off("styleChange",this.onStyleChange,this),A.off("updateMipmaps",this.onUpdateMipmaps,this)}onSourceUpdate(A){let Q=this._gl,I=this.getGlSource(A);Q.bindTexture(I.target,I.texture),this._boundTextures[this._activeTextureLocation]=A;let B=A.alphaMode==="premultiply-alpha-on-upload";if(this._premultiplyAlpha!==B)this._premultiplyAlpha=B,Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B);if(this._uploads[A.uploadMethodId])this._uploads[A.uploadMethodId].upload(A,I,Q,this._renderer.context.webGLVersion);else if(I.target===Q.TEXTURE_2D)this._initEmptyTexture2D(I,A);else if(I.target===Q.TEXTURE_2D_ARRAY)this._initEmptyTexture2DArray(I,A);else if(I.target===Q.TEXTURE_CUBE_MAP)this._initEmptyTextureCube(I,A);else throw new Error("[GlTextureSystem] Unsupported texture target for empty allocation.");if(this._applyMipRange(I,A),A.autoGenerateMipmaps&&A.mipLevelCount>1)this.onUpdateMipmaps(A,!1)}onUpdateMipmaps(A,Q=!0){if(Q)this.bindSource(A,0);let I=this.getGlSource(A);this._gl.generateMipmap(I.target)}_initEmptyTexture2D(A,Q){let I=this._gl;I.texImage2D(I.TEXTURE_2D,0,A.internalFormat,Q.pixelWidth,Q.pixelHeight,0,A.format,A.type,null);let B=Math.max(Q.pixelWidth>>1,1),E=Math.max(Q.pixelHeight>>1,1);for(let C=1;C<Q.mipLevelCount;C++)I.texImage2D(I.TEXTURE_2D,C,A.internalFormat,B,E,0,A.format,A.type,null),B=Math.max(B>>1,1),E=Math.max(E>>1,1)}_initEmptyTexture2DArray(A,Q){if(this._renderer.context.webGLVersion!==2)throw new Error("[GlTextureSystem] TEXTURE_2D_ARRAY requires WebGL2.");let I=this._gl,B=Math.max(Q.arrayLayerCount|0,1);I.texImage3D(I.TEXTURE_2D_ARRAY,0,A.internalFormat,Q.pixelWidth,Q.pixelHeight,B,0,A.format,A.type,null);let E=Math.max(Q.pixelWidth>>1,1),C=Math.max(Q.pixelHeight>>1,1);for(let J=1;J<Q.mipLevelCount;J++)I.texImage3D(I.TEXTURE_2D_ARRAY,J,A.internalFormat,E,C,B,0,A.format,A.type,null),E=Math.max(E>>1,1),C=Math.max(C>>1,1)}_initEmptyTextureCube(A,Q){let I=this._gl,B=6;for(let J=0;J<6;J++)I.texImage2D(I.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,A.internalFormat,Q.pixelWidth,Q.pixelHeight,0,A.format,A.type,null);let E=Math.max(Q.pixelWidth>>1,1),C=Math.max(Q.pixelHeight>>1,1);for(let J=1;J<Q.mipLevelCount;J++){for(let K=0;K<6;K++)I.texImage2D(I.TEXTURE_CUBE_MAP_POSITIVE_X+K,J,A.internalFormat,E,C,0,A.format,A.type,null);E=Math.max(E>>1,1),C=Math.max(C>>1,1)}}_applyMipRange(A,Q){if(this._renderer.context.webGLVersion!==2)return;let I=this._gl,B=Math.max((Q.mipLevelCount|0)-1,0);I.texParameteri(A.target,I.TEXTURE_BASE_LEVEL,0),I.texParameteri(A.target,I.TEXTURE_MAX_LEVEL,B)}_initSampler(A){let Q=this._gl,I=this._gl.createSampler();return this._glSamplers[A._resourceId]=I,G6(A,Q,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",I,!1,!0),this._glSamplers[A._resourceId]}_getGlSampler(A){return this._glSamplers[A._resourceId]||this._initSampler(A)}getGlSource(A){return A._gcLastUsed=this._renderer.gc.now,A._gpuData[this._renderer.uid]||this._initSource(A)}generateCanvas(A){let{pixels:Q,width:I,height:B}=this.getPixels(A),E=u.get().createCanvas();E.width=I,E.height=B;let C=E.getContext("2d");if(C){let J=C.createImageData(I,B);J.data.set(Q),C.putImageData(J,0,0)}return E}getPixels(A){let Q=A.source.resolution,I=A.frame,B=Math.max(Math.round(I.width*Q),1),E=Math.max(Math.round(I.height*Q),1),C=new Uint8Array(z3*B*E),J=this._renderer,K=J.renderTarget.getRenderTarget(A),H=J.renderTarget.getGpuRenderTarget(K),Z=J.gl;return Z.bindFramebuffer(Z.FRAMEBUFFER,H.resolveTargetFramebuffer),Z.readPixels(Math.round(I.x*Q),Math.round(I.y*Q),B,E,Z.RGBA,Z.UNSIGNED_BYTE,C),{pixels:new Uint8ClampedArray(C.buffer),width:B,height:E}}destroy(){this._managedTextures.destroy(),this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(v.EMPTY.source),this._boundSamplers=Object.create(null);let A=this._gl;this._premultiplyAlpha=!1,A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}var z3=4;var RY=Y(()=>{jA();M();xQ();FA();X6();KY();ZY();wY();k6();$Y();zY();WY();kY();OY();jY();LY();mK.extension={type:[N.WebGLSystem],name:"texture"}});var AO={};jH(AO,{WebGLRenderer:()=>PY});var D3,W3,X3,rF,tF,eF,PY;var MY=Y(()=>{M();Cw();Jw();Kw();QC();AK();nQ();qw();Yw();Nw();Dw();Ww();Xw();kw();Fw();Pw();_w();sw();QY();CY();RY();D3=[...DC,_K,zw,ww,MK,OK,mK,SK,LK,yK,fK,PK,EY,gK,RK],W3=[...eJ],X3=[FK,kK,XK],rF=[],tF=[],eF=[];p.handleByNamedList(N.WebGLSystem,rF);p.handleByNamedList(N.WebGLPipes,tF);p.handleByNamedList(N.WebGLPipesAdaptor,eF);p.add(...D3,...W3,...X3);PY=class PY extends nI{constructor(){let A={name:"webgl",type:cA.WEBGL,systems:rF,renderPipes:tF,renderPipeAdaptors:eF};super(A)}}});function QO(A){let Q=u.get().createCanvas(6,1),I=Q.getContext("2d");return I.fillStyle=A,I.fillRect(0,0,6,1),Q}function dK(){if(cK!==void 0)return cK;try{let A=QO("#ff00ff"),Q=QO("#ffff00"),B=u.get().createCanvas(6,1).getContext("2d");B.globalCompositeOperation="multiply",B.drawImage(A,0,0),B.drawImage(Q,2,0);let E=B.getImageData(2,0,1,1);if(!E)cK=!1;else{let C=E.data;cK=C[0]===255&&C[1]===0&&C[2]===0}}catch(A){cK=!1}return cK}var cK;var j6=Y(()=>{jA()});var qA;var pB=Y(()=>{IQ();jA();VE();j6();qA={canvas:null,convertTintToImage:!1,cacheStepsPerColorChannel:8,canUseMultiply:dK(),tintMethod:null,_canvasSourceCache:new WeakMap,_unpremultipliedCache:new WeakMap,getCanvasSource:(A)=>{let Q=A.source,I=Q?.resource;if(!I)return null;let B=Q.alphaMode==="premultiplied-alpha",E=Q.resourceWidth??Q.pixelWidth,C=Q.resourceHeight??Q.pixelHeight,J=E!==Q.pixelWidth||C!==Q.pixelHeight;if(B){if(I instanceof HTMLCanvasElement||typeof OffscreenCanvas!=="undefined"&&I instanceof OffscreenCanvas){if(!J)return I}let K=qA._unpremultipliedCache.get(Q);if(K?.resourceId===Q._resourceId)return K.canvas}if(I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int8Array||I instanceof Uint16Array||I instanceof Int16Array||I instanceof Uint32Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof ArrayBuffer){let K=qA._canvasSourceCache.get(Q);if(K?.resourceId===Q._resourceId)return K.canvas;let H=u.get().createCanvas(Q.pixelWidth,Q.pixelHeight),Z=H.getContext("2d"),q=Z.createImageData(Q.pixelWidth,Q.pixelHeight),w=q.data,$=I instanceof ArrayBuffer?new Uint8Array(I):new Uint8Array(I.buffer,I.byteOffset,I.byteLength);if(Q.format==="bgra8unorm")for(let U=0;U<w.length&&U+3<$.length;U+=4)w[U]=$[U+2],w[U+1]=$[U+1],w[U+2]=$[U],w[U+3]=$[U+3];else w.set($.subarray(0,w.length));return Z.putImageData(q,0,0),qA._canvasSourceCache.set(Q,{canvas:H,resourceId:Q._resourceId}),H}if(B){let K=u.get().createCanvas(Q.pixelWidth,Q.pixelHeight),H=K.getContext("2d",{willReadFrequently:!0});K.width=Q.pixelWidth,K.height=Q.pixelHeight,H.drawImage(I,0,0);let Z=H.getImageData(0,0,K.width,K.height),q=Z.data;for(let w=0;w<q.length;w+=4){let $=q[w+3];if($>0){let U=255/$;q[w]=Math.min(255,q[w]*U+0.5),q[w+1]=Math.min(255,q[w+1]*U+0.5),q[w+2]=Math.min(255,q[w+2]*U+0.5)}}return H.putImageData(Z,0,0),qA._unpremultipliedCache.set(Q,{canvas:K,resourceId:Q._resourceId}),K}if(J){let K=qA._canvasSourceCache.get(Q);if(K?.resourceId===Q._resourceId)return K.canvas;let H=u.get().createCanvas(Q.pixelWidth,Q.pixelHeight),Z=H.getContext("2d");return H.width=Q.pixelWidth,H.height=Q.pixelHeight,Z.drawImage(I,0,0),qA._canvasSourceCache.set(Q,{canvas:H,resourceId:Q._resourceId}),H}return I},getTintedCanvas:(A,Q)=>{let I=A.texture,B=JA.shared.setValue(Q).toHex(),E=I.tintCache||(I.tintCache={}),C=E[B],J=I.source._resourceId;if(C?.tintId===J)return C;let K=C&&"getContext"in C?C:u.get().createCanvas();if(qA.tintMethod(I,Q,K),K.tintId=J,qA.convertTintToImage&&K.toDataURL!==void 0){let H=u.get().createImage();H.src=K.toDataURL(),H.tintId=J,E[B]=H}else E[B]=K;return E[B]},getTintedPattern:(A,Q)=>{let I=JA.shared.setValue(Q).toHex(),B=A.patternCache||(A.patternCache={}),E=A.source._resourceId,C=B[I];if(C?.tintId===E)return C;if(!qA.canvas)qA.canvas=u.get().createCanvas();return qA.tintMethod(A,Q,qA.canvas),C=qA.canvas.getContext("2d").createPattern(qA.canvas,"repeat"),C.tintId=E,B[I]=C,C},applyPatternTransform:(A,Q,I=!0)=>{if(!Q)return;let B=A;if(!B.setTransform)return;let E=globalThis.DOMMatrix;if(!E)return;let C=new E([Q.a,Q.b,Q.c,Q.d,Q.tx,Q.ty]);B.setTransform(I?C.inverse():C)},tintWithMultiply:(A,Q,I)=>{let B=I.getContext("2d"),E=A.frame.clone(),C=A.source._resolution??A.source.resolution??1,J=A.rotate;E.x*=C,E.y*=C,E.width*=C,E.height*=C;let K=DA.isVertical(J),H=K?E.height:E.width,Z=K?E.width:E.height;I.width=Math.ceil(H),I.height=Math.ceil(Z),B.save(),B.fillStyle=JA.shared.setValue(Q).toHex(),B.fillRect(0,0,H,Z),B.globalCompositeOperation="multiply";let q=qA.getCanvasSource(A);if(!q){B.restore();return}if(J)qA._applyInverseRotation(B,J,E.width,E.height);B.drawImage(q,E.x,E.y,E.width,E.height,0,0,E.width,E.height),B.globalCompositeOperation="destination-atop",B.drawImage(q,E.x,E.y,E.width,E.height,0,0,E.width,E.height),B.restore()},tintWithOverlay:(A,Q,I)=>{let B=I.getContext("2d"),E=A.frame.clone(),C=A.source._resolution??A.source.resolution??1,J=A.rotate;E.x*=C,E.y*=C,E.width*=C,E.height*=C;let K=DA.isVertical(J),H=K?E.height:E.width,Z=K?E.width:E.height;I.width=Math.ceil(H),I.height=Math.ceil(Z),B.save(),B.globalCompositeOperation="copy",B.fillStyle=JA.shared.setValue(Q).toHex(),B.fillRect(0,0,H,Z),B.globalCompositeOperation="destination-atop";let q=qA.getCanvasSource(A);if(!q){B.restore();return}if(J)qA._applyInverseRotation(B,J,E.width,E.height);B.drawImage(q,E.x,E.y,E.width,E.height,0,0,E.width,E.height),B.restore()},tintWithPerPixel:(A,Q,I)=>{let B=I.getContext("2d"),E=A.frame.clone(),C=A.source._resolution??A.source.resolution??1,J=A.rotate;E.x*=C,E.y*=C,E.width*=C,E.height*=C;let K=DA.isVertical(J),H=K?E.height:E.width,Z=K?E.width:E.height;I.width=Math.ceil(H),I.height=Math.ceil(Z),B.save(),B.globalCompositeOperation="copy";let q=qA.getCanvasSource(A);if(!q){B.restore();return}if(J)qA._applyInverseRotation(B,J,E.width,E.height);B.drawImage(q,E.x,E.y,E.width,E.height,0,0,E.width,E.height),B.restore();let w=Q>>16&255,$=Q>>8&255,U=Q&255,V=B.getImageData(0,0,H,Z),z=V.data;for(let D=0;D<z.length;D+=4)z[D]=z[D]*w/255,z[D+1]=z[D+1]*$/255,z[D+2]=z[D+2]*U/255;B.putImageData(V,0,0)},_applyInverseRotation:(A,Q,I,B)=>{let E=DA.inv(Q),C=DA.uX(E),J=DA.uY(E),K=DA.vX(E),H=DA.vY(E),Z=-Math.min(0,C*I,K*B,C*I+K*B),q=-Math.min(0,J*I,H*B,J*I+H*B);A.transform(C,J,K,H,Z,q)}};qA.tintMethod=qA.canUseMultiply?qA.tintWithMultiply:qA.tintWithPerPixel});var pK=0.0001,L6=0.0001;var R6=()=>{};function gY(A){let Q=A.length;if(Q<6)return 1;let I=0;for(let B=0,E=A[Q-2],C=A[Q-1];B<Q;B+=2){let J=A[B],K=A[B+1];I+=(J-E)*(K+C),E=J,C=K}if(I<0)return-1;return 1}var _Y=()=>{};function IO(A,Q,I,B,E,C,J,K){let H=A-I*E,Z=Q-B*E,q=A+I*C,w=Q+B*C,$,U;if(J)$=B,U=-I;else $=-B,U=I;let V=H+$,z=Z+U,D=q+$,W=w+U;return K.push(V,z),K.push(D,W),2}function O0(A,Q,I,B,E,C,J,K){let H=I-A,Z=B-Q,q=Math.atan2(H,Z),w=Math.atan2(E-A,C-Q);if(K&&q<w)q+=Math.PI*2;else if(!K&&q>w)w+=Math.PI*2;let $=q,U=w-q,V=Math.abs(U),z=Math.sqrt(H*H+Z*Z),D=(15*V*Math.sqrt(z)/Math.PI>>0)+1,W=U/D;if($+=W,K){J.push(A,Q),J.push(I,B);for(let j=1,O=$;j<D;j++,O+=W)J.push(A,Q),J.push(A+Math.sin(O)*z,Q+Math.cos(O)*z);J.push(A,Q),J.push(E,C)}else{J.push(I,B),J.push(A,Q);for(let j=1,O=$;j<D;j++,O+=W)J.push(A+Math.sin(O)*z,Q+Math.cos(O)*z),J.push(A,Q);J.push(E,C),J.push(A,Q)}return D*2}function uK(A,Q,I,B,E,C){let J=pK;if(A.length===0)return;let K=Q,H=K.alignment;if(Q.alignment!==0.5){let r=gY(A);if(I)r*=-1;H=(H-0.5)*r+0.5}let Z=new UA(A[0],A[1]),q=new UA(A[A.length-2],A[A.length-1]),w=B,$=Math.abs(Z.x-q.x)<J&&Math.abs(Z.y-q.y)<J;if(w){if(A=A.slice(),$)A.pop(),A.pop(),q.set(A[A.length-2],A[A.length-1]);let r=(Z.x+q.x)*0.5,WA=(q.y+Z.y)*0.5;A.unshift(r,WA),A.push(r,WA)}let U=E,V=A.length/2,z=A.length,D=U.length/2,W=K.width/2,j=W*W,O=K.miterLimit*K.miterLimit,F=A[0],L=A[1],R=A[2],_=A[3],T=0,f=0,S=-(L-_),g=F-R,d=0,a=0,AA=Math.sqrt(S*S+g*g);S/=AA,g/=AA,S*=W,g*=W;let CA=H,y=(1-CA)*2,m=CA*2;if(!w){if(K.cap==="round")z+=O0(F-S*(y-m)*0.5,L-g*(y-m)*0.5,F-S*y,L-g*y,F+S*m,L+g*m,U,!0)+2;else if(K.cap==="square")z+=IO(F,L,S,g,y,m,!0,U)}U.push(F-S*y,L-g*y),U.push(F+S*m,L+g*m);for(let r=1;r<V-1;++r){F=A[(r-1)*2],L=A[(r-1)*2+1],R=A[r*2],_=A[r*2+1],T=A[(r+1)*2],f=A[(r+1)*2+1],S=-(L-_),g=F-R,AA=Math.sqrt(S*S+g*g),S/=AA,g/=AA,S*=W,g*=W,d=-(_-f),a=R-T,AA=Math.sqrt(d*d+a*a),d/=AA,a/=AA,d*=W,a*=W;let WA=R-F,kA=L-_,zA=R-T,$A=f-_,fA=WA*zA+kA*$A,HA=kA*zA-$A*WA,FQ=HA<0;if(Math.abs(HA)<0.001*Math.abs(fA)){if(U.push(R-S*y,_-g*y),U.push(R+S*m,_+g*m),fA>=0){if(K.join==="round")z+=O0(R,_,R-S*y,_-g*y,R-d*y,_-a*y,U,!1)+4;else z+=2;U.push(R-d*m,_-a*m),U.push(R+d*y,_+a*y)}continue}let gQ=(-S+F)*(-g+_)-(-S+R)*(-g+L),VQ=(-d+T)*(-a+_)-(-d+R)*(-a+f),ZA=(WA*VQ-zA*gQ)/HA,NQ=($A*gQ-kA*VQ)/HA,OQ=(ZA-R)*(ZA-R)+(NQ-_)*(NQ-_),JI=R+(ZA-R)*y,DI=_+(NQ-_)*y,dA=R-(ZA-R)*m,uQ=_-(NQ-_)*m,mI=Math.min(WA*WA+kA*kA,zA*zA+$A*$A),KI=FQ?y:m,HI=mI+KI*KI*j;if(OQ<=HI)if(K.join==="bevel"||OQ/j>O){if(FQ)U.push(JI,DI),U.push(R+S*m,_+g*m),U.push(JI,DI),U.push(R+d*m,_+a*m);else U.push(R-S*y,_-g*y),U.push(dA,uQ),U.push(R-d*y,_-a*y),U.push(dA,uQ);z+=2}else if(K.join==="round")if(FQ)U.push(JI,DI),U.push(R+S*m,_+g*m),z+=O0(R,_,R+S*m,_+g*m,R+d*m,_+a*m,U,!0)+4,U.push(JI,DI),U.push(R+d*m,_+a*m);else U.push(R-S*y,_-g*y),U.push(dA,uQ),z+=O0(R,_,R-S*y,_-g*y,R-d*y,_-a*y,U,!1)+4,U.push(R-d*y,_-a*y),U.push(dA,uQ);else U.push(JI,DI),U.push(dA,uQ);else{if(U.push(R-S*y,_-g*y),U.push(R+S*m,_+g*m),K.join==="round")if(FQ)z+=O0(R,_,R+S*m,_+g*m,R+d*m,_+a*m,U,!0)+2;else z+=O0(R,_,R-S*y,_-g*y,R-d*y,_-a*y,U,!1)+2;else if(K.join==="miter"&&OQ/j<=O){if(FQ)U.push(dA,uQ),U.push(dA,uQ);else U.push(JI,DI),U.push(JI,DI);z+=2}U.push(R-d*y,_-a*y),U.push(R+d*m,_+a*m),z+=2}}if(F=A[(V-2)*2],L=A[(V-2)*2+1],R=A[(V-1)*2],_=A[(V-1)*2+1],S=-(L-_),g=F-R,AA=Math.sqrt(S*S+g*g),S/=AA,g/=AA,S*=W,g*=W,U.push(R-S*y,_-g*y),U.push(R+S*m,_+g*m),!w){if(K.cap==="round")z+=O0(R-S*(y-m)*0.5,_-g*(y-m)*0.5,R-S*y,_-g*y,R+S*m,_+g*m,U,!1)+2;else if(K.cap==="square")z+=IO(R,_,S,g,y,m,!1,U)}let t=L6*L6;for(let r=D;r<z+D-2;++r){if(F=U[r*2],L=U[r*2+1],R=U[(r+1)*2],_=U[(r+1)*2+1],T=U[(r+2)*2],f=U[(r+2)*2+1],Math.abs(F*(_-f)+R*(f-L)+T*(L-_))<t)continue;C.push(r,r+1,r+2)}}var P6=Y(()=>{aQ();R6();_Y()});function EO(A,Q){for(let I=0;I<Q.length;I++){let B=Q[I];A.addColorStop(B.offset,B.color)}}function CO(A,Q){let I=u.get().createCanvas(A,Q),B=I.getContext("2d");return{canvas:I,context:B}}function k3(A){let Q=A[0]??{};if(typeof Q==="number"||A[1])c("8.5.2","use options object instead"),Q={type:"linear",start:{x:A[0],y:A[1]},end:{x:A[2],y:A[3]},textureSpace:A[4],textureSize:A[5]??jQ.defaultLinearOptions.textureSize};return Q}var BO,bD=class A{constructor(...Q){this.uid=VA("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let I=k3(Q);if(I={...I.type==="radial"?A.defaultRadialOptions:A.defaultLinearOptions,...XI(I)},this._textureSize=I.textureSize,this._wrapMode=I.wrapMode,I.type==="radial")this.center=I.center,this.outerCenter=I.outerCenter??this.center,this.innerRadius=I.innerRadius,this.outerRadius=I.outerRadius,this.scale=I.scale,this.rotation=I.rotation;else this.start=I.start,this.end=I.end;this.textureSpace=I.textureSpace,this.type=I.type,I.colorStops.forEach((E)=>{this.addColorStop(E.offset,E.color)})}addColorStop(Q,I){return this.colorStops.push({offset:Q,color:JA.shared.setValue(I).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:Q,y:I}=this.start,{x:B,y:E}=this.end,C=B-Q,J=E-I,K=C<0||J<0;if(this._wrapMode==="clamp-to-edge"){if(C<0){let D=Q;Q=B,B=D,C*=-1}if(J<0){let D=I;I=E,E=D,J*=-1}}let H=this.colorStops.length?this.colorStops:BO,Z=this._textureSize,{canvas:q,context:w}=CO(Z,1),$=!K?w.createLinearGradient(0,0,this._textureSize,0):w.createLinearGradient(this._textureSize,0,0,0);EO($,H),w.fillStyle=$,w.fillRect(0,0,Z,1),this.texture=new v({source:new wI({resource:q,addressMode:this._wrapMode})});let U=Math.sqrt(C*C+J*J),V=Math.atan2(J,C),z=new x;if(z.scale(U/Z,1),z.rotate(V),z.translate(Q,I),this.textureSpace==="local")z.scale(Z,Z);this.transform=z}buildGradient(){if(!this.texture)this._tick++;if(this.type==="linear")this.buildLinearGradient();else this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let Q=this.colorStops.length?this.colorStops:BO,I=this._textureSize,{canvas:B,context:E}=CO(I,I),{x:C,y:J}=this.center,{x:K,y:H}=this.outerCenter,Z=this.innerRadius,q=this.outerRadius,w=K-q,$=H-q,U=I/(q*2),V=(C-w)*U,z=(J-$)*U,D=E.createRadialGradient(V,z,Z*U,(K-w)*U,(H-$)*U,q*U);EO(D,Q),E.fillStyle=Q[Q.length-1].color,E.fillRect(0,0,I,I),E.fillStyle=D,E.translate(V,z),E.rotate(this.rotation),E.scale(1,this.scale),E.translate(-V,-z),E.fillRect(0,0,I,I),this.texture=new v({source:new wI({resource:B,addressMode:this._wrapMode})});let W=new x;if(W.scale(1/U,1/U),W.translate(w,$),this.textureSpace==="local")W.scale(I,I);this.transform=W}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}},jQ;var uB=Y(()=>{IQ();jA();NA();aE();FA();HQ();gA();UE();BO=[{offset:0,color:"white"},{offset:1,color:"black"}];bD.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};bD.defaultRadialOptions={center:{x:0.5,y:0.5},innerRadius:0,outerRadius:0.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};jQ=bD});class AB{constructor(A,Q){if(this.uid=VA("fillPattern"),this._tick=0,this.transform=new x,this.texture=A,this.transform.scale(1/A.frame.width,1/A.frame.height),Q)A.source.style.addressModeU=JO[Q].addressModeU,A.source.style.addressModeV=JO[Q].addressModeV}setTransform(A){let Q=this.texture;this.transform.copyFrom(A),this.transform.invert(),this.transform.scale(1/Q.frame.width,1/Q.frame.height),this._tick++}get texture(){return this._texture}set texture(A){if(this._texture===A)return;this._texture=A,this._tick++}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var JO;var G0=Y(()=>{NA();HQ();JO={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}});function M6(A,Q,I,B,E,C,J,K=null){let H=0;I*=Q,E*=C;let{a:Z,b:q,c:w,d:$,tx:U,ty:V}=K;while(H<J){let z=A[I],D=A[I+1];B[E]=Z*z+w*D+U,B[E+1]=q*z+$*D+V,E+=C,I+=Q,H++}}function g6(A,Q,I,B){let E=0;Q*=I;while(E<B)A[Q]=0,A[Q+1]=0,Q+=I,E++}var _6=()=>{};function lK(A,Q,I,B,E){let{a:C,b:J,c:K,d:H,tx:Z,ty:q}=Q;I||(I=0),B||(B=2),E||(E=A.length/B-I);let w=I*B;for(let $=0;$<E;$++){let U=A[w],V=A[w+1];A[w]=C*U+K*V+Z,A[w+1]=J*U+H*V+q,w+=B}}var S6=()=>{};class XC{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){if(this.renderable&&this.applyTransform)return this.renderable.groupBlendMode;return"normal"}get color(){let A=this.baseColor,Q=A>>16|A&65280|(A&255)<<16,I=this.renderable;if(I)return rQ(Q,I.groupColor)+(this.alpha*I.groupAlpha*255<<24);return Q+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||F3}copyTo(A){A.indexOffset=this.indexOffset,A.indexSize=this.indexSize,A.attributeOffset=this.attributeOffset,A.attributeSize=this.attributeSize,A.baseColor=this.baseColor,A.alpha=this.alpha,A.texture=this.texture,A.geometryData=this.geometryData,A.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}var F3;var b6=Y(()=>{NA();wE();F3=new x});var kC,SY,bY;var fY=Y(()=>{M();kC={extension:{type:N.ShapeBuilder,name:"circle"},build(A,Q){let I,B,E,C,J,K;if(A.type==="circle"){let F=A;if(J=K=F.radius,J<=0)return!1;I=F.x,B=F.y,E=C=0}else if(A.type==="ellipse"){let F=A;if(J=F.halfWidth,K=F.halfHeight,J<=0||K<=0)return!1;I=F.x,B=F.y,E=C=0}else{let F=A,L=F.width/2,R=F.height/2;I=F.x+L,B=F.y+R,J=K=Math.max(0,Math.min(F.radius,Math.min(L,R))),E=L-J,C=R-K}if(E<0||C<0)return!1;let H=Math.ceil(2.3*Math.sqrt(J+K)),Z=H*8+(E?4:0)+(C?4:0);if(Z===0)return!1;if(H===0)return Q[0]=Q[6]=I+E,Q[1]=Q[3]=B+C,Q[2]=Q[4]=I-E,Q[5]=Q[7]=B-C,!0;let q=0,w=H*4+(E?2:0)+2,$=w,U=Z,V=E+J,z=C,D=I+V,W=I-V,j=B+z;if(Q[q++]=D,Q[q++]=j,Q[--w]=j,Q[--w]=W,C){let F=B-z;Q[$++]=W,Q[$++]=F,Q[--U]=F,Q[--U]=D}for(let F=1;F<H;F++){let L=Math.PI/2*(F/H),R=E+Math.cos(L)*J,_=C+Math.sin(L)*K,T=I+R,f=I-R,S=B+_,g=B-_;Q[q++]=T,Q[q++]=S,Q[--w]=S,Q[--w]=f,Q[$++]=f,Q[$++]=g,Q[--U]=g,Q[--U]=T}V=E,z=C+K,D=I+V,W=I-V,j=B+z;let O=B-z;if(Q[q++]=D,Q[q++]=j,Q[--U]=O,Q[--U]=D,E)Q[q++]=W,Q[q++]=j,Q[--U]=O,Q[--U]=W;return!0},triangulate(A,Q,I,B,E,C){if(A.length===0)return;let J=0,K=0;for(let q=0;q<A.length;q+=2)J+=A[q],K+=A[q+1];J/=A.length/2,K/=A.length/2;let H=B;Q[H*I]=J,Q[H*I+1]=K;let Z=H++;for(let q=0;q<A.length;q+=2){if(Q[H*I]=A[q],Q[H*I+1]=A[q+1],q>0)E[C++]=H,E[C++]=Z,E[C++]=H-1;H++}E[C++]=Z+1,E[C++]=Z,E[C++]=H-1}},SY={...kC,extension:{...kC.extension,name:"ellipse"}},bY={...kC,extension:{...kC.extension,name:"roundedRectangle"}}});function yY(A,Q,I,B){let E=pK;if(A.length===0)return;let C=A[0],J=A[1],K=A[A.length-2],H=A[A.length-1],Z=Q||Math.abs(C-K)<E&&Math.abs(J-H)<E,q=I,w=A.length/2,$=q.length/2;for(let U=0;U<w;U++)q.push(A[U*2]),q.push(A[U*2+1]);for(let U=0;U<w-1;U++)B.push($+U,$+U+1);if(Z)B.push($+w-1,$)}var vY=Y(()=>{R6()});function iK(A,Q,I,B,E,C,J){let K=Q1(A,Q,2);if(!K)return;for(let Z=0;Z<K.length;Z+=3)C[J++]=K[Z]+E,C[J++]=K[Z+1]+E,C[J++]=K[Z+2]+E;let H=E*B;for(let Z=0;Z<A.length;Z+=2)I[H]=A[Z],I[H+1]=A[Z+1],H+=B}var f6=Y(()=>{NZ()});var O3,TY;var hY=Y(()=>{M();f6();O3=[],TY={extension:{type:N.ShapeBuilder,name:"polygon"},build(A,Q){for(let I=0;I<A.points.length;I++)Q[I]=A.points[I];return!0},triangulate(A,Q,I,B,E,C){iK(A,O3,Q,I,B,E,C)}}});var xY;var mY=Y(()=>{M();xY={extension:{type:N.ShapeBuilder,name:"rectangle"},build(A,Q){let I=A,B=I.x,E=I.y,C=I.width,J=I.height;if(!(C>0&&J>0))return!1;return Q[0]=B,Q[1]=E,Q[2]=B+C,Q[3]=E,Q[4]=B+C,Q[5]=E+J,Q[6]=B,Q[7]=E+J,!0},triangulate(A,Q,I,B,E,C){let J=0;B*=I,Q[B+J]=A[0],Q[B+J+1]=A[1],J+=I,Q[B+J]=A[2],Q[B+J+1]=A[3],J+=I,Q[B+J]=A[6],Q[B+J+1]=A[7],J+=I,Q[B+J]=A[4],Q[B+J+1]=A[5],J+=I;let K=B/I;E[C++]=K,E[C++]=K+1,E[C++]=K+2,E[C++]=K+1,E[C++]=K+3,E[C++]=K+2}}});var cY;var dY=Y(()=>{M();cY={extension:{type:N.ShapeBuilder,name:"triangle"},build(A,Q){return Q[0]=A.x,Q[1]=A.y,Q[2]=A.x2,Q[3]=A.y2,Q[4]=A.x3,Q[5]=A.y3,!0},triangulate(A,Q,I,B,E,C){let J=0;B*=I,Q[B+J]=A[0],Q[B+J+1]=A[1],J+=I,Q[B+J]=A[2],Q[B+J+1]=A[3],J+=I,Q[B+J]=A[4],Q[B+J+1]=A[5];let K=B/I;E[C++]=K,E[C++]=K+1,E[C++]=K+2}}});function nK(A,Q,I,B){let E=Q.matrix?A.copyFrom(Q.matrix).invert():A.identity();if(Q.textureSpace==="local"){let J=I.getBounds(j3);if(Q.width)J.pad(Q.width);let{x:K,y:H}=J,Z=1/J.width,q=1/J.height,w=-K*Z,$=-H*q,U=E.a,V=E.b,z=E.c,D=E.d;E.a*=Z,E.b*=Z,E.c*=q,E.d*=q,E.tx=w*U+$*z+E.tx,E.ty=w*V+$*D+E.ty}else E.translate(Q.texture.frame.x,Q.texture.frame.y),E.scale(1/Q.texture.source.width,1/Q.texture.source.height);let C=Q.texture.source.style;if(!(Q.fill instanceof jQ)&&C.addressMode==="clamp-to-edge")C.addressMode="repeat",C.update();if(B)E.append(G3.copyFrom(B).invert());return E}var G3,j3;var y6=Y(()=>{NA();ZQ();uB();G3=new x,j3=new EA});function pY(A,Q){let{geometryData:I,batches:B}=Q;B.length=0,I.indices.length=0,I.vertices.length=0,I.uvs.length=0;for(let E=0;E<A.instructions.length;E++){let C=A.instructions[E];if(C.action==="texture")P3(C.data,B,I);else if(C.action==="fill"||C.action==="stroke"){let J=C.action==="stroke",K=C.data.path.shapePath,H=C.data.style,Z=C.data.hole;if(J&&Z)KO(Z.shapePath,H,!0,B,I);if(Z)K.shapePrimitives[K.shapePrimitives.length-1].holes=Z.shapePath.shapePrimitives;KO(K,H,J,B,I)}}}function P3(A,Q,I){let B=[],E=PE.rectangle,C=L3;C.x=A.dx,C.y=A.dy,C.width=A.dw,C.height=A.dh;let J=A.transform;if(!E.build(C,B))return;let{vertices:K,uvs:H,indices:Z}=I,q=Z.length,w=K.length/2;if(J)lK(B,J);E.triangulate(B,K,2,w,Z,q);let $=A.image,U=$.uvs;H.push(U.x0,U.y0,U.x1,U.y1,U.x3,U.y3,U.x2,U.y2);let V=yA.get(XC);V.indexOffset=q,V.indexSize=Z.length-q,V.attributeOffset=w,V.attributeSize=K.length/2-w,V.baseColor=A.style,V.alpha=A.alpha,V.texture=$,V.geometryData=I,Q.push(V)}function KO(A,Q,I,B,E){let{vertices:C,uvs:J,indices:K}=E;A.shapePrimitives.forEach(({shape:H,transform:Z,holes:q})=>{let w=[],$=PE[H.type];if(!$.build(H,w))return;let U=K.length,V=C.length/2,z="triangle-list";if(Z)lK(w,Z);if(!I)if(q){let O=[],F=w.slice();M3(q).forEach((R)=>{O.push(F.length/2),F.push(...R)}),iK(F,O,C,2,V,K,U)}else $.triangulate(w,C,2,V,K,U);else{let O=H.closePath??!0,F=Q;if(!F.pixelLine)uK(w,F,!1,O,C,K);else yY(w,O,C,K),z="line-list"}let D=J.length/2,W=Q.texture;if(W!==v.WHITE){let O=nK(R3,Q,H,Z);M6(C,2,V,J,D,2,C.length/2-V,O)}else g6(J,D,2,C.length/2-V);let j=yA.get(XC);j.indexOffset=U,j.indexSize=K.length-U,j.attributeOffset=V,j.attributeSize=C.length/2-V,j.baseColor=Q.color,j.alpha=Q.alpha,j.texture=W,j.geometryData=E,j.topology=z,B.push(j)})}function M3(A){let Q=[];for(let I=0;I<A.length;I++){let B=A[I].shape,E=[];if(PE[B.type].build(B,E))Q.push(E)}return Q}var PE,L3,R3;var oK=Y(()=>{M();NA();ZQ();_6();S6();FA();dI();b6();fY();P6();vY();hY();mY();dY();y6();f6();PE={};p.handleByMap(N.ShapeBuilder,PE);p.add(xY,TY,cY,kC,SY,bY);L3=new EA,R3=new x});function b3(A,Q,I){A.beginPath();for(let B=0;B<I.length;B+=3){let E=I[B]*2,C=I[B+1]*2,J=I[B+2]*2;A.moveTo(Q[E],Q[E+1]),A.lineTo(Q[C],Q[C+1]),A.lineTo(Q[J],Q[J+1]),A.closePath()}A.fill()}function f3(A){return`#${(A&16777215).toString(16).padStart(6,"0")}`}function y3(A,Q,I,B,E,C){C=Math.max(0,Math.min(C,Math.min(B,E)/2)),A.moveTo(Q+C,I),A.lineTo(Q+B-C,I),A.quadraticCurveTo(Q+B,I,Q+B,I+C),A.lineTo(Q+B,I+E-C),A.quadraticCurveTo(Q+B,I+E,Q+B-C,I+E),A.lineTo(Q+C,I+E),A.quadraticCurveTo(Q,I+E,Q,I+E-C),A.lineTo(Q,I+C),A.quadraticCurveTo(Q,I,Q+C,I)}function lY(A,Q){switch(Q.type){case"rectangle":{let I=Q;A.rect(I.x,I.y,I.width,I.height);break}case"roundedRectangle":{let I=Q;y3(A,I.x,I.y,I.width,I.height,I.radius);break}case"circle":{let I=Q;A.arc(I.x,I.y,I.radius,0,Math.PI*2);break}case"ellipse":{let I=Q;if(A.ellipse)A.ellipse(I.x,I.y,I.halfWidth,I.halfHeight,0,0,Math.PI*2);else A.save(),A.translate(I.x,I.y),A.scale(I.halfWidth,I.halfHeight),A.arc(0,0,1,0,Math.PI*2),A.restore();break}case"triangle":{let I=Q;A.moveTo(I.x,I.y),A.lineTo(I.x2,I.y2),A.lineTo(I.x3,I.y3),A.closePath();break}case"polygon":default:{let I=Q,B=I.points;if(!B?.length)break;A.moveTo(B[0],B[1]);for(let E=2;E<B.length;E+=2)A.lineTo(B[E],B[E+1]);if(I.closePath)A.closePath();break}}}function v3(A,Q){if(!Q?.length)return!1;for(let I=0;I<Q.length;I++){let B=Q[I];if(!B?.shape)continue;let E=B.transform,C=E&&!E.isIdentity();if(C)A.save(),A.transform(E.a,E.b,E.c,E.d,E.tx,E.ty);if(lY(A,B.shape),C)A.restore()}return!0}function T3(A,Q,I,B){let E=A.fill;if(E instanceof jQ){E.buildGradient();let J=E.texture;if(J){let K=qA.getTintedPattern(J,Q),H=I?fD.copyFrom(I).scale(J.source.pixelWidth,J.source.pixelHeight):fD.copyFrom(E.transform);if(B&&!A.textureSpace)H.append(B);return qA.applyPatternTransform(K,H),K}}if(E instanceof AB){let J=qA.getTintedPattern(E.texture,Q);return qA.applyPatternTransform(J,E.transform),J}let C=A.texture;if(C&&C!==v.WHITE){if(!C.source.resource)return g3;let J=qA.getTintedPattern(C,Q),K=I?fD.copyFrom(I).scale(C.source.pixelWidth,C.source.pixelHeight):A.matrix;return qA.applyPatternTransform(J,K),J}return f3(Q)}class sK{constructor(){this.shader=null}contextChange(A){}execute(A,Q){let I=A.renderer,B=I.canvasContext,E=B.activeContext,C=Q.groupTransform,J=I.globalUniforms.globalUniformData?.worldColor??4294967295,K=Q.groupColorAlpha,H=(J>>>24&255)/255,Z=(K>>>24&255)/255,q=I.filter?.alphaMultiplier??1,w=H*Z*q;if(w<=0)return;let $=J&16777215,U=K&16777215,V=lQ(rQ(U,$)),z=I._roundPixels|Q._roundPixels;E.save(),B.setContextTransform(C,z===1),B.setBlendMode(Q.groupBlendMode);let D=Q.context.instructions;for(let W=0;W<D.length;W++){let j=D[W];if(j.action==="texture"){let S=j.data,g=S.image,d=g?qA.getCanvasSource(g):null;if(!d)continue;let a=S.alpha*w;if(a<=0)continue;let AA=rQ(S.style,V);E.globalAlpha=a;let CA=d;if(AA!==16777215)CA=qA.getTintedCanvas({texture:g},AA);let y=g.frame,m=g.source._resolution??g.source.resolution??1,t=y.x*m,r=y.y*m,WA=y.width*m,kA=y.height*m;if(CA!==d)t=0,r=0;let zA=S.transform,$A=zA&&!zA.isIdentity(),fA=g.rotate;if($A||fA){if(uY.copyFrom(C),$A)uY.append(zA);if(fA)DA.matrixAppendRotationInv(uY,fA,S.dx,S.dy,S.dw,S.dh);B.setContextTransform(uY,z===1)}else B.setContextTransform(C,z===1);if(E.drawImage(CA,t,r,CA===d?WA:CA.width,CA===d?kA:CA.height,fA?0:S.dx,fA?0:S.dy,S.dw,S.dh),$A||fA)B.setContextTransform(C,z===1);continue}let O=j.data,F=O?.path?.shapePath;if(!F?.shapePrimitives?.length)continue;let L=O.style,R=rQ(L.color,V),_=L.alpha*w;if(_<=0)continue;let T=j.action==="stroke";if(E.globalAlpha=_,T){let S=L;E.lineWidth=S.width,E.lineCap=S.cap,E.lineJoin=S.join,E.miterLimit=S.miterLimit}let f=F.shapePrimitives;if(!T&&O.hole?.shapePath?.shapePrimitives?.length){let S=f[f.length-1];S.holes=O.hole.shapePath.shapePrimitives}for(let S=0;S<f.length;S++){let g=f[S];if(!g?.shape)continue;let d=g.transform,a=d&&!d.isIdentity(),AA=L.texture&&L.texture!==v.WHITE,CA=L.textureSpace==="global"?d:null,y=AA?nK(_3,L,g.shape,CA):null,m=a?S3.copyFrom(C).append(d):C,t=T3(L,R,y,m);if(a)E.save(),E.transform(d.a,d.b,d.c,d.d,d.tx,d.ty);if(T){let r=L;if(r.alignment!==0.5&&!r.pixelLine){let kA=[],zA=[],$A=[];if(PE[g.shape.type]?.build(g.shape,kA)){let HA=g.shape.closePath??!0;uK(kA,r,!1,HA,zA,$A),E.fillStyle=t,b3(E,zA,$A)}else E.strokeStyle=t,E.beginPath(),lY(E,g.shape),E.stroke()}else E.strokeStyle=t,E.beginPath(),lY(E,g.shape),E.stroke()}else if(E.fillStyle=t,E.beginPath(),lY(E,g.shape),v3(E,g.holes))E.fill("evenodd");else E.fill();if(a)E.restore()}}E.restore()}destroy(){this.shader=null}}var g3="#808080",uY,_3,S3,fD;var iY=Y(()=>{M();VE();NA();pB();FA();YE();wE();P6();uB();G0();oK();y6();uY=new x,_3=new x,S3=new x,fD=new x;sK.extension={type:[N.CanvasPipesAdaptor],name:"graphics"}});var yD=class A{static _getPatternRepeat(Q,I){let B=Q&&Q!=="clamp-to-edge",E=I&&I!=="clamp-to-edge";if(B&&E)return"repeat";if(B)return"repeat-x";if(E)return"repeat-y";return"no-repeat"}start(Q,I,B){}execute(Q,I){let B=I.elements;if(!B||!B.length)return;let E=Q.renderer,C=E.canvasContext,J=C.activeContext;for(let K=0;K<B.length;K++){let H=B[K];if(!H.packAsQuad)continue;let Z=H,q=Z.texture,w=q?qA.getCanvasSource(q):null;if(!w)continue;let $=q.source.style,U=C.smoothProperty,V=$.scaleMode!=="nearest";if(J[U]!==V)J[U]=V;C.setBlendMode(I.blendMode);let z=E.globalUniforms.globalUniformData?.worldColor??4294967295,D=Z.color,W=(z>>>24&255)/255,j=(D>>>24&255)/255,O=E.filter?.alphaMultiplier??1,F=W*j*O;if(F<=0)continue;J.globalAlpha=F;let L=z&16777215,R=D&16777215,_=lQ(rQ(R,L)),T=q.frame,f=$.addressModeU??$.addressMode,S=$.addressModeV??$.addressMode,g=A._getPatternRepeat(f,S),d=q.source._resolution??q.source.resolution??1,a=Z.renderable?.renderGroup?.isCachedAsTexture,AA=T.x*d,CA=T.y*d,y=T.width*d,m=T.height*d,t=Z.bounds,r=E.renderTarget.renderTarget.isRoot,WA=t.minX,kA=t.minY,zA=t.maxX-t.minX,$A=t.maxY-t.minY,fA=q.rotate,HA=q.uvs,FQ=Math.min(HA.x0,HA.x1,HA.x2,HA.x3,HA.y0,HA.y1,HA.y2,HA.y3),gQ=Math.max(HA.x0,HA.x1,HA.x2,HA.x3,HA.y0,HA.y1,HA.y2,HA.y3),VQ=g!=="no-repeat"&&(FQ<0||gQ>1),NQ=fA&&!(!VQ&&(_!==16777215||fA));if(NQ)A._tempPatternMatrix.copyFrom(Z.transform),DA.matrixAppendRotationInv(A._tempPatternMatrix,fA,WA,kA,zA,$A),C.setContextTransform(A._tempPatternMatrix,Z.roundPixels===1,void 0,a&&r);else C.setContextTransform(Z.transform,Z.roundPixels===1,void 0,a&&r);let OQ=NQ?0:WA,JI=NQ?0:kA,DI=zA,dA=$A;if(VQ){let uQ=w,mI=_!==16777215&&!fA,KI=T.width<=q.source.width&&T.height<=q.source.height;if(mI&&KI)uQ=qA.getTintedCanvas({texture:q},_);let HI=J.createPattern(uQ,g);if(!HI)continue;let hC=DI,RB=dA;if(hC===0||RB===0)continue;let WH=1/hC,XH=1/RB,xC=(HA.x1-HA.x0)*WH,a0=(HA.y1-HA.y0)*WH,kH=(HA.x3-HA.x0)*XH,FH=(HA.y3-HA.y0)*XH,Nq=HA.x0-xC*OQ-kH*JI,I2=HA.y0-a0*OQ-FH*JI,r0=q.source.pixelWidth,mE=q.source.pixelHeight;A._tempPatternMatrix.set(xC*r0,a0*mE,kH*r0,FH*mE,Nq*r0,I2*mE),qA.applyPatternTransform(HI,A._tempPatternMatrix),J.fillStyle=HI,J.fillRect(OQ,JI,DI,dA)}else{let mI=_!==16777215||fA?qA.getTintedCanvas({texture:q},_):w,KI=mI!==w;J.drawImage(mI,KI?0:AA,KI?0:CA,KI?mI.width:y,KI?mI.height:m,OQ,JI,DI,dA)}}}},nY;var oY=Y(()=>{M();VE();NA();YE();wE();pB();yD._tempPatternMatrix=new x;yD.extension={type:[N.CanvasPipesAdaptor],name:"batch"};nY=yD});class aK{constructor(A){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=A}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(A,Q,I){this._renderer.renderPipes.batch.break(I);let B=this._colorStack;B[this._colorStackIndex]=B[this._colorStackIndex-1]&A.mask;let E=this._colorStack[this._colorStackIndex];if(E!==this._currentColor)this._currentColor=E,I.add({renderPipeId:"colorMask",colorMask:E,canBundle:!1});this._colorStackIndex++}pop(A,Q,I){this._renderer.renderPipes.batch.break(I);let B=this._colorStack;this._colorStackIndex--;let E=B[this._colorStackIndex-1];if(E!==this._currentColor)this._currentColor=E,I.add({renderPipeId:"colorMask",colorMask:E,canBundle:!1})}execute(A){}destroy(){this._renderer=null,this._colorStack=null}}var sY=Y(()=>{M();aK.extension={type:[N.CanvasPipes],name:"colorMask"}});var ZO=KQ((iEA,HO)=>{HO.exports=x3;var vD={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},h3=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function x3(A){var Q=[];return A.replace(h3,function(I,B,E){var C=B.toLowerCase();if(E=c3(E),C=="m"&&E.length>2)Q.push([B].concat(E.splice(0,2))),C="l",B=B=="m"?"l":"L";while(!0){if(E.length==vD[C])return E.unshift(B),Q.push(E);if(E.length<vD[C])throw new Error("malformed path data");Q.push([B].concat(E.splice(0,vD[C])))}}),Q}var m3=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function c3(A){var Q=A.match(m3);return Q?Q.map(Number):[]}});function aY(A,Q){let I=qO.default(A),B=[],E=null,C=0,J=0;for(let K=0;K<I.length;K++){let H=I[K],Z=H[0],q=H;switch(Z){case"M":C=q[1],J=q[2],Q.moveTo(C,J);break;case"m":C+=q[1],J+=q[2],Q.moveTo(C,J);break;case"H":C=q[1],Q.lineTo(C,J);break;case"h":C+=q[1],Q.lineTo(C,J);break;case"V":J=q[1],Q.lineTo(C,J);break;case"v":J+=q[1],Q.lineTo(C,J);break;case"L":C=q[1],J=q[2],Q.lineTo(C,J);break;case"l":C+=q[1],J+=q[2],Q.lineTo(C,J);break;case"C":C=q[5],J=q[6],Q.bezierCurveTo(q[1],q[2],q[3],q[4],C,J);break;case"c":Q.bezierCurveTo(C+q[1],J+q[2],C+q[3],J+q[4],C+q[5],J+q[6]),C+=q[5],J+=q[6];break;case"S":C=q[3],J=q[4],Q.bezierCurveToShort(q[1],q[2],C,J);break;case"s":Q.bezierCurveToShort(C+q[1],J+q[2],C+q[3],J+q[4]),C+=q[3],J+=q[4];break;case"Q":C=q[3],J=q[4],Q.quadraticCurveTo(q[1],q[2],C,J);break;case"q":Q.quadraticCurveTo(C+q[1],J+q[2],C+q[3],J+q[4]),C+=q[3],J+=q[4];break;case"T":C=q[1],J=q[2],Q.quadraticCurveToShort(C,J);break;case"t":C+=q[1],J+=q[2],Q.quadraticCurveToShort(C,J);break;case"A":C=q[6],J=q[7],Q.arcToSvg(q[1],q[2],q[3],q[4],q[5],C,J);break;case"a":C+=q[6],J+=q[7],Q.arcToSvg(q[1],q[2],q[3],q[4],q[5],C,J);break;case"Z":case"z":if(Q.closePath(),B.length>0)if(E=B.pop(),E)C=E.startX,J=E.startY;else C=0,J=0;E=null;break;default:n(`Unknown SVG path command: ${Z}`)}if(Z!=="Z"&&Z!=="z"){if(E===null)E={startX:C,startY:J},B.push(E)}}return Q}var qO;var rY=Y(()=>{qO=Gq(ZO(),1);_A()});class tY{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){if(this.batches)this.batches.forEach((A)=>{yA.return(A)});if(this.graphicsData)yA.return(this.graphicsData);this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class eY{constructor(){this.instructions=new $E}init(A){let Q=A.maxTextures;this.batcher?this.batcher._updateMaxTextures(Q):this.batcher=new U0({maxTextures:Q}),this.instructions.reset()}get geometry(){return c(Sq,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}var TD=class A{constructor(Q){this._renderer=Q,this._managedContexts=new vA({renderer:Q,type:"resource",name:"graphicsContext"})}init(Q){A.defaultOptions.bezierSmoothness=Q?.bezierSmoothness??A.defaultOptions.bezierSmoothness}getContextRenderData(Q){return Q._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(Q)}updateGpuContext(Q){let I=!!Q._gpuData[this._renderer.uid],B=Q._gpuData[this._renderer.uid]||this._initContext(Q);if(Q.dirty||!I){if(I)B.reset();pY(Q,B);let E=Q.batchMode;if(Q.customShader||E==="no-batch")B.isBatchable=!1;else if(E==="auto")B.isBatchable=B.geometryData.vertices.length<400;else B.isBatchable=!0;Q.dirty=!1}return B}getGpuContext(Q){return Q._gpuData[this._renderer.uid]||this._initContext(Q)}_initContextRenderData(Q){let I=yA.get(eY,{maxTextures:this._renderer.limits.maxBatchableTextures}),B=Q._gpuData[this._renderer.uid],{batches:E,geometryData:C}=B;B.graphicsData=I;let J=C.vertices.length,K=C.indices.length;for(let w=0;w<E.length;w++)E[w].applyTransform=!1;let H=I.batcher;H.ensureAttributeBuffer(J),H.ensureIndexBuffer(K),H.begin();for(let w=0;w<E.length;w++){let $=E[w];H.add($)}H.finish(I.instructions);let Z=H.geometry;Z.indexBuffer.setDataWithSize(H.indexBuffer,H.indexSize,!0),Z.buffers[0].setDataWithSize(H.attributeBuffer.float32View,H.attributeSize,!0);let q=H.batches;for(let w=0;w<q.length;w++){let $=q[w];$.bindGroup=IC($.textures.textures,$.textures.count,this._renderer.limits.maxBatchableTextures)}return I}_initContext(Q){let I=new tY;return I.context=Q,Q._gpuData[this._renderer.uid]=I,this._managedContexts.add(Q),I}destroy(){this._managedContexts.destroy(),this._renderer=null}},FC;var rK=Y(()=>{M();fJ();xZ();HJ();xQ();gA();dI();oK();TD.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"graphicsContext"};TD.defaultOptions={bezierSmoothness:0.5};FC=TD});function eK(A,Q,I,B,E,C,J,K,H,Z){let w=Math.min(0.99,Math.max(0,Z??FC.defaultOptions.bezierSmoothness)),$=(p3-w)/1;return $*=$,u3(Q,I,B,E,C,J,K,H,A,$),A}function u3(A,Q,I,B,E,C,J,K,H,Z){xD(A,Q,I,B,E,C,J,K,H,Z,0),H.push(J,K)}function xD(A,Q,I,B,E,C,J,K,H,Z,q){if(q>d3)return;let w=Math.PI,$=(A+I)/2,U=(Q+B)/2,V=(I+E)/2,z=(B+C)/2,D=(E+J)/2,W=(C+K)/2,j=($+V)/2,O=(U+z)/2,F=(V+D)/2,L=(z+W)/2,R=(j+F)/2,_=(O+L)/2;if(q>0){let T=J-A,f=K-Q,S=Math.abs((I-J)*f-(B-K)*T),g=Math.abs((E-J)*f-(C-K)*T),d,a;if(S>A$&&g>A$){if((S+g)*(S+g)<=Z*(T*T+f*f)){if(tK<hD){H.push(R,_);return}let AA=Math.atan2(C-B,E-I);if(d=Math.abs(AA-Math.atan2(B-Q,I-A)),a=Math.abs(Math.atan2(K-C,J-E)-AA),d>=w)d=2*w-d;if(a>=w)a=2*w-a;if(d+a<tK){H.push(R,_);return}if(j0!==0){if(d>j0){H.push(I,B);return}if(a>j0){H.push(E,C);return}}}}else if(S>A$){if(S*S<=Z*(T*T+f*f)){if(tK<hD){H.push(R,_);return}if(d=Math.abs(Math.atan2(C-B,E-I)-Math.atan2(B-Q,I-A)),d>=w)d=2*w-d;if(d<tK){H.push(I,B),H.push(E,C);return}if(j0!==0){if(d>j0){H.push(I,B);return}}}}else if(g>A$){if(g*g<=Z*(T*T+f*f)){if(tK<hD){H.push(R,_);return}if(d=Math.abs(Math.atan2(K-C,J-E)-Math.atan2(C-B,E-I)),d>=w)d=2*w-d;if(d<tK){H.push(I,B),H.push(E,C);return}if(j0!==0){if(d>j0){H.push(E,C);return}}}}else if(T=R-(A+J)/2,f=_-(Q+K)/2,T*T+f*f<=Z){H.push(R,_);return}}xD(A,Q,$,U,j,O,R,_,H,Z,q+1),xD(R,_,F,L,D,W,J,K,H,Z,q+1)}var d3=8,A$=0.00000011920929,p3=1,hD=0.01,tK=0,j0=0;var v6=Y(()=>{rK()});function Q$(A,Q,I,B,E,C,J,K){let Z=Math.min(0.99,Math.max(0,K??FC.defaultOptions.bezierSmoothness)),q=(n3-Z)/1;return q*=q,s3(Q,I,B,E,C,J,A,q),A}function s3(A,Q,I,B,E,C,J,K){mD(J,A,Q,I,B,E,C,K,0),J.push(E,C)}function mD(A,Q,I,B,E,C,J,K,H){if(H>l3)return;let Z=Math.PI,q=(Q+B)/2,w=(I+E)/2,$=(B+C)/2,U=(E+J)/2,V=(q+$)/2,z=(w+U)/2,D=C-Q,W=J-I,j=Math.abs((B-C)*W-(E-J)*D);if(j>i3){if(j*j<=K*(D*D+W*W)){if(wO<o3){A.push(V,z);return}let O=Math.abs(Math.atan2(J-E,C-B)-Math.atan2(E-I,B-Q));if(O>=Z)O=2*Z-O;if(O<wO){A.push(V,z);return}}}else if(D=V-(Q+C)/2,W=z-(I+J)/2,D*D+W*W<=K){A.push(V,z);return}mD(A,Q,I,q,w,V,z,K,H+1),mD(A,V,z,$,U,C,J,K,H+1)}var l3=8,i3=0.00000011920929,n3=1,o3=0.01,wO=0;var I$=Y(()=>{rK()});function A8(A,Q,I,B,E,C,J,K){let H=Math.abs(E-C);if(!J&&E>C)H=2*Math.PI-H;else if(J&&C>E)H=2*Math.PI-H;K||(K=Math.max(6,Math.floor(6*Math.pow(B,0.3333333333333333)*(H/Math.PI)))),K=Math.max(K,3);let Z=H/K,q=E;Z*=J?-1:1;for(let w=0;w<K+1;w++){let $=Math.cos(q),U=Math.sin(q),V=Q+$*B,z=I+U*B;A.push(V,z),q+=Z}}var T6=()=>{};function B$(A,Q,I,B,E,C){let J=A[A.length-2],H=A[A.length-1]-I,Z=J-Q,q=E-I,w=B-Q,$=Math.abs(H*w-Z*q);if($<0.00000001||C===0){if(A[A.length-2]!==Q||A[A.length-1]!==I)A.push(Q,I);return}let U=H*H+Z*Z,V=q*q+w*w,z=H*q+Z*w,D=C*Math.sqrt(U)/$,W=C*Math.sqrt(V)/$,j=D*z/U,O=W*z/V,F=D*w+W*Z,L=D*q+W*H,R=Z*(W+j),_=H*(W+j),T=w*(D+O),f=q*(D+O),S=Math.atan2(_-L,R-F),g=Math.atan2(f-L,T-F);A8(A,F+Q,L+I,C,S,g,Z*q>w*H)}var E$=Y(()=>{T6()});function a3(A,Q){let I=Q===-1.5707963267948966?-0.551915024494:1.3333333333333333*Math.tan(Q/4),B=Q===1.5707963267948966?0.551915024494:I,E=Math.cos(A),C=Math.sin(A),J=Math.cos(A+Q),K=Math.sin(A+Q);return[{x:E-C*B,y:C+E*B},{x:J+K*B,y:K-J*B},{x:J,y:K}]}function C$(A,Q,I,B,E,C,J,K=0,H=0,Z=0){if(C===0||J===0)return;let q=Math.sin(K*h6/360),w=Math.cos(K*h6/360),$=w*(Q-B)/2+q*(I-E)/2,U=-q*(Q-B)/2+w*(I-E)/2;if($===0&&U===0)return;C=Math.abs(C),J=Math.abs(J);let V=Math.pow($,2)/Math.pow(C,2)+Math.pow(U,2)/Math.pow(J,2);if(V>1)C*=Math.sqrt(V),J*=Math.sqrt(V);r3(Q,I,B,E,C,J,H,Z,q,w,$,U,cD);let{ang1:z,ang2:D}=cD,{centerX:W,centerY:j}=cD,O=Math.abs(D)/(h6/4);if(Math.abs(1-O)<0.0000001)O=1;let F=Math.max(Math.ceil(O),1);D/=F;let L=A[A.length-2],R=A[A.length-1],_={x:0,y:0};for(let T=0;T<F;T++){let f=a3(z,D),{x:S,y:g}=dD(f[0],C,J,w,q,W,j,_),{x:d,y:a}=dD(f[1],C,J,w,q,W,j,_),{x:AA,y:CA}=dD(f[2],C,J,w,q,W,j,_);eK(A,L,R,S,g,d,a,AA,CA),L=AA,R=CA,z+=D}}var h6,cD,dD=({x:A,y:Q},I,B,E,C,J,K,H)=>{A*=I,Q*=B;let Z=E*A-C*Q,q=C*A+E*Q;return H.x=Z+J,H.y=q+K,H},YO=(A,Q,I,B)=>{let E=A*B-Q*I<0?-1:1,C=A*I+Q*B;if(C>1)C=1;if(C<-1)C=-1;return E*Math.acos(C)},r3=(A,Q,I,B,E,C,J,K,H,Z,q,w,$)=>{let U=Math.pow(E,2),V=Math.pow(C,2),z=Math.pow(q,2),D=Math.pow(w,2),W=U*V-U*D-V*z;if(W<0)W=0;W/=U*D+V*z,W=Math.sqrt(W)*(J===K?-1:1);let j=W*E/C*w,O=W*-C/E*q,F=Z*j-H*O+(A+I)/2,L=H*j+Z*O+(Q+B)/2,R=(q-j)/E,_=(w-O)/C,T=(-q-j)/E,f=(-w-O)/C,S=YO(1,0,R,_),g=YO(R,_,T,f);if(K===0&&g>0)g-=h6;if(K===1&&g<0)g+=h6;$.centerX=F,$.centerY=L,$.ang1=S,$.ang2=g};var J$=Y(()=>{v6();h6=Math.PI*2,cD={centerX:0,centerY:0,ang1:0,ang2:0}});function K$(A,Q,I){let B=(J,K)=>{let H=K.x-J.x,Z=K.y-J.y,q=Math.sqrt(H*H+Z*Z),w=H/q,$=Z/q;return{len:q,nx:w,ny:$}},E=(J,K)=>{if(J===0)A.moveTo(K.x,K.y);else A.lineTo(K.x,K.y)},C=Q[Q.length-1];for(let J=0;J<Q.length;J++){let K=Q[J%Q.length],H=K.radius??I;if(H<=0){E(J,K),C=K;continue}let Z=Q[(J+1)%Q.length],q=B(K,C),w=B(K,Z);if(q.len<0.0001||w.len<0.0001){E(J,K),C=K;continue}let $=Math.asin(q.nx*w.ny-q.ny*w.nx),U=1,V=!1;if(q.nx*w.nx-q.ny*-w.ny<0)if($<0)$=Math.PI+$;else $=Math.PI-$,U=-1,V=!0;else if($>0)U=-1,V=!0;let z=$/2,D,W=Math.abs(Math.cos(z)*H/Math.sin(z));if(W>Math.min(q.len/2,w.len/2))W=Math.min(q.len/2,w.len/2),D=Math.abs(W*Math.sin(z)/Math.cos(z));else D=H;let j=K.x+w.nx*W+-w.ny*D*U,O=K.y+w.ny*W+w.nx*D*U,F=Math.atan2(q.ny,q.nx)+Math.PI/2*U,L=Math.atan2(w.ny,w.nx)-Math.PI/2*U;if(J===0)A.moveTo(j+Math.cos(F)*D,O+Math.sin(F)*D);A.arc(j,O,D,F,L,V),C=K}}function H$(A,Q,I,B){let E=(K,H)=>Math.sqrt((K.x-H.x)**2+(K.y-H.y)**2),C=(K,H,Z)=>({x:K.x+(H.x-K.x)*Z,y:K.y+(H.y-K.y)*Z}),J=Q.length;for(let K=0;K<J;K++){let H=Q[(K+1)%J],Z=H.radius??I;if(Z<=0){if(K===0)A.moveTo(H.x,H.y);else A.lineTo(H.x,H.y);continue}let q=Q[K],w=Q[(K+2)%J],$=E(q,H),U;if($<0.0001)U=H;else{let D=Math.min($/2,Z);U=C(H,q,D/$)}let V=E(w,H),z;if(V<0.0001)z=H;else{let D=Math.min(V/2,Z);z=C(H,w,D/V)}if(K===0)A.moveTo(U.x,U.y);else A.lineTo(U.x,U.y);A.quadraticCurveTo(H.x,H.y,z.x,z.y,B)}}var Z$=()=>{};class x6{constructor(A){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new RA,this._graphicsPath2D=A,this.signed=A.checkForHoles}moveTo(A,Q){return this.startPoly(A,Q),this}lineTo(A,Q){this._ensurePoly();let I=this._currentPoly.points,B=I[I.length-2],E=I[I.length-1];if(B!==A||E!==Q)I.push(A,Q);return this}arc(A,Q,I,B,E,C){this._ensurePoly(!1);let J=this._currentPoly.points;return A8(J,A,Q,I,B,E,C),this}arcTo(A,Q,I,B,E){this._ensurePoly();let C=this._currentPoly.points;return B$(C,A,Q,I,B,E),this}arcToSvg(A,Q,I,B,E,C,J){let K=this._currentPoly.points;return C$(K,this._currentPoly.lastX,this._currentPoly.lastY,C,J,A,Q,I,B,E),this}bezierCurveTo(A,Q,I,B,E,C,J){this._ensurePoly();let K=this._currentPoly;return eK(this._currentPoly.points,K.lastX,K.lastY,A,Q,I,B,E,C,J),this}quadraticCurveTo(A,Q,I,B,E){this._ensurePoly();let C=this._currentPoly;return Q$(this._currentPoly.points,C.lastX,C.lastY,A,Q,I,B,E),this}closePath(){return this.endPoly(!0),this}addPath(A,Q){if(this.endPoly(),Q&&!Q.isIdentity())A=A.clone(!0),A.transform(Q);let I=this.shapePrimitives,B=I.length;for(let E=0;E<A.instructions.length;E++){let C=A.instructions[E];this[C.action](...C.data)}if(A.checkForHoles&&I.length-B>1){let E=null;for(let C=B;C<I.length;C++){let J=I[C];if(J.shape.type==="polygon"){let K=J.shape,H=E?.shape;if(H&&H.containsPolygon(K))E.holes||(E.holes=[]),E.holes.push(J),I.copyWithin(C,C+1),I.length--,C--;else E=J}}}return this}finish(A=!1){this.endPoly(A)}rect(A,Q,I,B,E){return this.drawShape(new EA(A,Q,I,B),E),this}circle(A,Q,I,B){return this.drawShape(new jJ(A,Q,I),B),this}poly(A,Q,I){let B=new rE(A);return B.closePath=Q,this.drawShape(B,I),this}regularPoly(A,Q,I,B,E=0,C){B=Math.max(B|0,3);let J=-1*Math.PI/2+E,K=Math.PI*2/B,H=[];for(let Z=0;Z<B;Z++){let q=J-Z*K;H.push(A+I*Math.cos(q),Q+I*Math.sin(q))}return this.poly(H,!0,C),this}roundPoly(A,Q,I,B,E,C=0,J){if(B=Math.max(B|0,3),E<=0)return this.regularPoly(A,Q,I,B,C);let K=I*Math.sin(Math.PI/B)-0.001;E=Math.min(E,K);let H=-1*Math.PI/2+C,Z=Math.PI*2/B,q=(B-2)*Math.PI/B/2;for(let w=0;w<B;w++){let $=w*Z+H,U=A+I*Math.cos($),V=Q+I*Math.sin($),z=$+Math.PI+q,D=$-Math.PI-q,W=U+E*Math.cos(z),j=V+E*Math.sin(z),O=U+E*Math.cos(D),F=V+E*Math.sin(D);if(w===0)this.moveTo(W,j);else this.lineTo(W,j);this.quadraticCurveTo(U,V,O,F,J)}return this.closePath()}roundShape(A,Q,I=!1,B){if(A.length<3)return this;if(I)H$(this,A,Q,B);else K$(this,A,Q);return this.closePath()}filletRect(A,Q,I,B,E){if(E===0)return this.rect(A,Q,I,B);let C=Math.min(I,B)/2,J=Math.min(C,Math.max(-C,E)),K=A+I,H=Q+B,Z=J<0?-J:0,q=Math.abs(J);return this.moveTo(A,Q+q).arcTo(A+Z,Q+Z,A+q,Q,q).lineTo(K-q,Q).arcTo(K-Z,Q+Z,K,Q+q,q).lineTo(K,H-q).arcTo(K-Z,H-Z,A+I-q,H,q).lineTo(A+q,H).arcTo(A+Z,H-Z,A,H-q,q).closePath()}chamferRect(A,Q,I,B,E,C){if(E<=0)return this.rect(A,Q,I,B);let J=Math.min(E,Math.min(I,B)/2),K=A+I,H=Q+B,Z=[A+J,Q,K-J,Q,K,Q+J,K,H-J,K-J,H,A+J,H,A,H-J,A,Q+J];for(let q=Z.length-1;q>=2;q-=2)if(Z[q]===Z[q-2]&&Z[q-1]===Z[q-3])Z.splice(q-1,2);return this.poly(Z,!0,C)}ellipse(A,Q,I,B,E){return this.drawShape(new LJ(A,Q,I,B),E),this}roundRect(A,Q,I,B,E,C){return this.drawShape(new RJ(A,Q,I,B,E),C),this}drawShape(A,Q){return this.endPoly(),this.shapePrimitives.push({shape:A,transform:Q}),this}startPoly(A,Q){let I=this._currentPoly;if(I)this.endPoly();return I=new rE,I.points.push(A,Q),this._currentPoly=I,this}endPoly(A=!1){let Q=this._currentPoly;if(Q&&Q.points.length>2)Q.closePath=A,this.shapePrimitives.push({shape:Q});return this._currentPoly=null,this}_ensurePoly(A=!0){if(this._currentPoly)return;if(this._currentPoly=new rE,A){let Q=this.shapePrimitives[this.shapePrimitives.length-1];if(Q){let I=Q.shape.x,B=Q.shape.y;if(Q.transform&&!Q.transform.isIdentity()){let E=Q.transform,C=I;I=E.a*I+E.c*B+E.tx,B=E.b*C+E.d*B+E.ty}this._currentPoly.points.push(I,B)}else this._currentPoly.points.push(0,0)}}buildPath(){let A=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let Q=0;Q<A.instructions.length;Q++){let I=A.instructions[Q];this[I.action](...I.data)}this.finish()}get bounds(){let A=this._bounds;A.clear();let Q=this.shapePrimitives;for(let I=0;I<Q.length;I++){let B=Q[I],E=B.shape.getBounds(t3);if(B.transform)A.addRect(E,B.transform);else A.addRect(E)}return A}}var t3;var q$=Y(()=>{z7();D7();W7();ZQ();k7();_Q();v6();I$();T6();E$();J$();Z$();t3=new EA});class VI{constructor(A,Q=!1){if(this.instructions=[],this.uid=VA("graphicsPath"),this._dirty=!0,this.checkForHoles=Q,typeof A==="string")aY(A,this);else this.instructions=A?.slice()??[]}get shapePath(){if(!this._shapePath)this._shapePath=new x6(this);if(this._dirty)this._dirty=!1,this._shapePath.buildPath();return this._shapePath}addPath(A,Q){return A=A.clone(),this.instructions.push({action:"addPath",data:[A,Q]}),this._dirty=!0,this}arc(...A){return this.instructions.push({action:"arc",data:A}),this._dirty=!0,this}arcTo(...A){return this.instructions.push({action:"arcTo",data:A}),this._dirty=!0,this}arcToSvg(...A){return this.instructions.push({action:"arcToSvg",data:A}),this._dirty=!0,this}bezierCurveTo(...A){return this.instructions.push({action:"bezierCurveTo",data:A}),this._dirty=!0,this}bezierCurveToShort(A,Q,I,B,E){let C=this.instructions[this.instructions.length-1],J=this.getLastPoint(UA.shared),K=0,H=0;if(!C||C.action!=="bezierCurveTo")K=J.x,H=J.y;else{K=C.data[2],H=C.data[3];let{x:Z,y:q}=J;K=Z+(Z-K),H=q+(q-H)}return this.instructions.push({action:"bezierCurveTo",data:[K,H,A,Q,I,B,E]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...A){return this.instructions.push({action:"ellipse",data:A}),this._dirty=!0,this}lineTo(...A){return this.instructions.push({action:"lineTo",data:A}),this._dirty=!0,this}moveTo(...A){return this.instructions.push({action:"moveTo",data:A}),this}quadraticCurveTo(...A){return this.instructions.push({action:"quadraticCurveTo",data:A}),this._dirty=!0,this}quadraticCurveToShort(A,Q,I){let B=this.instructions[this.instructions.length-1],E=this.getLastPoint(UA.shared),C=0,J=0;if(!B||B.action!=="quadraticCurveTo")C=E.x,J=E.y;else{C=B.data[0],J=B.data[1];let{x:K,y:H}=E;C=K+(K-C),J=H+(H-J)}return this.instructions.push({action:"quadraticCurveTo",data:[C,J,A,Q,I]}),this._dirty=!0,this}rect(A,Q,I,B,E){return this.instructions.push({action:"rect",data:[A,Q,I,B,E]}),this._dirty=!0,this}circle(A,Q,I,B){return this.instructions.push({action:"circle",data:[A,Q,I,B]}),this._dirty=!0,this}roundRect(...A){return this.instructions.push({action:"roundRect",data:A}),this._dirty=!0,this}poly(...A){return this.instructions.push({action:"poly",data:A}),this._dirty=!0,this}regularPoly(...A){return this.instructions.push({action:"regularPoly",data:A}),this._dirty=!0,this}roundPoly(...A){return this.instructions.push({action:"roundPoly",data:A}),this._dirty=!0,this}roundShape(...A){return this.instructions.push({action:"roundShape",data:A}),this._dirty=!0,this}filletRect(...A){return this.instructions.push({action:"filletRect",data:A}),this._dirty=!0,this}chamferRect(...A){return this.instructions.push({action:"chamferRect",data:A}),this._dirty=!0,this}star(A,Q,I,B,E,C,J){E||(E=B/2);let K=-1*Math.PI/2+C,H=I*2,Z=Math.PI*2/H,q=[];for(let w=0;w<H;w++){let $=w%2?E:B,U=w*Z+K;q.push(A+$*Math.cos(U),Q+$*Math.sin(U))}return this.poly(q,!0,J),this}clone(A=!1){let Q=new VI;if(Q.checkForHoles=this.checkForHoles,!A)Q.instructions=this.instructions.slice();else for(let I=0;I<this.instructions.length;I++){let B=this.instructions[I];Q.instructions.push({action:B.action,data:B.data.slice()})}return Q}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(A){if(A.isIdentity())return this;let{a:Q,b:I,c:B,d:E,tx:C,ty:J}=A,K=0,H=0,Z=0,q=0,w=0,$=0,U=0,V=0;for(let z=0;z<this.instructions.length;z++){let D=this.instructions[z],W=D.data;switch(D.action){case"moveTo":case"lineTo":K=W[0],H=W[1],W[0]=Q*K+B*H+C,W[1]=I*K+E*H+J;break;case"bezierCurveTo":Z=W[0],q=W[1],w=W[2],$=W[3],K=W[4],H=W[5],W[0]=Q*Z+B*q+C,W[1]=I*Z+E*q+J,W[2]=Q*w+B*$+C,W[3]=I*w+E*$+J,W[4]=Q*K+B*H+C,W[5]=I*K+E*H+J;break;case"quadraticCurveTo":Z=W[0],q=W[1],K=W[2],H=W[3],W[0]=Q*Z+B*q+C,W[1]=I*Z+E*q+J,W[2]=Q*K+B*H+C,W[3]=I*K+E*H+J;break;case"arcToSvg":K=W[5],H=W[6],U=W[0],V=W[1],W[0]=Q*U+B*V,W[1]=I*U+E*V,W[5]=Q*K+B*H+C,W[6]=I*K+E*H+J;break;case"circle":W[4]=m6(W[3],A);break;case"rect":W[4]=m6(W[4],A);break;case"ellipse":W[8]=m6(W[8],A);break;case"roundRect":W[5]=m6(W[5],A);break;case"addPath":W[0].transform(A);break;case"poly":W[2]=m6(W[2],A);break;default:n("unknown transform action",D.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(A){let Q=this.instructions.length-1,I=this.instructions[Q];if(!I)return A.x=0,A.y=0,A;while(I.action==="closePath"){if(Q--,Q<0)return A.x=0,A.y=0,A;I=this.instructions[Q]}switch(I.action){case"moveTo":case"lineTo":A.x=I.data[0],A.y=I.data[1];break;case"quadraticCurveTo":A.x=I.data[2],A.y=I.data[3];break;case"bezierCurveTo":A.x=I.data[4],A.y=I.data[5];break;case"arc":case"arcToSvg":A.x=I.data[5],A.y=I.data[6];break;case"addPath":I.data[0].getLastPoint(A);break}return A}}function m6(A,Q){if(A)return A.prepend(Q);return Q.clone()}var L0=Y(()=>{aQ();HQ();_A();rY();q$()});function tA(A,Q,I){let B=A.getAttribute(Q);return B?Number(B):I}var c6=()=>{};function w$(A,Q){let I=A.querySelectorAll("defs");for(let B=0;B<I.length;B++){let E=I[B];for(let C=0;C<E.children.length;C++){let J=E.children[C];switch(J.nodeName.toLowerCase()){case"lineargradient":Q.defs[J.id]=e3(J);break;case"radialgradient":Q.defs[J.id]=Ag(J);break;default:break}}}}function e3(A){let Q=tA(A,"x1",0),I=tA(A,"y1",0),B=tA(A,"x2",1),E=tA(A,"y2",0),C=A.getAttribute("gradientUnits")||"objectBoundingBox",J=new jQ(Q,I,B,E,C==="objectBoundingBox"?"local":"global");for(let K=0;K<A.children.length;K++){let H=A.children[K],Z=tA(H,"offset",0),q=JA.shared.setValue(H.getAttribute("stop-color")).toNumber();J.addColorStop(Z,q)}return J}function Ag(A){return n("[SVG Parser] Radial gradients are not yet supported"),new jQ(0,0,1,0)}var Y$=Y(()=>{IQ();_A();uB();c6()});function d6(A){let Q=A.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return Q?Q[1]:""}var $$=()=>{};function p6(A,Q){let I=A.getAttribute("style"),B={},E={},C={strokeStyle:B,fillStyle:E,useFill:!1,useStroke:!1};for(let J in U$){let K=A.getAttribute(J);if(K)$O(Q,C,J,K.trim())}if(I){let J=I.split(";");for(let K=0;K<J.length;K++){let H=J[K].trim(),[Z,q]=H.split(":");if(U$[Z])$O(Q,C,Z,q.trim())}}return{strokeStyle:C.useStroke?B:null,fillStyle:C.useFill?E:null,useFill:C.useFill,useStroke:C.useStroke}}function $O(A,Q,I,B){switch(I){case"stroke":if(B!=="none"){if(B.startsWith("url(")){let E=d6(B);Q.strokeStyle.fill=A.defs[E]}else Q.strokeStyle.color=JA.shared.setValue(B).toNumber();Q.useStroke=!0}break;case"stroke-width":Q.strokeStyle.width=Number(B);break;case"fill":if(B!=="none"){if(B.startsWith("url(")){let E=d6(B);Q.fillStyle.fill=A.defs[E]}else Q.fillStyle.color=JA.shared.setValue(B).toNumber();Q.useFill=!0}break;case"fill-opacity":Q.fillStyle.alpha=Number(B);break;case"stroke-opacity":Q.strokeStyle.alpha=Number(B);break;case"opacity":Q.fillStyle.alpha=Number(B),Q.strokeStyle.alpha=Number(B);break}}var U$;var V$=Y(()=>{IQ();$$();U$={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}}});function N$(A){if(A.length<=2)return!0;let Q=A.map((K)=>K.area).sort((K,H)=>H-K),[I,B]=Q,E=Q[Q.length-1],C=I/B,J=B/E;if(C>3&&J<2)return!1;return!0}var z$=()=>{};function D$(A){return A.split(/(?=[Mm])/).filter((B)=>B.trim().length>0)}function W$(A){let Q=A.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!Q||Q.length<4)return 0;let I=Q.map(Number),B=[],E=[];for(let q=0;q<I.length;q+=2)if(q+1<I.length)B.push(I[q]),E.push(I[q+1]);if(B.length===0||E.length===0)return 0;let C=Math.min(...B),J=Math.max(...B),K=Math.min(...E),H=Math.max(...E);return(J-C)*(H-K)}function u6(A,Q){let I=new VI(A,!1);for(let B of I.instructions)Q.instructions.push(B)}var X$=Y(()=>{L0()});function k$(A,Q){if(typeof A==="string"){let J=document.createElement("div");J.innerHTML=A.trim(),A=J.querySelector("svg")}let I={context:Q,defs:{},path:new VI};w$(A,I);let B=A.children,{fillStyle:E,strokeStyle:C}=p6(A,I);for(let J=0;J<B.length;J++){let K=B[J];if(K.nodeName.toLowerCase()==="defs")continue;UO(K,I,E,C)}return Q}function UO(A,Q,I,B){let E=A.children,{fillStyle:C,strokeStyle:J}=p6(A,Q);if(C&&I)I={...I,...C};else if(C)I=C;if(J&&B)B={...B,...J};else if(J)B=J;let K=!I&&!B;if(K)I={color:0};let H,Z,q,w,$,U,V,z,D,W,j,O,F,L,R,_,T;switch(A.nodeName.toLowerCase()){case"path":{L=A.getAttribute("d");let f=A.getAttribute("fill-rule"),S=D$(L),g=f==="evenodd",d=S.length>1;if(g&&d){let AA=S.map((y)=>({path:y,area:W$(y)}));if(AA.sort((y,m)=>m.area-y.area),S.length>3||!N$(AA))for(let y=0;y<AA.length;y++){let m=AA[y],t=y===0;Q.context.beginPath();let r=new VI(void 0,!0);if(u6(m.path,r),Q.context.path(r),t){if(I)Q.context.fill(I);if(B)Q.context.stroke(B)}else Q.context.cut()}else for(let y=0;y<AA.length;y++){let m=AA[y],t=y%2===1;Q.context.beginPath();let r=new VI(void 0,!0);if(u6(m.path,r),Q.context.path(r),t)Q.context.cut();else{if(I)Q.context.fill(I);if(B)Q.context.stroke(B)}}}else{if(R=new VI(L,f?f==="evenodd":!0),Q.context.path(R),I)Q.context.fill(I);if(B)Q.context.stroke(B)}break}case"circle":if(V=tA(A,"cx",0),z=tA(A,"cy",0),D=tA(A,"r",0),Q.context.ellipse(V,z,D,D),I)Q.context.fill(I);if(B)Q.context.stroke(B);break;case"rect":if(H=tA(A,"x",0),Z=tA(A,"y",0),_=tA(A,"width",0),T=tA(A,"height",0),W=tA(A,"rx",0),j=tA(A,"ry",0),W||j)Q.context.roundRect(H,Z,_,T,W||j);else Q.context.rect(H,Z,_,T);if(I)Q.context.fill(I);if(B)Q.context.stroke(B);break;case"ellipse":if(V=tA(A,"cx",0),z=tA(A,"cy",0),W=tA(A,"rx",0),j=tA(A,"ry",0),Q.context.beginPath(),Q.context.ellipse(V,z,W,j),I)Q.context.fill(I);if(B)Q.context.stroke(B);break;case"line":if(q=tA(A,"x1",0),w=tA(A,"y1",0),$=tA(A,"x2",0),U=tA(A,"y2",0),Q.context.beginPath(),Q.context.moveTo(q,w),Q.context.lineTo($,U),B)Q.context.stroke(B);break;case"polygon":if(F=A.getAttribute("points"),O=F.match(/-?\d+/g).map((f)=>parseInt(f,10)),Q.context.poly(O,!0),I)Q.context.fill(I);if(B)Q.context.stroke(B);break;case"polyline":if(F=A.getAttribute("points"),O=F.match(/-?\d+/g).map((f)=>parseInt(f,10)),Q.context.poly(O,!1),B)Q.context.stroke(B);break;case"g":case"svg":break;default:{n(`[SVG parser] <${A.nodeName}> elements unsupported`);break}}if(K)I=null;for(let f=0;f<E.length;f++)UO(E[f],Q,I,B)}var F$=Y(()=>{_A();L0();Y$();c6();V$();z$();X$()});function Qg(A){return JA.isColorLike(A)}function VO(A){return A instanceof AB}function NO(A){return A instanceof jQ}function Ig(A){return A instanceof v}function Bg(A,Q,I){let B=JA.shared.setValue(Q??0);return A.color=B.toNumber(),A.alpha=B.alpha===1?I.alpha:B.alpha,A.texture=v.WHITE,{...I,...A}}function Eg(A,Q,I){return A.texture=Q,{...I,...A}}function zO(A,Q,I){return A.fill=Q,A.color=16777215,A.texture=Q.texture,A.matrix=Q.transform,{...I,...A}}function DO(A,Q,I){return Q.buildGradient(),A.fill=Q,A.color=16777215,A.texture=Q.texture,A.matrix=Q.transform,A.textureSpace=Q.textureSpace,{...I,...A}}function Cg(A,Q){let I={...Q,...A},B=JA.shared.setValue(I.color);return I.alpha*=B.alpha,I.color=B.toNumber(),I}function XB(A,Q){if(A===void 0||A===null)return null;let I={},B=A;if(Qg(A))return Bg(I,A,Q);else if(Ig(A))return Eg(I,A,Q);else if(VO(A))return zO(I,A,Q);else if(NO(A))return DO(I,A,Q);else if(B.fill&&VO(B.fill))return zO(B,B.fill,Q);else if(B.fill&&NO(B.fill))return DO(B,B.fill,Q);return Cg(B,Q)}function OC(A,Q){let{width:I,alignment:B,miterLimit:E,cap:C,join:J,pixelLine:K,...H}=Q,Z=XB(A,H);if(!Z)return null;return{width:I,alignment:B,miterLimit:E,cap:C,join:J,pixelLine:K,...Z}}var l6=Y(()=>{IQ();FA();uB();G0()});var Jg,WO,pD,kQ;var GC=Y(()=>{yQ();IQ();NA();aQ();FA();HQ();gA();_Q();L0();F$();l6();Jg=new UA,WO=new x,pD=class A extends mA{constructor(){super(...arguments);this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=VA("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new VI,this._transform=new x,this._fillStyle={...A.defaultFillStyle},this._strokeStyle={...A.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new RA,this._boundsDirty=!0}clone(){let Q=new A;return Q.batchMode=this.batchMode,Q.instructions=this.instructions.slice(),Q._activePath=this._activePath.clone(),Q._transform=this._transform.clone(),Q._fillStyle={...this._fillStyle},Q._strokeStyle={...this._strokeStyle},Q._stateStack=this._stateStack.slice(),Q._bounds=this._bounds.clone(),Q._boundsDirty=!0,Q}get fillStyle(){return this._fillStyle}set fillStyle(Q){this._fillStyle=XB(Q,A.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(Q){this._strokeStyle=OC(Q,A.defaultStrokeStyle)}setFillStyle(Q){return this._fillStyle=XB(Q,A.defaultFillStyle),this}setStrokeStyle(Q){return this._strokeStyle=XB(Q,A.defaultStrokeStyle),this}texture(Q,I,B,E,C,J){return this.instructions.push({action:"texture",data:{image:Q,dx:B||0,dy:E||0,dw:C||Q.frame.width,dh:J||Q.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:I||I===0?JA.shared.setValue(I).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new VI,this}fill(Q,I){let B,E=this.instructions[this.instructions.length-1];if(this._tick===0&&E?.action==="stroke")B=E.data.path;else B=this._activePath.clone();if(!B)return this;if(Q!=null){if(I!==void 0&&typeof Q==="number")c(BA,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),Q={color:Q,alpha:I};this._fillStyle=XB(Q,A.defaultFillStyle)}return this.instructions.push({action:"fill",data:{style:this.fillStyle,path:B}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this}_initNextPathLocation(){let{x:Q,y:I}=this._activePath.getLastPoint(UA.shared);this._activePath.clear(),this._activePath.moveTo(Q,I)}stroke(Q){let I,B=this.instructions[this.instructions.length-1];if(this._tick===0&&B?.action==="fill")I=B.data.path;else I=this._activePath.clone();if(!I)return this;if(Q!=null)this._strokeStyle=OC(Q,A.defaultStrokeStyle);return this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:I}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this}cut(){for(let Q=0;Q<2;Q++){let I=this.instructions[this.instructions.length-1-Q],B=this._activePath.clone();if(I){if(I.action==="stroke"||I.action==="fill")if(I.data.hole)I.data.hole.addPath(B);else{I.data.hole=B;break}}}return this._initNextPathLocation(),this}arc(Q,I,B,E,C,J){this._tick++;let K=this._transform;return this._activePath.arc(K.a*Q+K.c*I+K.tx,K.b*Q+K.d*I+K.ty,B,E,C,J),this}arcTo(Q,I,B,E,C){this._tick++;let J=this._transform;return this._activePath.arcTo(J.a*Q+J.c*I+J.tx,J.b*Q+J.d*I+J.ty,J.a*B+J.c*E+J.tx,J.b*B+J.d*E+J.ty,C),this}arcToSvg(Q,I,B,E,C,J,K){this._tick++;let H=this._transform;return this._activePath.arcToSvg(Q,I,B,E,C,H.a*J+H.c*K+H.tx,H.b*J+H.d*K+H.ty),this}bezierCurveTo(Q,I,B,E,C,J,K){this._tick++;let H=this._transform;return this._activePath.bezierCurveTo(H.a*Q+H.c*I+H.tx,H.b*Q+H.d*I+H.ty,H.a*B+H.c*E+H.tx,H.b*B+H.d*E+H.ty,H.a*C+H.c*J+H.tx,H.b*C+H.d*J+H.ty,K),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(Q,I,B,E){return this._tick++,this._activePath.ellipse(Q,I,B,E,this._transform.clone()),this}circle(Q,I,B){return this._tick++,this._activePath.circle(Q,I,B,this._transform.clone()),this}path(Q){return this._tick++,this._activePath.addPath(Q,this._transform.clone()),this}lineTo(Q,I){this._tick++;let B=this._transform;return this._activePath.lineTo(B.a*Q+B.c*I+B.tx,B.b*Q+B.d*I+B.ty),this}moveTo(Q,I){this._tick++;let B=this._transform,E=this._activePath.instructions,C=B.a*Q+B.c*I+B.tx,J=B.b*Q+B.d*I+B.ty;if(E.length===1&&E[0].action==="moveTo")return E[0].data[0]=C,E[0].data[1]=J,this;return this._activePath.moveTo(C,J),this}quadraticCurveTo(Q,I,B,E,C){this._tick++;let J=this._transform;return this._activePath.quadraticCurveTo(J.a*Q+J.c*I+J.tx,J.b*Q+J.d*I+J.ty,J.a*B+J.c*E+J.tx,J.b*B+J.d*E+J.ty,C),this}rect(Q,I,B,E){return this._tick++,this._activePath.rect(Q,I,B,E,this._transform.clone()),this}roundRect(Q,I,B,E,C){return this._tick++,this._activePath.roundRect(Q,I,B,E,C,this._transform.clone()),this}poly(Q,I){return this._tick++,this._activePath.poly(Q,I,this._transform.clone()),this}regularPoly(Q,I,B,E,C=0,J){return this._tick++,this._activePath.regularPoly(Q,I,B,E,C,J),this}roundPoly(Q,I,B,E,C,J){return this._tick++,this._activePath.roundPoly(Q,I,B,E,C,J),this}roundShape(Q,I,B,E){return this._tick++,this._activePath.roundShape(Q,I,B,E),this}filletRect(Q,I,B,E,C){return this._tick++,this._activePath.filletRect(Q,I,B,E,C),this}chamferRect(Q,I,B,E,C,J){return this._tick++,this._activePath.chamferRect(Q,I,B,E,C,J),this}star(Q,I,B,E,C=0,J=0){return this._tick++,this._activePath.star(Q,I,B,E,C,J,this._transform.clone()),this}svg(Q){return this._tick++,k$(Q,this),this}restore(){let Q=this._stateStack.pop();if(Q)this._transform=Q.transform,this._fillStyle=Q.fillStyle,this._strokeStyle=Q.strokeStyle;return this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(Q){return this._transform.rotate(Q),this}scale(Q,I=Q){return this._transform.scale(Q,I),this}setTransform(Q,I,B,E,C,J){if(Q instanceof x)return this._transform.set(Q.a,Q.b,Q.c,Q.d,Q.tx,Q.ty),this;return this._transform.set(Q,I,B,E,C,J),this}transform(Q,I,B,E,C,J){if(Q instanceof x)return this._transform.append(Q),this;return WO.set(Q,I,B,E,C,J),this._transform.append(WO),this}translate(Q,I=Q){return this._transform.translate(Q,I),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){if(this._boundsDirty=!0,this.dirty)return;this.emit("update",this,16),this.dirty=!0}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;let Q=this._bounds;Q.clear();for(let I=0;I<this.instructions.length;I++){let B=this.instructions[I],E=B.action;if(E==="fill"){let C=B.data;Q.addBounds(C.path.bounds)}else if(E==="texture"){let C=B.data;Q.addFrame(C.dx,C.dy,C.dx+C.dw,C.dy+C.dh,C.transform)}if(E==="stroke"){let C=B.data,J=C.style.alignment,K=C.style.width*(1-J),H=C.path.bounds;Q.addFrame(H.minX-K,H.minY-K,H.maxX+K,H.maxY+K)}}return Q}containsPoint(Q){if(!this.bounds.containsPoint(Q.x,Q.y))return!1;let I=this.instructions,B=!1;for(let E=0;E<I.length;E++){let C=I[E],J=C.data,K=J.path;if(!C.action||!K)continue;let H=J.style,Z=K.shapePath.shapePrimitives;for(let q=0;q<Z.length;q++){let w=Z[q].shape;if(!H||!w)continue;let $=Z[q].transform,U=$?$.applyInverse(Q,Jg):Q;if(C.action==="fill")B=w.contains(U.x,U.y);else{let z=H;B=w.strokeContains(U.x,U.y,z.width,z.alignment)}let V=J.hole;if(V){let z=V.shapePath?.shapePrimitives;if(z){for(let D=0;D<z.length;D++)if(z[D].shape.contains(U.x,U.y))B=!1}}if(B)return!0}}return B}unload(){this.emit("unload",this);for(let Q in this._gpuData)this._gpuData[Q]?.destroy();this._gpuData=Object.create(null)}destroy(Q=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof Q==="boolean"?Q:Q?.texture){let B=typeof Q==="boolean"?Q:Q?.textureSource;if(this._fillStyle.texture)this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(B);if(this._strokeStyle.texture)this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(B)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};pD.defaultFillStyle={color:16777215,alpha:1,texture:v.WHITE,matrix:null,fill:null,textureSpace:"local"};pD.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:0.5,miterLimit:10,cap:"butt",join:"miter",texture:v.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};kQ=pD});class XO{constructor(){this.isBatchable=!1}reset(){if(this.isBatchable=!1,this.context=null,this.graphicsData)this.graphicsData.destroy(),this.graphicsData=null}destroy(){this.reset()}}class kO{constructor(){this.instructions=new $E}init(){this.instructions.reset()}destroy(){this.instructions.destroy(),this.instructions=null}}var uD=class A{constructor(Q){this._renderer=Q,this._managedContexts=new vA({renderer:Q,type:"resource",name:"graphicsContext"})}init(Q){A.defaultOptions.bezierSmoothness=Q?.bezierSmoothness??A.defaultOptions.bezierSmoothness}getContextRenderData(Q){return this.getGpuContext(Q).graphicsData||this._initContextRenderData(Q)}updateGpuContext(Q){let I=Q._gpuData,B=!!I[this._renderer.uid],E=I[this._renderer.uid]||this._initContext(Q);if(Q.dirty||!B){if(B)E.reset();E.isBatchable=!1,Q.dirty=!1}return E}getGpuContext(Q){return Q._gpuData[this._renderer.uid]||this._initContext(Q)}_initContextRenderData(Q){let I=new kO,B=this.getGpuContext(Q);return B.graphicsData=I,I.init(),I}_initContext(Q){let I=new XO;return I.context=Q,Q._gpuData[this._renderer.uid]=I,this._managedContexts.add(Q),I}destroy(){this._managedContexts.destroy(),this._renderer=null}},O$;var G$=Y(()=>{M();HJ();xQ();uD.extension={type:[N.CanvasSystem],name:"graphicsContext"};uD.defaultOptions={bezierSmoothness:0.5};O$=uD});class Q8{constructor(A,Q){this.state=oA.for2d(),this.renderer=A,this._adaptor=Q,this.renderer.runners.contextChange.add(this),this._managedGraphics=new vA({renderer:A,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(A){return!1}addRenderable(A,Q){this._managedGraphics.add(A),this.renderer.renderPipes.batch.break(Q),Q.add(A)}updateRenderable(A){}execute(A){if(!A.isRenderable)return;this._adaptor.execute(this,A)}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null}}var j$=Y(()=>{M();$I();xQ();Q8.extension={type:[N.CanvasPipes],name:"graphics"}});class L${constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach((A)=>{yA.return(A)}),this.batches.length=0}}class I8{constructor(A,Q){this.state=oA.for2d(),this.renderer=A,this._adaptor=Q,this.renderer.runners.contextChange.add(this),this._managedGraphics=new vA({renderer:A,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(A){let Q=A.context,I=!!A._gpuData,E=this.renderer.graphicsContext.updateGpuContext(Q);if(E.isBatchable||I!==E.isBatchable)return!0;return!1}addRenderable(A,Q){let B=this.renderer.graphicsContext.updateGpuContext(A.context);if(A.didViewUpdate)this._rebuild(A);if(B.isBatchable)this._addToBatcher(A,Q);else this.renderer.renderPipes.batch.break(Q),Q.add(A)}updateRenderable(A){let I=this._getGpuDataForRenderable(A).batches;for(let B=0;B<I.length;B++){let E=I[B];E._batcher.updateElement(E)}}execute(A){if(!A.isRenderable)return;let Q=this.renderer,I=A.context;if(!Q.graphicsContext.getGpuContext(I).batches.length)return;let E=I.customShader||this._adaptor.shader;this.state.blendMode=A.groupBlendMode;let C=E.resources.localUniforms.uniforms;C.uTransformMatrix=A.groupTransform,C.uRound=Q._roundPixels|A._roundPixels,tI(A.groupColorAlpha,C.uColor,0),this._adaptor.execute(this,A)}_rebuild(A){let Q=this._getGpuDataForRenderable(A),B=this.renderer.graphicsContext.updateGpuContext(A.context);if(Q.destroy(),B.isBatchable)this._updateBatchesForRenderable(A,Q)}_addToBatcher(A,Q){let I=this.renderer.renderPipes.batch,B=this._getGpuDataForRenderable(A).batches;for(let E=0;E<B.length;E++){let C=B[E];I.addToBatch(C,Q)}}_getGpuDataForRenderable(A){return A._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(A)}_initGpuDataForRenderable(A){let Q=new L$;return A._gpuData[this.renderer.uid]=Q,this._managedGraphics.add(A),Q}_updateBatchesForRenderable(A,Q){let I=A.context,E=this.renderer.graphicsContext.getGpuContext(I),C=this.renderer._roundPixels|A._roundPixels;Q.batches=E.batches.map((J)=>{let K=yA.get(XC);return J.copyTo(K),K.renderable=A,K.roundPixels=C,K})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}var R$=Y(()=>{M();$I();xQ();dI();zC();b6();I8.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"graphics"}});var FO=Y(()=>{M();G$();j$();rK();R$();p.add(Q8);p.add(I8);p.add(O$);p.add(FC)});var UQ;var B8=Y(()=>{gA();uI();GC();FO();UQ=class UQ extends wQ{constructor(A){if(A instanceof kQ)A={context:A};let{context:Q,roundPixels:I,...B}=A||{};super({label:"Graphics",...B});if(this.renderPipeId="graphics",!Q)this.context=this._ownedContext=new kQ,this.context.autoGarbageCollect=this.autoGarbageCollect;else this.context=Q;this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=I??!1}set context(A){if(A===this._context)return;if(this._context)this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this);this._context=A,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate()}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(A){return this._context.containsPoint(A)}destroy(A){if(this._ownedContext&&!A)this._ownedContext.destroy(A);else if(A===!0||A?.context===!0)this._context.destroy(A);this._ownedContext=null,this._context=null,super.destroy(A)}_onTouch(A){this._gcLastUsed=A,this._context._gcLastUsed=A}_callContextMethod(A,Q){return this.context[A](...Q),this}setFillStyle(...A){return this._callContextMethod("setFillStyle",A)}setStrokeStyle(...A){return this._callContextMethod("setStrokeStyle",A)}fill(...A){return this._callContextMethod("fill",A)}stroke(...A){return this._callContextMethod("stroke",A)}texture(...A){return this._callContextMethod("texture",A)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...A){return this._callContextMethod("arc",A)}arcTo(...A){return this._callContextMethod("arcTo",A)}arcToSvg(...A){return this._callContextMethod("arcToSvg",A)}bezierCurveTo(...A){return this._callContextMethod("bezierCurveTo",A)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...A){return this._callContextMethod("ellipse",A)}circle(...A){return this._callContextMethod("circle",A)}path(...A){return this._callContextMethod("path",A)}lineTo(...A){return this._callContextMethod("lineTo",A)}moveTo(...A){return this._callContextMethod("moveTo",A)}quadraticCurveTo(...A){return this._callContextMethod("quadraticCurveTo",A)}rect(...A){return this._callContextMethod("rect",A)}roundRect(...A){return this._callContextMethod("roundRect",A)}poly(...A){return this._callContextMethod("poly",A)}regularPoly(...A){return this._callContextMethod("regularPoly",A)}roundPoly(...A){return this._callContextMethod("roundPoly",A)}roundShape(...A){return this._callContextMethod("roundShape",A)}filletRect(...A){return this._callContextMethod("filletRect",A)}chamferRect(...A){return this._callContextMethod("chamferRect",A)}star(...A){return this._callContextMethod("star",A)}svg(...A){return this._callContextMethod("svg",A)}restore(...A){return this._callContextMethod("restore",A)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...A){return this._callContextMethod("rotate",A)}scaleTransform(...A){return this._callContextMethod("scale",A)}setTransform(...A){return this._callContextMethod("setTransform",A)}transform(...A){return this._callContextMethod("transform",A)}translateTransform(...A){return this._callContextMethod("translate",A)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(A){this._context.fillStyle=A}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(A){this._context.strokeStyle=A}clone(A=!1){if(A)return new UQ(this._context.clone());return this._ownedContext=null,new UQ(this._context)}lineStyle(A,Q,I){c(BA,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let B={};return A&&(B.width=A),Q&&(B.color=Q),I&&(B.alpha=I),this.context.strokeStyle=B,this}beginFill(A,Q){c(BA,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let I={};if(A!==void 0)I.color=A;if(Q!==void 0)I.alpha=Q;return this.context.fillStyle=I,this}endFill(){c(BA,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let A=this.context.strokeStyle;if(A.width!==kQ.defaultStrokeStyle.width||A.color!==kQ.defaultStrokeStyle.color||A.alpha!==kQ.defaultStrokeStyle.alpha)this.context.stroke();return this}drawCircle(...A){return c(BA,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",A)}drawEllipse(...A){return c(BA,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",A)}drawPolygon(...A){return c(BA,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",A)}drawRect(...A){return c(BA,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",A)}drawRoundedRect(...A){return c(BA,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",A)}drawStar(...A){return c(BA,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",A)}}});function Kg(A,Q,I,B,E,C){C=Math.max(0,Math.min(C,Math.min(B,E)/2)),A.moveTo(Q+C,I),A.lineTo(Q+B-C,I),A.quadraticCurveTo(Q+B,I,Q+B,I+C),A.lineTo(Q+B,I+E-C),A.quadraticCurveTo(Q+B,I+E,Q+B-C,I+E),A.lineTo(Q+C,I+E),A.quadraticCurveTo(Q,I+E,Q,I+E-C),A.lineTo(Q,I+C),A.quadraticCurveTo(Q,I,Q+C,I)}function OO(A,Q){switch(Q.type){case"rectangle":{let I=Q;A.rect(I.x,I.y,I.width,I.height);break}case"roundedRectangle":{let I=Q;Kg(A,I.x,I.y,I.width,I.height,I.radius);break}case"circle":{let I=Q;A.moveTo(I.x+I.radius,I.y),A.arc(I.x,I.y,I.radius,0,Math.PI*2);break}case"ellipse":{let I=Q;if(A.ellipse)A.moveTo(I.x+I.halfWidth,I.y),A.ellipse(I.x,I.y,I.halfWidth,I.halfHeight,0,0,Math.PI*2);else A.save(),A.translate(I.x,I.y),A.scale(I.halfWidth,I.halfHeight),A.moveTo(1,0),A.arc(0,0,1,0,Math.PI*2),A.restore();break}case"triangle":{let I=Q;A.moveTo(I.x,I.y),A.lineTo(I.x2,I.y2),A.lineTo(I.x3,I.y3),A.closePath();break}case"polygon":default:{let I=Q,B=I.points;if(!B?.length)break;A.moveTo(B[0],B[1]);for(let E=2;E<B.length;E+=2)A.lineTo(B[E],B[E+1]);if(I.closePath)A.closePath();break}}}function Hg(A,Q){if(!Q?.length)return!1;for(let I=0;I<Q.length;I++){let B=Q[I];if(!B?.shape)continue;let E=B.transform,C=E&&!E.isIdentity();if(C)A.save(),A.transform(E.a,E.b,E.c,E.d,E.tx,E.ty);if(OO(A,B.shape),C)A.restore()}return!0}class E8{constructor(A){this._warnedMaskTypes=new Set,this._canvasMaskStack=[],this._renderer=A}push(A,Q,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1})}pop(A,Q,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"stencilMask",action:"popMaskEnd",mask:A,inverse:Q._maskOptions.inverse,canBundle:!1})}execute(A){if(A.action!=="pushMaskBegin"&&A.action!=="popMaskEnd")return;let Q=this._renderer,I=Q.canvasContext,B=I?.activeContext;if(!B)return;if(A.action==="popMaskEnd"){if(this._canvasMaskStack.pop())B.restore();return}if(A.inverse)this._warnOnce("inverse","CanvasRenderer: inverse masks are not supported on Canvas2D; ignoring inverse flag.");let E=A.mask.mask;if(!(E instanceof UQ)){this._warnOnce("nonGraphics","CanvasRenderer: only Graphics masks are supported in Canvas2D; skipping mask."),this._canvasMaskStack.push(!1);return}let C=E,J=C.context?.instructions;if(!J?.length){this._canvasMaskStack.push(!1);return}B.save(),I.setContextTransform(C.groupTransform,(Q._roundPixels|C._roundPixels)===1),B.beginPath();let K=!1,H=!1;for(let Z=0;Z<J.length;Z++){let q=J[Z],w=q.action;if(w!=="fill"&&w!=="stroke")continue;let U=q.data?.path?.shapePath;if(!U?.shapePrimitives?.length)continue;let V=U.shapePrimitives;for(let z=0;z<V.length;z++){let D=V[z];if(!D?.shape)continue;let W=D.transform,j=W&&!W.isIdentity();if(j)B.save(),B.transform(W.a,W.b,W.c,W.d,W.tx,W.ty);if(OO(B,D.shape),H=Hg(B,D.holes)||H,K=!0,j)B.restore()}}if(!K){B.restore(),this._canvasMaskStack.push(!1);return}if(H)B.clip("evenodd");else B.clip();this._canvasMaskStack.push(!0)}destroy(){this._renderer=null,this._warnedMaskTypes=null,this._canvasMaskStack=null}_warnOnce(A,Q){if(this._warnedMaskTypes.has(A))return;this._warnedMaskTypes.add(A),n(Q)}}var P$=Y(()=>{M();B8();_A();E8.extension={type:[N.CanvasPipes],name:"stencilMask"}});function M$(){let A=dK(),Q=Object.create(null);return Q.inherit=sA,Q.none=sA,Q.normal="source-over",Q.add="lighter",Q.multiply=A?"multiply":sA,Q.screen=A?"screen":sA,Q.overlay=A?"overlay":sA,Q.darken=A?"darken":sA,Q.lighten=A?"lighten":sA,Q["color-dodge"]=A?"color-dodge":sA,Q["color-burn"]=A?"color-burn":sA,Q["hard-light"]=A?"hard-light":sA,Q["soft-light"]=A?"soft-light":sA,Q.difference=A?"difference":sA,Q.exclusion=A?"exclusion":sA,Q.saturation=A?"saturation":sA,Q.color=A?"color":sA,Q.luminosity=A?"luminosity":sA,Q["linear-burn"]=A?"color-burn":sA,Q["linear-dodge"]=A?"color-dodge":sA,Q["linear-light"]=A?"hard-light":sA,Q["pin-light"]=A?"hard-light":sA,Q["vivid-light"]=A?"hard-light":sA,Q["hard-mix"]=sA,Q.negation=A?"difference":sA,Q["normal-npm"]=Q.normal,Q["add-npm"]=Q.add,Q["screen-npm"]=Q.screen,Q.erase="destination-out",Q.subtract=sA,Q.divide=sA,Q.min=sA,Q.max=sA,Q}var sA="source-over";var g$=Y(()=>{j6()});class C8{constructor(A){this.activeResolution=1,this.smoothProperty="imageSmoothingEnabled",this.blendModes=M$(),this._activeBlendMode="normal",this._projTransform=null,this._outerBlend=!1,this._warnedBlendModes=new Set,this._renderer=A}resolutionChange(A){this.activeResolution=A}init(){let A=this._renderer.background.alpha<1;if(this.rootContext=this._renderer.canvas.getContext("2d",{alpha:A}),this.activeContext=this.rootContext,this.activeResolution=this._renderer.resolution,!this.rootContext.imageSmoothingEnabled){let Q=this.rootContext;if(Q.webkitImageSmoothingEnabled)this.smoothProperty="webkitImageSmoothingEnabled";else if(Q.mozImageSmoothingEnabled)this.smoothProperty="mozImageSmoothingEnabled";else if(Q.oImageSmoothingEnabled)this.smoothProperty="oImageSmoothingEnabled";else if(Q.msImageSmoothingEnabled)this.smoothProperty="msImageSmoothingEnabled"}}setContextTransform(A,Q,I,B){let E=B?x.IDENTITY:this._renderer.globalUniforms.globalUniformData?.worldTransformMatrix||x.IDENTITY,C=Zg;C.copyFrom(E),C.append(A);let J=this._projTransform,K=this.activeResolution;if(I=I||K,J){let H=x.shared;H.copyFrom(C),H.prepend(J),C=H}if(Q)this.activeContext.setTransform(C.a*I,C.b*I,C.c*I,C.d*I,C.tx*K|0,C.ty*K|0);else this.activeContext.setTransform(C.a*I,C.b*I,C.c*I,C.d*I,C.tx*K,C.ty*K)}clear(A,Q){let I=this.activeContext,B=this._renderer;if(I.clearRect(0,0,B.width,B.height),A){let E=JA.shared.setValue(A);I.globalAlpha=Q??E.alpha,I.fillStyle=E.toHex(),I.fillRect(0,0,B.width,B.height),I.globalAlpha=1}}setBlendMode(A){if(this._activeBlendMode===A)return;this._activeBlendMode=A,this._outerBlend=!1;let Q=this.blendModes[A];if(!Q){if(!this._warnedBlendModes.has(A))console.warn(`CanvasRenderer: blend mode "${A}" is not supported in Canvas2D; falling back to "source-over".`),this._warnedBlendModes.add(A);this.activeContext.globalCompositeOperation="source-over";return}this.activeContext.globalCompositeOperation=Q}destroy(){this.rootContext=null,this.activeContext=null,this._warnedBlendModes.clear()}}var Zg;var _$=Y(()=>{IQ();M();NA();g$();Zg=new x;C8.extension={type:[N.CanvasSystem],name:"canvasContext"}});class J8{constructor(){this.maxTextures=16,this.maxBatchableTextures=16,this.maxUniformBindings=0}init(){}}var S$=Y(()=>{M();J8.extension={type:[N.CanvasSystem],name:"limits"}});class i6{init(A,Q){this._renderer=A,this._renderTargetSystem=Q}initGpuRenderTarget(A){let Q=A.colorTexture,{canvas:I,context:B}=this._ensureCanvas(Q);return{canvas:I,context:B,width:I.width,height:I.height}}resizeGpuRenderTarget(A){let Q=A.colorTexture,{canvas:I}=this._ensureCanvas(Q);I.width=A.pixelWidth,I.height=A.pixelHeight}startRenderPass(A,Q,I,B){let E=this._renderTargetSystem.getGpuRenderTarget(A);if(this._renderer.canvasContext.activeContext=E.context,this._renderer.canvasContext.activeResolution=A.resolution,Q)this.clear(A,Q,I,B)}clear(A,Q,I,B){let C=this._renderTargetSystem.getGpuRenderTarget(A).context,J=B||{x:0,y:0,width:A.pixelWidth,height:A.pixelHeight};if(C.setTransform(1,0,0,1,0,0),C.clearRect(J.x,J.y,J.width,J.height),I){let K=JA.shared.setValue(I);if(K.alpha>0)C.globalAlpha=K.alpha,C.fillStyle=K.toHex(),C.fillRect(J.x,J.y,J.width,J.height),C.globalAlpha=1}}finishRenderPass(){}copyToTexture(A,Q,I,B,E){let J=this._renderTargetSystem.getGpuRenderTarget(A).canvas,K=Q.source,{context:H}=this._ensureCanvas(K),Z=E?.x??0,q=E?.y??0;return H.drawImage(J,I.x,I.y,B.width,B.height,Z,q,B.width,B.height),K.update(),Q}destroyGpuRenderTarget(A){}_ensureCanvas(A){let Q=A.resource;if(!Q||!GQ.test(Q))Q=u.get().createCanvas(A.pixelWidth,A.pixelHeight),A.resource=Q;if(Q.width!==A.pixelWidth||Q.height!==A.pixelHeight)Q.width=A.pixelWidth,Q.height=A.pixelHeight;let I=Q.getContext("2d");return{canvas:Q,context:I}}}var b$=Y(()=>{IQ();jA();yB()});var K8;var f$=Y(()=>{M();UK();b$();K8=class K8 extends LE{constructor(A){super(A);this.adaptor=new i6,this.adaptor.init(A,this)}};K8.extension={type:[N.CanvasSystem],name:"renderTarget"}});class H8{constructor(A){}init(){}initSource(A){}generateCanvas(A){let Q=u.get().createCanvas(),I=Q.getContext("2d"),B=qA.getCanvasSource(A);if(!B)return Q;let E=A.frame,C=A.source._resolution??A.source.resolution??1,J=E.x*C,K=E.y*C,H=E.width*C,Z=E.height*C;return Q.width=Math.ceil(H),Q.height=Math.ceil(Z),I.drawImage(B,J,K,H,Z,0,0,H,Z),Q}getPixels(A){let Q=this.generateCanvas(A);return{pixels:Q.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,Q.width,Q.height).data,width:Q.width,height:Q.height}}destroy(){}}var y$=Y(()=>{jA();M();pB();H8.extension={type:[N.CanvasSystem],name:"texture"}});var RO={};jH(RO,{CanvasRenderer:()=>v$});var qg,wg,Yg,GO,jO,LO,v$;var T$=Y(()=>{M();OZ();jZ();iY();PZ();oY();mZ();pZ();sY();P$();lZ();QC();AK();nQ();_$();S$();f$();y$();qg=[...DC,C8,J8,H8,K8],wg=[NC,V0,YC,wC,VC,E8,aK,qC],Yg=[nY,sK],GO=[],jO=[],LO=[];p.handleByNamedList(N.CanvasSystem,GO);p.handleByNamedList(N.CanvasPipes,jO);p.handleByNamedList(N.CanvasPipesAdaptor,LO);p.add(...qg,...wg,...Yg);v$=class v$ extends nI{constructor(){let A={name:"canvas",type:cA.CANVAS,systems:GO,renderPipes:jO,renderPipeAdaptors:LO};super(A)}}});async function h$(A){let Q=[];if(A.preference)Q.push(A.preference),PO.forEach((C)=>{if(C!==A.preference)Q.push(C)});else Q=PO.slice();let I,B={};for(let C=0;C<Q.length;C++){let J=Q[C];if(J==="webgpu"&&await mB()){let{WebGPURenderer:K}=await Promise.resolve().then(() => (Ew(),lF));I=K,B={...A,...A.webgpu};break}else if(J==="webgl"&&xB(A.failIfMajorPerformanceCaveat??nI.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:K}=await Promise.resolve().then(() => (MY(),AO));I=K,B={...A,...A.webgl};break}else if(J==="canvas"){let{CanvasRenderer:K}=await Promise.resolve().then(() => (T$(),RO));I=K,B={...A,...A.canvasOptions};break}}if(delete B.webgpu,delete B.webgl,delete B.canvasOptions,!I)throw new Error("No available renderer for the current environment");let E=new I;return await E.init(B),E}var PO;var x$=Y(()=>{C0();J0();QC();PO=["webgl","webgpu","canvas"]});class Z8{static init(A){Object.defineProperty(this,"resizeTo",{configurable:!0,set(Q){if(globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=Q,Q)globalThis.addEventListener("resize",this.queueResize),this.resize()},get(){return this._resizeTo}}),this.queueResize=()=>{if(!this._resizeTo)return;this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize())},this._cancelResize=()=>{if(this._resizeId)cancelAnimationFrame(this._resizeId),this._resizeId=null},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let Q,I;if(this._resizeTo===globalThis.window)Q=globalThis.innerWidth,I=globalThis.innerHeight;else{let{clientWidth:B,clientHeight:E}=this._resizeTo;Q=B,I=E}this.renderer.resize(Q,I),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=A.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}var m$=Y(()=>{M();Z8.extension=N.Application});class q8{static init(A){if(A=Object.assign({autoStart:!0,sharedTicker:!1},A),Object.defineProperty(this,"ticker",{configurable:!0,set(Q){if(this._ticker)this._ticker.remove(this.render,this);if(this._ticker=Q,Q)Q.add(this.render,this,SQ.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=A.sharedTicker?SA.shared:new SA,A.autoStart)this.start()}static destroy(){if(this._ticker){let A=this._ticker;this.ticker=null,A.destroy()}}}var c$=Y(()=>{M();gB();wB();q8.extension=N.Application});var MO=Y(()=>{M();m$();c$();p.add(Z8);p.add(q8)});var gO=class A{constructor(...Q){if(this.stage=new QA,Q[0]!==void 0)c(BA,"Application constructor options are deprecated, please use Application.init() instead.")}async init(Q){Q={...Q},this.stage||(this.stage=new QA),this.renderer=await h$(Q),A._plugins.forEach((I)=>{I.init.call(this,Q)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return c(BA,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(Q=!1,I=!1){let B=A._plugins.slice(0);B.reverse(),B.forEach((E)=>{E.destroy.call(this)}),this.stage.destroy(I),this.stage=null,this.renderer.destroy(Q),this.renderer=null}},n6;var lD=Y(()=>{M();x$();TQ();gZ();gA();MO();gO._plugins=[];n6=gO;p.handleByList(N.Application,n6._plugins);p.add(xJ)});var _O=Y(()=>{lD();m$();c$()});var w8;var d$=Y(()=>{w8={test(A){return typeof A==="string"&&A.startsWith("info face=")},parse(A){let Q=A.match(/^[a-z]+\s+.+$/gm),I={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let w in Q){let $=Q[w].match(/^[a-z]+/gm)[0],U=Q[w].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),V={};for(let z in U){let D=U[z].split("="),W=D[0],j=D[1].replace(/"/gm,""),O=parseFloat(j),F=isNaN(O)?j:O;V[W]=F}I[$].push(V)}let B={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[E]=I.info,[C]=I.common,[J]=I.distanceField??[];if(J)B.distanceField={range:parseInt(J.distanceRange,10),type:J.fieldType};B.fontSize=parseInt(E.size,10),B.fontFamily=E.face,B.lineHeight=parseInt(C.lineHeight,10);let K=I.page;for(let w=0;w<K.length;w++)B.pages.push({id:parseInt(K[w].id,10)||0,file:K[w].file});let H={};B.baseLineOffset=B.lineHeight-parseInt(C.base,10);let Z=I.char;for(let w=0;w<Z.length;w++){let $=Z[w],U=parseInt($.id,10),V=$.letter??$.char??String.fromCharCode(U);if(V==="space")V=" ";H[U]=V,B.chars[V]={id:U,page:parseInt($.page,10)||0,x:parseInt($.x,10),y:parseInt($.y,10),width:parseInt($.width,10),height:parseInt($.height,10),xOffset:parseInt($.xoffset,10),yOffset:parseInt($.yoffset,10),xAdvance:parseInt($.xadvance,10),kerning:{}}}let q=I.kerning||[];for(let w=0;w<q.length;w++){let $=parseInt(q[w].first,10),U=parseInt(q[w].second,10),V=parseInt(q[w].amount,10);B.chars[H[U]].kerning[H[$]]=V}return B}}});var o6;var p$=Y(()=>{o6={test(A){let Q=A;return typeof Q!=="string"&&"getElementsByTagName"in Q&&Q.getElementsByTagName("page").length&&Q.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(A){let Q={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},I=A.getElementsByTagName("info")[0],B=A.getElementsByTagName("common")[0],E=A.getElementsByTagName("distanceField")[0];if(E)Q.distanceField={type:E.getAttribute("fieldType"),range:parseInt(E.getAttribute("distanceRange"),10)};let C=A.getElementsByTagName("page"),J=A.getElementsByTagName("char"),K=A.getElementsByTagName("kerning");Q.fontSize=parseInt(I.getAttribute("size"),10),Q.fontFamily=I.getAttribute("face"),Q.lineHeight=parseInt(B.getAttribute("lineHeight"),10);for(let Z=0;Z<C.length;Z++)Q.pages.push({id:parseInt(C[Z].getAttribute("id"),10)||0,file:C[Z].getAttribute("file")});let H={};Q.baseLineOffset=Q.lineHeight-parseInt(B.getAttribute("base"),10);for(let Z=0;Z<J.length;Z++){let q=J[Z],w=parseInt(q.getAttribute("id"),10),$=q.getAttribute("letter")??q.getAttribute("char")??String.fromCharCode(w);if($==="space")$=" ";H[w]=$,Q.chars[$]={id:w,page:parseInt(q.getAttribute("page"),10)||0,x:parseInt(q.getAttribute("x"),10),y:parseInt(q.getAttribute("y"),10),width:parseInt(q.getAttribute("width"),10),height:parseInt(q.getAttribute("height"),10),xOffset:parseInt(q.getAttribute("xoffset"),10),yOffset:parseInt(q.getAttribute("yoffset"),10),xAdvance:parseInt(q.getAttribute("xadvance"),10),kerning:{}}}for(let Z=0;Z<K.length;Z++){let q=parseInt(K[Z].getAttribute("first"),10),w=parseInt(K[Z].getAttribute("second"),10),$=parseInt(K[Z].getAttribute("amount"),10);Q.chars[H[w]].kerning[H[q]]=$}return Q}}});var s6;var u$=Y(()=>{jA();p$();s6={test(A){if(typeof A==="string"&&A.match(/<font(\s|>)/))return o6.test(u.get().parseXML(A));return!1},parse(A){return o6.parse(u.get().parseXML(A))}}});var R0;var a6=Y(()=>{yQ();gA();R0=class R0 extends mA{constructor(){super(...arguments);this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return c(BA,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return c(BA,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return c(BA,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return c(BA,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return c(BA,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(A=!1){this.emit("destroy",this),this.removeAllListeners();for(let Q in this.chars)this.chars[Q].texture?.destroy();if(this.chars=null,A)this.pages.forEach((Q)=>Q.texture.destroy(!0)),this.pages=null}}});class SO{constructor(A=0,Q=0,I=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=A,this.resetTtl=I,this.size=0,this.ttl=Q}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(A){if(this.has(A)){let Q=this.items[A];if(delete this.items[A],this.size--,Q.prev!==null)Q.prev.next=Q.next;if(Q.next!==null)Q.next.prev=Q.prev;if(this.first===Q)this.first=Q.next;if(this.last===Q)this.last=Q.prev}return this}entries(A=this.keys()){let Q=new Array(A.length);for(let I=0;I<A.length;I++){let B=A[I];Q[I]=[B,this.get(B)]}return Q}evict(A=!1){if(A||this.size>0){let Q=this.first;if(delete this.items[Q.key],--this.size===0)this.first=null,this.last=null;else this.first=Q.next,this.first.prev=null}return this}expiresAt(A){let Q;if(this.has(A))Q=this.items[A].expiry;return Q}get(A){let Q=this.items[A];if(Q!==void 0){if(this.ttl>0){if(Q.expiry<=Date.now()){this.delete(A);return}}return this.moveToEnd(Q),Q.value}return}has(A){return A in this.items}moveToEnd(A){if(this.last===A)return;if(A.prev!==null)A.prev.next=A.next;if(A.next!==null)A.next.prev=A.prev;if(this.first===A)this.first=A.next;if(A.prev=this.last,A.next=null,this.last!==null)this.last.next=A;if(this.last=A,this.first===null)this.first=A}keys(){let A=new Array(this.size),Q=this.first,I=0;while(Q!==null)A[I++]=Q.key,Q=Q.next;return A}setWithEvicted(A,Q,I=this.resetTtl){let B=null;if(this.has(A))this.set(A,Q,!0,I);else{if(this.max>0&&this.size===this.max)B={...this.first},this.evict(!0);let E=this.items[A]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:A,prev:this.last,next:null,value:Q};if(++this.size===1)this.first=E;else this.last.next=E;this.last=E}return B}set(A,Q,I=!1,B=this.resetTtl){let E=this.items[A];if(I||E!==void 0){if(E.value=Q,I===!1&&B)E.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;this.moveToEnd(E)}else{if(this.max>0&&this.size===this.max)this.evict(!0);if(E=this.items[A]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:A,prev:this.last,next:null,value:Q},++this.size===1)this.first=E;else this.last.next=E;this.last=E}return this}values(A=this.keys()){let Q=new Array(A.length);for(let I=0;I<A.length;I++)Q[I]=this.get(A[I]);return Q}}function l$(A=1000,Q=0,I=!1){if(isNaN(A)||A<0)throw new TypeError("Invalid max value");if(isNaN(Q)||Q<0)throw new TypeError("Invalid ttl value");if(typeof I!=="boolean")throw new TypeError("Invalid resetTtl value");return new SO(A,Q,I)}var iD=()=>{};function r6(A){return!!A.tagStyles&&Object.keys(A.tagStyles).length>0}function t6(A){return A.includes("<")}function $g(A,Q){return A.clone().assign(Q)}function i$(A,Q){let I=[],B=Q.tagStyles;if(!r6(Q)||!t6(A))return I.push({text:A,style:Q}),I;let E=[Q],C=[],J="",K=0;while(K<A.length){let H=A[K];if(H==="<"){let Z=A.indexOf(">",K);if(Z===-1){J+=H,K++;continue}let q=A.slice(K+1,Z);if(q.startsWith("/")){let w=q.slice(1).trim();if(C.length>0&&C[C.length-1]===w){if(J.length>0)I.push({text:J,style:E[E.length-1]}),J="";E.pop(),C.pop(),K=Z+1;continue}else{J+=A.slice(K,Z+1),K=Z+1;continue}}else{let w=q.trim();if(B[w]){if(J.length>0)I.push({text:J,style:E[E.length-1]}),J="";let $=E[E.length-1],U=$g($,B[w]);E.push(U),C.push(w),K=Z+1;continue}else{J+=A.slice(K,Z+1),K=Z+1;continue}}}else J+=H,K++}if(J.length>0)I.push({text:J,style:E[E.length-1]});return I}var e6=()=>{};function P0(A){if(typeof A!=="string")return!1;return oD.has(A.charCodeAt(0))}function II(A,Q){if(typeof A!=="string")return!1;return aD.has(A.charCodeAt(0))}function Y8(A){return A==="normal"||A==="pre-line"}function $8(A){return A==="normal"}function fI(A){if(typeof A!=="string")return"";let Q=A.length-1;while(Q>=0&&II(A[Q]))Q--;return Q<A.length-1?A.slice(0,Q+1):A}function U8(A){let Q=[],I=[];if(typeof A!=="string")return Q;for(let B=0;B<A.length;B++){let E=A[B],C=A[B+1];if(II(E,C)||P0(E)){if(I.length>0)Q.push(I.join("")),I.length=0;if(E==="\r"&&C===`
`)Q.push(`\r
`),B++;else Q.push(E);continue}I.push(E)}if(I.length>0)Q.push(I.join(""));return Q}function V8(A,Q,I,B){let E=I(A),C=[];for(let J=0;J<E.length;J++){let K=E[J],H=K,Z=1;while(E[J+Z]){let q=E[J+Z];if(!B(H,q,A,J,Q))K+=q,H=q,Z++;else break}J+=Z-1,C.push(K)}return C}var nD,oD,sD,aD,n$,o$;var N8=Y(()=>{nD=[10,13],oD=new Set(nD),sD=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],aD=new Set(sD),n$=/(\r\n|\r|\n)/,o$=/(?:\r\n|\r|\n)/});function s$(A,Q,I,B,E,C,J,K){let H=i$(A,Q);if($8(Q.whiteSpace))for(let AA=0;AA<H.length;AA++){let CA=H[AA];H[AA]={text:CA.text.replace(Ug," "),style:CA.style}}let q=[],w=[];for(let AA of H){let CA=AA.text.split(n$);for(let y=0;y<CA.length;y++){let m=CA[y];if(m===`\r
`||m==="\r"||m===`
`)q.push(w),w=[];else if(m.length>0)w.push({text:m,style:AA.style})}}if(w.length>0||q.length===0)q.push(w);let $=I?rD(q,Q,B,E,J,K):q,U=[],V=[],z=[],D=[],W=[],j=0,O=Q._fontString,F=C(O);if(F.fontSize===0)F.fontSize=Q.fontSize,F.ascent=Q.fontSize;let L="",R=!!Q.dropShadow;for(let AA of $){let CA=0,y=F.ascent,m=F.descent,t="";for(let WA of AA){let kA=WA.style._fontString,zA=C(kA);if(kA!==L)B.font=kA,L=kA;let $A=E(WA.text,WA.style.letterSpacing,B);if(CA+=$A,y=Math.max(y,zA.ascent),m=Math.max(m,zA.descent),t+=WA.text,!R&&WA.style.dropShadow)R=!0}if(AA.length===0)y=F.ascent,m=F.descent;U.push(CA),V.push(y),z.push(m),W.push(t);let r=Q.lineHeight||y+m;D.push(r+Q.leading),j=Math.max(j,CA)}let _=Q._stroke?.width||0,S=(I&&Q.align!=="left"&&Q.align!=="justify"?Math.max(j,Q.wordWrapWidth):j)+_+(Q.dropShadow?Q.dropShadow.distance:0),g=0;for(let AA=0;AA<D.length;AA++)g+=D[AA];g=Math.max(g,D[0]+_);let d=g+(Q.dropShadow?Q.dropShadow.distance:0),a=Q.lineHeight||F.fontSize;return{width:S,height:d,lines:W,lineWidths:U,lineHeight:a+Q.leading,maxLineWidth:j,fontProperties:F,runsByLine:$,lineAscents:V,lineDescents:z,lineHeights:D,hasDropShadow:R}}function rD(A,Q,I,B,E,C){let{letterSpacing:J,whiteSpace:K,wordWrapWidth:H,breakWords:Z}=Q,q=Y8(K),w=H+J,$={},U="",V=(D,W)=>{let j=`${D}|${W.styleKey}`,O=$[j];if(O===void 0){let F=W._fontString;if(F!==U)I.font=F,U=F;O=B(D,W.letterSpacing,I)+W.letterSpacing,$[j]=O}return O},z=[];for(let D of A){let W=tD(D),j=z.length,O=(g)=>{let d=0,a=g;do{let{token:AA,style:CA}=W[a];d+=V(AA,CA),a++}while(a<W.length&&W[a].continuesFromPrevious);return d},F=(g)=>{let d=[],a=g;do d.push({token:W[a].token,style:W[a].style}),a++;while(a<W.length&&W[a].continuesFromPrevious);return d},L=[],R=0,_=!q,T=null,f=()=>{if(T&&T.text.length>0)L.push(T);T=null},S=()=>{if(f(),L.length>0){let g=L[L.length-1];if(g.text=fI(g.text),g.text.length===0)L.pop()}z.push(L),L=[],R=0,_=!1};for(let g=0;g<W.length;g++){let{token:d,style:a,continuesFromPrevious:AA}=W[g],CA=V(d,a);if(q){let t=II(d),r=T?.text[T.text.length-1]??L[L.length-1]?.text.slice(-1)??"",WA=r?II(r):!1;if(t&&WA)continue}let y=!AA,m=y?O(g):CA;if(m>w&&y){if(R>0)S();if(Z){let t=F(g);for(let r=0;r<t.length;r++){let WA=t[r].token,kA=t[r].style,zA=V8(WA,Z,C,E);for(let $A of zA){let fA=V($A,kA);if(fA+R>w)S();if(!T||T.style!==kA)f(),T={text:$A,style:kA};else T.text+=$A;R+=fA}}g+=t.length-1}else{let t=F(g);f(),z.push(t.map((r)=>({text:r.token,style:r.style}))),_=!1,g+=t.length-1}}else if(m+R>w&&y){if(II(d)){_=!1;continue}S(),T={text:d,style:a},R=CA}else if(AA&&!Z){if(!T||T.style!==a)f(),T={text:d,style:a};else T.text+=d;R+=CA}else{let t=II(d);if(R===0&&t&&!_)continue;if(!T||T.style!==a)f(),T={text:d,style:a};else T.text+=d;R+=CA}}if(f(),L.length>0){let g=L[L.length-1];if(g.text=fI(g.text),g.text.length===0)L.pop()}if(L.length>0||z.length===j)z.push(L)}return z}function tD(A){let Q=[],I=!1;for(let B of A){let E=U8(B.text),C=!0;for(let J of E){let K=II(J)||P0(J),H=C&&I&&!K;Q.push({token:J,style:B.style,continuesFromPrevious:H}),I=!K,C=!1}}return Q}var Ug;var a$=Y(()=>{e6();N8();Ug=/\r\n|\r|\n/g});function bO(A,Q,I,B,E){let C=I[A];if(typeof C!=="number")C=E(A,Q,B)+Q,I[A]=C;return C}function r$(A,Q,I,B,E,C,J){let K=I.getContext("2d",Vg);K.font=Q._fontString;let H=0,Z="",q=[],w=Object.create(null),{letterSpacing:$,whiteSpace:U}=Q,V=Y8(U),z=$8(U),D=!V,W=Q.wordWrapWidth+$,j=U8(A);for(let F=0;F<j.length;F++){let L=j[F];if(P0(L)){if(!z){q.push(fI(Z)),D=!V,Z="",H=0;continue}L=" "}if(V){let _=II(L),T=II(Z[Z.length-1]);if(_&&T)continue}let R=bO(L,$,w,K,B);if(R>W){if(Z!=="")q.push(fI(Z)),Z="",H=0;if(E(L,Q.breakWords)){let _=V8(L,Q.breakWords,J,C);for(let T of _){let f=bO(T,$,w,K,B);if(f+H>W)q.push(fI(Z)),D=!1,Z="",H=0;Z+=T,H+=f}}else{if(Z.length>0)q.push(fI(Z)),Z="",H=0;q.push(fI(L)),D=!1,Z="",H=0}}else{if(R+H>W)D=!1,q.push(fI(Z)),Z="",H=0;if(Z.length>0||!II(L)||D)Z+=L,H+=R}}let O=fI(Z);if(O.length>0)q.push(O);return q.join(`
`)}var Vg;var t$=Y(()=>{N8();Vg={willReadFrequently:!0}});var fO,ME=class A{static get experimentalLetterSpacingSupported(){let Q=A._experimentalLetterSpacingSupported;if(Q===void 0){let I=u.get().getCanvasRenderingContext2D().prototype;Q=A._experimentalLetterSpacingSupported="letterSpacing"in I||"textLetterSpacing"in I}return Q}constructor(Q,I,B,E,C,J,K,H,Z,q){if(this.text=Q,this.style=I,this.width=B,this.height=E,this.lines=C,this.lineWidths=J,this.lineHeight=K,this.maxLineWidth=H,this.fontProperties=Z,q)this.runsByLine=q.runsByLine,this.lineAscents=q.lineAscents,this.lineDescents=q.lineDescents,this.lineHeights=q.lineHeights,this.hasDropShadow=q.hasDropShadow}static measureText(Q=" ",I,B=A._canvas,E=I.wordWrap){let C=`${Q}-${I.styleKey}-wordWrap-${E}`;if(A._measurementCache.has(C))return A._measurementCache.get(C);if(r6(I)&&t6(Q)){let L=s$(Q,I,E,A._context,A._measureText,A.measureFont,A.canBreakChars,A.wordWrapSplit),R=new A(Q,I,L.width,L.height,L.lines,L.lineWidths,L.lineHeight,L.maxLineWidth,L.fontProperties,{runsByLine:L.runsByLine,lineAscents:L.lineAscents,lineDescents:L.lineDescents,lineHeights:L.lineHeights,hasDropShadow:L.hasDropShadow});return A._measurementCache.set(C,R),R}let K=I._fontString,H=A.measureFont(K);if(H.fontSize===0)H.fontSize=I.fontSize,H.ascent=I.fontSize,H.descent=0;let Z=A._context;Z.font=K;let w=(E?A._wordWrap(Q,I,B):Q).split(o$),$=new Array(w.length),U=0;for(let L=0;L<w.length;L++){let R=A._measureText(w[L],I.letterSpacing,Z);$[L]=R,U=Math.max(U,R)}let V=I._stroke?.width??0,z=I.lineHeight||H.fontSize,D=A._getAlignWidth(U,I,E),W=A._adjustWidthForStyle(D,I),j=Math.max(z,H.fontSize+V)+(w.length-1)*(z+I.leading),O=A._adjustHeightForStyle(j,I),F=new A(Q,I,W,O,w,$,z+I.leading,U,H);return A._measurementCache.set(C,F),F}static _adjustWidthForStyle(Q,I){let B=I._stroke?.width||0,E=Q+B;if(I.dropShadow)E+=I.dropShadow.distance;return E}static _adjustHeightForStyle(Q,I){let B=Q;if(I.dropShadow)B+=I.dropShadow.distance;return B}static _getAlignWidth(Q,I,B){return B&&I.align!=="left"&&I.align!=="justify"?Math.max(Q,I.wordWrapWidth):Q}static _measureText(Q,I,B){let E=!1;if(A.experimentalLetterSpacingSupported)if(A.experimentalLetterSpacing)B.letterSpacing=`${I}px`,B.textLetterSpacing=`${I}px`,E=!0;else B.letterSpacing="0px",B.textLetterSpacing="0px";let C=B.measureText(Q),J=C.width,K=-(C.actualBoundingBoxLeft??0),Z=(C.actualBoundingBoxRight??0)-K;if(J>0)if(E)J-=I,Z-=I;else{let q=(A.graphemeSegmenter(Q).length-1)*I;J+=q,Z+=q}return Math.max(J,Z)}static _wordWrap(Q,I,B=A._canvas){return r$(Q,I,B,A._measureText,A.canBreakWords,A.canBreakChars,A.wordWrapSplit)}static isBreakingSpace(Q,I){return II(Q,I)}static canBreakWords(Q,I){return I}static canBreakChars(Q,I,B,E,C){return!0}static wordWrapSplit(Q){return A.graphemeSegmenter(Q)}static measureFont(Q){if(A._fonts[Q])return A._fonts[Q];let I=A._context;I.font=Q;let B=I.measureText(A.METRICS_STRING+A.BASELINE_SYMBOL),E=B.actualBoundingBoxAscent??0,C=B.actualBoundingBoxDescent??0,J={ascent:E,descent:C,fontSize:E+C};return A._fonts[Q]=J,J}static clearMetrics(Q=""){if(Q)delete A._fonts[Q];else A._fonts={}}static get _canvas(){if(!A.__canvas){let Q;try{let I=new OffscreenCanvas(0,0);if(I.getContext("2d",fO)?.measureText)return A.__canvas=I,I;Q=u.get().createCanvas()}catch(I){Q=u.get().createCanvas()}Q.width=Q.height=10,A.__canvas=Q}return A.__canvas}static get _context(){if(!A.__context)A.__context=A._canvas.getContext("2d",fO);return A.__context}},eA;var lB=Y(()=>{iD();jA();a$();e6();N8();t$();fO={willReadFrequently:!0};ME.METRICS_STRING="|q";ME.BASELINE_SYMBOL="M";ME.BASELINE_MULTIPLIER=1.4;ME.HEIGHT_MULTIPLIER=2;ME.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter==="function"){let A=new Intl.Segmenter;return(Q)=>{let I=A.segment(Q),B=[],E=0;for(let C of I)B[E++]=C.segment;return B}}return(A)=>[...A]})();ME.experimentalLetterSpacing=!1;ME._fonts={};ME._measurementCache=l$(1000);eA=ME});function iB(A){let Q=typeof A.fontSize==="number"?`${A.fontSize}px`:A.fontSize,I=A.fontFamily;if(!Array.isArray(A.fontFamily))I=A.fontFamily.split(",");for(let B=I.length-1;B>=0;B--){let E=I[B].trim();if(!/([\"\'])[^\'\"]+\1/.test(E)&&!Ng.includes(E))E=`"${E}"`;I[B]=E}return`${A.fontStyle} ${A.fontVariant} ${A.fontWeight} ${Q} ${I.join(",")}`}var Ng;var z8=Y(()=>{Ng=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]});function zg(A){let Q=A;if(typeof Q.dropShadow==="boolean"&&Q.dropShadow){let I=AQ.defaultDropShadow;A.dropShadow={alpha:Q.dropShadowAlpha??I.alpha,angle:Q.dropShadowAngle??I.angle,blur:Q.dropShadowBlur??I.blur,color:Q.dropShadowColor??I.color,distance:Q.dropShadowDistance??I.distance}}if(Q.strokeThickness!==void 0){c(BA,"strokeThickness is now a part of stroke");let I=Q.stroke,B={};if(JA.isColorLike(I))B.color=I;else if(I instanceof jQ||I instanceof AB)B.fill=I;else if(Object.hasOwnProperty.call(I,"color")||Object.hasOwnProperty.call(I,"fill"))B=I;else throw new Error("Invalid stroke value.");A.stroke={...B,width:Q.strokeThickness}}if(Array.isArray(Q.fillGradientStops)){if(c(BA,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(Q.fill)||Q.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");if(Q.fill.length!==Q.fillGradientStops.length)n("The number of fill colors must match the number of fill gradient stops.");let I=new jQ({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),B=Q.fillGradientStops.slice(),E=Q.fill.map((C)=>JA.shared.setValue(C).toNumber());B.forEach((C,J)=>{I.addColorStop(C,E[J])}),A.fill={fill:I}}}var eD,AQ;var yI=Y(()=>{yQ();IQ();HQ();gA();_A();uB();G0();GC();l6();z8();eD=class A extends mA{constructor(Q={}){super();this.uid=VA("textStyle"),this._tick=0,this._cachedFontString=null,zg(Q);let I=Q instanceof A,B=Q;if(I)Q=B._toObject();let E={...A.defaultTextStyle,...Q};for(let C in E){let J=C;this[J]=E[C]}this._tagStyles=Q.tagStyles??void 0,this.update(),this._tick=0}get align(){return this._align}set align(Q){if(this._align===Q)return;this._align=Q,this.update()}get breakWords(){return this._breakWords}set breakWords(Q){if(this._breakWords===Q)return;this._breakWords=Q,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(Q){if(this._dropShadow===Q)return;if(Q!==null&&typeof Q==="object")this._dropShadow=this._createProxy({...A.defaultDropShadow,...Q});else this._dropShadow=Q?this._createProxy({...A.defaultDropShadow}):null;this.update()}get fontFamily(){return this._fontFamily}set fontFamily(Q){if(this._fontFamily===Q)return;this._fontFamily=Q,this.update()}get fontSize(){return this._fontSize}set fontSize(Q){if(this._fontSize===Q)return;if(typeof Q==="string")this._fontSize=parseInt(Q,10);else this._fontSize=Q;this.update()}get fontStyle(){return this._fontStyle}set fontStyle(Q){if(this._fontStyle===Q)return;this._fontStyle=Q.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(Q){if(this._fontVariant===Q)return;this._fontVariant=Q,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(Q){if(this._fontWeight===Q)return;this._fontWeight=Q,this.update()}get leading(){return this._leading}set leading(Q){if(this._leading===Q)return;this._leading=Q,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(Q){if(this._letterSpacing===Q)return;this._letterSpacing=Q,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(Q){if(this._lineHeight===Q)return;this._lineHeight=Q,this.update()}get padding(){return this._padding}set padding(Q){if(this._padding===Q)return;this._padding=Q,this.update()}get filters(){return this._filters}set filters(Q){if(this._filters===Q)return;this._filters=Object.freeze(Q),this.update()}get trim(){return this._trim}set trim(Q){if(this._trim===Q)return;this._trim=Q,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(Q){if(this._textBaseline===Q)return;this._textBaseline=Q,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(Q){if(this._whiteSpace===Q)return;this._whiteSpace=Q,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(Q){if(this._wordWrap===Q)return;this._wordWrap=Q,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(Q){if(this._wordWrapWidth===Q)return;this._wordWrapWidth=Q,this.update()}get fill(){return this._originalFill}set fill(Q){if(Q===this._originalFill)return;if(this._originalFill=Q,this._isFillStyle(Q))this._originalFill=this._createProxy({...kQ.defaultFillStyle,...Q},()=>{this._fill=XB({...this._originalFill},kQ.defaultFillStyle)});this._fill=XB(Q===0?"black":Q,kQ.defaultFillStyle),this.update()}get stroke(){return this._originalStroke}set stroke(Q){if(Q===this._originalStroke)return;if(this._originalStroke=Q,this._isFillStyle(Q))this._originalStroke=this._createProxy({...kQ.defaultStrokeStyle,...Q},()=>{this._stroke=OC({...this._originalStroke},kQ.defaultStrokeStyle)});this._stroke=OC(Q,kQ.defaultStrokeStyle),this.update()}get tagStyles(){return this._tagStyles}set tagStyles(Q){if(this._tagStyles===Q)return;this._tagStyles=Q??void 0,this.update()}update(){this._tick++,this._cachedFontString=null,this.emit("update",this)}reset(){let Q=A.defaultTextStyle;for(let I in Q)this[I]=Q[I]}assign(Q){for(let I in Q){let B=I;this[B]=Q[I]}return this}get styleKey(){return`${this.uid}-${this._tick}`}get _fontString(){if(this._cachedFontString===null)this._cachedFontString=iB(this);return this._cachedFontString}_toObject(){return{align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill?{...this._fill}:void 0,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke?{...this._stroke}:void 0,textBaseline:this.textBaseline,trim:this.trim,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0,tagStyles:this._tagStyles?{...this._tagStyles}:void 0}}clone(){return new A(this._toObject())}_getFinalPadding(){let Q=0;if(this._filters)for(let I=0;I<this._filters.length;I++)Q+=this._filters[I].padding;return Math.max(this._padding,Q)}destroy(Q=!1){if(this.removeAllListeners(),typeof Q==="boolean"?Q:Q?.texture){let B=typeof Q==="boolean"?Q:Q?.textureSource;if(this._fill?.texture)this._fill.texture.destroy(B);if(this._originalFill?.texture)this._originalFill.texture.destroy(B);if(this._stroke?.texture)this._stroke.texture.destroy(B);if(this._originalStroke?.texture)this._originalStroke.texture.destroy(B)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(Q,I){return new Proxy(Q,{set:(B,E,C)=>{if(B[E]===C)return!0;return B[E]=C,I?.(E,C),this.update(),!0}})}_isFillStyle(Q){return(Q??null)!==null&&!(JA.isColorLike(Q)||Q instanceof jQ||Q instanceof AB)}};eD.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};eD.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};AQ=eD});function nB(A,Q,I,B=0,E=0,C=0){if(A.texture===v.WHITE&&!A.fill)return JA.shared.setValue(A.color).setAlpha(A.alpha??1).toHexa();else if(!A.fill){let J=Q.createPattern(A.texture.source.resource,"repeat"),K=A.matrix.copyTo(x.shared);return K.scale(A.texture.source.pixelWidth,A.texture.source.pixelHeight),J.setTransform(K),J}else if(A.fill instanceof AB){let J=A.fill,K=Q.createPattern(J.texture.source.resource,"repeat"),H=J.transform.copyTo(x.shared);return H.scale(J.texture.source.pixelWidth,J.texture.source.pixelHeight),K.setTransform(H),K}else if(A.fill instanceof jQ){let J=A.fill,K=J.type==="linear",H=J.textureSpace==="local",Z=1,q=1;if(H&&I)Z=I.width+B,q=I.height+B;let w,$=!1;if(K){let{start:U,end:V}=J;w=Q.createLinearGradient(U.x*Z+E,U.y*q+C,V.x*Z+E,V.y*q+C),$=Math.abs(V.x-U.x)<Math.abs((V.y-U.y)*0.1)}else{let{center:U,innerRadius:V,outerCenter:z,outerRadius:D}=J;w=Q.createRadialGradient(U.x*Z+E,U.y*q+C,V*Z,z.x*Z+E,z.y*q+C,D*Z)}if($&&H&&I){let U=I.lineHeight/q;for(let V=0;V<I.lines.length;V++){let z=(V*I.lineHeight+B/2)/q;J.colorStops.forEach((D)=>{let W=z+D.offset*U;W=Math.max(0,Math.min(1,W)),w.addColorStop(Math.floor(W*yO)/yO,JA.shared.setValue(D.color).toHex())})}}else J.colorStops.forEach((U)=>{w.addColorStop(U.offset,JA.shared.setValue(U.color).toHex())});return w}return n("FillStyle not recognised",A),"red"}var yO=1e5;var A9=Y(()=>{IQ();NA();FA();_A();uB();G0()});var vO,Q9;var e$=Y(()=>{IQ();ZQ();RE();aE();FA();qB();gA();lB();z8();A9();yI();a6();vO=class A extends R0{constructor(Q){super();this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;let I={...A.defaultOptions,...Q};this._textureSize=I.textureSize,this._mipmap=I.mipmap;let B=I.style.clone();if(I.overrideFill)B._fill.color=16777215,B._fill.alpha=1,B._fill.texture=v.WHITE,B._fill.fill=null;this.applyFillAsTint=I.overrideFill;let E=B.fontSize;B.fontSize=this.baseMeasurementFontSize;let C=iB(B);if(I.overrideSize){if(B._stroke)B._stroke.width*=this.baseRenderedFontSize/E}else B.fontSize=this.baseRenderedFontSize=E;if(this._style=B,this._skipKerning=I.skipKerning??!1,this.resolution=I.resolution??1,this._padding=I.padding??4,I.textureStyle)this._textureStyle=I.textureStyle instanceof DQ?I.textureStyle:new DQ(I.textureStyle);this.fontMetrics=eA.measureFont(C),this.lineHeight=B.lineHeight||this.fontMetrics.fontSize||B.fontSize}ensureCharacters(Q){let I=eA.graphemeSegmenter(Q).filter((D)=>!this._currentChars.includes(D)).filter((D,W,j)=>j.indexOf(D)===W);if(!I.length)return;this._currentChars=[...this._currentChars,...I];let B;if(this._currentPageIndex===-1)B=this._nextPage();else B=this.pages[this._currentPageIndex];let{canvas:E,context:C}=B.canvasAndContext,J=B.texture.source,K=this._style,H=this._currentX,Z=this._currentY,q=this._currentMaxCharHeight,w=this.baseRenderedFontSize/this.baseMeasurementFontSize,$=this._padding*w,U=!1,V=E.width/this.resolution,z=E.height/this.resolution;for(let D=0;D<I.length;D++){let W=I[D],j=eA.measureText(W,K,E,!1);j.lineHeight=j.height;let O=j.width*w,F=Math.ceil((K.fontStyle==="italic"?2:1)*O),L=j.height*w,R=F+$*2,_=L+$*2;if(U=!1,W!==`
`&&W!=="\r"&&W!=="\t"&&W!==" ")U=!0,q=Math.ceil(Math.max(_,q));if(H+R>V){if(Z+=q,q=_,H=0,Z+q>z){J.update();let f=this._nextPage();E=f.canvasAndContext.canvas,C=f.canvasAndContext.context,J=f.texture.source,H=0,Z=0,q=0}}let T=O/w-(K.dropShadow?.distance??0)-(K._stroke?.width??0);if(this.chars[W]={id:W.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:T,kerning:{}},U){this._drawGlyph(C,j,H+$,Z+$,w,K);let f=J.width*w,S=J.height*w,g=new EA(H/f*J.width,Z/S*J.height,R/f*J.width,_/S*J.height);this.chars[W].texture=new v({source:J,frame:g}),H+=Math.ceil(R)}}J.update(),this._currentX=H,this._currentY=Z,this._currentMaxCharHeight=q,this._skipKerning&&this._applyKerning(I,C)}get pageTextures(){return c(BA,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(Q,I){let B=this._measureCache;for(let E=0;E<Q.length;E++){let C=Q[E];for(let J=0;J<this._currentChars.length;J++){let K=this._currentChars[J],H=B[C];if(!H)H=B[C]=I.measureText(C).width;let Z=B[K];if(!Z)Z=B[K]=I.measureText(K).width;let q=I.measureText(C+K).width,w=q-(H+Z);if(w)this.chars[C].kerning[K]=w;if(q=I.measureText(C+K).width,w=q-(H+Z),w)this.chars[K].kerning[C]=w}}}_nextPage(){this._currentPageIndex++;let Q=this.resolution,I=mQ.getOptimalCanvasAndContext(this._textureSize,this._textureSize,Q);this._setupContext(I.context,this._style,Q);let B=Q*(this.baseRenderedFontSize/this.baseMeasurementFontSize),E=new v({source:new wI({resource:I.canvas,resolution:B,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});if(this._textureStyle)E.source.style=this._textureStyle;let C={canvasAndContext:I,texture:E};return this.pages[this._currentPageIndex]=C,C}_setupContext(Q,I,B){I.fontSize=this.baseRenderedFontSize,Q.scale(B,B),Q.font=iB(I),I.fontSize=this.baseMeasurementFontSize,Q.textBaseline=I.textBaseline;let E=I._stroke,C=E?.width??0;if(E)Q.lineWidth=C,Q.lineJoin=E.join,Q.miterLimit=E.miterLimit,Q.strokeStyle=nB(E,Q);if(I._fill)Q.fillStyle=nB(I._fill,Q);if(I.dropShadow){let J=I.dropShadow,K=JA.shared.setValue(J.color).toArray(),H=J.blur*B,Z=J.distance*B;Q.shadowColor=`rgba(${K[0]*255},${K[1]*255},${K[2]*255},${J.alpha})`,Q.shadowBlur=H,Q.shadowOffsetX=Math.cos(J.angle)*Z,Q.shadowOffsetY=Math.sin(J.angle)*Z}else Q.shadowColor="black",Q.shadowBlur=0,Q.shadowOffsetX=0,Q.shadowOffsetY=0}_drawGlyph(Q,I,B,E,C,J){let{text:K,fontProperties:H}=I,q=(J._stroke?.width??0)*C,w=B+q/2,$=E-q/2,U=H.descent*C,V=I.lineHeight*C,z=!1;if(J.stroke&&q)z=!0,Q.strokeText(K,w,$+V-U);let{shadowBlur:D,shadowOffsetX:W,shadowOffsetY:j}=Q;if(J._fill){if(z)Q.shadowBlur=0,Q.shadowOffsetX=0,Q.shadowOffsetY=0;Q.fillText(K,w,$+V-U)}if(z)Q.shadowBlur=D,Q.shadowOffsetX=W,Q.shadowOffsetY=j}destroy(){super.destroy();for(let Q=0;Q<this.pages.length;Q++){let{canvasAndContext:I,texture:B}=this.pages[Q];mQ.returnCanvasAndContext(I),B.destroy(!0)}this.pages=null}};vO.defaultOptions={textureSize:512,style:new AQ,mipmap:!0};Q9=vO});function jC(A,Q,I,B){let E={width:0,height:0,offsetY:0,scale:Q.fontSize/I.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};E.offsetY=I.baseLineOffset;let C=E.lines[0],J=null,K=!0,H={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},Z=I.baseMeasurementFontSize/Q.fontSize,q=Q.letterSpacing*Z,w=Q.wordWrapWidth*Z,$=Q.lineHeight?Q.lineHeight*Z:I.lineHeight,U=Q.wordWrap&&Q.breakWords,V=(W)=>{let j=C.width;for(let O=0;O<H.index;O++){let F=W.positions[O];C.chars.push(W.chars[O]),C.charPositions.push(F+j)}C.width+=W.width,K=!1,H.width=0,H.index=0,H.chars.length=0},z=()=>{let W=C.chars.length-1;if(B){let j=C.chars[W];while(j===" ")C.width-=I.chars[j].xAdvance,j=C.chars[--W]}E.width=Math.max(E.width,C.width),C={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},K=!0,E.lines.push(C),E.height+=$},D=(W)=>W-q>w;for(let W=0;W<A.length+1;W++){let j,O=W===A.length;if(!O)j=A[W];let F=I.chars[j]||I.chars[" "];if(/(?:\s)/.test(j)||j==="\r"||j===`
`||O){if(!K&&Q.wordWrap&&D(C.width+H.width)){if(z(),V(H),!O)C.charPositions.push(0)}else if(H.start=C.width,V(H),!O)C.charPositions.push(0);if(j==="\r"||j===`
`)z();else if(!O){let T=F.xAdvance+(F.kerning[J]||0)+q;C.width+=T,C.spaceWidth=T,C.spacesIndex.push(C.charPositions.length),C.chars.push(j)}}else{let _=F.kerning[J]||0,T=F.xAdvance+_+q;if(U&&D(C.width+H.width+T))V(H),z();H.positions[H.index++]=H.width+_,H.chars.push(j),H.width+=T}J=j}if(z(),Q.align==="center")Dg(E);else if(Q.align==="right")Wg(E);else if(Q.align==="justify")Xg(E);return E}function Dg(A){for(let Q=0;Q<A.lines.length;Q++){let I=A.lines[Q],B=A.width/2-I.width/2;for(let E=0;E<I.charPositions.length;E++)I.charPositions[E]+=B}}function Wg(A){for(let Q=0;Q<A.lines.length;Q++){let I=A.lines[Q],B=A.width-I.width;for(let E=0;E<I.charPositions.length;E++)I.charPositions[E]+=B}}function Xg(A){let Q=A.width;for(let I=0;I<A.lines.length;I++){let B=A.lines[I],E=0,C=B.spacesIndex[E++],J=0,K=B.spacesIndex.length,Z=(Q-B.width)/K;for(let q=0;q<B.charPositions.length;q++){if(q===C)C=B.spacesIndex[E++],J+=Z;B.charPositions[q]+=J}}}var D8=()=>{};function AU(A){if(A==="")return[];if(typeof A==="string")A=[A];let Q=[];for(let I=0,B=A.length;I<B;I++){let E=A[I];if(Array.isArray(E)){if(E.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${E.length}.`);if(E[0].length===0||E[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let C=E[0].charCodeAt(0),J=E[1].charCodeAt(0);if(J<C)throw new Error("[BitmapFont]: Invalid character range.");for(let K=C,H=J;K<=H;K++)Q.push(String.fromCharCode(K))}else Q.push(...Array.from(E))}if(Q.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return Q}var QU=()=>{};class TO{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=l$(1000)}getFont(A,Q){let I=`${Q.fontFamily}-bitmap`,B=!0;if(Q._fill.fill&&!Q._stroke)I+=Q._fill.fill.styleKey,B=!1;else if(Q._stroke||Q.dropShadow)I=`${Q.styleKey}-bitmap`,B=!1;if(!LA.has(I)){let C=Object.create(Q);C._lineHeight=0;let J=new Q9({style:C,overrideFill:B,overrideSize:!0,...this.defaultOptions});if(IU++,IU>50)n("BitmapText",`You have dynamically created ${IU} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``);J.once("destroy",()=>{IU--,LA.remove(I)}),LA.set(I,J)}let E=LA.get(I);return E.ensureCharacters?.(A),E}getLayout(A,Q,I=!0){let B=this.getFont(A,Q),E=`${A}-${Q.styleKey}-${I}`;if(this.measureCache.has(E))return this.measureCache.get(E);let C=eA.graphemeSegmenter(A),J=jC(C,Q,B,I);return this.measureCache.set(E,J),J}measureText(A,Q,I=!0){return this.getLayout(A,Q,I)}install(...A){let Q=A[0];if(typeof Q==="string")Q={name:Q,style:A[1],chars:A[2]?.chars,resolution:A[2]?.resolution,padding:A[2]?.padding,skipKerning:A[2]?.skipKerning},c(BA,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})");let I=Q?.name;if(!I)throw new Error("[BitmapFontManager] Property `name` is required.");Q={...this.defaultOptions,...Q};let B=Q.style,E=B instanceof AQ?B:new AQ(B),C=Q.dynamicFill??this._canUseTintForStyle(E),J=new Q9({style:E,overrideFill:C,skipKerning:Q.skipKerning,padding:Q.padding,resolution:Q.resolution,overrideSize:!1,textureStyle:Q.textureStyle}),K=AU(Q.chars);return J.ensureCharacters(K.join("")),LA.set(`${I}-bitmap`,J),J.once("destroy",()=>LA.remove(`${I}-bitmap`)),J}uninstall(A){let Q=`${A}-bitmap`,I=LA.get(Q);if(I)I.destroy()}_canUseTintForStyle(A){return!A._stroke&&(!A.dropShadow||A.dropShadow.color===0)&&!A._fill.fill&&A._fill.color===16777215}}var IU=0,kB;var M0=Y(()=>{iD();lI();gA();_A();lB();yI();e$();D8();QU();kB=new TO});var hO={};jH(hO,{BitmapFont:()=>BU});var BU;var EU=Y(()=>{VE();ZQ();FA();a6();M0();BU=class BU extends R0{constructor(A,Q){super();let{textures:I,data:B}=A;Object.keys(B.pages).forEach((E)=>{let C=B.pages[parseInt(E,10)],J=I[C.id];this.pages.push({texture:J})}),Object.keys(B.chars).forEach((E)=>{let C=B.chars[E],{frame:J,source:K,rotate:H}=I[C.page],Z=DA.transformRectCoords(C,J,H,new EA),q=new v({frame:Z,orig:new EA(0,0,C.width,C.height),source:K,rotate:H});this.chars[E]={id:E.codePointAt(0),xOffset:C.xOffset,yOffset:C.yOffset,xAdvance:C.xAdvance,kerning:C.kerning??{},texture:q}}),this.baseRenderedFontSize=B.fontSize,this.baseMeasurementFontSize=B.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:B.fontSize},this.baseLineOffset=B.baseLineOffset,this.lineHeight=B.lineHeight,this.fontFamily=B.fontFamily,this.distanceField=B.distanceField??{type:"none",range:0},this.url=Q}destroy(){super.destroy();for(let A=0;A<this.pages.length;A++){let{texture:Q}=this.pages[A];Q.destroy(!0)}this.pages=null}static install(A){kB.install(A)}static uninstall(A){kB.uninstall(A)}}});var kg,CU,JU;var KU=Y(()=>{kI();oH();jA();M();bB();d$();u$();kg=[".xml",".fnt"],CU={extension:{type:N.CacheParser,name:"cacheBitmapFont"},test:(A)=>!!A?.pages&&!!A?.chars&&typeof A?.fontFamily==="string",getCacheableAssets(A,Q){let I={};return A.forEach((B)=>{I[B]=Q,I[`${B}-bitmap`]=Q}),I[`${Q.fontFamily}-bitmap`]=Q,I}},JU={extension:{type:N.LoadParser,priority:QQ.Normal},name:"loadBitmapFont",id:"bitmap-font",test(A){return kg.includes(qQ.extname(A).toLowerCase())},async testParse(A){return w8.test(A)||s6.test(A)},async parse(A,Q,I){let B=w8.test(A)?w8.parse(A):s6.parse(A),{src:E}=Q,{pages:C}=B,J=[],K=B.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let $=0;$<C.length;++$){let U=C[$].file,V=qQ.join(qQ.dirname(E),U);V=tC(V,E),J.push({src:V,data:K})}let[H,{BitmapFont:Z}]=await Promise.all([I.load(J),Promise.resolve().then(() => (EU(),hO))]),q=J.map(($)=>H[$.src]);return new Z({data:B,textures:q},E)},async load(A,Q){return await(await u.get().fetch(A)).text()},async unload(A,Q,I){await Promise.all(A.pages.map((B)=>I.unload(B.texture.source._sourceOrigin))),A.destroy()}}});class I9{constructor(A,Q=!1){this._loader=A,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=Q}add(A){if(A.forEach((Q)=>{this._assetList.push(Q)}),this.verbose)console.log("[BackgroundLoader] assets: ",this._assetList);if(this._isActive&&!this._isLoading)this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let A=[],Q=Math.min(this._assetList.length,this._maxConcurrent);for(let I=0;I<Q;I++)A.push(this._assetList.pop());await this._loader.load(A),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(A){if(this._isActive===A)return;if(this._isActive=A,A&&!this._isLoading)this._next()}}var HU=()=>{};var ZU;var qU=Y(()=>{M();FA();ZU={extension:{type:N.CacheParser,name:"cacheTextureArray"},test:(A)=>Array.isArray(A)&&A.every((Q)=>Q instanceof v),getCacheableAssets:(A,Q)=>{let I={};return A.forEach((B)=>{Q.forEach((E,C)=>{I[B+(C===0?"":C+1)]=E})}),I}}});async function W8(A){if("Image"in globalThis)return new Promise((Q)=>{let I=new Image;I.onload=()=>{Q(!0)},I.onerror=()=>{Q(!1)},I.src=A});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let Q=await(await fetch(A)).blob();await createImageBitmap(Q)}catch(Q){return!1}return!0}return!1}var B9=()=>{};var wU;var YU=Y(()=>{M();B9();wU={extension:{type:N.DetectionParser,priority:1},test:async()=>W8("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async(A)=>[...A,"avif"],remove:async(A)=>A.filter((Q)=>Q!=="avif")}});var xO,$U;var UU=Y(()=>{M();xO=["png","jpg","jpeg"],$U={extension:{type:N.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async(A)=>[...A,...xO],remove:async(A)=>A.filter((Q)=>!xO.includes(Q))}});function oB(A){if(Fg)return!1;return document.createElement("video").canPlayType(A)!==""}var Fg;var g0=Y(()=>{Fg="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope});var VU;var NU=Y(()=>{M();g0();VU={extension:{type:N.DetectionParser,priority:0},test:async()=>oB("video/mp4"),add:async(A)=>[...A,"mp4","m4v"],remove:async(A)=>A.filter((Q)=>Q!=="mp4"&&Q!=="m4v")}});var zU;var DU=Y(()=>{M();g0();zU={extension:{type:N.DetectionParser,priority:0},test:async()=>oB("video/ogg"),add:async(A)=>[...A,"ogv"],remove:async(A)=>A.filter((Q)=>Q!=="ogv")}});var WU;var XU=Y(()=>{M();g0();WU={extension:{type:N.DetectionParser,priority:0},test:async()=>oB("video/webm"),add:async(A)=>[...A,"webm"],remove:async(A)=>A.filter((Q)=>Q!=="webm")}});var kU;var FU=Y(()=>{M();B9();kU={extension:{type:N.DetectionParser,priority:0},test:async()=>W8("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async(A)=>[...A,"webp"],remove:async(A)=>A.filter((Q)=>Q!=="webp")}});var mO=class A{constructor(){this.loadOptions={...A.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(Q,I,B)=>{return this._parsersValidated=!1,Q[I]=B,!0}}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(Q,I){let B={promise:null,parser:null};return B.promise=(async()=>{let E=null,C=null;if(I.parser||I.loadParser){if(C=this._parserHash[I.parser||I.loadParser],I.loadParser)n(`[Assets] "loadParser" is deprecated, use "parser" instead for ${Q}`);if(!C)n(`[Assets] specified load parser "${I.parser||I.loadParser}" not found while loading ${Q}`)}if(!C){for(let J=0;J<this.parsers.length;J++){let K=this.parsers[J];if(K.load&&K.test?.(Q,I,this)){C=K;break}}if(!C)return n(`[Assets] ${Q} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}E=await C.load(Q,I,this),B.parser=C;for(let J=0;J<this.parsers.length;J++){let K=this.parsers[J];if(K.parse){if(K.parse&&await K.testParse?.(E,I,this))E=await K.parse(E,I,this)||E,B.parser=K}}return E})(),B}async load(Q,I){if(!this._parsersValidated)this._validateParsers();let B=typeof I==="function"?{...A.defaultOptions,...this.loadOptions,onProgress:I}:{...A.defaultOptions,...this.loadOptions,...I||{}},{onProgress:E,onError:C,strategy:J,retryCount:K,retryDelay:H}=B,Z=0,q={},w=zE(Q),$=iQ(Q,(z)=>({alias:[z],src:z,data:{}})),U=$.reduce((z,D)=>z+(D.progressSize||1),0),V=$.map(async(z)=>{let D=qQ.toAbsolute(z.src);if(q[z.src])return;if(await this._loadAssetWithRetry(D,z,{onProgress:E,onError:C,strategy:J,retryCount:K,retryDelay:H},q),Z+=z.progressSize||1,E)E(Z/U)});return await Promise.all(V),w?q[$[0].src]:q}async unload(Q){let B=iQ(Q,(E)=>({alias:[E],src:E})).map(async(E)=>{let C=qQ.toAbsolute(E.src),J=this.promiseCache[C];if(J){let K=await J.promise;delete this.promiseCache[C],await J.parser?.unload?.(K,E,this)}});await Promise.all(B)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((Q)=>Q.name||Q.id).reduce((Q,I)=>{if(!I.name&&!I.id)n("[Assets] parser should have an id");else if(Q[I.name]||Q[I.id])n(`[Assets] parser id conflict "${I.id}"`);if(Q[I.name]=I,I.id)Q[I.id]=I;return Q},{})}async _loadAssetWithRetry(Q,I,B,E){let C=0,{onError:J,strategy:K,retryCount:H,retryDelay:Z}=B,q=(w)=>new Promise(($)=>setTimeout($,w));while(!0)try{if(!this.promiseCache[Q])this.promiseCache[Q]=this._getLoadPromiseAndParser(Q,I);E[I.src]=await this.promiseCache[Q].promise;return}catch(w){delete this.promiseCache[Q],delete E[I.src],C++;let $=K!=="retry"||C>H;if(K==="retry"&&!$){if(J)J(w,I);await q(Z);continue}if(K==="skip"){if(J)J(w,I);return}if(J)J(w,I);let U=new Error(`[Loader.load] Failed to load ${Q}.
${w}`);if(w instanceof Error&&w.stack)U.stack=w.stack;throw U}}},OU;var GU=Y(()=>{_A();bB();rC();UJ();mO.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};OU=mO});function FI(A,Q){if(Array.isArray(Q)){for(let I of Q)if(A.startsWith(`data:${I}`))return!0;return!1}return A.startsWith(`data:${Q}`)}var gE=()=>{};function CQ(A,Q){let I=A.split("?")[0],B=qQ.extname(I).toLowerCase();if(Array.isArray(Q))return Q.includes(B);return B===Q}var OI=Y(()=>{bB()});var Og=".json",Gg="application/json",jU;var LU=Y(()=>{jA();M();gE();OI();kI();jU={extension:{type:N.LoadParser,priority:QQ.Low},name:"loadJson",id:"json",test(A){return FI(A,Gg)||CQ(A,Og)},async load(A){return await(await u.get().fetch(A)).json()}}});var jg=".txt",Lg="text/plain",RU;var PU=Y(()=>{jA();M();gE();OI();kI();RU={name:"loadTxt",id:"text",extension:{type:N.LoadParser,priority:QQ.Low,name:"loadTxt"},test(A){return FI(A,Lg)||CQ(A,jg)},async load(A){return await(await u.get().fetch(A)).text()}}});function AW(A){let Q=qQ.extname(A),E=qQ.basename(A,Q).replace(/(-|_)/g," ").toLowerCase().split(" ").map((K)=>K.charAt(0).toUpperCase()+K.slice(1)),C=E.length>0;for(let K of E)if(!K.match(gg)){C=!1;break}let J=E.join(" ");if(!C)J=`"${J.replace(/[\\"]/g,"\\$&")}"`;return J}function Sg(A){if(_g.test(A))return A;return encodeURI(A)}var Rg,Pg,Mg,gg,_g,MU;var gU=Y(()=>{jA();M();_A();bB();lI();gE();OI();kI();Rg=["normal","bold","100","200","300","400","500","600","700","800","900"],Pg=[".ttf",".otf",".woff",".woff2"],Mg=["font/ttf","font/otf","font/woff","font/woff2"],gg=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;_g=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;MU={extension:{type:N.LoadParser,priority:QQ.Low},name:"loadWebFont",id:"web-font",test(A){return FI(A,Mg)||CQ(A,Pg)},async load(A,Q){let I=u.get().getFontFaceSet();if(I){let B=[],E=Q.data?.family??AW(A),C=Q.data?.weights?.filter((K)=>Rg.includes(K))??["normal"],J=Q.data??{};for(let K=0;K<C.length;K++){let H=C[K],Z=new FontFace(E,`url(${Sg(A)})`,{...J,weight:H});await Z.load(),I.add(Z),B.push(Z)}if(LA.has(`${E}-and-url`))LA.get(`${E}-and-url`).entries.push({url:A,faces:B});else LA.set(`${E}-and-url`,{entries:[{url:A,faces:B}]});return B.length===1?B[0]:B}return n("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(A){let Q=Array.isArray(A)?A:[A],I=Q[0].family,B=LA.get(`${I}-and-url`),E=B.entries.find((C)=>C.faces.some((J)=>Q.indexOf(J)!==-1));if(E.faces=E.faces.filter((C)=>Q.indexOf(C)===-1),E.faces.length===0)B.entries=B.entries.filter((C)=>C!==E);if(Q.forEach((C)=>{u.get().getFontFaceSet().delete(C)}),B.entries.length===0)LA.remove(`${I}-and-url`)}}});function LC(A,Q=1){let I=eQ.RETINA_PREFIX?.exec(A);if(I)return parseFloat(I[1]);return Q}var X8=Y(()=>{DE()});function BI(A,Q,I){A.label=I,A._sourceOrigin=I;let B=new v({source:A,label:I}),E=()=>{if(delete Q.promiseCache[I],LA.has(I))LA.remove(I)};return B.source.once("destroy",()=>{if(Q.promiseCache[I])n("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),E()}),B.once("destroy",()=>{if(!A.destroyed)n("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),E()}),B}var sB=Y(()=>{FA();_A();lI()});async function yg(A,Q,I,B){let E=await u.get().fetch(A),C=u.get().createImage();C.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await E.text())}`,C.crossOrigin=B,await C.decode();let J=Q.data?.width??C.width,K=Q.data?.height??C.height,H=Q.data?.resolution||LC(A),Z=Math.ceil(J*H),q=Math.ceil(K*H),w=u.get().createCanvas(Z,q),$=w.getContext("2d");$.imageSmoothingEnabled=!0,$.imageSmoothingQuality="high",$.drawImage(C,0,0,J*H,K*H);let{parseAsGraphicsContext:U,...V}=Q.data??{},z=new wI({resource:w,alphaMode:"premultiply-alpha-on-upload",resolution:H,...V});return BI(z,I,A)}async function vg(A){let I=await(await u.get().fetch(A)).text(),B=new kQ;return B.svg(I),B}var bg=".svg",fg="image/svg+xml",_U;var SU=Y(()=>{jA();M();aE();GC();X8();gE();OI();kI();sB();_U={extension:{type:N.LoadParser,priority:QQ.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(A){return FI(A,fg)||CQ(A,bg)},async load(A,Q,I){if(Q.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext)return vg(A);return yg(A,Q,I,this.config.crossOrigin)},unload(A){A.destroy(!0)}}});class E9{constructor(){if(!k8)k8=URL.createObjectURL(new Blob([`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function") return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`],{type:"application/javascript"}));this.worker=new Worker(k8)}}var k8=null;var cO=Y(()=>{E9.revokeObjectURL=function A(){if(k8)URL.revokeObjectURL(k8),k8=null}});class bU{constructor(){if(!F8)F8=URL.createObjectURL(new Blob([`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`],{type:"application/javascript"}));this.worker=new Worker(F8)}}var F8=null;var dO=Y(()=>{bU.revokeObjectURL=function A(){if(F8)URL.revokeObjectURL(F8),F8=null}});class uO{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){if(this._isImageBitmapSupported!==void 0)return this._isImageBitmapSupported;return this._isImageBitmapSupported=new Promise((A)=>{let{worker:Q}=new E9;Q.addEventListener("message",(I)=>{Q.terminate(),E9.revokeObjectURL(),A(I.data)})}),this._isImageBitmapSupported}loadImageBitmap(A,Q){return this._run("loadImageBitmap",[A,Q?.data?.alphaMode])}async _initWorkers(){if(this._initialized)return;this._initialized=!0}_getWorker(){if(QW===void 0)QW=navigator.hardwareConcurrency||4;let A=this._workerPool.pop();if(!A&&this._createdWorkers<QW)this._createdWorkers++,A=new bU().worker,A.addEventListener("message",(Q)=>{this._complete(Q.data),this._returnWorker(Q.target),this._next()});return A}_returnWorker(A){this._workerPool.push(A)}_complete(A){if(!this._resolveHash[A.uuid])return;if(A.error!==void 0)this._resolveHash[A.uuid].reject(A.error);else this._resolveHash[A.uuid].resolve(A.data);delete this._resolveHash[A.uuid]}async _run(A,Q){await this._initWorkers();let I=new Promise((B,E)=>{this._queue.push({id:A,arguments:Q,resolve:B,reject:E})});return this._next(),I}_next(){if(!this._queue.length)return;let A=this._getWorker();if(!A)return;let Q=this._queue.pop(),I=Q.id;this._resolveHash[pO]={resolve:Q.resolve,reject:Q.reject},A.postMessage({data:Q.arguments,uuid:pO++,id:I})}reset(){this._workerPool.forEach((A)=>A.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:A})=>{A?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}var pO=0,QW,C9;var fU=Y(()=>{cO();dO();C9=new uO});async function IW(A,Q){let I=await u.get().fetch(A);if(!I.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${A}: ${I.status} ${I.statusText}`);let B=await I.blob();return Q?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(B,{premultiplyAlpha:"none"}):createImageBitmap(B)}var Tg,hg,O8;var J9=Y(()=>{jA();M();aE();X8();gE();OI();fU();kI();sB();Tg=[".jpeg",".jpg",".png",".webp",".avif"],hg=["image/jpeg","image/png","image/webp","image/avif"];O8={name:"loadTextures",id:"texture",extension:{type:N.LoadParser,priority:QQ.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(A){return FI(A,hg)||CQ(A,Tg)},async load(A,Q,I){let B=null;if(globalThis.createImageBitmap&&this.config.preferCreateImageBitmap)if(this.config.preferWorkers&&await C9.isImageBitmapSupported())B=await C9.loadImageBitmap(A,Q);else B=await IW(A,Q);else B=await new Promise((C,J)=>{if(B=u.get().createImage(),B.crossOrigin=this.config.crossOrigin,B.src=A,B.complete)C(B);else B.onload=()=>{C(B)},B.onerror=J});let E=new wI({resource:B,alphaMode:"premultiply-alpha-on-upload",resolution:Q.data?.resolution||LC(A),...Q.data});return BI(E,I,A)},unload(A){A.destroy(!0)}}});function CW(A,Q,I){if(I===void 0&&!Q.startsWith("data:"))A.crossOrigin=KW(Q);else if(I!==!1)A.crossOrigin=typeof I==="string"?I:"anonymous"}function JW(A){return new Promise((Q,I)=>{A.addEventListener("canplaythrough",B),A.addEventListener("error",E),A.load();function B(){C(),Q()}function E(J){C(),I(J)}function C(){A.removeEventListener("canplaythrough",B),A.removeEventListener("error",E)}})}function KW(A,Q=globalThis.location){if(A.startsWith("data:"))return"";Q||(Q=globalThis.location);let I=new URL(A,document.baseURI);if(I.hostname!==Q.hostname||I.port!==Q.port||I.protocol!==Q.protocol)return"anonymous";return""}function mg(){let A=[],Q=[];for(let I of xg){let B=WE.MIME_TYPES[I.substring(1)]||`video/${I.substring(1)}`;if(oB(B)){if(A.push(I),!Q.includes(B))Q.push(B)}}return{validVideoExtensions:A,validVideoMime:Q}}var xg,BW,EW,yU;var vU=Y(()=>{M();tH();rH();X8();g0();gE();OI();sB();xg=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];yU={name:"loadVideo",id:"video",extension:{type:N.LoadParser,name:"loadVideo"},test(A){if(!BW||!EW){let{validVideoExtensions:B,validVideoMime:E}=mg();BW=B,EW=E}let Q=FI(A,EW),I=CQ(A,BW);return Q||I},async load(A,Q,I){let B={...WE.defaultOptions,resolution:Q.data?.resolution||LC(A),alphaMode:Q.data?.alphaMode||await kJ(),...Q.data},E=document.createElement("video"),C={preload:B.autoLoad!==!1?"auto":void 0,"webkit-playsinline":B.playsinline!==!1?"":void 0,playsinline:B.playsinline!==!1?"":void 0,muted:B.muted===!0?"":void 0,loop:B.loop===!0?"":void 0,autoplay:B.autoPlay!==!1?"":void 0};if(Object.keys(C).forEach((H)=>{let Z=C[H];if(Z!==void 0)E.setAttribute(H,Z)}),B.muted===!0)E.muted=!0;CW(E,A,B.crossorigin);let J=document.createElement("source"),K;if(B.mime)K=B.mime;else if(A.startsWith("data:"))K=A.slice(5,A.indexOf(";"));else if(!A.startsWith("blob:")){let H=A.split("?")[0].slice(A.lastIndexOf(".")+1).toLowerCase();K=WE.MIME_TYPES[H]||`video/${H}`}if(J.src=A,K)J.type=K;return new Promise((H,Z)=>{if(B.preload&&!B.autoPlay)E.load();E.addEventListener("canplay",q),E.addEventListener("error",w),J.addEventListener("error",w),E.appendChild(J);async function q(){let U=new WE({...B,resource:E});if($(),Q.data.preload)await JW(E);H(BI(U,I,A))}function w(U){$(),Z(U)}function $(){E.removeEventListener("canplay",q),E.removeEventListener("error",w),J.removeEventListener("error",w)}})},unload(A){A.destroy(!0)}}});var G8;var K9=Y(()=>{M();J9();DE();G8={extension:{type:N.ResolveParser,name:"resolveTexture"},test:O8.test,parse:(A)=>({resolution:parseFloat(eQ.RETINA_PREFIX.exec(A)?.[1]??"1"),format:A.split(".").pop(),src:A})}});var TU;var hU=Y(()=>{M();DE();K9();TU={extension:{type:N.ResolveParser,priority:-2,name:"resolveJson"},test:(A)=>eQ.RETINA_PREFIX.test(A)&&A.endsWith(".json"),parse:G8.parse}});class xU{constructor(){this._detections=[],this._initialized=!1,this.resolver=new eQ,this.loader=new OU,this.cache=LA,this._backgroundLoader=new I9(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(A={}){if(this._initialized){n("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,A.defaultSearchParams)this.resolver.setDefaultSearchParams(A.defaultSearchParams);if(A.basePath)this.resolver.basePath=A.basePath;if(A.bundleIdentifier)this.resolver.setBundleIdentifier(A.bundleIdentifier);if(A.manifest){let E=A.manifest;if(typeof E==="string")E=await this.load(E);this.resolver.addManifest(E)}let Q=A.texturePreference?.resolution??1,I=typeof Q==="number"?[Q]:Q,B=await this._detectFormats({preferredFormats:A.texturePreference?.format,skipDetections:A.skipDetections,detections:this._detections});if(this.resolver.prefer({params:{format:B,resolution:I}}),A.preferences)this.setPreferences(A.preferences);if(A.loadOptions)this.loader.loadOptions={...this.loader.loadOptions,...A.loadOptions}}add(A){this.resolver.add(A)}async load(A,Q){if(!this._initialized)await this.init();let I=zE(A),B=iQ(A).map((J)=>{if(typeof J!=="string"){let K=this.resolver.getAlias(J);if(K.some((H)=>!this.resolver.hasKey(H)))this.add(J);return Array.isArray(K)?K[0]:K}if(!this.resolver.hasKey(J))this.add({alias:J,src:J});return J}),E=this.resolver.resolve(B),C=await this._mapLoadToResolve(E,Q);return I?C[B[0]]:C}addBundle(A,Q){this.resolver.addBundle(A,Q)}async loadBundle(A,Q){if(!this._initialized)await this.init();let I=!1;if(typeof A==="string")I=!0,A=[A];let B=this.resolver.resolveBundle(A),E={},C=Object.keys(B),J=0,K=[],H=()=>{Q?.(K.reduce((q,w)=>q+w,0)/J)},Z=C.map((q,w)=>{let $=B[q],U=Object.values($),z=[...new Set(U.flat())].reduce((D,W)=>D+(W.progressSize||1),0);return K.push(0),J+=z,this._mapLoadToResolve($,(D)=>{K[w]=D*z,H()}).then((D)=>{E[q]=D})});return await Promise.all(Z),I?E[A[0]]:E}async backgroundLoad(A){if(!this._initialized)await this.init();if(typeof A==="string")A=[A];let Q=this.resolver.resolve(A);this._backgroundLoader.add(Object.values(Q))}async backgroundLoadBundle(A){if(!this._initialized)await this.init();if(typeof A==="string")A=[A];let Q=this.resolver.resolveBundle(A);Object.values(Q).forEach((I)=>{this._backgroundLoader.add(Object.values(I))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(A){if(typeof A==="string")return LA.get(A);let Q={};for(let I=0;I<A.length;I++)Q[I]=LA.get(A[I]);return Q}async _mapLoadToResolve(A,Q){let I=[...new Set(Object.values(A))];this._backgroundLoader.active=!1;let B=await this.loader.load(I,Q);this._backgroundLoader.active=!0;let E={};return I.forEach((C)=>{let J=B[C.src],K=[C.src];if(C.alias)K.push(...C.alias);K.forEach((H)=>{E[H]=J}),LA.set(K,J)}),E}async unload(A){if(!this._initialized)await this.init();let Q=iQ(A).map((B)=>typeof B!=="string"?B.src:B),I=this.resolver.resolve(Q);await this._unloadFromResolved(I)}async unloadBundle(A){if(!this._initialized)await this.init();A=iQ(A);let Q=this.resolver.resolveBundle(A),I=Object.keys(Q).map((B)=>this._unloadFromResolved(Q[B]));await Promise.all(I)}async _unloadFromResolved(A){let Q=Object.values(A);Q.forEach((I)=>{LA.remove(I.src)}),await this.loader.unload(Q)}async _detectFormats(A){let Q=[];if(A.preferredFormats)Q=Array.isArray(A.preferredFormats)?A.preferredFormats:[A.preferredFormats];for(let I of A.detections)if(A.skipDetections||await I.test())Q=await I.add(Q);else if(!A.skipDetections)Q=await I.remove(Q);return Q=Q.filter((I,B)=>Q.indexOf(I)===B),Q}get detections(){return this._detections}setPreferences(A){this.loader.parsers.forEach((Q)=>{if(!Q.config)return;Object.keys(Q.config).filter((I)=>(I in A)).forEach((I)=>{Q.config[I]=A[I]})})}}var j8,lO;var HW=Y(()=>{M();KU();_A();HU();lI();qU();YU();UU();NU();DU();XU();FU();GU();LU();PU();gU();SU();J9();vU();hU();K9();DE();rC();UJ();j8=new xU;p.handleByList(N.LoadParser,j8.loader.parsers).handleByList(N.ResolveParser,j8.resolver.parsers).handleByList(N.CacheParser,j8.cache.parsers).handleByList(N.DetectionParser,j8.detections);p.add(ZU,$U,wU,kU,VU,zU,WU,jU,RU,MU,_U,O8,yU,JU,CU,G8,TU);lO={loader:N.LoadParser,resolver:N.ResolveParser,cache:N.CacheParser,detection:N.DetectionParser};p.handle(N.Asset,(A)=>{let Q=A.ref;Object.entries(lO).filter(([I])=>!!Q[I]).forEach(([I,B])=>p.add(Object.assign(Q[I],{extension:Q[I].extension??B})))},(A)=>{let Q=A.ref;Object.keys(lO).filter((I)=>!!Q[I]).forEach((I)=>p.remove(Q[I]))})});var iO=Y(()=>{HW();HU();lI();qU();YU();UU();NU();DU();XU();FU();B9();g0();GU();kI();LU();PU();gU();SU();J9();vU();sB();fU();hU();K9();DE();gE();OI();rC();oH();O5();UJ()});var nO=Y(()=>{IQ()});var oO;var ZW=Y(()=>{M();C0();J0();oO={extension:{type:N.DetectionParser,priority:3},test:async()=>{if(await mB())return!0;if(xB())return!0;return!1},add:async(A)=>[...A,"basis"],remove:async(A)=>A.filter((Q)=>Q!=="basis")}});var FB;var _0=Y(()=>{WQ();FB=class FB extends GA{constructor(A){super({...A,mipLevelCount:A.resource.length});this.uploadMethodId="compressed"}}});function H9(){if(mU)return mU;let Q=u.get().createCanvas(1,1).getContext("webgl");if(!Q)return[];return mU=[...Q.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...Q.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...Q.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...Q.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...Q.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...Q.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],mU}var mU;var cU=Y(()=>{jA()});async function Z9(){if(dU)return dU;let A=await u.get().getNavigator().gpu.requestAdapter();return dU=[...A.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...A.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...A.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],dU}var dU;var pU=Y(()=>{jA()});async function L8(){if(uU!==void 0)return uU;return uU=await(async()=>{let A=await mB(),Q=xB();if(A&&Q){let I=await Z9(),B=H9();return I.filter((E)=>B.includes(E))}else if(A)return await Z9();else if(Q)return H9();return[]})(),uU}var uU;var q9=Y(()=>{C0();J0();cU();pU()});async function aB(){if(lU!==void 0)return lU;let A=await L8();return lU=[...qW,...A],lU}var qW,lU;var S0=Y(()=>{q9();qW=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"]});class iU{constructor(){if(!R8)R8=URL.createObjectURL(new Blob([`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl) settings.jsUrl = jsUrl;
      if (wasmUrl) settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = (async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    });

})();
`],{type:"application/javascript"}));this.worker=new Worker(R8)}}var R8=null;var sO=Y(()=>{iU.revokeObjectURL=function A(){if(R8)URL.revokeObjectURL(R8),R8=null}});var w9;var nU=Y(()=>{w9={jsUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.js",wasmUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.wasm"}});function cg(A){if(!Y9)Y9=new iU().worker,Y9.onmessage=(Q)=>{let{success:I,url:B,textureOptions:E}=Q.data;if(!I)console.warn("Failed to load Basis texture",B);aO[B](E)},Y9.postMessage({type:"init",jsUrl:w9.jsUrl,wasmUrl:w9.wasmUrl,supportedTextures:A});return Y9}function oU(A,Q){let I=cg(Q);return new Promise((B)=>{aO[A]=B,I.postMessage({type:"load",url:A})})}var Y9,aO;var sU=Y(()=>{sO();nU();aO={}});var rO;var wW=Y(()=>{kI();sB();OI();M();_0();S0();sU();rO={extension:{type:N.LoadParser,priority:QQ.High,name:"loadBasis"},name:"loadBasis",id:"basis",test(A){return CQ(A,[".basis"])},async load(A,Q,I){let B=await aB(),E=await oU(A,B),C=new FB(E);return BI(C,I,A)},unload(A){if(Array.isArray(A))A.forEach((Q)=>Q.destroy(!0));else A.destroy(!0)}}});var YW=()=>{};var $W=()=>{};function cQ(A){return A.charCodeAt(0)+(A.charCodeAt(1)<<8)+(A.charCodeAt(2)<<16)+(A.charCodeAt(3)<<24)}var dg,pg,aU,rU,NI,$9,EI,wA,tU;var eU=Y(()=>{dg={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},pg={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},aU=((A)=>{return A[A.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",A[A.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",A[A.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",A[A.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",A[A.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",A[A.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",A[A.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",A[A.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",A[A.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",A[A.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",A[A.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",A[A.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",A[A.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",A[A.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",A[A.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",A[A.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",A[A.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",A[A.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",A[A.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",A[A.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",A[A.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",A[A.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",A[A.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",A[A.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",A[A.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",A[A.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",A[A.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",A[A.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",A[A.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",A[A.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",A[A.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",A[A.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",A[A.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",A[A.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",A[A.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",A[A.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",A[A.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",A[A.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",A[A.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",A[A.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",A[A.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",A[A.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",A[A.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",A[A.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",A[A.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",A[A.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",A[A.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",A[A.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",A[A.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",A[A.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",A[A.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",A[A.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",A[A.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",A[A.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",A[A.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",A[A.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",A[A.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",A[A.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",A[A.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",A[A.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",A[A.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",A[A.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",A[A.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",A[A.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",A[A.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",A[A.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",A[A.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",A[A.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",A[A.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",A[A.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",A[A.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",A[A.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",A[A.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",A[A.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",A[A.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",A[A.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",A[A.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",A[A.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",A[A.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",A[A.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",A[A.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",A[A.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",A[A.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",A[A.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",A[A.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",A[A.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",A[A.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",A[A.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",A[A.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",A[A.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",A[A.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",A[A.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",A[A.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",A[A.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",A[A.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",A[A.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",A[A.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",A[A.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",A[A.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",A[A.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",A[A.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",A[A.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",A[A.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",A[A.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",A[A.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",A[A.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",A[A.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",A[A.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",A[A.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",A[A.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",A[A.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",A[A.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",A[A.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",A[A.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",A[A.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",A[A.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",A[A.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",A[A.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",A[A.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",A[A.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",A[A.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",A[A.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",A})(aU||{}),rU=((A)=>{return A[A.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",A[A.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",A[A.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",A})(rU||{});NI=((A)=>{return A[A.UNKNOWN=0]="UNKNOWN",A[A.R8G8B8=20]="R8G8B8",A[A.A8R8G8B8=21]="A8R8G8B8",A[A.X8R8G8B8=22]="X8R8G8B8",A[A.R5G6B5=23]="R5G6B5",A[A.X1R5G5B5=24]="X1R5G5B5",A[A.A1R5G5B5=25]="A1R5G5B5",A[A.A4R4G4B4=26]="A4R4G4B4",A[A.R3G3B2=27]="R3G3B2",A[A.A8=28]="A8",A[A.A8R3G3B2=29]="A8R3G3B2",A[A.X4R4G4B4=30]="X4R4G4B4",A[A.A2B10G10R10=31]="A2B10G10R10",A[A.A8B8G8R8=32]="A8B8G8R8",A[A.X8B8G8R8=33]="X8B8G8R8",A[A.G16R16=34]="G16R16",A[A.A2R10G10B10=35]="A2R10G10B10",A[A.A16B16G16R16=36]="A16B16G16R16",A[A.A8P8=40]="A8P8",A[A.P8=41]="P8",A[A.L8=50]="L8",A[A.A8L8=51]="A8L8",A[A.A4L4=52]="A4L4",A[A.V8U8=60]="V8U8",A[A.L6V5U5=61]="L6V5U5",A[A.X8L8V8U8=62]="X8L8V8U8",A[A.Q8W8V8U8=63]="Q8W8V8U8",A[A.V16U16=64]="V16U16",A[A.A2W10V10U10=67]="A2W10V10U10",A[A.Q16W16V16U16=110]="Q16W16V16U16",A[A.R16F=111]="R16F",A[A.G16R16F=112]="G16R16F",A[A.A16B16G16R16F=113]="A16B16G16R16F",A[A.R32F=114]="R32F",A[A.G32R32F=115]="G32R32F",A[A.A32B32G32R32F=116]="A32B32G32R32F",A[A.UYVY=cQ("UYVY")]="UYVY",A[A.R8G8_B8G8=cQ("RGBG")]="R8G8_B8G8",A[A.YUY2=cQ("YUY2")]="YUY2",A[A.D3DFMT_G8R8_G8B8=cQ("GRGB")]="D3DFMT_G8R8_G8B8",A[A.DXT1=cQ("DXT1")]="DXT1",A[A.DXT2=cQ("DXT2")]="DXT2",A[A.DXT3=cQ("DXT3")]="DXT3",A[A.DXT4=cQ("DXT4")]="DXT4",A[A.DXT5=cQ("DXT5")]="DXT5",A[A.ATI1=cQ("ATI1")]="ATI1",A[A.AT1N=cQ("AT1N")]="AT1N",A[A.ATI2=cQ("ATI2")]="ATI2",A[A.AT2N=cQ("AT2N")]="AT2N",A[A.BC4U=cQ("BC4U")]="BC4U",A[A.BC4S=cQ("BC4S")]="BC4S",A[A.BC5U=cQ("BC5U")]="BC5U",A[A.BC5S=cQ("BC5S")]="BC5S",A[A.DX10=cQ("DX10")]="DX10",A})(NI||{}),$9={[NI.DXT1]:"bc1-rgba-unorm",[NI.DXT2]:"bc2-rgba-unorm",[NI.DXT3]:"bc2-rgba-unorm",[NI.DXT4]:"bc3-rgba-unorm",[NI.DXT5]:"bc3-rgba-unorm",[NI.ATI1]:"bc4-r-unorm",[NI.BC4U]:"bc4-r-unorm",[NI.BC4S]:"bc4-r-snorm",[NI.ATI2]:"bc5-rg-unorm",[NI.BC5U]:"bc5-rg-unorm",[NI.BC5S]:"bc5-rg-snorm",[36]:"rgba16uint",[110]:"rgba16sint",[111]:"r16float",[112]:"rg16float",[113]:"rgba16float",[114]:"r32float",[115]:"rg32float",[116]:"rgba32float"},EI={[70]:"bc1-rgba-unorm",[71]:"bc1-rgba-unorm",[72]:"bc1-rgba-unorm-srgb",[73]:"bc2-rgba-unorm",[74]:"bc2-rgba-unorm",[75]:"bc2-rgba-unorm-srgb",[76]:"bc3-rgba-unorm",[77]:"bc3-rgba-unorm",[78]:"bc3-rgba-unorm-srgb",[79]:"bc4-r-unorm",[80]:"bc4-r-unorm",[81]:"bc4-r-snorm",[82]:"bc5-rg-unorm",[83]:"bc5-rg-unorm",[84]:"bc5-rg-snorm",[94]:"bc6h-rgb-ufloat",[95]:"bc6h-rgb-ufloat",[96]:"bc6h-rgb-float",[97]:"bc7-rgba-unorm",[98]:"bc7-rgba-unorm",[99]:"bc7-rgba-unorm-srgb",[28]:"rgba8unorm",[29]:"rgba8unorm-srgb",[87]:"bgra8unorm",[91]:"bgra8unorm-srgb",[41]:"r32float",[49]:"rg8unorm",[56]:"r16uint",[61]:"r8unorm",[24]:"rgb10a2unorm",[11]:"rgba16uint",[13]:"rgba16sint",[10]:"rgba16float",[54]:"r16float",[34]:"rg16float",[16]:"rg32float",[2]:"rgba32float"},wA={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:dg,HEADER_DX10_FIELDS:pg,DXGI_FORMAT:aU,D3D10_RESOURCE_DIMENSION:rU,D3DFMT:NI},tU={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16}});function AV(A,Q){let{format:I,fourCC:B,width:E,height:C,dataOffset:J,mipmapCount:K}=lg(A);if(!Q.includes(I))throw new Error(`Unsupported texture format: ${B} ${I}, supported: ${Q}`);if(K<=1)return{format:I,width:E,height:C,resource:[new Uint8Array(A,J)],alphaMode:"no-premultiply-alpha"};let H=ug(I,E,C,J,K,A);return{format:I,width:E,height:C,resource:H,alphaMode:"no-premultiply-alpha"}}function ug(A,Q,I,B,E,C){let J=[],K=tU[A],H=Q,Z=I,q=B;for(let w=0;w<E;++w){let $=Math.ceil(Math.max(4,H)/4)*4,U=Math.ceil(Math.max(4,Z)/4)*4,V=K?$/4*U/4*K:H*Z*4,z=new Uint8Array(C,q,V);J.push(z),q+=V,H=Math.max(H>>1,1),Z=Math.max(Z>>1,1)}return J}function lg(A){let Q=new Uint32Array(A,0,wA.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(Q[wA.HEADER_FIELDS.MAGIC]!==wA.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let I=Q[wA.HEADER_FIELDS.HEIGHT],B=Q[wA.HEADER_FIELDS.WIDTH],E=Math.max(1,Q[wA.HEADER_FIELDS.MIPMAP_COUNT]),C=Q[wA.HEADER_FIELDS.PF_FLAGS],J=Q[wA.HEADER_FIELDS.FOURCC],K=ig(Q,C,J,A),H=wA.MAGIC_SIZE+wA.HEADER_SIZE+(J===wA.D3DFMT.DX10?wA.HEADER_DX10_SIZE:0);return{format:K,fourCC:J,width:B,height:I,dataOffset:H,mipmapCount:E}}function ig(A,Q,I,B){if(Q&wA.PIXEL_FORMAT_FLAGS.FOURCC){if(I===wA.D3DFMT.DX10){let E=new Uint32Array(B,wA.MAGIC_SIZE+wA.HEADER_SIZE,wA.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(E[wA.HEADER_DX10_FIELDS.MISC_FLAG]===wA.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(E[wA.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===wA.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let K=E[wA.HEADER_DX10_FIELDS.DXGI_FORMAT];if(K in EI)return EI[K];throw new Error(`DDSParser cannot parse texture data with DXGI format ${K}`)}if(I in $9)return $9[I];throw new Error(`DDSParser cannot parse texture data with fourCC format ${I}`)}if(Q&wA.PIXEL_FORMAT_FLAGS.RGB||Q&wA.PIXEL_FORMAT_FLAGS.RGBA)return ng(A);if(Q&wA.PIXEL_FORMAT_FLAGS.YUV)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(Q&wA.PIXEL_FORMAT_FLAGS.LUMINANCE||Q&wA.PIXEL_FORMAT_FLAGS.LUMINANCEA)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(Q&wA.PIXEL_FORMAT_FLAGS.ALPHA||Q&wA.PIXEL_FORMAT_FLAGS.ALPHAPIXELS)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}function ng(A){let Q=A[wA.HEADER_FIELDS.RGB_BITCOUNT],I=A[wA.HEADER_FIELDS.R_BIT_MASK],B=A[wA.HEADER_FIELDS.G_BIT_MASK],E=A[wA.HEADER_FIELDS.B_BIT_MASK],C=A[wA.HEADER_FIELDS.A_BIT_MASK];switch(Q){case 32:if(I===255&&B===65280&&E===16711680&&C===4278190080)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(I===16711680&&B===65280&&E===255&&C===4278190080)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(I===1072693248&&B===1047552&&E===1023&&C===3221225472)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(I===65535&&B===4294901760&&E===0&&C===0)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(I===4294967295&&B===0&&E===0&&C===0)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(I===31744&&B===992&&E===31&&C===32768)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(I===63488&&B===2016&&E===31&&C===0)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(I===3840&&B===240&&E===15&&C===61440)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(I===255&&B===0&&E===0&&C===65280)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(I===65535&&B===0&&E===0&&C===0)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(I===255&&B===0&&E===0&&C===0)return EI[wA.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${Q}, rBitMask = ${I}, gBitMask = ${B}, aBitMask = ${C}`)}var QV=Y(()=>{eU()});var tO;var UW=Y(()=>{kI();sB();OI();M();_0();S0();QV();tO={extension:{type:N.LoadParser,priority:QQ.High,name:"loadDDS"},name:"loadDDS",id:"dds",test(A){return CQ(A,[".dds"])},async load(A,Q,I){let B=await aB(),C=await(await fetch(A)).arrayBuffer(),J=AV(C,B),K=new FB(J);return BI(K,I,A)},unload(A){if(Array.isArray(A))A.forEach((Q)=>Q.destroy(!0));else A.destroy(!0)}}});var og,sg,ag,rg=64,tg=67305985,eg,A_,Q_,I_,JQ;var IV=Y(()=>{og={[33776]:"bc1-rgba-unorm",[33777]:"bc1-rgba-unorm",[33778]:"bc2-rgba-unorm",[33779]:"bc3-rgba-unorm",[35916]:"bc1-rgba-unorm-srgb",[35917]:"bc1-rgba-unorm-srgb",[35918]:"bc2-rgba-unorm-srgb",[35919]:"bc3-rgba-unorm-srgb",[36283]:"bc4-r-unorm",[36284]:"bc4-r-snorm",[36285]:"bc5-rg-unorm",[36286]:"bc5-rg-snorm",[37488]:"eac-r11unorm",[37490]:"eac-rg11snorm",[37492]:"etc2-rgb8unorm",[37496]:"etc2-rgba8unorm",[37493]:"etc2-rgb8unorm-srgb",[37497]:"etc2-rgba8unorm-srgb",[37494]:"etc2-rgb8a1unorm",[37495]:"etc2-rgb8a1unorm-srgb",[37808]:"astc-4x4-unorm",[37840]:"astc-4x4-unorm-srgb",[37809]:"astc-5x4-unorm",[37841]:"astc-5x4-unorm-srgb",[37810]:"astc-5x5-unorm",[37842]:"astc-5x5-unorm-srgb",[37811]:"astc-6x5-unorm",[37843]:"astc-6x5-unorm-srgb",[37812]:"astc-6x6-unorm",[37844]:"astc-6x6-unorm-srgb",[37813]:"astc-8x5-unorm",[37845]:"astc-8x5-unorm-srgb",[37814]:"astc-8x6-unorm",[37846]:"astc-8x6-unorm-srgb",[37815]:"astc-8x8-unorm",[37847]:"astc-8x8-unorm-srgb",[37816]:"astc-10x5-unorm",[37848]:"astc-10x5-unorm-srgb",[37817]:"astc-10x6-unorm",[37849]:"astc-10x6-unorm-srgb",[37818]:"astc-10x8-unorm",[37850]:"astc-10x8-unorm-srgb",[37819]:"astc-10x10-unorm",[37851]:"astc-10x10-unorm-srgb",[37820]:"astc-12x10-unorm",[37852]:"astc-12x10-unorm-srgb",[37821]:"astc-12x12-unorm",[37853]:"astc-12x12-unorm-srgb",[36492]:"bc7-rgba-unorm",[36493]:"bc7-rgba-unorm-srgb",[36494]:"bc6h-rgb-float",[36495]:"bc6h-rgb-ufloat",[35907]:"rgba8unorm-srgb",[36759]:"rgba8snorm",[36220]:"rgba8uint",[36238]:"rgba8sint",[6408]:"rgba8unorm"},sg=[171,75,84,88,32,49,49,187,13,10,26,10],ag={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},eg={[5121]:1,[5123]:2,[5124]:4,[5125]:4,[5126]:4,[36193]:8},A_={[6408]:4,[6407]:3,[33319]:2,[6403]:1,[6409]:1,[6410]:2,[6406]:1},Q_={[32819]:2,[32820]:2,[33635]:2},I_={[33776]:0.5,[33777]:0.5,[33778]:1,[33779]:1,[35916]:0.5,[35917]:0.5,[35918]:1,[35919]:1,[36283]:0.5,[36284]:0.5,[36285]:1,[36286]:1,[37488]:0.5,[37489]:0.5,[37490]:1,[37491]:1,[37492]:0.5,[37496]:1,[37493]:0.5,[37497]:1,[37494]:0.5,[37495]:0.5,[37808]:1,[37840]:1,[37809]:0.8,[37841]:0.8,[37810]:0.64,[37842]:0.64,[37811]:0.53375,[37843]:0.53375,[37812]:0.445,[37844]:0.445,[37813]:0.4,[37845]:0.4,[37814]:0.33375,[37846]:0.33375,[37815]:0.25,[37847]:0.25,[37816]:0.32,[37848]:0.32,[37817]:0.26625,[37849]:0.26625,[37818]:0.2,[37850]:0.2,[37819]:0.16,[37851]:0.16,[37820]:0.13375,[37852]:0.13375,[37821]:0.11125,[37853]:0.11125,[36492]:1,[36493]:1,[36494]:1,[36495]:1},JQ={FILE_HEADER_SIZE:rg,FILE_IDENTIFIER:sg,FORMATS_TO_COMPONENTS:A_,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:I_,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:og,FIELDS:ag,TYPES_TO_BYTES_PER_COMPONENT:eg,TYPES_TO_BYTES_PER_PIXEL:Q_,ENDIANNESS:tg}});function BV(A,Q){let I=new DataView(A);if(!J_(I))throw new Error("Invalid KTX identifier in header");let{littleEndian:B,glType:E,glFormat:C,glInternalFormat:J,pixelWidth:K,pixelHeight:H,numberOfMipmapLevels:Z,offset:q}=C_(I),w=JQ.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[J];if(!w)throw new Error(`Unknown texture format ${J}`);if(!Q.includes(w))throw new Error(`Unsupported texture format: ${w}, supportedFormats: ${Q}`);let $=E_(E,C,J),U=B_(I,E,$,K,H,q,Z,B);return{format:w,width:K,height:H,resource:U,alphaMode:"no-premultiply-alpha"}}function B_(A,Q,I,B,E,C,J,K){let H=B+3&-4,Z=E+3&-4,q=B*E;if(Q===0)q=H*Z;let w=q*I,$=B,U=E,V=H,z=Z,D=C,W=new Array(J);for(let j=0;j<J;j++){let O=A.getUint32(D,K),F=D+4;W[j]=new Uint8Array(A.buffer,F,w),F+=w,D+=O+4,D=D%4!==0?D+4-D%4:D,$=$>>1||1,U=U>>1||1,V=$+4-1&-4,z=U+4-1&-4,w=V*z*I}return W}function E_(A,Q,I){let B=JQ.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[I];if(A!==0)if(JQ.TYPES_TO_BYTES_PER_COMPONENT[A])B=JQ.TYPES_TO_BYTES_PER_COMPONENT[A]*JQ.FORMATS_TO_COMPONENTS[Q];else B=JQ.TYPES_TO_BYTES_PER_PIXEL[A];if(B===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return B}function C_(A){let Q=A.getUint32(JQ.FIELDS.ENDIANNESS,!0)===JQ.ENDIANNESS,I=A.getUint32(JQ.FIELDS.GL_TYPE,Q),B=A.getUint32(JQ.FIELDS.GL_FORMAT,Q),E=A.getUint32(JQ.FIELDS.GL_INTERNAL_FORMAT,Q),C=A.getUint32(JQ.FIELDS.PIXEL_WIDTH,Q),J=A.getUint32(JQ.FIELDS.PIXEL_HEIGHT,Q)||1,K=A.getUint32(JQ.FIELDS.PIXEL_DEPTH,Q)||1,H=A.getUint32(JQ.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,Q)||1,Z=A.getUint32(JQ.FIELDS.NUMBER_OF_FACES,Q),q=A.getUint32(JQ.FIELDS.NUMBER_OF_MIPMAP_LEVELS,Q),w=A.getUint32(JQ.FIELDS.BYTES_OF_KEY_VALUE_DATA,Q);if(J===0||K!==1)throw new Error("Only 2D textures are supported");if(Z!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(H!==1)throw new Error("WebGL does not support array textures");return{littleEndian:Q,glType:I,glFormat:B,glInternalFormat:E,pixelWidth:C,pixelHeight:J,numberOfMipmapLevels:q,offset:JQ.FILE_HEADER_SIZE+w}}function J_(A){for(let Q=0;Q<JQ.FILE_IDENTIFIER.length;Q++)if(A.getUint8(Q)!==JQ.FILE_IDENTIFIER[Q])return!1;return!0}var EV=Y(()=>{IV()});var eO;var VW=Y(()=>{kI();sB();OI();M();_0();S0();EV();eO={extension:{type:N.LoadParser,priority:QQ.High,name:"loadKTX"},name:"loadKTX",id:"ktx",test(A){return CQ(A,".ktx")},async load(A,Q,I){let B=await aB(),C=await(await fetch(A)).arrayBuffer(),J=BV(C,B),K=new FB(J);return BI(K,I,A)},unload(A){if(Array.isArray(A))A.forEach((Q)=>Q.destroy(!0));else A.destroy(!0)}}});class CV{constructor(){if(!P8)P8=URL.createObjectURL(new Blob([`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl) settings.jsUrl = jsUrl;
      if (wasmUrl) settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = (async (messageEvent) => {
      const message = messageEvent.data;
      try {
        const response = await messageHandlers[message.type]?.(message);
        if (response) {
          self.postMessage(response, response.transferables);
        }
      } catch (err) {
        self.postMessage({
          type: "error",
          err,
          url: message.url
        });
      }
    });

})();
`],{type:"application/javascript"}));this.worker=new Worker(P8)}}var P8=null;var AG=Y(()=>{CV.revokeObjectURL=function A(){if(P8)URL.revokeObjectURL(P8),P8=null}});var U9;var JV=Y(()=>{U9={jsUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.js",wasmUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.wasm"}});function K_(A){if(!V9)V9=new CV().worker,V9.onmessage=(Q)=>{let{err:I,success:B,url:E,textureOptions:C}=Q.data;if(I){IG[E](I);return}if(!B)console.warn("Failed to load KTX texture",E);QG[E](C)},V9.postMessage({type:"init",jsUrl:U9.jsUrl,wasmUrl:U9.wasmUrl,supportedTextures:A});return V9}function KV(A,Q){let I=K_(Q);return new Promise((B,E)=>{QG[A]=B,IG[A]=E,I.postMessage({type:"load",url:A})})}var V9,QG,IG;var HV=Y(()=>{AG();JV();QG={},IG={}});var BG;var NW=Y(()=>{kI();sB();OI();M();_0();S0();HV();BG={extension:{type:N.LoadParser,priority:QQ.High,name:"loadKTX2"},name:"loadKTX2",id:"ktx2",test(A){return CQ(A,".ktx2")},async load(A,Q,I){let B=await aB(),E=await KV(A,B),C=new FB(E);return BI(C,I,A)},async unload(A){if(Array.isArray(A))A.forEach((Q)=>Q.destroy(!0));else A.destroy(!0)}}});var zW=()=>{};var DW=()=>{};var ZV=()=>{};var qV=()=>{};var WW=Y(()=>{ZV();qV()});var XW=()=>{};var M8,JG;var wV=Y(()=>{DE();OI();M();M8=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],JG={extension:N.ResolveParser,test:(A)=>CQ(A,[".ktx",".ktx2",".dds"]),parse:(A)=>{let Q,I=A.split(".");if(I.length>2){let B=I[I.length-2];if(M8.includes(B))Q=B}else Q=I[I.length-1];return{resolution:parseFloat(eQ.RETINA_PREFIX.exec(A)?.[1]??"1"),format:Q,src:A}}}});function H_(A){let Q=["basis"],I={};return A.forEach((B)=>{let E=B.split("-")[0];if(E&&!I[E])I[E]=!0,Q.push(E)}),Q.sort((B,E)=>{let C=M8.indexOf(B),J=M8.indexOf(E);if(C===-1)return 1;if(J===-1)return-1;return C-J}),Q}var YV,KG;var kW=Y(()=>{M();q9();C0();J0();wV();KG={extension:{type:N.DetectionParser,priority:2},test:async()=>{if(await mB())return!0;if(xB())return!0;return!1},add:async(A)=>{let Q=await L8();return YV=H_(Q),[...YV,...A]},remove:async(A)=>{if(YV)return A.filter((Q)=>!(Q in YV));return A}}});var HG=Y(()=>{ZW();wW();YW();$W();nU();sU();eU();UW();QV();VW();EV();IV();NW();zW();DW();WW();ZV();XW();JV();qV();HV();kW();wV()});var D_,W_,N9,FW=class A{cull(Q,I,B=!0){this._cullRecursive(Q,I,B)}_cullRecursive(Q,I,B=!0){if(Q.cullable&&Q.measurable&&Q.includeInBuild)if(Q.cullArea){N9.x=I.x,N9.y=I.y,N9.width=I.width,N9.height=I.height;let E=B?Q.worldTransform:Q.getGlobalTransform(W_,B);Q.culled=!N9.intersects(Q.cullArea,E)}else{let E=MB(Q,B,D_);Q.culled=E.x>=I.x+I.width||E.y>=I.y+I.height||E.x+E.width<=I.x||E.y+E.height<=I.y}else Q.culled=!1;if(!Q.cullableChildren||Q.culled||!Q.renderable||!Q.measurable||!Q.includeInBuild)return;for(let E=0;E<Q.children.length;E++)this._cullRecursive(Q.children[E],I,B)}},$V;var UV=Y(()=>{NA();ZQ();_Q();pE();D_=new RA,W_=new x,N9=new EA;FW.shared=new FW;$V=FW});class VV{static init(A){this._renderRef=this.render.bind(this),this.render=()=>{let Q=A?.culler?.updateTransform!==!0;$V.shared.cull(this.stage,this.renderer.screen,Q),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}var OW=Y(()=>{M();UV();VV.extension={priority:10,type:N.Application,name:"culler"}});var ZG=Y(()=>{UV();OW();Pq()});class g8{constructor(A){this._attachedDomElements=[],this._renderer=A,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new sC({domElement:this._domElement,renderer:this._renderer})}addRenderable(A,Q){if(!this._attachedDomElements.includes(A))this._attachedDomElements.push(A)}updateRenderable(A){}validateRenderable(A){return!0}postrender(){let A=this._attachedDomElements;if(A.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let Q=0;Q<A.length;Q++){let I=A[Q],B=I.element;if(!I.parent||I.globalDisplayStatus<7)B?.remove(),A.splice(Q,1),Q--;else{if(!this._domElement.contains(B))B.style.position="absolute",B.style.pointerEvents="auto",this._domElement.appendChild(B);let{worldTransform:E,_anchor:C}=I,J=I.width*C.x,K=I.height*C.y;B.style.transformOrigin=`${J}px ${K}px`,B.style.transform=`matrix(${E.a}, ${E.b}, ${E.c}, ${E.d}, ${E.tx-J}, ${E.ty-K})`,B.style.opacity=I.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let A=0;A<this._attachedDomElements.length;A++)this._attachedDomElements[A].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}var NV=Y(()=>{M();mH();g8.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"dom"}});var GW=Y(()=>{M();aQ();uI();NV();p.add(g8)});var qG=Y(()=>{mH();GW();NV()});var wG=Y(()=>{jA();r7()});var YG=Y(()=>{k5();l2()});var z9=KQ((G_)=>{function F_(A,Q,I){if(I===void 0)I=Array.prototype;if(A&&typeof I.find==="function")return I.find.call(A,Q);for(var B=0;B<A.length;B++)if(Object.prototype.hasOwnProperty.call(A,B)){var E=A[B];if(Q.call(void 0,E,B,A))return E}}function jW(A,Q){if(Q===void 0)Q=Object;return Q&&typeof Q.freeze==="function"?Q.freeze(A):A}function O_(A,Q){if(A===null||typeof A!=="object")throw new TypeError("target is not an object");for(var I in Q)if(Object.prototype.hasOwnProperty.call(Q,I))A[I]=Q[I];return A}var $G=jW({HTML:"text/html",isHTML:function(A){return A===$G.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),UG=jW({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(A){return A===UG.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});G_.assign=O_;G_.find=F_;G_.freeze=jW;G_.MIME_TYPE=$G;G_.NAMESPACE=UG});var vW=KQ((p_)=>{var FG=z9(),rB=FG.find,D9=FG.NAMESPACE;function g_(A){return A!==""}function __(A){return A?A.split(/[\t\n\f\r ]+/).filter(g_):[]}function S_(A,Q){if(!A.hasOwnProperty(Q))A[Q]=!0;return A}function VG(A){if(!A)return[];var Q=__(A);return Object.keys(Q.reduce(S_,{}))}function b_(A){return function(Q){return A&&A.indexOf(Q)!==-1}}function k9(A,Q){for(var I in A)if(Object.prototype.hasOwnProperty.call(A,I))Q[I]=A[I]}function jI(A,Q){var I=A.prototype;if(!(I instanceof Q)){let E=function(){};var B=E;E.prototype=Q.prototype,E=new E,k9(I,E),A.prototype=I=E}if(I.constructor!=A){if(typeof A!="function")console.error("unknown Class:"+A);I.constructor=A}}var LI={},QB=LI.ELEMENT_NODE=1,S8=LI.ATTRIBUTE_NODE=2,zV=LI.TEXT_NODE=3,OG=LI.CDATA_SECTION_NODE=4,GG=LI.ENTITY_REFERENCE_NODE=5,f_=LI.ENTITY_NODE=6,jG=LI.PROCESSING_INSTRUCTION_NODE=7,LG=LI.COMMENT_NODE=8,RG=LI.DOCUMENT_NODE=9,PG=LI.DOCUMENT_TYPE_NODE=10,SE=LI.DOCUMENT_FRAGMENT_NODE=11,y_=LI.NOTATION_NODE=12,CI={},dQ={},$5A=CI.INDEX_SIZE_ERR=(dQ[1]="Index size error",1),U5A=CI.DOMSTRING_SIZE_ERR=(dQ[2]="DOMString size error",2),GI=CI.HIERARCHY_REQUEST_ERR=(dQ[3]="Hierarchy request error",3),V5A=CI.WRONG_DOCUMENT_ERR=(dQ[4]="Wrong document",4),N5A=CI.INVALID_CHARACTER_ERR=(dQ[5]="Invalid character",5),z5A=CI.NO_DATA_ALLOWED_ERR=(dQ[6]="No data allowed",6),D5A=CI.NO_MODIFICATION_ALLOWED_ERR=(dQ[7]="No modification allowed",7),MG=CI.NOT_FOUND_ERR=(dQ[8]="Not found",8),W5A=CI.NOT_SUPPORTED_ERR=(dQ[9]="Not supported",9),NG=CI.INUSE_ATTRIBUTE_ERR=(dQ[10]="Attribute in use",10),X5A=CI.INVALID_STATE_ERR=(dQ[11]="Invalid state",11),k5A=CI.SYNTAX_ERR=(dQ[12]="Syntax error",12),F5A=CI.INVALID_MODIFICATION_ERR=(dQ[13]="Invalid modification",13),O5A=CI.NAMESPACE_ERR=(dQ[14]="Invalid namespace",14),G5A=CI.INVALID_ACCESS_ERR=(dQ[15]="Invalid access",15);function LQ(A,Q){if(Q instanceof Error)var I=Q;else if(I=this,Error.call(this,dQ[A]),this.message=dQ[A],Error.captureStackTrace)Error.captureStackTrace(this,LQ);if(I.code=A,Q)this.message=this.message+": "+Q;return I}LQ.prototype=Error.prototype;k9(CI,LQ);function _E(){}_E.prototype={length:0,item:function(A){return A>=0&&A<this.length?this[A]:null},toString:function(A,Q){for(var I=[],B=0;B<this.length;B++)_8(this[B],I,A,Q);return I.join("")},filter:function(A){return Array.prototype.filter.call(this,A)},indexOf:function(A){return Array.prototype.indexOf.call(this,A)}};function b8(A,Q){this._node=A,this._refresh=Q,PW(this)}function PW(A){var Q=A._node._inc||A._node.ownerDocument._inc;if(A._inc!==Q){var I=A._refresh(A._node);if(cG(A,"length",I.length),!A.$$length||I.length<A.$$length){for(var B=I.length;B in A;B++)if(Object.prototype.hasOwnProperty.call(A,B))delete A[B]}k9(I,A),A._inc=Q}}b8.prototype.item=function(A){return PW(this),this[A]||null};jI(b8,_E);function DV(){}function gG(A,Q){var I=A.length;while(I--)if(A[I]===Q)return I}function zG(A,Q,I,B){if(B)Q[gG(Q,B)]=I;else Q[Q.length++]=I;if(A){I.ownerElement=A;var E=A.ownerDocument;if(E)B&&bG(E,A,B),v_(E,A,I)}}function DG(A,Q,I){var B=gG(Q,I);if(B>=0){var E=Q.length-1;while(B<E)Q[B]=Q[++B];if(Q.length=E,A){var C=A.ownerDocument;if(C)bG(C,A,I),I.ownerElement=null}}else throw new LQ(MG,new Error(A.tagName+"@"+I))}DV.prototype={length:0,item:_E.prototype.item,getNamedItem:function(A){var Q=this.length;while(Q--){var I=this[Q];if(I.nodeName==A)return I}},setNamedItem:function(A){var Q=A.ownerElement;if(Q&&Q!=this._ownerElement)throw new LQ(NG);var I=this.getNamedItem(A.nodeName);return zG(this._ownerElement,this,A,I),I},setNamedItemNS:function(A){var Q=A.ownerElement,I;if(Q&&Q!=this._ownerElement)throw new LQ(NG);return I=this.getNamedItemNS(A.namespaceURI,A.localName),zG(this._ownerElement,this,A,I),I},removeNamedItem:function(A){var Q=this.getNamedItem(A);return DG(this._ownerElement,this,Q),Q},removeNamedItemNS:function(A,Q){var I=this.getNamedItemNS(A,Q);return DG(this._ownerElement,this,I),I},getNamedItemNS:function(A,Q){var I=this.length;while(I--){var B=this[I];if(B.localName==Q&&B.namespaceURI==A)return B}return null}};function _G(){}_G.prototype={hasFeature:function(A,Q){return!0},createDocument:function(A,Q,I){var B=new F9;if(B.implementation=this,B.childNodes=new _E,B.doctype=I||null,I)B.appendChild(I);if(Q){var E=B.createElementNS(A,Q);B.appendChild(E)}return B},createDocumentType:function(A,Q,I){var B=new kV;return B.name=A,B.nodeName=A,B.publicId=Q||"",B.systemId=I||"",B}};function uA(){}uA.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(A,Q){return WV(this,A,Q)},replaceChild:function(A,Q){if(WV(this,A,Q,yG),Q)this.removeChild(Q)},removeChild:function(A){return fG(this,A)},appendChild:function(A){return this.insertBefore(A,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(A){return RW(this.ownerDocument||this,this,A)},normalize:function(){var A=this.firstChild;while(A){var Q=A.nextSibling;if(Q&&Q.nodeType==zV&&A.nodeType==zV)this.removeChild(Q),A.appendData(Q.data);else A.normalize(),A=Q}},isSupported:function(A,Q){return this.ownerDocument.implementation.hasFeature(A,Q)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(A){var Q=this;while(Q){var I=Q._nsMap;if(I){for(var B in I)if(Object.prototype.hasOwnProperty.call(I,B)&&I[B]===A)return B}Q=Q.nodeType==S8?Q.ownerDocument:Q.parentNode}return null},lookupNamespaceURI:function(A){var Q=this;while(Q){var I=Q._nsMap;if(I){if(Object.prototype.hasOwnProperty.call(I,A))return I[A]}Q=Q.nodeType==S8?Q.ownerDocument:Q.parentNode}return null},isDefaultNamespace:function(A){var Q=this.lookupPrefix(A);return Q==null}};function SG(A){return A=="<"&&"&lt;"||A==">"&&"&gt;"||A=="&"&&"&amp;"||A=='"'&&"&quot;"||"&#"+A.charCodeAt()+";"}k9(LI,uA);k9(LI,uA.prototype);function W9(A,Q){if(Q(A))return!0;if(A=A.firstChild)do if(W9(A,Q))return!0;while(A=A.nextSibling)}function F9(){this.ownerDocument=this}function v_(A,Q,I){A&&A._inc++;var B=I.namespaceURI;if(B===D9.XMLNS)Q._nsMap[I.prefix?I.localName:""]=I.value}function bG(A,Q,I,B){A&&A._inc++;var E=I.namespaceURI;if(E===D9.XMLNS)delete Q._nsMap[I.prefix?I.localName:""]}function MW(A,Q,I){if(A&&A._inc){A._inc++;var B=Q.childNodes;if(I)B[B.length++]=I;else{var E=Q.firstChild,C=0;while(E)B[C++]=E,E=E.nextSibling;B.length=C,delete B[B.length]}}}function fG(A,Q){var{previousSibling:I,nextSibling:B}=Q;if(I)I.nextSibling=B;else A.firstChild=B;if(B)B.previousSibling=I;else A.lastChild=I;return Q.parentNode=null,Q.previousSibling=null,Q.nextSibling=null,MW(A.ownerDocument,A),Q}function T_(A){return A&&(A.nodeType===uA.DOCUMENT_NODE||A.nodeType===uA.DOCUMENT_FRAGMENT_NODE||A.nodeType===uA.ELEMENT_NODE)}function h_(A){return A&&(tB(A)||gW(A)||bE(A)||A.nodeType===uA.DOCUMENT_FRAGMENT_NODE||A.nodeType===uA.COMMENT_NODE||A.nodeType===uA.PROCESSING_INSTRUCTION_NODE)}function bE(A){return A&&A.nodeType===uA.DOCUMENT_TYPE_NODE}function tB(A){return A&&A.nodeType===uA.ELEMENT_NODE}function gW(A){return A&&A.nodeType===uA.TEXT_NODE}function WG(A,Q){var I=A.childNodes||[];if(rB(I,tB)||bE(Q))return!1;var B=rB(I,bE);return!(Q&&B&&I.indexOf(B)>I.indexOf(Q))}function XG(A,Q){var I=A.childNodes||[];function B(C){return tB(C)&&C!==Q}if(rB(I,B))return!1;var E=rB(I,bE);return!(Q&&E&&I.indexOf(E)>I.indexOf(Q))}function x_(A,Q,I){if(!T_(A))throw new LQ(GI,"Unexpected parent node type "+A.nodeType);if(I&&I.parentNode!==A)throw new LQ(MG,"child not in parent");if(!h_(Q)||bE(Q)&&A.nodeType!==uA.DOCUMENT_NODE)throw new LQ(GI,"Unexpected node type "+Q.nodeType+" for parent node type "+A.nodeType)}function m_(A,Q,I){var B=A.childNodes||[],E=Q.childNodes||[];if(Q.nodeType===uA.DOCUMENT_FRAGMENT_NODE){var C=E.filter(tB);if(C.length>1||rB(E,gW))throw new LQ(GI,"More than one element or text in fragment");if(C.length===1&&!WG(A,I))throw new LQ(GI,"Element in fragment can not be inserted before doctype")}if(tB(Q)){if(!WG(A,I))throw new LQ(GI,"Only one element can be added and only after doctype")}if(bE(Q)){if(rB(B,bE))throw new LQ(GI,"Only one doctype is allowed");var J=rB(B,tB);if(I&&B.indexOf(J)<B.indexOf(I))throw new LQ(GI,"Doctype can only be inserted before an element");if(!I&&J)throw new LQ(GI,"Doctype can not be appended since element is present")}}function yG(A,Q,I){var B=A.childNodes||[],E=Q.childNodes||[];if(Q.nodeType===uA.DOCUMENT_FRAGMENT_NODE){var C=E.filter(tB);if(C.length>1||rB(E,gW))throw new LQ(GI,"More than one element or text in fragment");if(C.length===1&&!XG(A,I))throw new LQ(GI,"Element in fragment can not be inserted before doctype")}if(tB(Q)){if(!XG(A,I))throw new LQ(GI,"Only one element can be added and only after doctype")}if(bE(Q)){let H=function(Z){return bE(Z)&&Z!==I};var K=H;if(rB(B,H))throw new LQ(GI,"Only one doctype is allowed");var J=rB(B,tB);if(I&&B.indexOf(J)<B.indexOf(I))throw new LQ(GI,"Doctype can only be inserted before an element")}}function WV(A,Q,I,B){if(x_(A,Q,I),A.nodeType===uA.DOCUMENT_NODE)(B||m_)(A,Q,I);var E=Q.parentNode;if(E)E.removeChild(Q);if(Q.nodeType===SE){var C=Q.firstChild;if(C==null)return Q;var J=Q.lastChild}else C=J=Q;var K=I?I.previousSibling:A.lastChild;if(C.previousSibling=K,J.nextSibling=I,K)K.nextSibling=C;else A.firstChild=C;if(I==null)A.lastChild=J;else I.previousSibling=J;do{C.parentNode=A;var H=A.ownerDocument||A;X9(C,H)}while(C!==J&&(C=C.nextSibling));if(MW(A.ownerDocument||A,A),Q.nodeType==SE)Q.firstChild=Q.lastChild=null;return Q}function X9(A,Q){if(A.ownerDocument===Q)return;if(A.ownerDocument=Q,A.nodeType===QB&&A.attributes)for(var I=0;I<A.attributes.length;I++){var B=A.attributes.item(I);if(B)B.ownerDocument=Q}var E=A.firstChild;while(E)X9(E,Q),E=E.nextSibling}function c_(A,Q){if(Q.parentNode)Q.parentNode.removeChild(Q);if(Q.parentNode=A,Q.previousSibling=A.lastChild,Q.nextSibling=null,Q.previousSibling)Q.previousSibling.nextSibling=Q;else A.firstChild=Q;A.lastChild=Q,MW(A.ownerDocument,A,Q);var I=A.ownerDocument||A;return X9(Q,I),Q}F9.prototype={nodeName:"#document",nodeType:RG,doctype:null,documentElement:null,_inc:1,insertBefore:function(A,Q){if(A.nodeType==SE){var I=A.firstChild;while(I){var B=I.nextSibling;this.insertBefore(I,Q),I=B}return A}if(WV(this,A,Q),X9(A,this),this.documentElement===null&&A.nodeType===QB)this.documentElement=A;return A},removeChild:function(A){if(this.documentElement==A)this.documentElement=null;return fG(this,A)},replaceChild:function(A,Q){if(WV(this,A,Q,yG),X9(A,this),Q)this.removeChild(Q);if(tB(A))this.documentElement=A},importNode:function(A,Q){return mG(this,A,Q)},getElementById:function(A){var Q=null;return W9(this.documentElement,function(I){if(I.nodeType==QB){if(I.getAttribute("id")==A)return Q=I,!0}}),Q},getElementsByClassName:function(A){var Q=VG(A);return new b8(this,function(I){var B=[];if(Q.length>0)W9(I.documentElement,function(E){if(E!==I&&E.nodeType===QB){var C=E.getAttribute("class");if(C){var J=A===C;if(!J){var K=VG(C);J=Q.every(b_(K))}if(J)B.push(E)}}});return B})},createElement:function(A){var Q=new b0;Q.ownerDocument=this,Q.nodeName=A,Q.tagName=A,Q.localName=A,Q.childNodes=new _E;var I=Q.attributes=new DV;return I._ownerElement=Q,Q},createDocumentFragment:function(){var A=new FV;return A.ownerDocument=this,A.childNodes=new _E,A},createTextNode:function(A){var Q=new _W;return Q.ownerDocument=this,Q.appendData(A),Q},createComment:function(A){var Q=new SW;return Q.ownerDocument=this,Q.appendData(A),Q},createCDATASection:function(A){var Q=new bW;return Q.ownerDocument=this,Q.appendData(A),Q},createProcessingInstruction:function(A,Q){var I=new yW;return I.ownerDocument=this,I.tagName=I.nodeName=I.target=A,I.nodeValue=I.data=Q,I},createAttribute:function(A){var Q=new XV;return Q.ownerDocument=this,Q.name=A,Q.nodeName=A,Q.localName=A,Q.specified=!0,Q},createEntityReference:function(A){var Q=new fW;return Q.ownerDocument=this,Q.nodeName=A,Q},createElementNS:function(A,Q){var I=new b0,B=Q.split(":"),E=I.attributes=new DV;if(I.childNodes=new _E,I.ownerDocument=this,I.nodeName=Q,I.tagName=Q,I.namespaceURI=A,B.length==2)I.prefix=B[0],I.localName=B[1];else I.localName=Q;return E._ownerElement=I,I},createAttributeNS:function(A,Q){var I=new XV,B=Q.split(":");if(I.ownerDocument=this,I.nodeName=Q,I.name=Q,I.namespaceURI=A,I.specified=!0,B.length==2)I.prefix=B[0],I.localName=B[1];else I.localName=Q;return I}};jI(F9,uA);function b0(){this._nsMap={}}b0.prototype={nodeType:QB,hasAttribute:function(A){return this.getAttributeNode(A)!=null},getAttribute:function(A){var Q=this.getAttributeNode(A);return Q&&Q.value||""},getAttributeNode:function(A){return this.attributes.getNamedItem(A)},setAttribute:function(A,Q){var I=this.ownerDocument.createAttribute(A);I.value=I.nodeValue=""+Q,this.setAttributeNode(I)},removeAttribute:function(A){var Q=this.getAttributeNode(A);Q&&this.removeAttributeNode(Q)},appendChild:function(A){if(A.nodeType===SE)return this.insertBefore(A,null);else return c_(this,A)},setAttributeNode:function(A){return this.attributes.setNamedItem(A)},setAttributeNodeNS:function(A){return this.attributes.setNamedItemNS(A)},removeAttributeNode:function(A){return this.attributes.removeNamedItem(A.nodeName)},removeAttributeNS:function(A,Q){var I=this.getAttributeNodeNS(A,Q);I&&this.removeAttributeNode(I)},hasAttributeNS:function(A,Q){return this.getAttributeNodeNS(A,Q)!=null},getAttributeNS:function(A,Q){var I=this.getAttributeNodeNS(A,Q);return I&&I.value||""},setAttributeNS:function(A,Q,I){var B=this.ownerDocument.createAttributeNS(A,Q);B.value=B.nodeValue=""+I,this.setAttributeNode(B)},getAttributeNodeNS:function(A,Q){return this.attributes.getNamedItemNS(A,Q)},getElementsByTagName:function(A){return new b8(this,function(Q){var I=[];return W9(Q,function(B){if(B!==Q&&B.nodeType==QB&&(A==="*"||B.tagName==A))I.push(B)}),I})},getElementsByTagNameNS:function(A,Q){return new b8(this,function(I){var B=[];return W9(I,function(E){if(E!==I&&E.nodeType===QB&&(A==="*"||E.namespaceURI===A)&&(Q==="*"||E.localName==Q))B.push(E)}),B})}};F9.prototype.getElementsByTagName=b0.prototype.getElementsByTagName;F9.prototype.getElementsByTagNameNS=b0.prototype.getElementsByTagNameNS;jI(b0,uA);function XV(){}XV.prototype.nodeType=S8;jI(XV,uA);function O9(){}O9.prototype={data:"",substringData:function(A,Q){return this.data.substring(A,A+Q)},appendData:function(A){A=this.data+A,this.nodeValue=this.data=A,this.length=A.length},insertData:function(A,Q){this.replaceData(A,0,Q)},appendChild:function(A){throw new Error(dQ[GI])},deleteData:function(A,Q){this.replaceData(A,Q,"")},replaceData:function(A,Q,I){var B=this.data.substring(0,A),E=this.data.substring(A+Q);I=B+I+E,this.nodeValue=this.data=I,this.length=I.length}};jI(O9,uA);function _W(){}_W.prototype={nodeName:"#text",nodeType:zV,splitText:function(A){var Q=this.data,I=Q.substring(A);Q=Q.substring(0,A),this.data=this.nodeValue=Q,this.length=Q.length;var B=this.ownerDocument.createTextNode(I);if(this.parentNode)this.parentNode.insertBefore(B,this.nextSibling);return B}};jI(_W,O9);function SW(){}SW.prototype={nodeName:"#comment",nodeType:LG};jI(SW,O9);function bW(){}bW.prototype={nodeName:"#cdata-section",nodeType:OG};jI(bW,O9);function kV(){}kV.prototype.nodeType=PG;jI(kV,uA);function vG(){}vG.prototype.nodeType=y_;jI(vG,uA);function TG(){}TG.prototype.nodeType=f_;jI(TG,uA);function fW(){}fW.prototype.nodeType=GG;jI(fW,uA);function FV(){}FV.prototype.nodeName="#document-fragment";FV.prototype.nodeType=SE;jI(FV,uA);function yW(){}yW.prototype.nodeType=jG;jI(yW,uA);function hG(){}hG.prototype.serializeToString=function(A,Q,I){return xG.call(A,Q,I)};uA.prototype.toString=xG;function xG(A,Q){var I=[],B=this.nodeType==9&&this.documentElement||this,E=B.prefix,C=B.namespaceURI;if(C&&E==null){var E=B.lookupPrefix(C);if(E==null)var J=[{namespace:C,prefix:null}]}return _8(this,I,A,Q,J),I.join("")}function kG(A,Q,I){var B=A.prefix||"",E=A.namespaceURI;if(!E)return!1;if(B==="xml"&&E===D9.XML||E===D9.XMLNS)return!1;var C=I.length;while(C--){var J=I[C];if(J.prefix===B)return J.namespace!==E}return!0}function LW(A,Q,I){A.push(" ",Q,'="',I.replace(/[<>&"\t\n\r]/g,SG),'"')}function _8(A,Q,I,B,E){if(!E)E=[];if(B)if(A=B(A),A){if(typeof A=="string"){Q.push(A);return}}else return;switch(A.nodeType){case QB:var C=A.attributes,J=C.length,W=A.firstChild,K=A.tagName;I=D9.isHTML(A.namespaceURI)||I;var H=K;if(!I&&!A.prefix&&A.namespaceURI){var Z;for(var q=0;q<C.length;q++)if(C.item(q).name==="xmlns"){Z=C.item(q).value;break}if(!Z)for(var w=E.length-1;w>=0;w--){var $=E[w];if($.prefix===""&&$.namespace===A.namespaceURI){Z=$.namespace;break}}if(Z!==A.namespaceURI)for(var w=E.length-1;w>=0;w--){var $=E[w];if($.namespace===A.namespaceURI){if($.prefix)H=$.prefix+":"+K;break}}}Q.push("<",H);for(var U=0;U<J;U++){var V=C.item(U);if(V.prefix=="xmlns")E.push({prefix:V.localName,namespace:V.value});else if(V.nodeName=="xmlns")E.push({prefix:"",namespace:V.value})}for(var U=0;U<J;U++){var V=C.item(U);if(kG(V,I,E)){var z=V.prefix||"",D=V.namespaceURI;LW(Q,z?"xmlns:"+z:"xmlns",D),E.push({prefix:z,namespace:D})}_8(V,Q,I,B,E)}if(K===H&&kG(A,I,E)){var z=A.prefix||"",D=A.namespaceURI;LW(Q,z?"xmlns:"+z:"xmlns",D),E.push({prefix:z,namespace:D})}if(W||I&&!/^(?:meta|link|img|br|hr|input)$/i.test(K)){if(Q.push(">"),I&&/^script$/i.test(K))while(W){if(W.data)Q.push(W.data);else _8(W,Q,I,B,E.slice());W=W.nextSibling}else while(W)_8(W,Q,I,B,E.slice()),W=W.nextSibling;Q.push("</",H,">")}else Q.push("/>");return;case RG:case SE:var W=A.firstChild;while(W)_8(W,Q,I,B,E.slice()),W=W.nextSibling;return;case S8:return LW(Q,A.name,A.value);case zV:return Q.push(A.data.replace(/[<&>]/g,SG));case OG:return Q.push("<![CDATA[",A.data,"]]>");case LG:return Q.push("<!--",A.data,"-->");case PG:var{publicId:j,systemId:O}=A;if(Q.push("<!DOCTYPE ",A.name),j){if(Q.push(" PUBLIC ",j),O&&O!=".")Q.push(" ",O);Q.push(">")}else if(O&&O!=".")Q.push(" SYSTEM ",O,">");else{var F=A.internalSubset;if(F)Q.push(" [",F,"]");Q.push(">")}return;case jG:return Q.push("<?",A.target," ",A.data,"?>");case GG:return Q.push("&",A.nodeName,";");default:Q.push("??",A.nodeName)}}function mG(A,Q,I){var B;switch(Q.nodeType){case QB:B=Q.cloneNode(!1),B.ownerDocument=A;case SE:break;case S8:I=!0;break}if(!B)B=Q.cloneNode(!1);if(B.ownerDocument=A,B.parentNode=null,I){var E=Q.firstChild;while(E)B.appendChild(mG(A,E,I)),E=E.nextSibling}return B}function RW(A,Q,I){var B=new Q.constructor;for(var E in Q)if(Object.prototype.hasOwnProperty.call(Q,E)){var C=Q[E];if(typeof C!="object"){if(C!=B[E])B[E]=C}}if(Q.childNodes)B.childNodes=new _E;switch(B.ownerDocument=A,B.nodeType){case QB:var J=Q.attributes,K=B.attributes=new DV,H=J.length;K._ownerElement=B;for(var Z=0;Z<H;Z++)B.setAttributeNode(RW(A,J.item(Z),!0));break;case S8:I=!0}if(I){var q=Q.firstChild;while(q)B.appendChild(RW(A,q,I)),q=q.nextSibling}return B}function cG(A,Q,I){A[Q]=I}try{if(Object.defineProperty){let A=function(Q){switch(Q.nodeType){case QB:case SE:var I=[];Q=Q.firstChild;while(Q){if(Q.nodeType!==7&&Q.nodeType!==8)I.push(A(Q));Q=Q.nextSibling}return I.join("");default:return Q.nodeValue}};d_=A,Object.defineProperty(b8.prototype,"length",{get:function(){return PW(this),this.$$length}}),Object.defineProperty(uA.prototype,"textContent",{get:function(){return A(this)},set:function(Q){switch(this.nodeType){case QB:case SE:while(this.firstChild)this.removeChild(this.firstChild);if(Q||String(Q))this.appendChild(this.ownerDocument.createTextNode(Q));break;default:this.data=Q,this.value=Q,this.nodeValue=Q}}}),cG=function(Q,I,B){Q["$$"+I]=B}}}catch(A){}var d_;p_.DocumentType=kV;p_.DOMException=LQ;p_.DOMImplementation=_G;p_.Element=b0;p_.Node=uA;p_.NodeList=_E;p_.XMLSerializer=hG});var uG=KQ((r_)=>{var dG=z9().freeze;r_.XML_ENTITIES=dG({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});r_.HTML_ENTITIES=dG({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"\uD835\uDD04",afr:"\uD835\uDD1E",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"\uD835\uDD38",aopf:"\uD835\uDD52",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"\uD835\uDC9C",ascr:"\uD835\uDCB6",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"\uD835\uDD05",bfr:"\uD835\uDD1F",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"\uD835\uDD39",bopf:"\uD835\uDD53",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"\uD835\uDCB7",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"\uD835\uDD20",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"\uD835\uDD54",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"\uD835\uDC9E",cscr:"\uD835\uDCB8",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"\uD835\uDD07",dfr:"\uD835\uDD21",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"\uD835\uDD3B",dopf:"\uD835\uDD55",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"\uD835\uDC9F",dscr:"\uD835\uDCB9",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"\uD835\uDD08",efr:"\uD835\uDD22",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"\uD835\uDD3C",eopf:"\uD835\uDD56",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"\uD835\uDD09",ffr:"\uD835\uDD23",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"\uD835\uDD3D",fopf:"\uD835\uDD57",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"\uD835\uDCBB",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"\uD835\uDD0A",gfr:"\uD835\uDD24",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"\uD835\uDD3E",gopf:"\uD835\uDD58",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"\uD835\uDCA2",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"\uD835\uDD25",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"\uD835\uDD59",horbar:"",HorizontalLine:"",Hscr:"",hscr:"\uD835\uDCBD",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"\uD835\uDD26",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"\uD835\uDD40",iopf:"\uD835\uDD5A",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"\uD835\uDCBE",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"\uD835\uDD0D",jfr:"\uD835\uDD27",jmath:"",Jopf:"\uD835\uDD41",jopf:"\uD835\uDD5B",Jscr:"\uD835\uDCA5",jscr:"\uD835\uDCBF",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"\uD835\uDD0E",kfr:"\uD835\uDD28",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"\uD835\uDD42",kopf:"\uD835\uDD5C",Kscr:"\uD835\uDCA6",kscr:"\uD835\uDCC0",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"\uD835\uDD0F",lfr:"\uD835\uDD29",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"\uD835\uDD43",lopf:"\uD835\uDD5D",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"\uD835\uDCC1",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"\uD835\uDD10",mfr:"\uD835\uDD2A",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"\uD835\uDD44",mopf:"\uD835\uDD5E",mp:"",Mscr:"",mscr:"\uD835\uDCC2",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"\uD835\uDD11",nfr:"\uD835\uDD2B",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"\uD835\uDD5F",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"\uD835\uDCA9",nscr:"\uD835\uDCC3",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"\uD835\uDD12",ofr:"\uD835\uDD2C",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"\uD835\uDD46",oopf:"\uD835\uDD60",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"\uD835\uDCAA",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"\uD835\uDD13",pfr:"\uD835\uDD2D",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"\uD835\uDD61",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"\uD835\uDCAB",pscr:"\uD835\uDCC5",Psi:"",psi:"",puncsp:"",Qfr:"\uD835\uDD14",qfr:"\uD835\uDD2E",qint:"",Qopf:"",qopf:"\uD835\uDD62",qprime:"",Qscr:"\uD835\uDCAC",qscr:"\uD835\uDCC6",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"\uD835\uDD2F",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"\uD835\uDD63",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"\uD835\uDCC7",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"\uD835\uDD16",sfr:"\uD835\uDD30",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"\uD835\uDD4A",sopf:"\uD835\uDD64",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"\uD835\uDCAE",sscr:"\uD835\uDCC8",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"\uD835\uDD17",tfr:"\uD835\uDD31",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"\uD835\uDD4B",topf:"\uD835\uDD65",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"\uD835\uDCAF",tscr:"\uD835\uDCC9",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"\uD835\uDD18",ufr:"\uD835\uDD32",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"\uD835\uDD4C",uopf:"\uD835\uDD66",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"\uD835\uDCB0",uscr:"\uD835\uDCCA",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"\uD835\uDD19",vfr:"\uD835\uDD33",vltri:"",vnsub:"",vnsup:"",Vopf:"\uD835\uDD4D",vopf:"\uD835\uDD67",vprop:"",vrtri:"",Vscr:"\uD835\uDCB1",vscr:"\uD835\uDCCB",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"\uD835\uDD1A",wfr:"\uD835\uDD34",Wopf:"\uD835\uDD4E",wopf:"\uD835\uDD68",wp:"",wr:"",wreath:"",Wscr:"\uD835\uDCB2",wscr:"\uD835\uDCCC",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"\uD835\uDD1B",xfr:"\uD835\uDD35",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"\uD835\uDD4F",xopf:"\uD835\uDD69",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"\uD835\uDCB3",xscr:"\uD835\uDCCD",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"\uD835\uDD1C",yfr:"\uD835\uDD36",YIcy:"",yicy:"",Yopf:"\uD835\uDD50",yopf:"\uD835\uDD6A",Yscr:"\uD835\uDCB4",yscr:"\uD835\uDCCE",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"\uD835\uDD37",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"\uD835\uDD6B",Zscr:"\uD835\uDCB5",zscr:"\uD835\uDCCF",zwj:"",zwnj:""});r_.entityMap=r_.HTML_ENTITIES});var tG=KQ((KS)=>{var R9=z9().NAMESPACE,TW=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,lG=new RegExp("[\\-\\.0-9"+TW.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),iG=new RegExp("^"+TW.source+lG.source+"*(?::"+TW.source+lG.source+"*)?$"),G9=0,RC=1,f8=2,j9=3,y8=4,v8=5,L9=6,OV=7;function T8(A,Q){if(this.message=A,this.locator=Q,Error.captureStackTrace)Error.captureStackTrace(this,T8)}T8.prototype=new Error;T8.prototype.name=T8.name;function sG(){}sG.prototype={parse:function(A,Q,I){var B=this.domBuilder;B.startDocument(),aG(Q,Q={}),AS(A,Q,I,B,this.errorHandler),B.endDocument()}};function AS(A,Q,I,B,E){function C(y){if(y>65535){y-=65536;var m=55296+(y>>10),t=56320+(y&1023);return String.fromCharCode(m,t)}else return String.fromCharCode(y)}function J(y){var m=y.slice(1,-1);if(Object.hasOwnProperty.call(I,m))return I[m];else if(m.charAt(0)==="#")return C(parseInt(m.substr(1).replace("x","0x")));else return E.error("entity not found:"+y),y}function K(y){if(y>z){var m=A.substring(z,y).replace(/&#?\w+;/g,J);$&&H(z),B.characters(m,0,y-z),z=y}}function H(y,m){while(y>=q&&(m=w.exec(A)))Z=m.index,q=Z+m[0].length,$.lineNumber++;$.columnNumber=y-Z+1}var Z=0,q=0,w=/.*(?:\r\n?|\n)|.*$/g,$=B.locator,U=[{currentNSMap:Q}],V={},z=0;while(!0){try{var D=A.indexOf("<",z);if(D<0){if(!A.substr(z).match(/^\s*$/)){var W=B.doc,j=W.createTextNode(A.substr(z));W.appendChild(j),B.currentElement=j}return}if(D>z)K(D);switch(A.charAt(D+1)){case"/":var g=A.indexOf(">",D+3),O=A.substring(D+2,g).replace(/[ \t\n\r]+$/g,""),F=U.pop();if(g<0)O=A.substring(D+2).replace(/[\s<].*/,""),E.error("end tag name: "+O+" is not complete:"+F.tagName),g=D+1+O.length;else if(O.match(/\s</))O=O.replace(/[\s<].*/,""),E.error("end tag name: "+O+" maybe not complete"),g=D+1+O.length;var L=F.localNSMap,R=F.tagName==O,_=R||F.tagName&&F.tagName.toLowerCase()==O.toLowerCase();if(_){if(B.endElement(F.uri,F.localName,O),L){for(var T in L)if(Object.prototype.hasOwnProperty.call(L,T))B.endPrefixMapping(T)}if(!R)E.fatalError("end tag name: "+O+" is not match the current start tagName:"+F.tagName)}else U.push(F);g++;break;case"?":$&&H(D),g=CS(A,D,B);break;case"!":$&&H(D),g=ES(A,D,B,E);break;default:$&&H(D);var f=new rG,S=U[U.length-1].currentNSMap,g=QS(A,D,f,S,J,E),d=f.length;if(!f.closed&&BS(A,g,f.tagName,V)){if(f.closed=!0,!I.nbsp)E.warning("unclosed xml attribute")}if($&&d){var a=nG($,{});for(var AA=0;AA<d;AA++){var CA=f[AA];H(CA.offset),CA.locator=nG($,{})}if(B.locator=a,oG(f,B,S))U.push(f);B.locator=$}else if(oG(f,B,S))U.push(f);if(R9.isHTML(f.uri)&&!f.closed)g=IS(A,g,f.tagName,J,B);else g++}}catch(y){if(y instanceof T8)throw y;E.error("element parse error: "+y),g=-1}if(g>z)z=g;else K(Math.max(D,z)+1)}}function nG(A,Q){return Q.lineNumber=A.lineNumber,Q.columnNumber=A.columnNumber,Q}function QS(A,Q,I,B,E,C){function J(U,V,z){if(I.attributeNames.hasOwnProperty(U))C.fatalError("Attribute "+U+" redefined");I.addValue(U,V.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,E),z)}var K,H,Z=++Q,q=G9;while(!0){var w=A.charAt(Z);switch(w){case"=":if(q===RC)K=A.slice(Q,Z),q=j9;else if(q===f8)q=j9;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(q===j9||q===RC){if(q===RC)C.warning('attribute value must after "="'),K=A.slice(Q,Z);if(Q=Z+1,Z=A.indexOf(w,Q),Z>0)H=A.slice(Q,Z),J(K,H,Q-1),q=v8;else throw new Error("attribute value no end '"+w+"' match")}else if(q==y8)H=A.slice(Q,Z),J(K,H,Q),C.warning('attribute "'+K+'" missed start quot('+w+")!!"),Q=Z+1,q=v8;else throw new Error('attribute value must after "="');break;case"/":switch(q){case G9:I.setTagName(A.slice(Q,Z));case v8:case L9:case OV:q=OV,I.closed=!0;case y8:case RC:break;case f8:I.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":if(C.error("unexpected end of input"),q==G9)I.setTagName(A.slice(Q,Z));return Z;case">":switch(q){case G9:I.setTagName(A.slice(Q,Z));case v8:case L9:case OV:break;case y8:case RC:if(H=A.slice(Q,Z),H.slice(-1)==="/")I.closed=!0,H=H.slice(0,-1);case f8:if(q===f8)H=K;if(q==y8)C.warning('attribute "'+H+'" missed quot(")!'),J(K,H,Q);else{if(!R9.isHTML(B[""])||!H.match(/^(?:disabled|checked|selected)$/i))C.warning('attribute "'+H+'" missed value!! "'+H+'" instead!!');J(H,H,Q)}break;case j9:throw new Error("attribute value missed!!")}return Z;case"":w=" ";default:if(w<=" ")switch(q){case G9:I.setTagName(A.slice(Q,Z)),q=L9;break;case RC:K=A.slice(Q,Z),q=f8;break;case y8:var H=A.slice(Q,Z);C.warning('attribute "'+H+'" missed quot(")!!'),J(K,H,Q);case v8:q=L9;break}else switch(q){case f8:var $=I.tagName;if(!R9.isHTML(B[""])||!K.match(/^(?:disabled|checked|selected)$/i))C.warning('attribute "'+K+'" missed value!! "'+K+'" instead2!!');J(K,K,Q),Q=Z,q=RC;break;case v8:C.warning('attribute space is required"'+K+'"!!');case L9:q=RC,Q=Z;break;case j9:q=y8,Q=Z;break;case OV:throw new Error("elements closed character '/' and '>' must be connected to")}}Z++}}function oG(A,Q,I){var B=A.tagName,E=null,w=A.length;while(w--){var C=A[w],J=C.qName,K=C.value,$=J.indexOf(":");if($>0)var H=C.prefix=J.slice(0,$),Z=J.slice($+1),q=H==="xmlns"&&Z;else Z=J,H=null,q=J==="xmlns"&&"";if(C.localName=Z,q!==!1){if(E==null)E={},aG(I,I={});I[q]=E[q]=K,C.uri=R9.XMLNS,Q.startPrefixMapping(q,K)}}var w=A.length;while(w--){C=A[w];var H=C.prefix;if(H){if(H==="xml")C.uri=R9.XML;if(H!=="xmlns")C.uri=I[H||""]}}var $=B.indexOf(":");if($>0)H=A.prefix=B.slice(0,$),Z=A.localName=B.slice($+1);else H=null,Z=A.localName=B;var U=A.uri=I[H||""];if(Q.startElement(U,Z,B,A),A.closed){if(Q.endElement(U,Z,B),E){for(H in E)if(Object.prototype.hasOwnProperty.call(E,H))Q.endPrefixMapping(H)}}else return A.currentNSMap=I,A.localNSMap=E,!0}function IS(A,Q,I,B,E){if(/^(?:script|textarea)$/i.test(I)){var C=A.indexOf("</"+I+">",Q),J=A.substring(Q+1,C);if(/[&<]/.test(J)){if(/^script$/i.test(I))return E.characters(J,0,J.length),C;return J=J.replace(/&#?\w+;/g,B),E.characters(J,0,J.length),C}}return Q+1}function BS(A,Q,I,B){var E=B[I];if(E==null){if(E=A.lastIndexOf("</"+I+">"),E<Q)E=A.lastIndexOf("</"+I);B[I]=E}return E<Q}function aG(A,Q){for(var I in A)if(Object.prototype.hasOwnProperty.call(A,I))Q[I]=A[I]}function ES(A,Q,I,B){var E=A.charAt(Q+2);switch(E){case"-":if(A.charAt(Q+3)==="-"){var C=A.indexOf("-->",Q+4);if(C>Q)return I.comment(A,Q+4,C-Q-4),C+3;else return B.error("Unclosed comment"),-1}else return-1;default:if(A.substr(Q+3,6)=="CDATA["){var C=A.indexOf("]]>",Q+9);return I.startCDATA(),I.characters(A,Q+9,C-Q-9),I.endCDATA(),C+3}var J=JS(A,Q),K=J.length;if(K>1&&/!doctype/i.test(J[0][0])){var H=J[1][0],Z=!1,q=!1;if(K>3){if(/^public$/i.test(J[2][0]))Z=J[3][0],q=K>4&&J[4][0];else if(/^system$/i.test(J[2][0]))q=J[3][0]}var w=J[K-1];return I.startDTD(H,Z,q),I.endDTD(),w.index+w[0].length}}return-1}function CS(A,Q,I){var B=A.indexOf("?>",Q);if(B){var E=A.substring(Q,B).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(E){var C=E[0].length;return I.processingInstruction(E[1],E[2]),B+2}else return-1}return-1}function rG(){this.attributeNames={}}rG.prototype={setTagName:function(A){if(!iG.test(A))throw new Error("invalid tagName:"+A);this.tagName=A},addValue:function(A,Q,I){if(!iG.test(A))throw new Error("invalid attribute:"+A);this.attributeNames[A]=this.length,this[this.length++]={qName:A,value:Q,offset:I}},length:0,getLocalName:function(A){return this[A].localName},getLocator:function(A){return this[A].locator},getQName:function(A){return this[A].qName},getURI:function(A){return this[A].uri},getValue:function(A){return this[A].value}};function JS(A,Q){var I,B=[],E=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;E.lastIndex=Q,E.exec(A);while(I=E.exec(A))if(B.push(I),I[1])return B}KS.XMLReader=sG;KS.ParseError=T8});var Cj=KQ((NS)=>{var qS=z9(),wS=vW(),eG=uG(),Ij=tG(),YS=wS.DOMImplementation,Aj=qS.NAMESPACE,$S=Ij.ParseError,US=Ij.XMLReader;function Bj(A){return A.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Ej(A){this.options=A||{locator:{}}}Ej.prototype.parseFromString=function(A,Q){var I=this.options,B=new US,E=I.domBuilder||new P9,C=I.errorHandler,J=I.locator,K=I.xmlns||{},H=/\/x?html?$/.test(Q),Z=H?eG.HTML_ENTITIES:eG.XML_ENTITIES;if(J)E.setDocumentLocator(J);if(B.errorHandler=VS(C,E,J),B.domBuilder=I.domBuilder||E,H)K[""]=Aj.HTML;K.xml=K.xml||Aj.XML;var q=I.normalizeLineEndings||Bj;if(A&&typeof A==="string")B.parse(q(A),K,Z);else B.errorHandler.error("invalid doc source");return E.doc};function VS(A,Q,I){if(!A){if(Q instanceof P9)return Q;A=Q}var B={},E=A instanceof Function;I=I||{};function C(J){var K=A[J];if(!K&&E)K=A.length==2?function(H){A(J,H)}:A;B[J]=K&&function(H){K("[xmldom "+J+"]\t"+H+hW(I))}||function(){}}return C("warning"),C("error"),C("fatalError"),B}function P9(){this.cdata=!1}function h8(A,Q){Q.lineNumber=A.lineNumber,Q.columnNumber=A.columnNumber}P9.prototype={startDocument:function(){if(this.doc=new YS().createDocument(null,null,null),this.locator)this.doc.documentURI=this.locator.systemId},startElement:function(A,Q,I,B){var E=this.doc,C=E.createElementNS(A,I||Q),J=B.length;GV(this,C),this.currentElement=C,this.locator&&h8(this.locator,C);for(var K=0;K<J;K++){var A=B.getURI(K),H=B.getValue(K),I=B.getQName(K),Z=E.createAttributeNS(A,I);this.locator&&h8(B.getLocator(K),Z),Z.value=Z.nodeValue=H,C.setAttributeNode(Z)}},endElement:function(A,Q,I){var B=this.currentElement,E=B.tagName;this.currentElement=B.parentNode},startPrefixMapping:function(A,Q){},endPrefixMapping:function(A){},processingInstruction:function(A,Q){var I=this.doc.createProcessingInstruction(A,Q);this.locator&&h8(this.locator,I),GV(this,I)},ignorableWhitespace:function(A,Q,I){},characters:function(A,Q,I){if(A=Qj.apply(this,arguments),A){if(this.cdata)var B=this.doc.createCDATASection(A);else var B=this.doc.createTextNode(A);if(this.currentElement)this.currentElement.appendChild(B);else if(/^\s*$/.test(A))this.doc.appendChild(B);this.locator&&h8(this.locator,B)}},skippedEntity:function(A){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(A){if(this.locator=A)A.lineNumber=0},comment:function(A,Q,I){A=Qj.apply(this,arguments);var B=this.doc.createComment(A);this.locator&&h8(this.locator,B),GV(this,B)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(A,Q,I){var B=this.doc.implementation;if(B&&B.createDocumentType){var E=B.createDocumentType(A,Q,I);this.locator&&h8(this.locator,E),GV(this,E),this.doc.doctype=E}},warning:function(A){console.warn("[xmldom warning]\t"+A,hW(this.locator))},error:function(A){console.error("[xmldom error]\t"+A,hW(this.locator))},fatalError:function(A){throw new $S(A,this.locator)}};function hW(A){if(A)return`
@`+(A.systemId||"")+"#[line:"+A.lineNumber+",col:"+A.columnNumber+"]"}function Qj(A,Q,I){if(typeof A=="string")return A.substr(Q,I);else{if(A.length>=Q+I||Q)return new java.lang.String(A,Q,I)+"";return A}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(A){P9.prototype[A]=function(){return null}});function GV(A,Q){if(!A.currentElement)A.doc.appendChild(Q);else A.currentElement.appendChild(Q)}NS.__DOMHandler=P9;NS.normalizeLineEndings=Bj;NS.DOMParser=Ej});var Jj,XS,kS,Kj;var Hj=Y(()=>{Jj=vW();XS=Jj.DOMImplementation,kS=Jj.XMLSerializer,Kj=Cj().DOMParser});var xW=Y(()=>{Hj()});var Zj=Y(()=>{xW();n2()});var qj=Y(()=>{z5();iH();dH();qJ();W5();YJ();pH();uH()});var wj=Y(()=>{M()});var jV=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`;var LV=()=>{};var M9=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;var RV=()=>{};var OS;var mW=Y(()=>{AI();YI();XQ();iI();I0();LV();RV();OS=class A extends hQ{constructor(Q){Q={...A.defaultOptions,...Q};let I=rA.from({vertex:{source:M9,entryPoint:"mainVertex"},fragment:{source:M9,entryPoint:"mainFragment"}}),B=aA.from({vertex:kE,fragment:jV,name:"alpha-filter"}),{alpha:E,...C}=Q,J=new PA({uAlpha:{value:E,type:"f32"}});super({...C,gpuProgram:I,glProgram:B,resources:{alphaUniforms:J}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(Q){this.resources.alphaUniforms.uniforms.uAlpha=Q}};OS.defaultOptions={alpha:1}});var x8;var g9=Y(()=>{x8={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]}});function PV(A){let Q=x8[A],I=Q.length,B=GS,E="",C="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",J;for(let K=0;K<A;K++){let H=C.replace("%index%",K.toString());if(J=K,K>=I)J=A-K-1;H=H.replace("%value%",Q[J].toString()),E+=H,E+=`
`}return B=B.replace("%blur%",E),B=B.replace("%size%",A.toString()),B}var GS;var MV=Y(()=>{g9();GS=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`)});function gV(A,Q){let I=Math.ceil(A/2),B=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`,E="",C;if(Q)C="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);";else C="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let J=0;J<A;J++){let K=C.replace("%index%",J.toString());K=K.replace("%sampleIndex%",`${J-(I-1)}.0`),E+=K,E+=`
`}return B=B.replace("%blur%",E),B=B.replace("%size%",A.toString()),B=B.replace("%dimension%",Q?"z":"w"),B}var _V=()=>{};function SV(A,Q){let I=gV(Q,A),B=PV(Q);return aA.from({vertex:I,fragment:B,name:`blur-${A?"horizontal":"vertical"}-pass-filter`})}var bV=Y(()=>{AI();MV();_V()});var fV=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;var yV=()=>{};function vV(A,Q){let I=x8[Q],B=I.length,E=[],C=[],J=[];for(let w=0;w<Q;w++){if(E[w]=`@location(${w}) offset${w}: vec2<f32>,`,A)C[w]=`filteredCord + vec2(${w-B+1} * pixelStrength, 0.0),`;else C[w]=`filteredCord + vec2(0.0, ${w-B+1} * pixelStrength),`;let $=w<B?w:Q-w-1,U=I[$].toString();J[w]=`finalColor += textureSample(uTexture, uSampler, offset${w}) * ${U};`}let K=E.join(`
`),H=C.join(`
`),Z=J.join(`
`),q=fV.replace("%blur-struct%",K).replace("%blur-vertex-out%",H).replace("%blur-fragment-in%",K).replace("%blur-sampling%",Z).replace("%dimension%",A?"z":"w");return rA.from({vertex:{source:q,entryPoint:"mainVertex"},fragment:{source:q,entryPoint:"mainFragment"}})}var TV=Y(()=>{YI();g9();yV()});var Yj,m8;var hV=Y(()=>{pI();nQ();iI();bV();TV();Yj=class A extends hQ{constructor(Q){Q={...A.defaultOptions,...Q};let I=SV(Q.horizontal,Q.kernelSize),B=vV(Q.horizontal,Q.kernelSize);super({glProgram:I,gpuProgram:B,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...Q});this.horizontal=Q.horizontal,this._quality=0,this.quality=Q.quality,this.blur=Q.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(Q,I,B,E){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)Q.applyFilter(this,I,B,E);else{let C=hA.getSameSizeTexture(I),J=I,K=C;this._state.blend=!1;let H=Q.renderer.type===cA.WEBGPU;for(let Z=0;Z<this.passes-1;Z++){Q.applyFilter(this,J,K,Z===0?!0:H);let q=K;K=J,J=q}this._state.blend=!0,Q.applyFilter(this,J,B,E),hA.returnTexture(C)}}get blur(){return this.strength}set blur(Q){this.padding=1+Math.abs(Q)*2,this.strength=Q}get quality(){return this._quality}set quality(Q){this._quality=Q,this.passes=Q}};Yj.defaultOptions={strength:8,quality:4,kernelSize:5};m8=Yj});var xV;var cW=Y(()=>{pI();nQ();gA();iI();hV();xV=class xV extends hQ{constructor(...A){let Q=A[0]??{};if(typeof Q==="number"){if(c(BA,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),Q={strength:Q},A[1]!==void 0)Q.quality=A[1];if(A[2]!==void 0)Q.resolution=A[2]||"inherit";if(A[3]!==void 0)Q.kernelSize=A[3]}Q={...m8.defaultOptions,...Q};let{strength:I,strengthX:B,strengthY:E,quality:C,...J}=Q;super({...J,compatibleRenderers:cA.BOTH,resources:{}});this._repeatEdgePixels=!1,this.blurXFilter=new m8({horizontal:!0,...Q}),this.blurYFilter=new m8({horizontal:!1,...Q}),this.quality=C,this.strengthX=B??I,this.strengthY=E??I,this.repeatEdgePixels=!1}apply(A,Q,I,B){let E=Math.abs(this.blurXFilter.strength),C=Math.abs(this.blurYFilter.strength);if(E&&C){let J=hA.getSameSizeTexture(Q);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(A,Q,J,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(A,J,I,B),hA.returnTexture(J)}else if(C)this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(A,Q,I,B);else this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(A,Q,I,B)}updatePadding(){if(this._repeatEdgePixels)this.padding=0;else this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(A){this.blurXFilter.blur=this.blurYFilter.blur=A,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(A){this.blurXFilter.quality=this.blurYFilter.quality=A}get strengthX(){return this.blurXFilter.blur}set strengthX(A){this.blurXFilter.blur=A,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(A){this.blurYFilter.blur=A,this.updatePadding()}get blur(){return c("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(A){c("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=A}get blurX(){return c("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(A){c("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=A}get blurY(){return c("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(A){c("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=A}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(A){this._repeatEdgePixels=A,this.updatePadding()}};xV.defaultOptions={strength:8,quality:4,kernelSize:5}});var mV=()=>{};var cV=()=>{};var dW=Y(()=>{IQ();AI();YI();XQ();iI();I0();mV();cV()});var dV=()=>{};var pV=()=>{};var uV=()=>{};var pW=Y(()=>{NA();aQ();AI();YI();XQ();fB();gA();iI();dV();pV();uV()});var lV=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`;var iV=()=>{};var _9=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;var nV=()=>{};var jS;var uW=Y(()=>{AI();YI();XQ();iI();I0();iV();nV();jS=class A extends hQ{constructor(Q={}){Q={...A.defaultOptions,...Q};let I=rA.from({vertex:{source:_9,entryPoint:"mainVertex"},fragment:{source:_9,entryPoint:"mainFragment"}}),B=aA.from({vertex:kE,fragment:lV,name:"noise-filter"}),{noise:E,seed:C,...J}=Q;super({...J,gpuProgram:I,glProgram:B,resources:{noiseUniforms:new PA({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}});this.noise=E,this.seed=C??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(Q){this.resources.noiseUniforms.uniforms.uNoise=Q}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(Q){this.resources.noiseUniforms.uniforms.uSeed=Q}};jS.defaultOptions={noise:0.5}});var lW=()=>{};var Dj=Y(()=>{EQ();gJ();_J();mW();cW();hV();g9();MV();bV();_V();TV();dW();pW();uW();Y7();iI();EJ();f5();F7();o1();G7();L7();P7();lW();LV();RV();yV();mV();cV();I0();dV();pV();uV();iV();nV();q7();w7();u1();i1();n1()});var Wj=class A{constructor(Q){this._tick=()=>{if(this._destroyed)return;this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{if(this._destroyed)return;let{queue:I}=this,B=0;while(I.length&&B<A.uploadsPerFrame){let E=I.shift();this.uploadQueueItem(E),B++}if(I.length)SA.system.addOnce(this._tick,this,SQ.UTILITY);else this._resolve()},this.renderer=Q,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(Q){let I=Array.isArray(Q)?Q:[Q];for(let B of I)if(B instanceof QA)this._addContainer(B);else this.resolveQueueItem(B,this.queue);return this}_addContainer(Q){this.resolveQueueItem(Q,this.queue);for(let I of Q.children)this._addContainer(I)}upload(Q){if(Q)this.add(Q);return new Promise((I)=>{if(this.queue.length)this.resolves.push(I),this.dedupeQueue(),SA.system.addOnce(this._tick,this,SQ.UTILITY);else I()})}dedupeQueue(){let Q=Object.create(null),I=0;for(let B=0;B<this.queue.length;B++){let E=this.queue[B];if(!Q[E.uid])Q[E.uid]=!0,this.queue[I++]=E}this.queue.length=I}destroy(){this._destroyed=!0,clearTimeout(this.timeout)}_resolve(){let{resolves:Q}=this,I=Q.slice(0);Q.length=0;for(let B of I)B()}},oV;var sV=Y(()=>{TQ();gB();wB();Wj.uploadsPerFrame=4;oV=Wj});var Xj,RI;var eB=Y(()=>{hB();VB();FE();gA();Xj=class A extends UI{constructor(...Q){let I=Q[0]??{};if(I instanceof Float32Array)c(BA,"use new MeshGeometry({ positions, uvs, indices }) instead"),I={positions:I,uvs:Q[1],indices:Q[2]};I={...A.defaultOptions,...I};let B=I.positions||new Float32Array([0,0,1,0,1,1,0,1]),E=I.uvs;if(!E)if(I.positions)E=new Float32Array(B.length);else E=new Float32Array([0,0,1,0,1,1,0,1]);let C=I.indices||new Uint32Array([0,1,2,0,2,3]),J=I.shrinkBuffersToFit,K=new YQ({data:B,label:"attribute-mesh-positions",shrinkToFit:J,usage:OA.VERTEX|OA.COPY_DST}),H=new YQ({data:E,label:"attribute-mesh-uvs",shrinkToFit:J,usage:OA.VERTEX|OA.COPY_DST}),Z=new YQ({data:C,label:"index-mesh-buffer",shrinkToFit:J,usage:OA.INDEX|OA.COPY_DST});super({attributes:{aPosition:{buffer:K,format:"float32x2",stride:8,offset:0},aUV:{buffer:H,format:"float32x2",stride:8,offset:0}},indexBuffer:Z,topology:I.topology});this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(Q){this.attributes.aPosition.buffer.data=Q}get uvs(){return this.attributes.aUV.buffer.data}set uvs(Q){this.attributes.aUV.buffer.data=Q}get indices(){return this.indexBuffer.data}set indices(Q){this.indexBuffer.data=Q}};Xj.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};RI=Xj});class fE{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(A){this._topology=A}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(A){if(this.texture===A)return;this.texture=A,this._textureMatrixUpdateId=-1}get uvs(){let Q=this.geometry.getBuffer("aUV"),I=Q.data,B=I,E=this.texture.textureMatrix;if(!E.isSimple){if(B=this._transformedUvs,this._textureMatrixUpdateId!==E._updateID||this._uvUpdateId!==Q._updateID){if(!B||B.length<I.length)B=this._transformedUvs=new Float32Array(I.length);this._textureMatrixUpdateId=E._updateID,this._uvUpdateId=Q._updateID,E.multiplyUvs(I,B)}}return B}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}var c8=()=>{};class S9{destroy(){}}class d8{constructor(A,Q){this.localUniforms=new PA({uTransformMatrix:{value:new x,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new fQ({0:this.localUniforms}),this.renderer=A,this._adaptor=Q,this._adaptor.init()}validateRenderable(A){let Q=this._getMeshData(A),I=Q.batched,B=A.batched;if(Q.batched=B,I!==B)return!0;else if(B){let E=A._geometry;if(E.indices.length!==Q.indexSize||E.positions.length!==Q.vertexSize)return Q.indexSize=E.indices.length,Q.vertexSize=E.positions.length,!0;let C=this._getBatchableMesh(A);if(C.texture.uid!==A._texture.uid)C._textureMatrixUpdateId=-1;return!C._batcher.checkAndUpdateTexture(C,A._texture)}return!1}addRenderable(A,Q){let I=this.renderer.renderPipes.batch,B=this._getMeshData(A);if(A.didViewUpdate)B.indexSize=A._geometry.indices?.length,B.vertexSize=A._geometry.positions?.length;if(B.batched){let E=this._getBatchableMesh(A);E.setTexture(A._texture),E.geometry=A._geometry,I.addToBatch(E,Q)}else I.break(Q),Q.add(A)}updateRenderable(A){if(A.batched){let Q=this._getBatchableMesh(A);Q.setTexture(A._texture),Q.geometry=A._geometry,Q._batcher.updateElement(Q)}}execute(A){if(!A.isRenderable)return;A.state.blendMode=DB(A.groupBlendMode,A.texture._source);let Q=this.localUniforms;Q.uniforms.uTransformMatrix=A.groupTransform,Q.uniforms.uRound=this.renderer._roundPixels|A._roundPixels,Q.update(),tI(A.groupColorAlpha,Q.uniforms.uColor,0),this._adaptor.execute(this,A)}_getMeshData(A){var Q,I;return(Q=A._gpuData)[I=this.renderer.uid]||(Q[I]=new S9),A._gpuData[this.renderer.uid].meshData||this._initMeshData(A)}_initMeshData(A){return A._gpuData[this.renderer.uid].meshData={batched:A.batched,indexSize:0,vertexSize:0},A._gpuData[this.renderer.uid].meshData}_getBatchableMesh(A){var Q,I;return(Q=A._gpuData)[I=this.renderer.uid]||(Q[I]=new S9),A._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(A)}_initBatchableMesh(A){let Q=new fE;return Q.renderable=A,Q.setTexture(A._texture),Q.transform=A.groupTransform,Q.roundPixels=this.renderer._roundPixels|A._roundPixels,A._gpuData[this.renderer.uid].batchableMesh=Q,Q}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}var aV=Y(()=>{M();NA();TB();XQ();$0();zC();c8();d8.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"mesh"}});var kj=Y(()=>{M();aV();p.add(d8)});var IB;var PC=Y(()=>{N7();FE();$I();FA();gA();uI();eB();kj();IB=class IB extends wQ{constructor(...A){let Q=A[0];if(Q instanceof UI){if(c(BA,"Mesh: use new Mesh({ geometry, shader }) instead"),Q={geometry:Q,shader:A[1]},A[3])c(BA,"Mesh: drawMode argument has been removed, use geometry.topology instead"),Q.geometry.topology=A[3]}let{geometry:I,shader:B,texture:E,roundPixels:C,state:J,...K}=Q;super({label:"Mesh",...K});this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=B??null,this.texture=E??B?.texture??v.WHITE,this.state=J??oA.for2d(),this._geometry=I,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=C??!1}get material(){return c(BA,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(A){if(this._shader===A)return;this._shader=A,this.onViewUpdate()}get shader(){return this._shader}set geometry(A){if(this._geometry===A)return;this._geometry?.off("update",this.onViewUpdate,this),A.on("update",this.onViewUpdate,this),this._geometry=A,this.onViewUpdate()}get geometry(){return this._geometry}set texture(A){A||(A=v.EMPTY);let Q=this._texture;if(Q===A)return;if(Q&&Q.dynamic)Q.off("update",this.onViewUpdate,this);if(A.dynamic)A.on("update",this.onViewUpdate,this);if(this.shader)this.shader.texture=A;this._texture=A,this.onViewUpdate()}get texture(){return this._texture}get batched(){if(this._shader)return!1;if((this.state.data&12)!==0)return!1;if(this._geometry instanceof RI){if(this._geometry.batchMode==="auto")return this._geometry.positions.length/2<=100;return this._geometry.batchMode==="batch"}return!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(A){let{x:Q,y:I}=A;if(!this.bounds.containsPoint(Q,I))return!1;let B=this.geometry.getBuffer("aPosition").data,E=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let C=this.geometry.getIndex().data,J=C.length;for(let K=0;K+2<J;K+=E){let H=C[K]*2,Z=C[K+1]*2,q=C[K+2]*2;if(HZ(Q,I,B[H],B[H+1],B[Z],B[Z+1],B[q],B[q+1]))return!0}}else{let C=B.length/2;for(let J=0;J+2<C;J+=E){let K=J*2,H=(J+1)*2,Z=(J+2)*2;if(HZ(Q,I,B[K],B[K+1],B[H],B[H+1],B[Z],B[Z+1]))return!0}}return!1}destroy(A){if(super.destroy(A),typeof A==="boolean"?A:A?.texture){let I=typeof A==="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}});var MC;var rV=Y(()=>{FA();gB();wB();fB();MC=class MC extends bQ{constructor(...A){let Q=A[0];if(Array.isArray(A[0]))Q={textures:A[0],autoUpdate:A[1]};let{animationSpeed:I=1,autoPlay:B=!1,autoUpdate:E=!0,loop:C=!0,onComplete:J=null,onFrameChange:K=null,onLoop:H=null,textures:Z,updateAnchor:q=!1,...w}=Q,[$]=Z;super({...w,texture:$ instanceof v?$:$.texture});if(this._textures=null,this._durations=null,this._autoUpdate=E,this._isConnectedToTicker=!1,this.animationSpeed=I,this.loop=C,this.updateAnchor=q,this.onComplete=J,this.onFrameChange=K,this.onLoop=H,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=Z,B)this.play()}stop(){if(!this._playing)return;if(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker)SA.shared.remove(this.update,this),this._isConnectedToTicker=!1}play(){if(this._playing)return;if(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker)SA.shared.add(this.update,this,SQ.HIGH),this._isConnectedToTicker=!0}gotoAndStop(A){this.stop(),this.currentFrame=A}gotoAndPlay(A){this.currentFrame=A,this.play()}update(A){if(!this._playing)return;let Q=A.deltaTime,I=this.animationSpeed*Q,B=this.currentFrame;if(this._durations!==null){let E=this._currentTime%1*this._durations[this.currentFrame];E+=I/60*1000;while(E<0)this._currentTime--,E+=this._durations[this.currentFrame];let C=Math.sign(this.animationSpeed*Q);this._currentTime=Math.floor(this._currentTime);while(E>=this._durations[this.currentFrame])E-=this._durations[this.currentFrame]*C,this._currentTime+=C;this._currentTime+=E/this._durations[this.currentFrame]}else this._currentTime+=I;if(this._currentTime<0&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else if(B!==this.currentFrame){if(this.loop&&this.onLoop){if(this.animationSpeed>0&&this.currentFrame<B||this.animationSpeed<0&&this.currentFrame>B)this.onLoop()}this._updateTexture()}}_updateTexture(){let A=this.currentFrame;if(this._previousFrame===A)return;if(this._previousFrame=A,this.texture=this._textures[A],this.updateAnchor&&this.texture.defaultAnchor)this.anchor.copyFrom(this.texture.defaultAnchor);if(this.onFrameChange)this.onFrameChange(this.currentFrame)}destroy(A=!1){if(typeof A==="boolean"?A:A?.texture){let I=typeof A==="boolean"?A:A?.textureSource;this._textures.forEach((B)=>{if(this.texture!==B)B.destroy(I)})}this._textures=[],this._durations=null,this.stop(),super.destroy(A),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(A){let Q=[];for(let I=0;I<A.length;++I)Q.push(v.from(A[I]));return new MC(Q)}static fromImages(A){let Q=[];for(let I=0;I<A.length;++I)Q.push(v.from(A[I]));return new MC(Q)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(A){if(A[0]instanceof v)this._textures=A,this._durations=null;else{this._textures=[],this._durations=[];for(let Q=0;Q<A.length;Q++)this._textures.push(A[Q].texture),this._durations.push(A[Q].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let A=Math.floor(this._currentTime)%this._textures.length;if(A<0)A+=this._textures.length;return A}set currentFrame(A){if(A<0||A>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${A}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let Q=this.currentFrame;if(this._currentTime=A,Q!==this.currentFrame)this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(A){if(A!==this._autoUpdate){if(this._autoUpdate=A,!this._autoUpdate&&this._isConnectedToTicker)SA.shared.remove(this.update,this),this._isConnectedToTicker=!1;else if(this._autoUpdate&&!this._isConnectedToTicker&&this._playing)SA.shared.add(this.update,this),this._isConnectedToTicker=!0}}}});class b9{constructor({matrix:A,observer:Q}={}){this.dirty=!0,this._matrix=A??new x,this.observer=Q,this.position=new xA(this,0,0),this.scale=new xA(this,1,1),this.pivot=new xA(this,0,0),this.skew=new xA(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let A=this._matrix;if(!this.dirty)return A;return A.a=this._cx*this.scale.x,A.b=this._sx*this.scale.x,A.c=this._cy*this.scale.y,A.d=this._sy*this.scale.y,A.tx=this.position.x-(this.pivot.x*A.a+this.pivot.y*A.c),A.ty=this.position.y-(this.pivot.x*A.b+this.pivot.y*A.d),this.dirty=!1,A}_onUpdate(A){if(this.dirty=!0,A===this.skew)this.updateSkew();this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(A){A.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(A){if(this._rotation!==A)this._rotation=A,this._onUpdate(this.skew)}}var tV=Y(()=>{NA();HE()});class p8{constructor(A){this._renderer=A}validateRenderable(A){return!1}addRenderable(A,Q){this._renderer.renderPipes.batch.break(Q),Q.add(A)}updateRenderable(A){}execute(A){let Q=this._renderer,I=Q.canvasContext,B=I.activeContext;B.save(),I.setBlendMode(A.groupBlendMode);let E=Q.globalUniforms.globalUniformData?.worldColor??4294967295,C=A.groupColorAlpha,J=(E>>>24&255)/255,K=(C>>>24&255)/255,H=Q.filter?.alphaMultiplier??1,Z=J*K*H;if(Z<=0){B.restore();return}B.globalAlpha=Z;let q=E&16777215,w=C&16777215,$=lQ(rQ(w,q)),U=A.texture,V=qA.getTintedPattern(U,$),z=A.width,D=A.height,W=A.groupTransform,j=U.source._resolution??U.source.resolution??1;if(f9.copyFrom(A._tileTransform.matrix),!A.applyAnchorToTexture)f9.translate(-A.anchor.x*z,-A.anchor.y*D);f9.scale(1/j,1/j),eV.identity(),eV.prepend(f9),eV.prepend(W);let O=Q._roundPixels|A._roundPixels;I.setContextTransform(eV,O===1),B.fillStyle=V;let F=A.anchor.x*-z,L=A.anchor.y*-D;AE[0].set(F,L),AE[1].set(F+z,L),AE[2].set(F+z,L+D),AE[3].set(F,L+D);for(let R=0;R<4;R++)f9.applyInverse(AE[R],AE[R]);B.beginPath(),B.moveTo(AE[0].x,AE[0].y);for(let R=1;R<4;R++)B.lineTo(AE[R].x,AE[R].y);B.closePath(),B.fill(),B.restore()}destroy(){this._renderer=null}}var eV,f9,AE;var AN=Y(()=>{M();NA();aQ();pB();YE();wE();eV=new x,f9=new x,AE=[new UA,new UA,new UA,new UA];p8.extension={type:[N.CanvasPipes],name:"tilingSprite"}});var QN,IN;var BN=Y(()=>{QN={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},IN={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}}});var iW,nW,y9;var EN=Y(()=>{NA();cB();ZC();dB();bI();XQ();FA();BN();y9=class y9 extends BQ{constructor(){iW??(iW=oI({name:"tiling-sprite-shader",bits:[OE,QN,aI]})),nW??(nW=sI({name:"tiling-sprite-shader",bits:[HC,IN,rI]}));let A=new PA({uMapCoord:{value:new x,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new x,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,0.5,0.5]),type:"vec4<f32>"}});super({glProgram:nW,gpuProgram:iW,resources:{localUniforms:new PA({uTransformMatrix:{value:new x,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:A,uTexture:v.EMPTY.source,uSampler:v.EMPTY.source.style}})}updateUniforms(A,Q,I,B,E,C){let J=this.resources.tilingUniforms,K=C.width,H=C.height,Z=C.textureMatrix,q=J.uniforms.uTextureTransform;if(q.set(I.a*K/A,I.b*K/Q,I.c*H/A,I.d*H/Q,I.tx/A,I.ty/Q),q.invert(),J.uniforms.uMapCoord=Z.mapCoord,J.uniforms.uClampFrame=Z.uClampFrame,J.uniforms.uClampOffset=Z.uClampOffset,J.uniforms.uTextureTransform=q,J.uniforms.uSizeAnchor[0]=A,J.uniforms.uSizeAnchor[1]=Q,J.uniforms.uSizeAnchor[2]=B,J.uniforms.uSizeAnchor[3]=E,C)this.resources.uTexture=C.source,this.resources.uSampler=C.source.style}}});var v9;var CN=Y(()=>{eB();v9=class v9 extends RI{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}});function JN(A,Q){let I=A.anchor.x,B=A.anchor.y;Q[0]=-I*A.width,Q[1]=-B*A.height,Q[2]=(1-I)*A.width,Q[3]=-B*A.height,Q[4]=(1-I)*A.width,Q[5]=(1-B)*A.height,Q[6]=-I*A.width,Q[7]=(1-B)*A.height}var KN=()=>{};function HN(A,Q,I,B){let E=0,C=A.length/(Q||2),J=B.a,K=B.b,H=B.c,Z=B.d,q=B.tx,w=B.ty;I*=Q;while(E<C){let $=A[I],U=A[I+1];A[I]=J*$+H*U+q,A[I+1]=K*$+Z*U+w,I+=Q,E++}}var ZN=()=>{};function qN(A,Q){let I=A.texture,B=I.frame.width,E=I.frame.height,C=0,J=0;if(A.applyAnchorToTexture)C=A.anchor.x,J=A.anchor.y;Q[0]=Q[6]=-C,Q[2]=Q[4]=1-C,Q[1]=Q[3]=-J,Q[5]=Q[7]=1-J;let K=x.shared;K.copyFrom(A._tileTransform.matrix),K.tx/=A.width,K.ty/=A.height,K.invert(),K.scale(A.width/B,A.height/E),HN(Q,2,0,K)}var wN=Y(()=>{NA();ZN()});class $N{constructor(){this.canBatch=!0,this.geometry=new RI({indices:YN.indices.slice(),positions:YN.positions.slice(),uvs:YN.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class u8{constructor(A){this._state=oA.default2d,this._renderer=A,this._managedTilingSprites=new vA({renderer:A,type:"renderable",name:"tilingSprite"})}validateRenderable(A){let Q=this._getTilingSpriteData(A),I=Q.canBatch;this._updateCanBatch(A);let B=Q.canBatch;if(B&&B===I){let{batchableMesh:E}=Q;return!E._batcher.checkAndUpdateTexture(E,A.texture)}return I!==B}addRenderable(A,Q){let I=this._renderer.renderPipes.batch;this._updateCanBatch(A);let B=this._getTilingSpriteData(A),{geometry:E,canBatch:C}=B;if(C){B.batchableMesh||(B.batchableMesh=new fE);let J=B.batchableMesh;if(A.didViewUpdate)this._updateBatchableMesh(A),J.geometry=E,J.renderable=A,J.transform=A.groupTransform,J.setTexture(A._texture);J.roundPixels=this._renderer._roundPixels|A._roundPixels,I.addToBatch(J,Q)}else I.break(Q),B.shader||(B.shader=new y9),this.updateRenderable(A),Q.add(A)}execute(A){let Q=this._renderer,{shader:I}=this._getTilingSpriteData(A);I.groups[0]=Q.globalUniforms.bindGroup;let B=I.resources.localUniforms.uniforms;B.uTransformMatrix=A.groupTransform,B.uRound=Q._roundPixels|A._roundPixels,tI(A.groupColorAlpha,B.uColor,0),this._state.blendMode=DB(A.groupBlendMode,A.texture._source),Q.encoder.draw({geometry:YN,shader:I,state:this._state})}updateRenderable(A){let Q=this._getTilingSpriteData(A),{canBatch:I}=Q;if(I){let{batchableMesh:B}=Q;if(A.didViewUpdate)this._updateBatchableMesh(A);B._batcher.updateElement(B)}else if(A.didViewUpdate){let{shader:B}=Q;B.updateUniforms(A.width,A.height,A._tileTransform.matrix,A.anchor.x,A.anchor.y,A.texture)}}_getTilingSpriteData(A){return A._gpuData[this._renderer.uid]||this._initTilingSpriteData(A)}_initTilingSpriteData(A){let Q=new $N;return Q.renderable=A,A._gpuData[this._renderer.uid]=Q,this._managedTilingSprites.add(A),Q}_updateBatchableMesh(A){let Q=this._getTilingSpriteData(A),{geometry:I}=Q,B=A.texture.source.style;if(B.addressMode!=="repeat")B.addressMode="repeat",B.update();qN(A,I.uvs),JN(A,I.positions)}destroy(){this._managedTilingSprites.destroy(),this._renderer=null}_updateCanBatch(A){let Q=this._getTilingSpriteData(A),I=A.texture,B=!0;if(this._renderer.type===cA.WEBGL)B=this._renderer.context.supports.nonPowOf2wrapping;return Q.canBatch=I.textureMatrix.isSimple&&(B||I.source.isPowerOfTwo),Q.canBatch}}var YN;var UN=Y(()=>{M();$0();$I();nQ();xQ();zC();c8();eB();EN();CN();KN();wN();YN=new v9;u8.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"tilingSprite"}});var Fj=Y(()=>{M();AN();UN();p.add(p8);p.add(u8)});var Oj,f0;var VN=Y(()=>{lI();HE();FA();gA();tV();uI();Fj();Oj=class A extends wQ{constructor(...Q){let I=Q[0]||{};if(I instanceof v)I={texture:I};if(Q.length>1)c(BA,"use new TilingSprite({ texture, width:100, height:100 }) instead"),I.width=Q[1],I.height=Q[2];I={...A.defaultOptions,...I};let{texture:B,anchor:E,tilePosition:C,tileScale:J,tileRotation:K,width:H,height:Z,applyAnchorToTexture:q,roundPixels:w,...$}=I??{};super({label:"TilingSprite",...$});if(this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new xA({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=q,this.texture=B,this._width=H??B.width,this._height=Z??B.height,this._tileTransform=new b9({observer:{_onUpdate:()=>this.onViewUpdate()}}),E)this.anchor=E;this.tilePosition=C,this.tileScale=J,this.tileRotation=K,this.roundPixels=w??!1}static from(Q,I={}){if(typeof Q==="string")return new A({texture:LA.get(Q),...I});return new A({texture:Q,...I})}get uvRespectAnchor(){return c(BA,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(Q){c(BA,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=Q}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(Q){this._texture.textureMatrix.clampMargin=Q}get anchor(){return this._anchor}set anchor(Q){typeof Q==="number"?this._anchor.set(Q):this._anchor.copyFrom(Q)}get tilePosition(){return this._tileTransform.position}set tilePosition(Q){this._tileTransform.position.copyFrom(Q)}get tileScale(){return this._tileTransform.scale}set tileScale(Q){typeof Q==="number"?this._tileTransform.scale.set(Q):this._tileTransform.scale.copyFrom(Q)}set tileRotation(Q){this._tileTransform.rotation=Q}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(Q){Q||(Q=v.EMPTY);let I=this._texture;if(I===Q)return;if(I&&I.dynamic)I.off("update",this.onViewUpdate,this);if(Q.dynamic)Q.on("update",this.onViewUpdate,this);this._texture=Q,this.onViewUpdate()}get texture(){return this._texture}set width(Q){this._width=Q,this.onViewUpdate()}get width(){return this._width}set height(Q){this._height=Q,this.onViewUpdate()}get height(){return this._height}setSize(Q,I){if(typeof Q==="object")I=Q.height??Q.width,Q=Q.width;this._width=Q,this._height=I??Q,this.onViewUpdate()}getSize(Q){return Q||(Q={}),Q.width=this._width,Q.height=this._height,Q}updateBounds(){let Q=this._bounds,I=this._anchor,B=this._width,E=this._height;Q.minX=-I._x*B,Q.maxX=Q.minX+B,Q.minY=-I._y*E,Q.maxY=Q.minY+E}containsPoint(Q){let I=this._width,B=this._height,E=-I*this._anchor._x,C=0;if(Q.x>=E&&Q.x<=E+I){if(C=-B*this._anchor._y,Q.y>=C&&Q.y<=C+B)return!0}return!1}destroy(Q=!1){if(super.destroy(Q),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof Q==="boolean"?Q:Q?.texture){let B=typeof Q==="boolean"?Q:Q?.textureSource;this._texture.destroy(B)}this._texture=null}};Oj.defaultOptions={texture:v.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};f0=Oj});function gC(A,Q){let I=A[0]??{};if(typeof I==="string"||A[1])c(BA,`use new ${Q}({ text: "hi!", style }) instead`),I={text:I,style:A[1]};return I}var vI;var l8=Y(()=>{HE();gA();uI();vI=class vI extends wQ{constructor(A,Q){let{text:I,resolution:B,style:E,anchor:C,width:J,height:K,roundPixels:H,...Z}=A;super({...Z});if(this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=Q,this.text=I??"",this.style=E,this.resolution=B??null,this.allowChildren=!1,this._anchor=new xA({_onUpdate:()=>{this.onViewUpdate()}}),C)this.anchor=C;if(this.roundPixels=H??!1,J!==void 0)this.width=J;if(K!==void 0)this.height=K}get anchor(){return this._anchor}set anchor(A){typeof A==="number"?this._anchor.set(A):this._anchor.copyFrom(A)}set text(A){if(A=A.toString(),this._text===A)return;this._text=A,this.onViewUpdate()}get text(){return this._text}set resolution(A){this._autoResolution=A===null,this._resolution=A,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(A){if(A||(A={}),this._style?.off("update",this.onViewUpdate,this),A instanceof this._styleClass)this._style=A;else this._style=new this._styleClass(A);this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(A){this._setWidth(A,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(A){this._setHeight(A,this.bounds.height)}getSize(A){return A||(A={}),A.width=Math.abs(this.scale.x)*this.bounds.width,A.height=Math.abs(this.scale.y)*this.bounds.height,A}setSize(A,Q){if(typeof A==="object")Q=A.height??A.width,A=A.width;else Q??(Q=A);A!==void 0&&this._setWidth(A,this.bounds.width),Q!==void 0&&this._setHeight(Q,this.bounds.height)}containsPoint(A){let Q=this.bounds.width,I=this.bounds.height,B=-Q*this.anchor.x,E=0;if(A.x>=B&&A.x<=B+Q){if(E=-I*this.anchor.y,A.y>=E&&A.y<=E+I)return!0}return!1}onViewUpdate(){if(!this.didViewUpdate)this._didTextUpdate=!0;super.onViewUpdate()}destroy(A=!1){if(super.destroy(A),this.owner=null,this._bounds=null,this._anchor=null,typeof A==="boolean"?A:A?.style)this._style.destroy(A);this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}});function _S(A,Q){if(!y0)y0=u.get().createCanvas(256,128),yE=y0.getContext("2d",{willReadFrequently:!0}),yE.globalCompositeOperation="copy",yE.globalAlpha=1;if(y0.width<A||y0.height<Q)y0.width=ZB(A),y0.height=ZB(Q)}function Gj(A,Q,I){for(let B=0,E=4*I*Q;B<Q;++B,E+=4)if(A[E+3]!==0)return!1;return!0}function jj(A,Q,I,B,E){let C=4*Q;for(let J=B,K=B*C+4*I;J<=E;++J,K+=C)if(A[K+3]!==0)return!1;return!0}function NN(...A){let Q=A[0];if(!Q.canvas)Q={canvas:A[0],resolution:A[1]};let{canvas:I}=Q,B=Math.min(Q.resolution??1,1),E=Q.width??I.width,C=Q.height??I.height,J=Q.output;if(_S(E,C),!yE)throw new TypeError("Failed to get canvas 2D context");yE.drawImage(I,0,0,E,C,0,0,E*B,C*B);let H=yE.getImageData(0,0,E,C).data,Z=0,q=0,w=E-1,$=C-1;while(q<C&&Gj(H,E,q))++q;if(q===C)return EA.EMPTY;while(Gj(H,E,$))--$;while(jj(H,E,Z,q,$))++Z;while(jj(H,E,w,q,$))--w;return++w,++$,yE.globalCompositeOperation="source-over",yE.strokeRect(Z,q,w-Z,$-q),yE.globalCompositeOperation="copy",J??(J=new EA),J.set(Z/B,q/B,(w-Z)/B,($-q)/B),J}var y0=null,yE=null;var zN=Y(()=>{jA();mC();ZQ()});class Rj{getCanvasAndContext(A){let{text:Q,style:I,resolution:B=1}=A,E=I._getFinalPadding(),C=eA.measureText(Q||" ",I),J=Math.ceil(Math.ceil(Math.max(1,C.width)+E*2)*B),K=Math.ceil(Math.ceil(Math.max(1,C.height)+E*2)*B),H=mQ.getOptimalCanvasAndContext(J,K);this._renderTextToCanvas(I,E,B,H,C);let Z=I.trim?NN({canvas:H.canvas,width:J,height:K,resolution:1,output:Lj}):Lj.set(0,0,J,K);return{canvasAndContext:H,frame:Z}}returnCanvasAndContext(A){mQ.returnCanvasAndContext(A)}_renderTextToCanvas(A,Q,I,B,E){if(E.runsByLine&&E.runsByLine.length>0){this._renderTaggedTextToCanvas(E,A,Q,I,B);return}let{canvas:C,context:J}=B,K=iB(A),H=E.lines,Z=E.lineHeight,q=E.lineWidths,w=E.maxLineWidth,$=E.fontProperties,U=C.height;if(J.resetTransform(),J.scale(I,I),J.textBaseline=A.textBaseline,A._stroke?.width){let L=A._stroke;J.lineWidth=L.width,J.miterLimit=L.miterLimit,J.lineJoin=L.join,J.lineCap=L.cap}J.font=K;let V,z,D=A.dropShadow?2:1,W=A.wordWrap?A.wordWrapWidth:w,O=(A._stroke?.width??0)/2,F=(Z-$.fontSize)/2;if(Z-$.fontSize<0)F=0;for(let L=0;L<D;++L){let R=A.dropShadow&&L===0,_=R?Math.ceil(Math.max(1,U)+Q*2):0,T=_*I;if(R)this._setupDropShadow(J,A,I,T);else{let{_gradientBounds:f,_gradientOffset:S}=A;if(f){let g={width:f.width,height:f.height,lineHeight:f.height,lines:E.lines};this._setFillAndStrokeStyles(J,A,g,Q,O,S?.x??0,S?.y??0)}else if(S)this._setFillAndStrokeStyles(J,A,E,Q,O,S.x,S.y);else this._setFillAndStrokeStyles(J,A,E,Q,O);J.shadowColor="black"}for(let f=0;f<H.length;f++){if(V=O,z=O+f*Z+$.ascent+F,V+=this._getAlignmentOffset(q[f],W,A.align),A._stroke?.width)this._drawLetterSpacing(H[f],A,B,V+Q,z+Q-_,!0);if(A._fill!==void 0)this._drawLetterSpacing(H[f],A,B,V+Q,z+Q-_)}}}_renderTaggedTextToCanvas(A,Q,I,B,E){let{canvas:C,context:J}=E,{runsByLine:K,lineWidths:H,maxLineWidth:Z,lineAscents:q,lineHeights:w,hasDropShadow:$}=A,U=C.height;J.resetTransform(),J.scale(B,B),J.textBaseline=Q.textBaseline;let V=$?2:1,z=Q.wordWrap?Q.wordWrapWidth:Z,W=(Q._stroke?.width??0)/2,j=[];for(let O=0;O<K.length;O++){let F=K[O],L=[];for(let R of F){let _=iB(R.style);J.font=_,L.push({width:eA._measureText(R.text,R.style.letterSpacing,J),font:_})}j.push(L)}for(let O=0;O<V;++O){let F=$&&O===0,L=F?Math.ceil(Math.max(1,U)+I*2):0,R=L*B;if(!F)J.shadowColor="black";let _=W;for(let T=0;T<K.length;T++){let f=K[T],S=H[T],g=q[T],d=w[T],a=j[T],AA=W;AA+=this._getAlignmentOffset(S,z,Q.align);let CA=_+g,y=AA+I;for(let m=0;m<f.length;m++){let t=f[m],{width:r,font:WA}=a[m];if(J.font=WA,J.textBaseline=t.style.textBaseline,t.style._stroke?.width){let kA=t.style._stroke;if(J.lineWidth=kA.width,J.miterLimit=kA.miterLimit,J.lineJoin=kA.join,J.lineCap=kA.cap,F)if(t.style.dropShadow)this._setupDropShadow(J,t.style,B,R);else{y+=r;continue}else{let zA=eA.measureFont(WA),$A=t.style.lineHeight||zA.fontSize,fA={width:r,height:$A,lineHeight:$A,lines:[t.text]};J.strokeStyle=nB(kA,J,fA,I*2,y-I,_)}this._drawLetterSpacing(t.text,t.style,E,y,CA+I-L,!0)}y+=r}y=AA+I;for(let m=0;m<f.length;m++){let t=f[m],{width:r,font:WA}=a[m];if(J.font=WA,J.textBaseline=t.style.textBaseline,t.style._fill!==void 0){if(F)if(t.style.dropShadow)this._setupDropShadow(J,t.style,B,R);else{y+=r;continue}else{let kA=eA.measureFont(WA),zA=t.style.lineHeight||kA.fontSize,$A={width:r,height:zA,lineHeight:zA,lines:[t.text]};J.fillStyle=nB(t.style._fill,J,$A,I*2,y-I,_)}this._drawLetterSpacing(t.text,t.style,E,y,CA+I-L,!1)}y+=r}_+=d}}}_setFillAndStrokeStyles(A,Q,I,B,E,C=0,J=0){if(A.fillStyle=Q._fill?nB(Q._fill,A,I,B*2,C,J):null,Q._stroke?.width){let K=E+B*2;A.strokeStyle=nB(Q._stroke,A,I,K,C,J)}}_setupDropShadow(A,Q,I,B){A.fillStyle="black",A.strokeStyle="black";let E=Q.dropShadow,C=E.color,J=E.alpha;A.shadowColor=JA.shared.setValue(C).setAlpha(J).toRgbaString();let K=E.blur*I,H=E.distance*I;A.shadowBlur=K,A.shadowOffsetX=Math.cos(E.angle)*H,A.shadowOffsetY=Math.sin(E.angle)*H+B}_getAlignmentOffset(A,Q,I){if(I==="right")return Q-A;else if(I==="center")return(Q-A)/2;return 0}_drawLetterSpacing(A,Q,I,B,E,C=!1){let{context:J}=I,K=Q.letterSpacing,H=!1;if(eA.experimentalLetterSpacingSupported)if(eA.experimentalLetterSpacing)J.letterSpacing=`${K}px`,J.textLetterSpacing=`${K}px`,H=!0;else J.letterSpacing="0px",J.textLetterSpacing="0px";if(K===0||H){if(C)J.strokeText(A,B,E);else J.fillText(A,B,E);return}let Z=B,q=eA.graphemeSegmenter(A),w=J.measureText(A).width,$=0;for(let U=0;U<q.length;++U){let V=q[U];if(C)J.strokeText(V,Z,E);else J.fillText(V,Z,E);let z="";for(let D=U+1;D<q.length;++D)z+=q[D];$=J.measureText(z).width,Z+=w-$+K,w=$}}}var Lj,TI;var i8=Y(()=>{IQ();ZQ();RE();zN();lB();z8();A9();Lj=new EA;TI=new Rj});function v0(A,Q){let{texture:I,bounds:B}=A,E=Q._style._getFinalPadding();VJ(B,Q._anchor,I);let C=Q._anchor._x*E*2,J=Q._anchor._y*E*2;B.minX-=E-C,B.minY-=E-J,B.maxX-=E-C,B.maxY-=E-J}var T9=Y(()=>{aH()});var h9;var DN=Y(()=>{Z0();h9=class h9 extends NB{}});class n8{constructor(A){this._renderer=A,A.runners.resolutionChange.add(this),this._managedTexts=new vA({renderer:A,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"canvasText"})}resolutionChange(){for(let A in this._managedTexts.items){let Q=this._managedTexts.items[A];if(Q?._autoResolution)Q.onViewUpdate()}}validateRenderable(A){let Q=this._getGpuText(A),I=A.styleKey;if(Q.currentKey!==I)return!0;return A._didTextUpdate}addRenderable(A,Q){let I=this._getGpuText(A);if(A._didTextUpdate){let B=A._autoResolution?this._renderer.resolution:A.resolution;if(I.currentKey!==A.styleKey||A._resolution!==B)this._updateGpuText(A);A._didTextUpdate=!1,v0(I,A)}this._renderer.renderPipes.batch.addToBatch(I,Q)}updateRenderable(A){let Q=this._getGpuText(A);Q._batcher.updateElement(Q)}_updateGpuText(A){let Q=this._getGpuText(A);if(Q.texture)this._renderer.canvasText.decreaseReferenceCount(Q.currentKey);A._resolution=A._autoResolution?this._renderer.resolution:A.resolution,Q.texture=this._renderer.canvasText.getManagedTexture(A),Q.currentKey=A.styleKey}_getGpuText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){let Q=new h9;return Q.currentKey="--",Q.renderable=A,Q.transform=A.groupTransform,Q.bounds={minX:0,maxX:1,minY:0,maxY:0},Q.roundPixels=this._renderer._roundPixels|A._roundPixels,A._gpuData[this._renderer.uid]=Q,this._managedTexts.add(A),Q}onTextUnload(A){let Q=A._gpuData[this._renderer.uid];if(!Q)return;let{canvasText:I}=this._renderer;if(I.getReferenceCount(Q.currentKey)>0)I.decreaseReferenceCount(Q.currentKey);else if(Q.texture)I.returnTexture(Q.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}}var WN=Y(()=>{M();xQ();T9();DN();n8.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"text"}});function _C(A,Q,I,B){let E=SS;E.minX=0,E.minY=0,E.maxX=A.width/B|0,E.maxY=A.height/B|0;let C=hA.getOptimalTexture(E.width,E.height,B,!1);return C.source.uploadMethodId="image",C.source.resource=A,C.source.alphaMode="premultiply-alpha-on-upload",C.frame.width=Q/B,C.frame.height=I/B,C.source.emit("update",C.source),C.updateUvs(),C}var SS;var o8=Y(()=>{pI();_Q();SS=new RA});class T0{constructor(A,Q){this._activeTextures={},this._renderer=A,this._retainCanvasContext=Q}getTexture(A,Q,I,B){if(typeof A==="string")c("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),A={text:A,style:I,resolution:Q};if(!(A.style instanceof AQ))A.style=new AQ(A.style);if(!(A.textureStyle instanceof DQ))A.textureStyle=new DQ(A.textureStyle);if(typeof A.text!=="string")A.text=A.text.toString();let{text:E,style:C,textureStyle:J}=A,K=A.resolution??this._renderer.resolution,{frame:H,canvasAndContext:Z}=TI.getCanvasAndContext({text:E,style:C,resolution:K}),q=_C(Z.canvas,H.width,H.height,K);if(J)q.source.style=J;if(C.trim)H.pad(C.padding),q.frame.copyFrom(H),q.frame.scale(1/K),q.updateUvs();if(C.filters){let w=this._applyFilters(q,C.filters);return this.returnTexture(q),TI.returnCanvasAndContext(Z),w}if(this._renderer.texture.initSource(q._source),!this._retainCanvasContext)TI.returnCanvasAndContext(Z);return q}returnTexture(A){let Q=A.source,I=Q.resource;if(this._retainCanvasContext&&I?.getContext){let B=I.getContext("2d");if(B)TI.returnCanvasAndContext({canvas:I,context:B})}Q.resource=null,Q.uploadMethodId="unknown",Q.alphaMode="no-premultiply-alpha",hA.returnTexture(A,!0)}renderTextToCanvas(){c("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(A){A._resolution=A._autoResolution?this._renderer.resolution:A.resolution;let Q=A.styleKey;if(this._activeTextures[Q])return this._increaseReferenceCount(Q),this._activeTextures[Q].texture;let I=this.getTexture({text:A.text,style:A.style,resolution:A._resolution,textureStyle:A.textureStyle});return this._activeTextures[Q]={texture:I,usageCount:1},I}decreaseReferenceCount(A){let Q=this._activeTextures[A];if(!Q)return;if(Q.usageCount--,Q.usageCount===0)this.returnTexture(Q.texture),this._activeTextures[A]=null}getReferenceCount(A){return this._activeTextures[A]?.usageCount??0}_increaseReferenceCount(A){this._activeTextures[A].usageCount++}_applyFilters(A,Q){let I=this._renderer.renderTarget.renderTarget,B=this._renderer.filter.generateFilteredTexture({texture:A,filters:Q});return this._renderer.renderTarget.bind(I,!1),B}destroy(){this._renderer=null;for(let A in this._activeTextures)if(this._activeTextures[A])this.returnTexture(this._activeTextures[A].texture);this._activeTextures=null}}var x9=Y(()=>{pI();qB();gA();i8();yI();o8()});var s8;var XN=Y(()=>{M();x9();s8=class s8 extends T0{constructor(A){super(A,!0)}};s8.extension={type:[N.CanvasSystem],name:"canvasText"}});var a8;var kN=Y(()=>{M();x9();a8=class a8 extends T0{constructor(A){super(A,!1)}};a8.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"canvasText"}});var Pj=Y(()=>{M();WN();XN();kN();p.add(s8);p.add(a8);p.add(n8)});var PI;var r8=Y(()=>{qB();l8();i8();lB();yI();Pj();PI=class PI extends vI{constructor(...A){let Q=gC(A,"Text");super(Q,AQ);if(this.renderPipeId="text",Q.textureStyle)this.textureStyle=Q.textureStyle instanceof DQ?Q.textureStyle:new DQ(Q.textureStyle)}updateBounds(){let A=this._bounds,Q=this._anchor,I=0,B=0;if(this._style.trim){let{frame:E,canvasAndContext:C}=TI.getCanvasAndContext({text:this.text,style:this._style,resolution:1});TI.returnCanvasAndContext(C),I=E.width,B=E.height}else{let E=eA.measureText(this._text,this._style);I=E.width,B=E.height}A.minX=-Q._x*I,A.maxX=A.minX+I,A.minY=-Q._y*B,A.maxY=A.minY+B}}});var m9;var FN=Y(()=>{WQ();FA();TQ();B8();GC();PC();fB();rV();VN();r8();sV();m9=class m9 extends oV{resolveQueueItem(A,Q){if(A instanceof QA)this.resolveContainerQueueItem(A,Q);else if(A instanceof GA||A instanceof v)Q.push(A.source);else if(A instanceof kQ)Q.push(A);return null}resolveContainerQueueItem(A,Q){if(A instanceof bQ||A instanceof f0||A instanceof IB)Q.push(A.texture.source);else if(A instanceof PI)Q.push(A);else if(A instanceof UQ)Q.push(A.context);else if(A instanceof MC)A.textures.forEach((I)=>{if(I.source)Q.push(I.source);else Q.push(I.texture.source)})}resolveGraphicsContextQueueItem(A){this.renderer.graphicsContext.getGpuContext(A);let{instructions:Q}=A;for(let I of Q)if(I.action==="texture"){let{image:B}=I.data;return B.source}else if(I.action==="fill"){let{texture:B}=I.data.style;return B.source}return null}}});class h0{constructor(A){this._renderer=A,this._managedBitmapTexts=new vA({renderer:A,type:"renderable",priority:-2,name:"bitmapText"})}validateRenderable(A){let Q=this._getGpuBitmapText(A);return this._renderer.renderPipes.graphics.validateRenderable(Q)}addRenderable(A,Q){let I=this._getGpuBitmapText(A);if(Mj(A,I),A._didTextUpdate)A._didTextUpdate=!1,this._updateContext(A,I);if(this._renderer.renderPipes.graphics.addRenderable(I,Q),I.context.customShader)this._updateDistanceField(A)}updateRenderable(A){let Q=this._getGpuBitmapText(A);if(Mj(A,Q),this._renderer.renderPipes.graphics.updateRenderable(Q),Q.context.customShader)this._updateDistanceField(A)}_updateContext(A,Q){let{context:I}=Q,B=kB.getFont(A.text,A._style);if(I.clear(),B.distanceField.type!=="none"){let D=this.getSdfShader();if(D){if(!I.customShader)I.customShader=D}}let E=eA.graphemeSegmenter(A.text),C=A._style,J=B.baseLineOffset,K=jC(E,C,B,!0),H=C.padding,Z=K.scale,q=K.width,w=K.height+K.offsetY;if(C._stroke)q+=C._stroke.width/Z,w+=C._stroke.width/Z;I.translate(-A._anchor._x*q-H,-A._anchor._y*w-H).scale(Z,Z);let $=B.applyFillAsTint?C._fill.color:16777215,U=B.fontMetrics.fontSize,V=B.lineHeight;if(C.lineHeight)U=C.fontSize/Z,V=C.lineHeight/Z;let z=(V-U)/2;if(z-B.baseLineOffset<0)z=0;for(let D=0;D<K.lines.length;D++){let W=K.lines[D];for(let j=0;j<W.charPositions.length;j++){let O=W.chars[j],F=B.chars[O];if(F?.texture){let L=F.texture;I.texture(L,$,Math.round(W.charPositions[j]+F.xOffset),Math.round(J+F.yOffset+z),L.orig.width,L.orig.height)}}J+=V}}_getGpuBitmapText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){let Q=new ON;return A._gpuData[this._renderer.uid]=Q,this._updateContext(A,Q),this._managedBitmapTexts.add(A),Q}_updateDistanceField(A){let Q=this._getGpuBitmapText(A).context,I=A._style.fontFamily,B=LA.get(`${I}-bitmap`),{a:E,b:C,c:J,d:K}=A.groupTransform,H=Math.sqrt(E*E+C*C),Z=Math.sqrt(J*J+K*K),q=(Math.abs(H)+Math.abs(Z))/2,w=B.baseRenderedFontSize/A._style.fontSize,$=q*B.distanceField.range*(1/w);Q.customShader.resources.localUniforms.uniforms.uDistance=$}destroy(){this._managedBitmapTexts.destroy(),this._renderer=null,this._managedBitmapTexts=null}}function Mj(A,Q){Q.groupTransform=A.groupTransform,Q.groupColorAlpha=A.groupColorAlpha,Q.groupColor=A.groupColor,Q.groupBlendMode=A.groupBlendMode,Q.globalDisplayStatus=A.globalDisplayStatus,Q.groupTransform=A.groupTransform,Q.localDisplayStatus=A.localDisplayStatus,Q.groupAlpha=A.groupAlpha,Q._roundPixels=A._roundPixels}var ON;var c9=Y(()=>{lI();xQ();B8();lB();M0();D8();ON=class ON extends UQ{destroy(){if(this.context.customShader)this.context.customShader.destroy();super.destroy()}}});var t8;var GN=Y(()=>{M();c9();t8=class t8 extends h0{getSdfShader(){return null}};t8.extension={type:[N.CanvasPipes],name:"bitmapText"}});var jN,LN;var RN=Y(()=>{jN={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, vColor, localUniforms.uDistance));
        `}},LN={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}}});var PN,MN;var gN=Y(()=>{PN={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},MN={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}}});var oW,sW,d9;var _N=Y(()=>{NA();cB();K0();H0();dB();pJ();bI();XQ();RN();gN();d9=class d9 extends BQ{constructor(A){let Q=new PA({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new x,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});oW??(oW=oI({name:"sdf-shader",bits:[EC,JC(A),jN,PN,aI]})),sW??(sW=sI({name:"sdf-shader",bits:[CC,KC(A),LN,MN,rI]}));super({glProgram:sW,gpuProgram:oW,resources:{localUniforms:Q,batchSamplers:UC(A)}})}}});var e8;var SN=Y(()=>{M();_N();c9();e8=class e8 extends h0{getSdfShader(){return new d9(this._renderer.limits.maxBatchableTextures)}};e8.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"bitmapText"}});var gj=Y(()=>{M();GN();SN();p.add(t8);p.add(e8)});var SC;var p9=Y(()=>{_A();l8();yI();M0();gj();SC=class SC extends vI{constructor(...A){var Q;let I=gC(A,"BitmapText");I.style??(I.style=I.style||{}),(Q=I.style).fill??(Q.fill=16777215);super(I,AQ);this.renderPipeId="bitmapText"}_onTouch(A){this._gcLastUsed=A;for(let Q in this._gpuData)this._gpuData[Q]?._onTouch(A)}updateBounds(){let A=this._bounds,Q=this._anchor,I=kB.measureText(this.text,this._style),B=I.scale,E=I.offsetY*B,C=I.width*B,J=I.height*B,K=this._style._stroke;if(K)C+=K.width,J+=K.width;A.minX=-Q._x*C,A.maxX=A.minX+C,A.minY=-Q._y*(J+E),A.maxY=A.minY+J}set resolution(A){if(A!==null)n("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}});function bN(A){let{_stroke:Q,_fill:I}=A,C=[`div { ${[`color: ${JA.shared.setValue(I.color).setAlpha(I.alpha??1).toHexa()}`,`font-size: ${A.fontSize}px`,`font-family: ${A.fontFamily}`,`font-weight: ${A.fontWeight}`,`font-style: ${A.fontStyle}`,`font-variant: ${A.fontVariant}`,`letter-spacing: ${A.letterSpacing}px`,`text-align: ${A.align}`,`padding: ${A.padding}px`,`white-space: ${A.whiteSpace==="pre"&&A.wordWrap?"pre-wrap":A.whiteSpace}`,...A.lineHeight?[`line-height: ${A.lineHeight}px`]:[],...A.wordWrap?[`word-break: ${A.breakWords?"break-all":"normal"}`,`max-width: ${A.wordWrapWidth}px`]:[],...Q?[bj(Q)]:[],...A.dropShadow?[aW(A.dropShadow)]:[],...A.cssOverrides].join(";")} }`];return bS(A.tagStyles,C),C.join(" ")}function aW(A){let Q={...A},I=JA.shared.setValue(Q.color).setAlpha(Q.alpha??1).toHexa(),B=Math.round(Math.cos(Q.angle)*Q.distance),E=Math.round(Math.sin(Q.angle)*Q.distance),C=`${B}px ${E}px`;if(Q.blur>0)return`text-shadow: ${C} ${Q.blur}px ${I}`;return`text-shadow: ${C} ${I}`}function bj(A){let Q=JA.shared.setValue(A.color).setAlpha(A.alpha??1).toHexa();return[`-webkit-text-stroke-width: ${A.width}px`,`-webkit-text-stroke-color: ${Q}`,`text-stroke-width: ${A.width}px`,`text-stroke-color: ${Q}`,"paint-order: stroke"].join(";")}function bS(A,Q){for(let I in A){let B=A[I],E=[];for(let C in B)if(Sj[C])E.push(Sj[C](B[C]));else if(_j[C])E.push(_j[C].replace("{{VALUE}}",B[C]));Q.push(`${I} { ${E.join(";")} }`)}}var _j,Sj;var fN=Y(()=>{IQ();yI();_j={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},Sj={fill:(A)=>`color: ${JA.shared.setValue(A).toHexa()}`,breakWords:(A)=>`word-break: ${A?"break-all":"normal"}`,stroke:bj,dropShadow:(A)=>{if(A===!0)return aW(AQ.defaultDropShadow);if(A&&typeof A==="object")return aW({...AQ.defaultDropShadow,...A});return""}}});var AH;var yN=Y(()=>{_A();yI();fN();AH=class AH extends AQ{constructor(A={}){super(A);this._cssOverrides=[],this.cssOverrides=A.cssOverrides??[],this.tagStyles=A.tagStyles??{}}get tagStyles(){return this._tagStyles}set tagStyles(A){if(this._tagStyles===A)return;this._tagStyles=A??{},this.update()}set cssOverrides(A){this._cssOverrides=A instanceof Array?A:[A],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new AH({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){if(!this._cssStyle)this._cssStyle=bN(this);return this._cssStyle}addOverride(...A){let Q=A.filter((I)=>!this.cssOverrides.includes(I));if(Q.length>0)this.cssOverrides.push(...Q),this.update()}removeOverride(...A){let Q=A.filter((I)=>this.cssOverrides.includes(I));if(Q.length>0)this.cssOverrides=this.cssOverrides.filter((I)=>!Q.includes(I)),this.update()}set fill(A){if(typeof A!=="string"&&typeof A!=="number")n("[HTMLTextStyle] only color fill is not supported by HTMLText");super.fill=A}set stroke(A){if(A&&typeof A!=="string"&&typeof A!=="number")n("[HTMLTextStyle] only color stroke is not supported by HTMLText");super.stroke=A}}});class x0{constructor(){this.svgRoot=document.createElementNS(fj,"svg"),this.foreignObject=document.createElementNS(fj,"foreignObject"),this.domElement=document.createElementNS(yj,"div"),this.styleElement=document.createElementNS(yj,"style");let{foreignObject:A,svgRoot:Q,styleElement:I,domElement:B}=this;A.setAttribute("width","10000"),A.setAttribute("height","10000"),A.style.overflow="hidden",Q.appendChild(A),A.appendChild(I),A.appendChild(B),this.image=u.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src="",this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}}var fj="http://www.w3.org/2000/svg",yj="http://www.w3.org/1999/xhtml";var u9=Y(()=>{jA()});function QH(A,Q,I,B){B||(B=vj||(vj=new x0));let{domElement:E,styleElement:C,svgRoot:J}=B;if(E.innerHTML=`<style>${Q.cssStyle};</style><div style='padding:0'>${A}</div>`,E.setAttribute("style","transform-origin: top left; display: inline-block"),I)C.textContent=I;document.body.appendChild(J);let{scrollWidth:K,scrollHeight:H}=E;if(J.remove(),Q.dropShadow){let{distance:q,angle:w,blur:$}=Q.dropShadow,U=Math.abs(Math.round(Math.cos(w)*q)),V=Math.abs(Math.round(Math.sin(w)*q));K+=U+$,H+=V+$}let Z=Q.padding*2;return{width:K-Z,height:H-Z}}var vj;var l9=Y(()=>{u9()});var i9;var vN=Y(()=>{Z0();i9=class i9 extends NB{constructor(){super(...arguments);this.generatingTexture=!1,this.currentKey="--"}destroy(){this.texturePromise=null,this.generatingTexture=!1,this.currentKey="--",super.destroy()}}});class IH{constructor(A){this._renderer=A,A.runners.resolutionChange.add(this),this._managedTexts=new vA({renderer:A,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"htmlText"})}resolutionChange(){for(let A in this._managedTexts.items){let Q=this._managedTexts.items[A];if(Q?._autoResolution)Q.onViewUpdate()}}validateRenderable(A){let Q=this._getGpuText(A),I=A.styleKey;if(Q.currentKey!==I)return!0;return!1}addRenderable(A,Q){let I=this._getGpuText(A);if(A._didTextUpdate){let B=A._autoResolution?this._renderer.resolution:A.resolution;if(I.currentKey!==A.styleKey||A.resolution!==B)this._updateGpuText(A).catch((E)=>{console.error(E)});A._didTextUpdate=!1,v0(I,A)}this._renderer.renderPipes.batch.addToBatch(I,Q)}updateRenderable(A){let Q=this._getGpuText(A);Q._batcher.updateElement(Q)}async _updateGpuText(A){A._didTextUpdate=!1;let Q=this._getGpuText(A);if(Q.generatingTexture)return;let I=Q.texturePromise;Q.texturePromise=null,Q.generatingTexture=!0,A._resolution=A._autoResolution?this._renderer.resolution:A.resolution;let B=this._renderer.htmlText.getTexturePromise(A);if(I)B=B.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(Q.currentKey),this._renderer.htmlText.returnTexturePromise(I)});Q.texturePromise=B,Q.currentKey=A.styleKey,Q.texture=await B;let E=A.renderGroup||A.parentRenderGroup;if(E)E.structureDidChange=!0;Q.generatingTexture=!1,v0(Q,A)}_getGpuText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){let Q=new i9;return Q.renderable=A,Q.transform=A.groupTransform,Q.texture=v.EMPTY,Q.bounds={minX:0,maxX:1,minY:0,maxY:0},Q.roundPixels=this._renderer._roundPixels|A._roundPixels,A._resolution=A._autoResolution?this._renderer.resolution:A.resolution,A._gpuData[this._renderer.uid]=Q,this._managedTexts.add(A),Q}onTextUnload(A){let Q=A._gpuData[this._renderer.uid];if(!Q)return;let{htmlText:I}=this._renderer;I.getReferenceCount(Q.currentKey)===null?I.returnTexturePromise(Q.texturePromise):I.decreaseReferenceCount(Q.currentKey)}destroy(){this._managedTexts.destroy(),this._renderer=null}}var TN=Y(()=>{M();FA();xQ();T9();vN();IH.extension={type:[N.WebGLPipes,N.WebGPUPipes,N.CanvasPipes],name:"htmlText"}});function hN(A,Q){let I=Q.fontFamily,B=[],E={},C=/font-family:([^;"\s]+)/g,J=A.match(C);function K(H){if(!E[H])B.push(H),E[H]=!0}if(Array.isArray(I))for(let H=0;H<I.length;H++)K(I[H]);else K(I);if(J)J.forEach((H)=>{let Z=H.split(":")[1].trim();K(Z)});for(let H in Q.tagStyles){let Z=Q.tagStyles[H].fontFamily;K(Z)}return B}var xN=()=>{};async function mN(A){let I=await(await u.get().fetch(A)).blob(),B=new FileReader;return await new Promise((C,J)=>{B.onloadend=()=>C(B.result),B.onerror=J,B.readAsDataURL(I)})}var cN=Y(()=>{jA()});async function dN(A,Q){let I=await mN(Q);return`@font-face {
        font-family: "${A.fontFamily}";
        font-weight: ${A.fontWeight};
        font-style: ${A.fontStyle};
        src: url('${I}');
    }`}var pN=Y(()=>{cN()});async function uN(A){let Q=A.filter((I)=>LA.has(`${I}-and-url`)).map((I)=>{if(!n9.has(I)){let{entries:B}=LA.get(`${I}-and-url`),E=[];B.forEach((C)=>{let J=C.url,H=C.faces.map((Z)=>({weight:Z.weight,style:Z.style}));E.push(...H.map((Z)=>dN({fontWeight:Z.weight,fontStyle:Z.style,fontFamily:I},J)))}),n9.set(I,Promise.all(E).then((C)=>C.join(`
`)))}return n9.get(I)});return(await Promise.all(Q)).join(`
`)}var n9;var lN=Y(()=>{lI();pN();n9=new Map});function iN(A,Q,I,B,E){let{domElement:C,styleElement:J,svgRoot:K}=E;C.innerHTML=`<style>${Q.cssStyle}</style><div style='padding:0;'>${A}</div>`,C.setAttribute("style",`transform: scale(${I});transform-origin: top left; display: inline-block`),J.textContent=B;let{width:H,height:Z}=E.image;return K.setAttribute("width",H.toString()),K.setAttribute("height",Z.toString()),new XMLSerializer().serializeToString(K)}var nN=()=>{};function oN(A,Q){let I=mQ.getOptimalCanvasAndContext(A.width,A.height,Q),{context:B}=I;return B.clearRect(0,0,A.width,A.height),B.drawImage(A,0,0),I}var sN=Y(()=>{RE()});function aN(A,Q,I){return new Promise(async(B)=>{if(I)await new Promise((E)=>setTimeout(E,100));A.onload=()=>{B()},A.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(Q)}`,A.crossOrigin="anonymous"})}var rN=()=>{};class BH{constructor(A){this._activeTextures={},this._renderer=A,this._createCanvas=A.type===cA.WEBGPU}getTexture(A){return this.getTexturePromise(A)}getManagedTexture(A){let Q=A.styleKey;if(this._activeTextures[Q])return this._increaseReferenceCount(Q),this._activeTextures[Q].promise;let I=this._buildTexturePromise(A).then((B)=>{return this._activeTextures[Q].texture=B,B});return this._activeTextures[Q]={texture:null,promise:I,usageCount:1},I}getReferenceCount(A){return this._activeTextures[A]?.usageCount??null}_increaseReferenceCount(A){this._activeTextures[A].usageCount++}decreaseReferenceCount(A){let Q=this._activeTextures[A];if(!Q)return;if(Q.usageCount--,Q.usageCount===0){if(Q.texture)this._cleanUp(Q.texture);else Q.promise.then((I)=>{Q.texture=I,this._cleanUp(Q.texture)}).catch(()=>{n("HTMLTextSystem: Failed to clean texture")});this._activeTextures[A]=null}}getTexturePromise(A){return this._buildTexturePromise(A)}async _buildTexturePromise(A){let{text:Q,style:I,resolution:B,textureStyle:E}=A,C=yA.get(x0),J=hN(Q,I),K=await uN(J),H=QH(Q,I,K,C),Z=Math.ceil(Math.ceil(Math.max(1,H.width)+I.padding*2)*B),q=Math.ceil(Math.ceil(Math.max(1,H.height)+I.padding*2)*B),w=C.image,$=2;w.width=(Z|0)+2,w.height=(q|0)+2;let U=iN(Q,I,B,K,C);await aN(w,U,hK()&&J.length>0);let V=w,z;if(this._createCanvas)z=oN(w,B);let D=_C(z?z.canvas:V,w.width-2,w.height-2,B);if(E)D.source.style=E;if(this._createCanvas)this._renderer.texture.initSource(D.source),mQ.returnCanvasAndContext(z);return yA.return(C),D}returnTexturePromise(A){A.then((Q)=>{this._cleanUp(Q)}).catch(()=>{n("HTMLTextSystem: Failed to clean texture")})}_cleanUp(A){hA.returnTexture(A,!0),A.source.resource=null,A.source.uploadMethodId="unknown"}destroy(){this._renderer=null;for(let A in this._activeTextures)if(this._activeTextures[A])this.returnTexturePromise(this._activeTextures[A].promise);this._activeTextures=null}}var tN=Y(()=>{M();RE();pI();nQ();F6();_A();dI();o8();u9();xN();lN();nN();sN();rN();l9();BH.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"htmlText"}});var Tj=Y(()=>{M();TN();tN();p.add(BH);p.add(IH)});var EH;var eN=Y(()=>{qB();l8();yN();l9();Tj();EH=class EH extends vI{constructor(...A){let Q=gC(A,"HtmlText");super(Q,AH);if(this.renderPipeId="htmlText",Q.textureStyle)this.textureStyle=Q.textureStyle instanceof DQ?Q.textureStyle:new DQ(Q.textureStyle)}updateBounds(){let A=this._bounds,Q=this._anchor,I=QH(this.text,this._style),{width:B,height:E}=I;A.minX=-Q._x*B,A.maxX=A.minX+B,A.minY=-Q._y*E,A.maxY=A.minY+E}get text(){return this._text}set text(A){let Q=this._sanitiseText(A.toString());super.text=Q}_sanitiseText(A){return this._removeInvalidHtmlTags(A.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;"))}_removeInvalidHtmlTags(A){let Q=/<[^>]*?(?=<|$)/g;return A.replace(Q,"")}}});var o9;var Az=Y(()=>{WQ();GC();r8();p9();eN();FN();o9=class o9 extends m9{uploadQueueItem(A){if(A instanceof GA)this.uploadTextureSource(A);else if(A instanceof PI)this.uploadText(A);else if(A instanceof EH)this.uploadHTMLText(A);else if(A instanceof SC)this.uploadBitmapText(A);else if(A instanceof kQ)this.uploadGraphicsContext(A)}uploadTextureSource(A){this.renderer.texture.initSource(A)}uploadText(A){this.renderer.renderPipes.text.initGpuText(A)}uploadBitmapText(A){this.renderer.renderPipes.bitmapText.initGpuText(A)}uploadHTMLText(A){this.renderer.renderPipes.htmlText.initGpuText(A)}uploadGraphicsContext(A){this.renderer.graphicsContext.getGpuContext(A);let{instructions:Q}=A;for(let I of Q)if(I.action==="texture"){let{image:B}=I.data;this.uploadTextureSource(B.source)}else if(I.action==="fill"){let{texture:B}=I.data.style;this.uploadTextureSource(B.source)}return null}}});var Qz;var rW=Y(()=>{M();Az();Qz=class Qz extends o9{destroy(){super.destroy(),clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}};Qz.extension={type:[N.WebGLSystem,N.WebGPUSystem],name:"prepare"}});var hj=Y(()=>{sV();FN();rW();Az()});var tW=()=>{};var eW=()=>{};var AX=()=>{};var QX=Y(()=>{NJ();zJ()});function Iz(A){return typeof A.getCanvasFilterString==="function"}class xj{constructor(){this.skip=!1,this.useClip=!1,this.filters=null,this.container=null,this.bounds=new RA,this.cssFilterString=""}}class s9{constructor(A){this._filterStack=[],this._filterStackIndex=0,this._savedStates=[],this._alphaMultiplier=1,this._warnedFilterTypes=new Set,this.renderer=A}push(A){let Q=this._pushFilterFrame(),I=A.filterEffect.filters;if(Q.skip=!1,Q.useClip=!1,Q.filters=I,Q.container=A.container,Q.cssFilterString="",I.every((K)=>!K.enabled)){Q.skip=!0;return}let B=[],E=1;for(let K of I){if(!K.enabled)continue;if(!Iz(K)){this._warnUnsupportedFilter(K);continue}let H=K.getCanvasFilterString();if(H===null){this._warnUnsupportedFilter(K);continue}if(H)B.push(H)}if(B.length===0&&E===1){Q.skip=!0;return}Q.cssFilterString=B.join(" "),this._calculateFilterArea(A,Q.bounds),Q.useClip=!!A.filterEffect.filterArea;let C=this.renderer.canvasContext.activeContext,J=C.filter||"none";if(this._savedStates.push({filter:J,alphaMultiplier:this._alphaMultiplier}),Q.useClip&&Number.isFinite(Q.bounds.width)&&Number.isFinite(Q.bounds.height)&&Q.bounds.width>0&&Q.bounds.height>0){let K=this.renderer.canvasContext.activeResolution||1;C.save(),C.setTransform(1,0,0,1,0,0),C.beginPath(),C.rect(Q.bounds.x*K,Q.bounds.y*K,Q.bounds.width*K,Q.bounds.height*K),C.clip()}else Q.useClip=!1;if(E!==1)this._alphaMultiplier*=E;if(Q.cssFilterString)C.filter=J!=="none"?`${J} ${Q.cssFilterString}`:Q.cssFilterString}pop(){let A=this._popFilterFrame();if(A.skip)return;let Q=this._savedStates.pop();if(!Q)return;let I=this.renderer.canvasContext.activeContext;if(A.useClip)I.restore();else I.filter=Q.filter;this._alphaMultiplier=Q.alphaMultiplier}generateFilteredTexture({texture:A,filters:Q}){if(!Q?.length||Q.every((D)=>!D.enabled))return A;let I=[],B=1;for(let D of Q){if(!D.enabled)continue;if(!Iz(D)){this._warnUnsupportedFilter(D);continue}let W=D.getCanvasFilterString();if(W===null){this._warnUnsupportedFilter(D);continue}if(W)I.push(W)}if(I.length===0&&B===1)return A;let E=qA.getCanvasSource(A);if(!E)return A;let C=A.frame,J=A.source._resolution??A.source.resolution??1,K=C.width,H=C.height,Z=mQ.getOptimalCanvasAndContext(K,H,J),{canvas:q,context:w}=Z;if(w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,q.width,q.height),I.length)w.filter=I.join(" ");if(B!==1)w.globalAlpha=B;let $=C.x*J,U=C.y*J,V=K*J,z=H*J;return w.drawImage(E,$,U,V,z,0,0,V,z),w.filter="none",w.globalAlpha=1,_C(q,K,H,J)}_calculateFilterArea(A,Q){if(A.renderables)PJ(A.renderables,Q);else if(A.filterEffect.filterArea)Q.clear(),Q.addRect(A.filterEffect.filterArea),Q.applyMatrix(A.container.worldTransform);else A.container.getFastGlobalBounds(!0,Q);if(A.container){let B=(A.container.renderGroup||A.container.parentRenderGroup)?.cacheToLocalTransform;if(B)Q.applyMatrix(B)}}_warnUnsupportedFilter(A){let Q=A?.constructor?.name||"Filter";if(this._warnedFilterTypes.has(Q))return;this._warnedFilterTypes.add(Q),console.warn(`CanvasRenderer: filter "${Q}" is not supported in Canvas2D and will be skipped.`)}get alphaMultiplier(){return this._alphaMultiplier}_pushFilterFrame(){let A=this._filterStack[this._filterStackIndex];if(!A)A=this._filterStack[this._filterStackIndex]=new xj;return this._filterStackIndex++,A}_popFilterFrame(){if(this._filterStackIndex<=0)return this._filterStack[0];return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}destroy(){this._filterStack=null,this._savedStates=null,this._warnedFilterTypes=null,this._alphaMultiplier=1}}var IX=Y(()=>{M();_Q();ZZ();o8();RE();pB();s9.extension={type:[N.CanvasSystem],name:"filter"};p.add(s9)});var BX=()=>{};var EX=()=>{};var mj,cj;var CX=Y(()=>{gA();mj={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},cj=new Proxy(mj,{get(A,Q){return c(BA,`DRAW_MODES.${Q} is deprecated, use '${mj[Q]}' instead`),A[Q]}})});var a9,dj,r9,pj;var JX=Y(()=>{gA();a9=((A)=>{return A.CLAMP="clamp-to-edge",A.REPEAT="repeat",A.MIRRORED_REPEAT="mirror-repeat",A})(a9||{}),dj=new Proxy(a9,{get(A,Q){return c(BA,`DRAW_MODES.${Q} is deprecated, use '${a9[Q]}' instead`),A[Q]}}),r9=((A)=>{return A.NEAREST="nearest",A.LINEAR="linear",A})(r9||{}),pj=new Proxy(r9,{get(A,Q){return c(BA,`DRAW_MODES.${Q} is deprecated, use '${r9[Q]}' instead`),A[Q]}})});var Bz=Y(()=>{_A();WQ()});var KX=Y(()=>{yQ();lI();HQ();Bz();FA()});var HX=Y(()=>{X6();Z6();nQ();WQ()});var ZX=Y(()=>{VE()});var qX=()=>{};var lj=Y(()=>{oY();Kw();bZ();y1();tW();eW();fJ();R1();m1();mZ();c1();v1();xZ();d1();cB();Y1();E1();C1();J1();H1();AX();Z1();z1();K0();H0();X1();ZC();dB();FZ();P5();pZ();sY();M5();s1();_H();QX();P$();g5();a1();NJ();zJ();x$();_$();IX();S$();T$();b$();f$();y$();j6();pB();g$();Hw();Zw();qw();AC();Yw();Nw();Uw();Dw();Ww();Xw();kw();Mw();Fw();Pw();gw();_w();bw();pJ();AI();fw();sw();QY();BX();yw();z6();Q6();xw();nw();h5();eH();cw();pw();lw();EX();W6();m5();d5();u5();i5();o5();Y6();Rw();jw();AY();tw();CY();BY();jK();X6();RY();KY();ZY();wY();k6();$Y();zY();cU();WY();kY();OY();jY();NY();LY();MY();W4();k4();f4();F4();O4();G4();j4();L4();b4();y4();v4();h4();c4();d4();p4();TB();YI();u4();sZ();S4();a5();r5();g4();A7();I7();E7();l4();i4();I6();Z6();s4();r4();e4();J6();Qw();pU();Iw();Ew();t1();lZ();hB();qK();VB();SZ();A4();I4();K4();CX();FE();_6();$7();XE();V7();S6();HJ();H4();m4();iZ();UK();Z4();t5();bI();J7();oZ();XQ();rZ();H7();eZ();aZ();Y4();GE();$0();$I();QC();AK();zZ();RE();JX();KX();U4();Q4();vH();yB();_0();Bz();HX();aE();WQ();tH();FA();N4();TH();pI();qB();ZX();nZ();q9();S0();S5();Q0();qX();D4();nQ()});var wX=Y(()=>{gA()});var YX=Y(()=>{uI()});var $X=Y(()=>{gA()});var UX=()=>{};var VX=()=>{};var NX=Y(()=>{_6();S6();eB();L0();oK()});var aS;var zX=Y(()=>{_A();TQ();aS=class A extends QA{constructor(Q={}){Q={...A.defaultOptions,...Q};super();this.renderLayerChildren=[],this.sortableChildren=Q.sortableChildren,this.sortFunction=Q.sortFunction}attach(...Q){for(let I=0;I<Q.length;I++){let B=Q[I];if(B.parentRenderLayer){if(B.parentRenderLayer===this)continue;B.parentRenderLayer.detach(B)}this.renderLayerChildren.push(B),B.parentRenderLayer=this;let E=this.renderGroup||this.parentRenderGroup;if(E)E.structureDidChange=!0}return Q[0]}detach(...Q){for(let I=0;I<Q.length;I++){let B=Q[I],E=this.renderLayerChildren.indexOf(B);if(E!==-1)this.renderLayerChildren.splice(E,1);B.parentRenderLayer=null;let C=this.renderGroup||this.parentRenderGroup;if(C)C.structureDidChange=!0}return Q[0]}detachAll(){let Q=this.renderLayerChildren;for(let I=0;I<Q.length;I++)Q[I].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(Q,I,B){let E=this.renderLayerChildren,C=E.length;if(this.sortableChildren)this.sortRenderLayerChildren();for(let J=0;J<C;J++){if(!E[J].parent)n("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",E[J]);E[J].collectRenderables(Q,I,this)}}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(Q,I,B){if(!Q)return;let E=this.renderLayerChildren;for(let C=0;C<E.length;C++)E[C]._getGlobalBoundsRecursive(!0,I,this)}getFastGlobalBounds(Q,I){return super.getFastGlobalBounds(Q,I)}addChild(...Q){throw new Error("RenderLayer.addChild() is not available. Please use RenderLayer.attach()")}removeChild(...Q){throw new Error("RenderLayer.removeChild() is not available. Please use RenderLayer.detach()")}removeChildren(Q,I){throw new Error("RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()")}removeChildAt(Q){throw new Error("RenderLayer.removeChildAt() is not available")}getChildAt(Q){throw new Error("RenderLayer.getChildAt() is not available")}setChildIndex(Q,I){throw new Error("RenderLayer.setChildIndex() is not available")}getChildIndex(Q){throw new Error("RenderLayer.getChildIndex() is not available")}addChildAt(Q,I){throw new Error("RenderLayer.addChildAt() is not available")}swapChildren(Q,I){throw new Error("RenderLayer.swapChildren() is not available")}reparentChild(...Q){throw new Error("RenderLayer.reparentChild() is not available with the render layer")}reparentChildAt(Q,I){throw new Error("RenderLayer.reparentChildAt() is not available with the render layer")}};aS.defaultOptions={sortableChildren:!1,sortFunction:(A,Q)=>A.zIndex-Q.zIndex}});var ij,m0;var CH=Y(()=>{gA();eB();ij=class A extends RI{constructor(...Q){super({});let I=Q[0]??{};if(typeof I==="number")c(BA,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),I={width:I,height:Q[1],verticesX:Q[2],verticesY:Q[3]};this.build(I)}build(Q){Q={...A.defaultOptions,...Q},this.verticesX=this.verticesX??Q.verticesX,this.verticesY=this.verticesY??Q.verticesY,this.width=this.width??Q.width,this.height=this.height??Q.height;let I=this.verticesX*this.verticesY,B=[],E=[],C=[],J=this.verticesX-1,K=this.verticesY-1,H=this.width/J,Z=this.height/K;for(let w=0;w<I;w++){let $=w%this.verticesX,U=w/this.verticesX|0;B.push($*H,U*Z),E.push($/J,U/K)}let q=J*K;for(let w=0;w<q;w++){let $=w%J,U=w/J|0,V=U*this.verticesX+$,z=U*this.verticesX+$+1,D=(U+1)*this.verticesX+$,W=(U+1)*this.verticesX+$+1;C.push(V,z,D,z,W,D)}this.buffers[0].data=new Float32Array(B),this.buffers[1].data=new Float32Array(E),this.indexBuffer.data=new Uint32Array(C),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};ij.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};m0=ij});function Ez(A,Q,I,B){let E=I.buffers[0],C=E.data,{verticesX:J,verticesY:K}=I,H=A/(J-1),Z=Q/(K-1),q=0,w=B[0],$=B[1],U=B[2],V=B[3],z=B[4],D=B[5],W=B[6],j=B[7],O=B[8];for(let F=0;F<C.length;F+=2){let L=q%J*H,R=(q/J|0)*Z,_=w*L+$*R+U,T=V*L+z*R+D,f=W*L+j*R+O;C[F]=_/f,C[F+1]=T/f,q++}E.update()}var Cz=()=>{};function oj(A,Q){let I=Q[0],B=Q[1],E=Q[2],C=Q[3],J=Q[4],K=Q[5],H=Q[6],Z=Q[7],q=Q[8];return A[0]=J*q-K*Z,A[1]=E*Z-B*q,A[2]=B*K-E*J,A[3]=K*H-C*q,A[4]=I*q-E*H,A[5]=E*C-I*K,A[6]=C*Z-J*H,A[7]=B*H-I*Z,A[8]=I*J-B*C,A}function sj(A,Q,I){let B=Q[0],E=Q[1],C=Q[2],J=Q[3],K=Q[4],H=Q[5],Z=Q[6],q=Q[7],w=Q[8],$=I[0],U=I[1],V=I[2],z=I[3],D=I[4],W=I[5],j=I[6],O=I[7],F=I[8];return A[0]=$*B+U*J+V*Z,A[1]=$*E+U*K+V*q,A[2]=$*C+U*H+V*w,A[3]=z*B+D*J+W*Z,A[4]=z*E+D*K+W*q,A[5]=z*C+D*H+W*w,A[6]=j*B+O*J+F*Z,A[7]=j*E+O*K+F*q,A[8]=j*C+O*H+F*w,A}function rS(A,Q,I){let B=I[0],E=I[1],C=I[2];return A[0]=Q[0]*B+Q[1]*E+Q[2]*C,A[1]=Q[3]*B+Q[4]*E+Q[5]*C,A[2]=Q[6]*B+Q[7]*E+Q[8]*C,A}function nj(A,Q,I,B,E,C,J,K,H){let Z=tS;Z[0]=Q,Z[1]=B,Z[2]=C,Z[3]=I,Z[4]=E,Z[5]=J,Z[6]=1,Z[7]=1,Z[8]=1;let q=oj(A,Z);Jz[0]=K,Jz[1]=H,Jz[2]=1;let w=rS(eS,q,Jz),$=A;return A[0]=w[0],A[1]=0,A[2]=0,A[3]=0,A[4]=w[1],A[5]=0,A[6]=0,A[7]=0,A[8]=w[2],sj(A,$,Z)}function Kz(A,Q,I,B,E,C,J,K,H,Z,q,w,$,U,V,z,D){let W=nj(Ab,Q,I,C,J,Z,q,U,V),j=nj(Qb,B,E,K,H,w,$,z,D);return sj(A,oj(W,W),j)}var tS,eS,Jz,Ab,Qb;var Hz=Y(()=>{tS=[0,0,0,0,0,0,0,0,0],eS=[0,0,0],Jz=[0,0,0];Ab=[0,0,0,0,0,0,0,0,0],Qb=[0,0,0,0,0,0,0,0,0]});var t9;var Zz=Y(()=>{CH();Cz();Hz();t9=class t9 extends m0{constructor(A){super(A);this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:Q,height:I}=A;this.corners=[0,0,Q,0,Q,I,0,I]}setCorners(A,Q,I,B,E,C,J,K){let H=this.corners;H[0]=A,H[1]=Q,H[2]=I,H[3]=B,H[4]=E,H[5]=C,H[6]=J,H[7]=K,this.updateProjection()}updateProjection(){let{width:A,height:Q}=this,I=this.corners,B=Kz(this._projectionMatrix,0,0,I[0],I[1],A,0,I[2],I[3],A,Q,I[4],I[5],0,Q,I[6],I[7]);Ez(A,Q,this,B)}}});var Ib;var DX=Y(()=>{FA();UE();PC();Zz();Ib=class A extends IB{constructor(Q){Q={...A.defaultOptions,...Q};let{texture:I,verticesX:B,verticesY:E,...C}=Q,J=new t9(XI({width:I.width,height:I.height,verticesX:B,verticesY:E}));super(XI({...C,geometry:J}));this._texture=I,this.geometry.setCorners(Q.x0,Q.y0,Q.x1,Q.y1,Q.x2,Q.y2,Q.x3,Q.y3)}textureUpdated(){let Q=this.geometry;if(!Q)return;let{width:I,height:B}=this.texture;if(Q.width!==I||Q.height!==B)Q.width=I,Q.height=B,Q.updateProjection()}set texture(Q){if(this._texture===Q)return;super.texture=Q,this.textureUpdated()}get texture(){return this._texture}setCorners(Q,I,B,E,C,J,K,H){this.geometry.setCorners(Q,I,B,E,C,J,K,H)}};Ib.defaultOptions={texture:v.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100}});var WX=Y(()=>{UE();PC();CH()});var aj,qz;var wz=Y(()=>{eB();aj=class A extends RI{constructor(Q){let{width:I,points:B,textureScale:E}={...A.defaultOptions,...Q};super({positions:new Float32Array(B.length*4),uvs:new Float32Array(B.length*4),indices:new Uint32Array((B.length-1)*6)});this.points=B,this._width=I,this.textureScale=E,this._build()}get width(){return this._width}_build(){let Q=this.points;if(!Q)return;let I=this.getBuffer("aPosition"),B=this.getBuffer("aUV"),E=this.getIndex();if(Q.length<1)return;if(I.data.length/4!==Q.length)I.data=new Float32Array(Q.length*4),B.data=new Float32Array(Q.length*4),E.data=new Uint16Array((Q.length-1)*6);let C=B.data,J=E.data;C[0]=0,C[1]=0,C[2]=0,C[3]=1;let K=0,H=Q[0],Z=this._width*this.textureScale,q=Q.length;for(let $=0;$<q;$++){let U=$*4;if(this.textureScale>0){let V=H.x-Q[$].x,z=H.y-Q[$].y,D=Math.sqrt(V*V+z*z);H=Q[$],K+=D/Z}else K=$/(q-1);C[U]=K,C[U+1]=0,C[U+2]=K,C[U+3]=1}let w=0;for(let $=0;$<q-1;$++){let U=$*2;J[w++]=U,J[w++]=U+1,J[w++]=U+2,J[w++]=U+2,J[w++]=U+1,J[w++]=U+3}B.update(),E.update(),this.updateVertices()}updateVertices(){let Q=this.points;if(Q.length<1)return;let I=Q[0],B,E=0,C=0,J=this.buffers[0].data,K=Q.length,H=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let Z=0;Z<K;Z++){let q=Q[Z],w=Z*4;if(Z<Q.length-1)B=Q[Z+1];else B=q;C=-(B.x-I.x),E=B.y-I.y;let $=(1-Z/(K-1))*10;if($>1)$=1;let U=Math.sqrt(E*E+C*C);if(U<0.000001)E=0,C=0;else E/=U,C/=U,E*=H,C*=H;J[w]=q.x+E,J[w+1]=q.y+C,J[w+2]=q.x-E,J[w+3]=q.y-C,I=q}this.buffers[0].update()}update(){if(this.textureScale>0)this._build();else this.updateVertices()}};aj.defaultOptions={width:200,points:[],textureScale:0};qz=aj});var Bb;var XX=Y(()=>{UE();PC();wz();Bb=class A extends IB{constructor(Q){let{texture:I,points:B,textureScale:E,...C}={...A.defaultOptions,...Q},J=new qz(XI({width:I.height,points:B,textureScale:E}));if(E>0)I.source.style.addressMode="repeat";super(XI({...C,texture:I,geometry:J}));this.autoUpdate=!0,this.onRender=this._render}_render(){let Q=this.geometry;if(this.autoUpdate||Q._width!==this.texture.height)Q._width=this.texture.height,Q.update()}};Bb.defaultOptions={textureScale:0}});var kX=Y(()=>{UE();PC();eB()});var FX=()=>{};class e9{execute(A,Q){let I=A.renderer,B=I.canvasContext.activeContext,E=Q.particleChildren,C=Q.texture;B.save(),I.canvasContext.setContextTransform(Q.worldTransform,Q.roundPixels),I.canvasContext.setBlendMode(Q.groupBlendMode);let J=Q.groupColorAlpha,K=I.filter?.alphaMultiplier??1,H=(J>>>24&255)/255*K;for(let Z=0;Z<E.length;Z++){let q=E[Z],w=q.texture||C;if(!w?.source?.resource)continue;let $=q.color,U=($>>>24&255)/255*H;if(U<=0)continue;let V=$&16777215,z=((V&255)<<16)+(V&65280)+(V>>16&255),D=w.source.resource;if(z!==16777215)D=qA.getTintedCanvas({texture:w},z);let W=w.frame,j=w.source.resolution,O=W.x*j,F=W.y*j,L=W.width*j,R=W.height*j;B.globalAlpha=U;let _=-q.anchorX*W.width,T=-q.anchorY*W.height;if(q.rotation!==0||q.scaleX!==1||q.scaleY!==1)B.save(),B.translate(q.x,q.y),B.rotate(q.rotation),B.scale(q.scaleX,q.scaleY),B.drawImage(D,O,F,L,R,_,T,W.width,W.height),B.restore();else B.drawImage(D,O,F,L,R,q.x+_,q.y+T,W.width,W.height)}B.restore()}}var Yz=Y(()=>{pB()});function Aq(A,Q=null){let I=A*6;if(I>65535)Q||(Q=new Uint32Array(I));else Q||(Q=new Uint16Array(I));if(Q.length!==I)throw new Error(`Out buffer length is incorrect, got ${Q.length} and expected ${I}`);for(let B=0,E=0;B<I;B+=6,E+=4)Q[B+0]=E+0,Q[B+1]=E+1,Q[B+2]=E+2,Q[B+3]=E+0,Q[B+4]=E+2,Q[B+5]=E+3;return Q}var $z=()=>{};function Uz(A){return{dynamicUpdate:rj(A,!0),staticUpdate:rj(A,!1)}}function rj(A,Q){let I=[];I.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let B=0;for(let C in A){let J=A[C];if(Q!==J.dynamic)continue;I.push(`offset = index + ${B}`),I.push(J.code);let K=QI(J.format);B+=K.stride/4}I.push(`
            index += stride * 4;
        }
    `),I.unshift(`
        var stride = ${B};
    `);let E=I.join(`
`);return new Function("ps","f32v","u32v",E)}var Vz=Y(()=>{XE()});class Qq{constructor(A){this._size=0,this._generateParticleUpdateCache={};let Q=this._size=A.size??1000,I=A.properties,B=0,E=0;for(let Z in I){let q=I[Z],w=QI(q.format);if(q.dynamic)E+=w.stride;else B+=w.stride}this._dynamicStride=E/4,this._staticStride=B/4,this.staticAttributeBuffer=new zB(Q*4*B),this.dynamicAttributeBuffer=new zB(Q*4*E),this.indexBuffer=Aq(Q);let C=new UI,J=0,K=0;this._staticBuffer=new YQ({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:OA.VERTEX|OA.COPY_DST}),this._dynamicBuffer=new YQ({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:OA.VERTEX|OA.COPY_DST});for(let Z in I){let q=I[Z],w=QI(q.format);if(q.dynamic)C.addAttribute(q.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:J*4,format:q.format}),J+=w.size;else C.addAttribute(q.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:K*4,format:q.format}),K+=w.size}C.addIndex(this.indexBuffer);let H=this.getParticleUpdate(I);this._dynamicUpload=H.dynamicUpdate,this._staticUpload=H.staticUpdate,this.geometry=C}getParticleUpdate(A){let Q=Eb(A);if(this._generateParticleUpdateCache[Q])return this._generateParticleUpdateCache[Q];return this._generateParticleUpdateCache[Q]=this.generateParticleUpdate(A),this._generateParticleUpdateCache[Q]}generateParticleUpdate(A){return Uz(A)}update(A,Q){if(A.length>this._size)Q=!0,this._size=Math.max(A.length,this._size*1.5|0),this.staticAttributeBuffer=new zB(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new zB(this._size*this._dynamicStride*4*4),this.indexBuffer=Aq(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0);let I=this.dynamicAttributeBuffer;if(this._dynamicUpload(A,I.float32View,I.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,A.length*this._dynamicStride*4,!0),Q){let B=this.staticAttributeBuffer;this._staticUpload(A,B.float32View,B.uint32View),this._staticBuffer.setDataWithSize(B.float32View,A.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function Eb(A){let Q=[];for(let I in A){let B=A[I];Q.push(I,B.code,B.dynamic?"d":"s")}return Q.join("_")}var Nz=Y(()=>{hB();VB();FE();XE();_Z();$z();Vz()});var zz=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`;var Dz=()=>{};var Wz=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`;var Xz=()=>{};var Iq=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;var kz=()=>{};var Bq;var Fz=Y(()=>{IQ();NA();AI();YI();bI();FA();qB();Dz();Xz();kz();Bq=class Bq extends BQ{constructor(){let A=aA.from({vertex:Wz,fragment:zz}),Q=rA.from({fragment:{source:Iq,entryPoint:"mainFragment"},vertex:{source:Iq,entryPoint:"mainVertex"}});super({glProgram:A,gpuProgram:Q,resources:{uTexture:v.WHITE.source,uSampler:new DQ({}),uniforms:{uTranslationMatrix:{value:new x,type:"mat3x3<f32>"},uColor:{value:new JA(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}});class QE{constructor(A,Q){this.state=oA.for2d(),this.localUniforms=new PA({uTranslationMatrix:{value:new x,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=A,this.adaptor=Q,this.defaultShader=new Bq,this.state=oA.for2d(),this._managedContainers=new vA({renderer:A,type:"renderable",name:"particleContainer"})}validateRenderable(A){return!1}addRenderable(A,Q){this.renderer.renderPipes.batch.break(Q),Q.add(A)}getBuffers(A){return A._gpuData[this.renderer.uid]||this._initBuffer(A)}_initBuffer(A){return A._gpuData[this.renderer.uid]=new Qq({size:A.particleChildren.length,properties:A._properties}),this._managedContainers.add(A),A._gpuData[this.renderer.uid]}updateRenderable(A){}execute(A){let Q=A.particleChildren;if(Q.length===0)return;let I=this.renderer,B=this.getBuffers(A);A.texture||(A.texture=Q[0].texture);let E=this.state;B.update(Q,A._childrenDirty),A._childrenDirty=!1,E.blendMode=DB(A.blendMode,A.texture._source);let C=this.localUniforms.uniforms,J=C.uTranslationMatrix;A.worldTransform.copyTo(J),J.prepend(I.globalUniforms.globalUniformData.projectionMatrix),C.uResolution=I.globalUniforms.globalUniformData.resolution,C.uRound=I._roundPixels|A._roundPixels,tI(A.groupColorAlpha,C.uColor,0),this.adaptor.execute(this,A)}destroy(){if(this._managedContainers.destroy(),this.renderer=null,this.defaultShader)this.defaultShader.destroy(),this.defaultShader=null}}var JH=Y(()=>{M();NA();XQ();$0();$I();xQ();zC();Nz();Fz();QE.extension={type:[N.CanvasPipes],name:"particle"}});var KH;var Oz=Y(()=>{M();JH();Yz();KH=class KH extends QE{constructor(A){super(A,new e9)}};KH.extension={type:[N.CanvasPipes],name:"particle"}});class Eq{execute(A,Q){let{state:I,renderer:B}=A,E=Q.shader||A.defaultShader;E.resources.uTexture=Q.texture._source,E.resources.uniforms=A.localUniforms;let C=B.gl,J=A.getBuffers(Q);B.shader.bind(E),B.state.set(I),B.geometry.bind(J.geometry,E.glProgram);let H=J.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?C.UNSIGNED_SHORT:C.UNSIGNED_INT;C.drawElements(C.TRIANGLES,Q.particleChildren.length*6,H,0)}}var Gz=()=>{};var HH;var jz=Y(()=>{M();Gz();JH();HH=class HH extends QE{constructor(A){super(A,new Eq)}};HH.extension={type:[N.WebGLPipes],name:"particle"}});class Cq{execute(A,Q){let I=A.renderer,B=Q.shader||A.defaultShader;B.groups[0]=I.renderPipes.uniformBatch.getUniformBindGroup(A.localUniforms,!0),B.groups[1]=I.texture.getTextureBindGroup(Q.texture);let E=A.state,C=A.getBuffers(Q);I.encoder.draw({geometry:C.geometry,shader:Q.shader||A.defaultShader,state:E,size:Q.particleChildren.length*6})}}var Lz=()=>{};var ZH;var Rz=Y(()=>{M();Lz();JH();ZH=class ZH extends QE{constructor(A){super(A,new Cq)}};ZH.extension={type:[N.WebGPUPipes],name:"particle"}});var Cb=class A{constructor(Q){if(Q instanceof v)this.texture=Q,iC(this,A.defaultOptions,{});else{let I={...A.defaultOptions,...Q};iC(this,I,{})}}get alpha(){return this._alpha}set alpha(Q){this._alpha=Math.min(Math.max(Q,0),1),this._updateColor()}get tint(){return lQ(this._tint)}set tint(Q){this._tint=JA.shared.setValue(Q??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};var OX=Y(()=>{IQ();FA();YE();xH();Cb.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1}});var Jq;var Pz=Y(()=>{Jq={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}}});var tj=Y(()=>{M();Oz();jz();Rz();p.add(HH);p.add(ZH);p.add(KH)});var Jb,Kb;var GX=Y(()=>{_Q();uI();Pz();tj();Jb=new RA(0,0,0,0),Kb=class A extends wQ{constructor(Q={}){Q={...A.defaultOptions,...Q,dynamicProperties:{...A.defaultOptions.dynamicProperties,...Q?.dynamicProperties}};let{dynamicProperties:I,shader:B,roundPixels:E,texture:C,particles:J,...K}=Q;super({label:"ParticleContainer",...K});this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=C||null,this.shader=B,this._properties={};for(let H in Jq){let Z=Jq[H],q=I[H];this._properties[H]={...Z,dynamic:q}}this.allowChildren=!0,this.roundPixels=E??!1,this.particleChildren=J??[]}addParticle(...Q){for(let I=0;I<Q.length;I++)this.particleChildren.push(Q[I]);return this.onViewUpdate(),Q[0]}removeParticle(...Q){let I=!1;for(let B=0;B<Q.length;B++){let E=this.particleChildren.indexOf(Q[B]);if(E>-1)this.particleChildren.splice(E,1),I=!0}if(I)this.onViewUpdate();return Q[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Jb}updateBounds(){}destroy(Q=!1){if(super.destroy(Q),typeof Q==="boolean"?Q:Q?.texture){let B=typeof Q==="boolean"?Q:Q?.textureSource,E=this.texture??this.particleChildren[0]?.texture;if(E)E.destroy(B)}this.texture=null,this.shader?.destroy()}removeParticles(Q,I){Q??(Q=0),I??(I=this.particleChildren.length);let B=this.particleChildren.splice(Q,I-Q);return this.onViewUpdate(),B}removeParticleAt(Q){let I=this.particleChildren.splice(Q,1);return this.onViewUpdate(),I[0]}addParticleAt(Q,I){return this.particleChildren.splice(I,0,Q),this.onViewUpdate(),Q}addChild(...Q){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...Q){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(Q,I){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(Q){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(Q){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(Q,I){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(Q){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(Q,I){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(Q,I){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...Q){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(Q,I){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};Kb.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1}});class qH{constructor(A){this._renderer=A}validateRenderable(A){return!1}addRenderable(A,Q){this._renderer.renderPipes.batch.break(Q),Q.add(A)}updateRenderable(A){}execute(A){let Q=this._renderer,I=Q.canvasContext,B=I.activeContext;B.save();let E=A.groupTransform,C=Q._roundPixels|A._roundPixels;I.setContextTransform(E,C===1),I.setBlendMode(A.groupBlendMode);let J=Q.globalUniforms.globalUniformData?.worldColor??4294967295,K=A.groupColorAlpha,H=(J>>>24&255)/255,Z=(K>>>24&255)/255,q=Q.filter?.alphaMultiplier??1,w=H*Z*q;if(w<=0){B.restore();return}B.globalAlpha=w;let $=J&16777215,U=K&16777215,V=lQ(rQ(U,$)),z=A.texture,D=qA.getCanvasSource(z);if(!D){B.restore();return}let W=I.smoothProperty,j=z.source.style.scaleMode!=="nearest";if(B[W]!==j)B[W]=j;let O=V!==16777215||z.rotate!==0,F=O?qA.getTintedCanvas({texture:z},V):D,{leftWidth:L,topHeight:R,rightWidth:_,bottomHeight:T,width:f,height:S}=A,g=L+_,d=R+T,a=Math.min(g>f?f/g:1,d>S?S/d:1,1),AA=L*a,CA=_*a,y=R*a,m=T*a,t=Math.max(0,f-AA-CA),r=Math.max(0,S-y-m),WA=A.anchor,kA=z.source._resolution??z.source.resolution??1,zA=z.frame.x*kA,$A=z.frame.y*kA,fA=-WA.x*f,HA=-WA.y*S,FQ=L*kA,gQ=R*kA,VQ=_*kA,ZA=T*kA,NQ=z.frame.width*kA,OQ=z.frame.height*kA;if(O)zA=0,$A=0,NQ=F.width,OQ=F.height;B.drawImage(F,zA,$A,FQ,gQ,fA,HA,AA,y),B.drawImage(F,zA+FQ,$A,NQ-FQ-VQ,gQ,fA+AA,HA,t,y),B.drawImage(F,zA+NQ-VQ,$A,VQ,gQ,fA+f-CA,HA,CA,y),B.drawImage(F,zA,$A+gQ,FQ,OQ-gQ-ZA,fA,HA+y,AA,r),B.drawImage(F,zA+FQ,$A+gQ,NQ-FQ-VQ,OQ-gQ-ZA,fA+AA,HA+y,t,r),B.drawImage(F,zA+NQ-VQ,$A+gQ,VQ,OQ-gQ-ZA,fA+f-CA,HA+y,CA,r),B.drawImage(F,zA,$A+OQ-ZA,FQ,ZA,fA,HA+S-m,AA,m),B.drawImage(F,zA+FQ,$A+OQ-ZA,NQ-FQ-VQ,ZA,fA+AA,HA+S-m,t,m),B.drawImage(F,zA+NQ-VQ,$A+OQ-ZA,VQ,ZA,fA+f-CA,HA+S-m,CA,m),B.restore()}destroy(){this._renderer=null}}var Mz=Y(()=>{M();pB();YE();wE();qH.extension={type:[N.CanvasPipes],name:"nineSliceSprite"}});var ej,OB;var Kq=Y(()=>{CH();ej=class A extends m0{constructor(Q={}){Q={...A.defaultOptions,...Q};super({width:Q.width,height:Q.height,verticesX:4,verticesY:4});this.update(Q)}update(Q){this.width=Q.width??this.width,this.height=Q.height??this.height,this._originalWidth=Q.originalWidth??this._originalWidth,this._originalHeight=Q.originalHeight??this._originalHeight,this._leftWidth=Q.leftWidth??this._leftWidth,this._rightWidth=Q.rightWidth??this._rightWidth,this._topHeight=Q.topHeight??this._topHeight,this._bottomHeight=Q.bottomHeight??this._bottomHeight,this._anchorX=Q.anchor?.x,this._anchorY=Q.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){let Q=this.positions,{width:I,height:B,_leftWidth:E,_rightWidth:C,_topHeight:J,_bottomHeight:K,_anchorX:H,_anchorY:Z}=this,q=E+C,w=I>q?1:I/q,$=J+K,U=B>$?1:B/$,V=Math.min(w,U),z=H*I,D=Z*B;Q[0]=Q[8]=Q[16]=Q[24]=-z,Q[2]=Q[10]=Q[18]=Q[26]=E*V-z,Q[4]=Q[12]=Q[20]=Q[28]=I-C*V-z,Q[6]=Q[14]=Q[22]=Q[30]=I-z,Q[1]=Q[3]=Q[5]=Q[7]=-D,Q[9]=Q[11]=Q[13]=Q[15]=J*V-D,Q[17]=Q[19]=Q[21]=Q[23]=B-K*V-D,Q[25]=Q[27]=Q[29]=Q[31]=B-D,this.getBuffer("aPosition").update()}updateUvs(){let Q=this.uvs;Q[0]=Q[8]=Q[16]=Q[24]=0,Q[1]=Q[3]=Q[5]=Q[7]=0,Q[6]=Q[14]=Q[22]=Q[30]=1,Q[25]=Q[27]=Q[29]=Q[31]=1;let I=1/this._originalWidth,B=1/this._originalHeight;Q[2]=Q[10]=Q[18]=Q[26]=I*this._leftWidth,Q[9]=Q[11]=Q[13]=Q[15]=B*this._topHeight,Q[4]=Q[12]=Q[20]=Q[28]=1-I*this._rightWidth,Q[17]=Q[19]=Q[21]=Q[23]=1-B*this._bottomHeight,this.getBuffer("aUV").update()}};ej.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};OB=ej});class wH{constructor(A){this._renderer=A,this._managedSprites=new vA({renderer:A,type:"renderable",name:"nineSliceSprite"})}addRenderable(A,Q){let I=this._getGpuSprite(A);if(A.didViewUpdate)this._updateBatchableSprite(A,I);this._renderer.renderPipes.batch.addToBatch(I,Q)}updateRenderable(A){let Q=this._getGpuSprite(A);if(A.didViewUpdate)this._updateBatchableSprite(A,Q);Q._batcher.updateElement(Q)}validateRenderable(A){let Q=this._getGpuSprite(A);return!Q._batcher.checkAndUpdateTexture(Q,A._texture)}_updateBatchableSprite(A,Q){Q.geometry.update(A),Q.setTexture(A._texture)}_getGpuSprite(A){return A._gpuData[this._renderer.uid]||this._initGPUSprite(A)}_initGPUSprite(A){let Q=A._gpuData[this._renderer.uid]=new gz,I=Q;if(I.renderable=A,I.transform=A.groupTransform,I.texture=A._texture,I.roundPixels=this._renderer._roundPixels|A._roundPixels,this._managedSprites.add(A),!A.didViewUpdate)this._updateBatchableSprite(A,I);return Q}destroy(){this._managedSprites.destroy(),this._renderer=null}}var gz;var _z=Y(()=>{M();xQ();c8();Kq();gz=class gz extends fE{constructor(){super();this.geometry=new OB}destroy(){this.geometry.destroy()}};wH.extension={type:[N.WebGLPipes,N.WebGPUPipes],name:"nineSliceSprite"}});var AL=Y(()=>{M();Mz();_z();p.add(qH);p.add(wH)});var QL,Hq;var jX=Y(()=>{HE();FA();gA();uI();Kq();AL();QL=class A extends wQ{constructor(Q){if(Q instanceof v)Q={texture:Q};let{width:I,height:B,anchor:E,leftWidth:C,rightWidth:J,topHeight:K,bottomHeight:H,texture:Z,roundPixels:q,...w}=Q;super({label:"NineSliceSprite",...w});if(this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=C??Z?.defaultBorders?.left??OB.defaultOptions.leftWidth,this._topHeight=K??Z?.defaultBorders?.top??OB.defaultOptions.topHeight,this._rightWidth=J??Z?.defaultBorders?.right??OB.defaultOptions.rightWidth,this._bottomHeight=H??Z?.defaultBorders?.bottom??OB.defaultOptions.bottomHeight,this._width=I??Z.width??OB.defaultOptions.width,this._height=B??Z.height??OB.defaultOptions.height,this.allowChildren=!1,this.texture=Z??A.defaultOptions.texture,this.roundPixels=q??!1,this._anchor=new xA({_onUpdate:()=>{this.onViewUpdate()}}),E)this.anchor=E;else if(this.texture.defaultAnchor)this.anchor=this.texture.defaultAnchor}get anchor(){return this._anchor}set anchor(Q){typeof Q==="number"?this._anchor.set(Q):this._anchor.copyFrom(Q)}get width(){return this._width}set width(Q){this._width=Q,this.onViewUpdate()}get height(){return this._height}set height(Q){this._height=Q,this.onViewUpdate()}setSize(Q,I){if(typeof Q==="object")I=Q.height??Q.width,Q=Q.width;this._width=Q,this._height=I??Q,this.onViewUpdate()}getSize(Q){return Q||(Q={}),Q.width=this._width,Q.height=this._height,Q}get leftWidth(){return this._leftWidth}set leftWidth(Q){this._leftWidth=Q,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(Q){this._topHeight=Q,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(Q){this._rightWidth=Q,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(Q){this._bottomHeight=Q,this.onViewUpdate()}get texture(){return this._texture}set texture(Q){Q||(Q=v.EMPTY);let I=this._texture;if(I===Q)return;if(I&&I.dynamic)I.off("update",this.onViewUpdate,this);if(Q.dynamic)Q.on("update",this.onViewUpdate,this);this._texture=Q,this.onViewUpdate()}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(Q){if(super.destroy(Q),typeof Q==="boolean"?Q:Q?.texture){let B=typeof Q==="boolean"?Q:Q?.textureSource;this._texture.destroy(B)}this._texture=null}updateBounds(){let Q=this._bounds,I=this._anchor,B=this._width,E=this._height;Q.minX=-I._x*B,Q.maxX=Q.minX+B,Q.minY=-I._y*E,Q.maxY=Q.minY+E}};QL.defaultOptions={texture:v.EMPTY};Hq=QL});function Sz(A){let{text:Q,style:I,chars:B}=A,E=I,C=kB.getFont(Q,E),J=eA.graphemeSegmenter(Q),K=jC(J,E,C,!0),H=K.scale,Z=[],q=[],w=[],$=I.lineHeight?I.lineHeight:C.lineHeight*H,U=0;for(let V of K.lines){if(V.chars.length===0)continue;let z=new QA({label:"line"});z.y=U,w.push(z);let D=new QA({label:"word"}),W=0;for(let j=0;j<V.chars.length;j++){let O=V.chars[j];if(!O)continue;if(!C.chars[O])continue;let L=O===" ",R=j===V.chars.length-1,_;if(B.length>0)_=B.shift(),_.text=O,_.style=E,_.label=`char-${O}`,_.x=V.charPositions[j]*H-V.charPositions[W]*H;else _=new SC({text:O,style:E,label:`char-${O}`,x:V.charPositions[j]*H-V.charPositions[W]*H});if(!L)Z.push(_),D.addChild(_);if(L||R){if(D.children.length>0)D.x=V.charPositions[W]*H,q.push(D),z.addChild(D),D=new QA({label:"word"}),W=j+1}}U+=$}return{chars:Z,lines:w,words:q}}var bz=Y(()=>{TQ();lB();M0();p9();D8()});var c0;var Zq=Y(()=>{TQ();yI();c0=class c0 extends QA{constructor(A){let{text:Q,style:I,autoSplit:B,lineAnchor:E,wordAnchor:C,charAnchor:J,...K}=A;super(K);this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=Q,this._autoSplit=B,this._lineAnchor=E,this._wordAnchor=C,this._charAnchor=J,this.style=I}split(){let A=this.splitFn();this.chars=A.chars,this.words=A.words,this.lines=A.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(A){this._originalText=A,this.lines.forEach((Q)=>Q.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(A,Q,I){let B;if(typeof A==="number")B={x:A,y:A};else B={x:A.x,y:A.y};Q.forEach((E)=>{let C=E.getLocalBounds(),J=C.minX+C.width*B.x,K=C.minY+C.height*B.y;E.origin.set(J,K)}),this[I]=A}get lineAnchor(){return this._lineAnchor}set lineAnchor(A){this._setOrigin(A,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(A){this._setOrigin(A,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(A){this._setOrigin(A,this.chars,"_charAnchor")}get style(){return this._style}set style(A){A||(A={}),this._style=new AQ(A),this.styleChanged()}styleChanged(){this.words.forEach((A)=>A.destroy()),this.words.length=0,this.lines.forEach((A)=>A.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){if(this._dirty=!0,this._autoSplit)this.split()}destroy(A){if(super.destroy(A),this.chars=[],this.words=[],this.lines=[],typeof A==="boolean"?A:A?.style)this._style.destroy(A);this._style=null,this._originalText=""}}});var Hb;var LX=Y(()=>{yI();bz();Zq();Hb=class A extends c0{constructor(Q){var I;let B={...A.defaultOptions,...Q};B.style??(B.style={}),(I=B.style).fill??(I.fill=16777215);super(B)}static from(Q,I){let B={...A.defaultOptions,...I,text:Q.text,style:new AQ(Q.style)},E=new A({...B}),C=Q.anchor;if(C.x!==0||C.y!==0)E.pivot.set(E.width*C.x,E.height*C.y);return E}splitFn(){return Sz({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};Hb.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0}});function Zb(A,Q,I){switch(A){case"center":return(I-Q)/2;case"right":return I-Q;case"left":default:return 0}}function IL(A){return A==="\r"||A===`
`||A===`\r
`}function qb(A,Q,I){let B=[],E=Q.lines[0],C="",J=[],K=0;return I.wordWrap=!1,A.forEach((H)=>{let Z=/^\s*$/.test(H),q=IL(H),w=C.length===0&&Z;if(Z&&!q&&w)return;if(!q)C+=H;let $=eA.measureText(H,I);if(J.push({char:H,metric:$}),C.length>=E.length)B.push({line:C,chars:J,width:J.reduce((U,V)=>U+V.metric.width,0)}),J=[],C="",K++,E=Q.lines[K]}),B}function fz(A){let{text:Q,style:I,chars:B}=A,E=I,C=eA.measureText(Q,E),J=eA.graphemeSegmenter(Q),K=qb(J,C,E.clone()),H=E.align,Z=C.lineWidths.reduce((AA,CA)=>Math.max(AA,CA),0),$=C.lines.length!==1&&E.wordWrap?E.wordWrapWidth:Z,U=E._fill?.fill,V=E._stroke?.fill,z=U instanceof jQ,D=V instanceof jQ,W=z||D,j=z&&U.textureSpace==="local"||D&&V.textureSpace==="local",O=C.width,F=C.height,L=E.clone();L.align="left";let R=0,_=0;if(L.trim){let{frame:AA,canvasAndContext:CA}=TI.getCanvasAndContext({text:Q,style:E,resolution:1});TI.returnCanvasAndContext(CA),R=-AA.x,_=-AA.y,L.trim=!1}let T=[],f=[],S=[],g=0,d=E._stroke?.width||0,a=E.dropShadow?.distance||0;return K.forEach((AA,CA)=>{let y=new QA({label:`line-${CA}`});y.y=g+_,f.push(y);let m=C.lineWidths[CA],t=Zb(H,m,$),r=new QA({label:"word"});if(r.x=t+R,AA.chars.forEach((WA,kA)=>{if(WA.metric.width===0)return;if(IL(WA.char)){t+=WA.metric.width-d;return}if(WA.char===" "){if(r.children.length>0)S.push(r),y.addChild(r);t+=WA.metric.width+E.letterSpacing-d,r=new QA({label:"word"}),r.x=t+R}else{let zA=L;if(W){if(zA=L.clone(),zA._gradientOffset={x:-t,y:-g},j)zA._gradientBounds={width:O,height:F}}let $A;if(B.length>0)$A=B.shift(),$A.text=WA.char,$A.style=zA,$A.setFromMatrix(x.IDENTITY),$A.x=t-r.x+R-a*kA;else $A=new PI({text:WA.char,style:zA,x:t-r.x+R-a*kA});T.push($A),r.addChild($A),t+=WA.metric.width+E.letterSpacing-d}}),r.children.length>0)S.push(r),y.addChild(r);g+=C.lineHeight}),{chars:T,lines:f,words:S}}var yz=Y(()=>{NA();TQ();uB();i8();lB();r8()});var wb;var RX=Y(()=>{yI();yz();Zq();wb=class A extends c0{constructor(Q){let I={...A.defaultOptions,...Q};super(I)}static from(Q,I){let B={...A.defaultOptions,...I,text:Q.text,style:new AQ(Q.style)},E=new A({...B}),C=Q.anchor;if(C.x!==0||C.y!==0)E.pivot.set(E.width*C.x,E.height*C.y);return E}splitFn(){return fz({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};wb.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0}});var PX=Y(()=>{IQ()});var KL=Y(()=>{_Q();wX();pE();KJ();ZZ();qE();vq();hq();mq();pq();lq();oq();YE();tq();A5();I5();E5();TQ();OZ();YX();hH();jZ();S1();xH();aq();LZ();$X();UE();GZ();SH();wE();UX();M1();VX();_1();iY();G$();j$();Cw();zC();F1();b6();v6();I$();T6();E$();J$();fY();P6();vY();hY();mY();dY();R6();uB();G0();B8();GC();rK();R$();L0();Z$();q$();Y$();c6();rY();V$();F$();$$();z$();X$();oK();NX();l6();y6();_Y();f6();zX();DX();Zz();Cz();Hz();WX();CH();XX();kX();wz();Jw();j1();c8();FX();PC();eB();aV();Yz();Oz();Gz();jz();Lz();Rz();OX();Nz();GX();JH();Pz();Fz();$z();Vz();rV();Mz();Kq();jX();_z();AN();BN();EN();VN();UN();ZN();CN();KN();wN();Z0();fB();PZ();a6();c9();d$();p$();u$();KU();EU();M0();p9();GN();e$();SN();bz();D8();QU();vN();eN();TN();u9();yN();tN();xN();lN();nN();sN();cN();pN();rN();l9();fN();Zq();LX();RX();l8();DN();i8();lB();WN();XN();z8();A9();a$();e6();N8();t$();_N();RN();gN();x9();kN();r8();yI();yz();PX();o8();T9();uI();Dz();Xz();kz()});var HL=Y(()=>{G5();L5()});var ZL=Y(()=>{gB();wB();q5()});var MX=Y(()=>{nQ()});var gX=Y(()=>{fB()});var qL=Y(()=>{rH();Y5();F6();C0();J0();wZ();zN();MZ();C4();xQ();gH();HQ();aH();_Z();gZ();gA();MX();gX();_A();J5();tV();X8();bB();ZE();bq();dI();w4();NZ()});var iA=Y(()=>{l2();n2();M();M();b5();R5();zF();WF();_O();iO();nO();HG();ZG();qG();wG();YG();Zj();qj();wj();Dj();d2();hj();lj();KL();HL();ZL();qL();U5();N5();o2();s2();a2();r2();t2();e2();AD();QD();ID();BD();ED();CD();JD();KD();HD();ZD();qD();wD();YD();$D();UD();lD();m$();c$();HW();HU();lI();qU();YU();UU();NU();DU();XU();FU();B9();g0();GU();kI();LU();PU();gU();SU();J9();vU();sB();fU();hU();K9();DE();gE();OI();rC();oH();O5();UJ();IQ();ZW();wW();YW();$W();nU();sU();eU();UW();QV();VW();EV();IV();NW();zW();DW();WW();ZV();XW();JV();qV();HV();kW();wV();UV();OW();Pq();mH();GW();NV();jA();r7();k5();xW();z5();iH();dH();qJ();W5();YJ();pH();uH();G7();L7();P7();lW();LV();RV();yV();mV();cV();I0();dV();pV();uV();iV();nV();q7();w7();u1();i1();n1();EQ();gJ();_J();mW();cW();hV();g9();MV();bV();_V();TV();dW();pW();uW();Y7();iI();EJ();f5();F7();o1();VE();NA();PH();mC();KZ();HE();aQ();N7();z7();D7();W7();ZQ();k7();c2();sV();FN();rW();Az();oY();Kw();bZ();y1();tW();eW();fJ();R1();m1();mZ();c1();v1();xZ();d1();cB();Y1();E1();C1();J1();H1();AX();Z1();z1();K0();H0();X1();ZC();dB();FZ();P5();pZ();sY();M5();s1();_H();QX();P$();g5();a1();NJ();zJ();x$();_$();IX();S$();T$();b$();f$();y$();j6();pB();g$();Hw();Zw();qw();AC();Yw();Nw();Uw();Dw();Ww();Xw();kw();Mw();Fw();Pw();gw();_w();bw();pJ();AI();fw();sw();QY();BX();yw();z6();Q6();xw();nw();h5();eH();cw();pw();lw();EX();W6();m5();d5();u5();i5();o5();Y6();Rw();jw();AY();tw();CY();BY();jK();X6();RY();KY();ZY();wY();k6();$Y();zY();cU();WY();kY();OY();jY();NY();LY();MY();W4();k4();f4();F4();O4();G4();j4();L4();b4();y4();v4();h4();c4();d4();p4();TB();YI();u4();sZ();S4();a5();r5();g4();A7();I7();E7();l4();i4();I6();Z6();s4();r4();e4();J6();Qw();pU();Iw();Ew();t1();lZ();hB();qK();VB();SZ();A4();I4();K4();CX();FE();_6();$7();XE();V7();S6();HJ();H4();m4();iZ();UK();Z4();t5();bI();J7();oZ();XQ();rZ();H7();eZ();aZ();Y4();GE();$0();$I();QC();AK();zZ();RE();JX();KX();U4();Q4();vH();yB();_0();Bz();HX();aE();WQ();tH();FA();N4();TH();pI();qB();ZX();nZ();q9();S0();S5();Q0();qX();D4();nQ();Dz();Xz();kz();_Q();wX();pE();KJ();ZZ();qE();vq();hq();mq();pq();lq();oq();YE();tq();A5();I5();E5();TQ();OZ();YX();hH();jZ();S1();xH();aq();LZ();$X();UE();GZ();SH();wE();UX();M1();VX();_1();iY();G$();j$();Cw();zC();F1();b6();v6();I$();T6();E$();J$();fY();P6();vY();hY();mY();dY();R6();uB();G0();B8();GC();rK();R$();L0();Z$();q$();Y$();c6();rY();V$();F$();$$();z$();X$();oK();NX();l6();y6();_Y();f6();zX();DX();Zz();Cz();Hz();WX();CH();XX();kX();wz();Jw();j1();c8();FX();PC();eB();aV();Yz();Oz();Gz();jz();Lz();Rz();OX();Nz();GX();JH();Pz();Fz();$z();Vz();rV();Mz();Kq();jX();_z();AN();BN();EN();VN();UN();ZN();CN();KN();wN();Z0();fB();PZ();a6();c9();d$();p$();u$();KU();EU();M0();p9();GN();e$();SN();bz();D8();QU();vN();eN();TN();u9();yN();tN();xN();lN();nN();sN();cN();pN();rN();l9();fN();Zq();LX();RX();l8();DN();i8();lB();WN();XN();z8();A9();a$();e6();N8();t$();_N();RN();gN();x9();kN();r8();yI();yz();PX();o8();T9();uI();G5();L5();gB();wB();q5();rH();Y5();F6();C0();J0();wZ();zN();MZ();yQ();C4();xQ();gH();HQ();aH();_Z();gZ();gA();MX();gX();_A();J5();tV();X8();bB();ZE();bq();dI();w4();NZ();p.add(u2,i2)});var yb,wL;var YL=Y(()=>{yb=(()=>{var A=import.meta.url;return function(Q){Q=Q||{};var I;I||(I=typeof Q!=="undefined"?Q:{});var B,E;I.ready=new Promise(function(X,k){B=X,E=k});var C=Object.assign({},I),J="";typeof document!="undefined"&&document.currentScript&&(J=document.currentScript.src),A&&(J=A),J.indexOf("blob:")!==0?J=J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1):J="";var K=I.print||console.log.bind(console),H=I.printErr||console.warn.bind(console);Object.assign(I,C),C=null;var Z;I.wasmBinary&&(Z=I.wasmBinary);var q=I.noExitRuntime||!0;typeof WebAssembly!="object"&&y("no native wasm support detected");var w,$=!1;function U(X,k,G){G=k+G;for(var P="";!(k>=G);){var b=X[k++];if(!b)break;if(b&128){var h=X[k++]&63;if((b&224)==192)P+=String.fromCharCode((b&31)<<6|h);else{var l=X[k++]&63;b=(b&240)==224?(b&15)<<12|h<<6|l:(b&7)<<18|h<<12|l<<6|X[k++]&63,65536>b?P+=String.fromCharCode(b):(b-=65536,P+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else P+=String.fromCharCode(b)}return P}var V,z,D,W,j,O,F,L,R;function _(){var X=w.buffer;V=X,I.HEAP8=z=new Int8Array(X),I.HEAP16=W=new Int16Array(X),I.HEAP32=O=new Int32Array(X),I.HEAPU8=D=new Uint8Array(X),I.HEAPU16=j=new Uint16Array(X),I.HEAPU32=F=new Uint32Array(X),I.HEAPF32=L=new Float32Array(X),I.HEAPF64=R=new Float64Array(X)}var T,f=[],S=[],g=[];function d(){var X=I.preRun.shift();f.unshift(X)}var a=0,AA=null,CA=null;function y(X){if(I.onAbort)I.onAbort(X);throw X="Aborted("+X+")",H(X),$=!0,X=new WebAssembly.RuntimeError(X+". Build with -sASSERTIONS for more info."),E(X),X}function m(X){return X.startsWith("data:application/octet-stream;base64,")}var t="data:application/octet-stream;base64,AGFzbQEAAAABugM3YAF/AGACf38AYAF/AX9gA39/fwBgAn98AGACf38Bf2ADf39/AX9gBH9/f30BfWADf398AGAAAGAEf39/fwBgAX8BfGACf38BfGAFf39/f38Bf2AAAX9gA39/fwF9YAZ/f31/fX8AYAV/f39/fwBgAn9/AX1gBX9/f319AX1gAX8BfWADf35/AX5gB39/f39/f38AYAZ/f39/f38AYAR/f39/AX9gBn9/f319fQF9YAR/f31/AGADf399AX1gBn98f39/fwF/YAR/fHx/AGACf30AYAh/f39/f39/fwBgDX9/f39/f39/f39/f38AYAp/f39/f39/f39/AGAFf39/f38BfGAEfHx/fwF9YA1/fX1/f399fX9/f39/AX9gB39/f319f38AYAJ+fwF/YAN/fX0BfWABfAF8YAN/fHwAYAR/f319AGAHf39/fX19fQF9YA1/fX99f31/fX19fX1/AX9gC39/f39/f399fX19AX9gCH9/f39/f319AGAEf39+fgBgB39/f39/f38Bf2ACfH8BfGAFf398fH8AYAN/f38BfGAEf39/fABgA39/fQBgBn9/fX99fwF/ArUBHgFhAWEAHwFhAWIAAwFhAWMACQFhAWQAFgFhAWUAEQFhAWYAIAFhAWcAAAFhAWgAIQFhAWkAAwFhAWoAAAFhAWsAFwFhAWwACgFhAW0ABQFhAW4AAwFhAW8AAQFhAXAAFwFhAXEABgFhAXIAAAFhAXMAIgFhAXQACgFhAXUADQFhAXYAFgFhAXcAAgFhAXgAAwFhAXkAGAFhAXoAAgFhAUEAAQFhAUIAEQFhAUMAAQFhAUQAAAOiAqACAgMSBwcACRkDAAoRBgYKEwAPDxMBBiMTCgcHGgMUASQFJRQHAwMKCgMmAQYYDxobFAAKBw8KBwMDAgkCAAAFGwACBwIHBgIDAQMIDAABKAkHBQURACkZASoAAAIrLAIALQcHBy4HLwkFCgMCMA0xAgMJAgACAQYKAQIBBQEACQIFAQEABQAODQ0GFQIBHBUGAgkCEAAAAAUyDzMMBQYINAUCAwUODg41AgMCAgIDBgICNgIBDAwMAQsLCwsLCx0CAAIAAAABABABBQICAQMCEgMMCwEBAQEBAQsLAQICAwICAgICAgIDAgIICAEICAgEBAQEBAQEBAQABAQABAQEBAAE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GiABQQA2AvADIAFCADcC6AMgAigC7AMiAyACKALoAyIERwRAIAMgBGsiBEEASA0FIAEgBBAeIgM2AuwDIAEgAzYC6AMgASADIARqNgLwAyACKALoAyIEIAIoAuwDIghHBEADQCADIAQoAgA2AgAgA0EEaiEDIARBBGoiBCAIRw0ACwsgASADNgLsAwsgASACKQL0AzcC9AMgASACKAKEBDYChAQgASACKQL8AzcC/AMgAUEANgLkAwsgBSABNgIAIAEgADYC5AMLIAZBAWohBiAFQQRqIgUgB0cNAAsLDwsQAgALUAACQAJAAkACQAJAIAIOBAQAAQIDCyAAIAEgAUEwahBDDwsgACABIAFBMGogAxBEDwsgACABIAFBMGoQQg8LECQACyAAIAEgAUEwaiADEEULcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt5AgF/AX0jAEEQayIDJAAgA0EIaiAAIAFBAnRB7CVqKAIAIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC1QAAkACQAJAAkACQCACDgQEAAECAwsgACABIAFBwgBqEEMPCyAAIAEgAUHCAGogAxBEDwsgACABIAFBwgBqEEIPCxAkAAsgACABIAFBwgBqIAMQRQsvACAAIAJFQQF0IgIgASADEGAgACACIAEQS5IgACACIAEgAxB/IAAgAiABEFKSkgvOAQIDfwJ9IwBBEGsiAyQAQQEhBCADQQhqIABB/ABqIgUgACABQQF0akH2AGoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALzgECA38CfSMAQRBrIgMk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AWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwscACAAIAFBCCACpyACQiCIpyADpyADQiCIpxAVCwUAEFgACzkAIABFBEBBAA8LAn8gAUGAf3FBgL8DRiABQf8ATXJFBEBB/DtBGTYCAEF/DAELIAAgAToAAEEBCwvEAgACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABQQlrDhIACgsMCgsCAwQFDAsMDAoLBwgJCyACIAIoAgAiAUEEajYCACAAIAEoAgA2AgAPCwALIAIgAigCACIBQQRqNgIAIAAgATIBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATMBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATAAADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATEAADcDAA8LAAsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACIAMRAQALDwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMAC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQegAaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAtdAQR/IAAoAgAhAgNAIAIsAAAiAxBXBEBBfyEEIAAgAkEBaiICNgIAIAFBzJmz5gBNBH9BfyADQTBrIgMgAUEKbCIEaiADIARB/////wdzShsFIAQLIQEMAQsLIAELrhQCEn8BfiMAQdAAayIIJAAgCCABNgJMIAhBN2ohFyAIQThqIRQCQAJAAkACQANAIAEhDSAHIA5B/////wdzSg0BIAcgDmohDgJAAkACQCANIgctAAAiCQRAA0ACQAJAIAlB/wFxIgFFBEAgByEBDAELIAFBJUcNASAH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IQEgAEIANwIEIAAgATYCACABIAA2AgQgAkEQaiQAIAALGwEBfyAABEAgACgCACIBBEAgARAjCyAAECMLC0kBAn9BBBAeIQFBIBAeIgBBADYCHCAAQoCAgICAgIDAPzcCFCAAQgA3AgwgAEEAOgAIIABBAzYCBCAAQQA2AgAgASAANgIAIAELIAAgAkEFR0EAIAIbRQRAQbgwIAMgBBBJDwsgAyAEEHALIgEBfiABIAKtIAOtQiCGhCAEIAARFQAiBUIgiKckASAFpwuoAQEFfyAAKAJUIgMoAgAhBSADKAIEIgQgACgCFCAAKAIcIgdrIgYgBCAGSRsiBgRAIAUgByAGECsaIAMgAygCACAGaiIFNgIAIAMgAygCBCAGayIENgIECyAEIAIgAiAESxsiBARAIAUgASAEECsaIAMgAygCACAEaiIFNgIAIAMgAygCBCAEazYCBAsgBUEAOgAAIAAgACgCLCIBNgIcIAAgATYCFCACCwQAQgALBABBAAuKBQIGfgJ/IAEgASgCAEEHakF4cSIBQRBqNgIAIAAhCSABKQMAIQMgASkDCCEGIwBBIGsiCCQAAkAgBkL///////////8AgyIEQoCAgICAgMCAPH0gBEKAgICAgIDA/8MAfVQEQCAGQgSGIANCPIiEIQQgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIARCgYCAgICAgIDAAHwhAgwCCyAEQoCAgICAgICAQH0hAiADQoCAgICAgICACFINASACIARCAYN8IQIMAQsgA1AgBEKAgICAgIDA//8AVCAEQoCAgICAgMD//wBRG0UEQCAGQgSGIANCPIiEQv////////8Dg0KAgICAgICA/P8AhCECDAELQoCAgICAgID4/wAhAiAEQv///////7//wwBWDQBCACECIARCMIinIgBBkfcASQ0AIAMhAiAGQv///////z+DQoCAgICAgMAAhCIFIQcCQCAAQYH3AGsiAUHAAHEEQCACIAFBQGqthiEHQgAhAgwBCyABRQ0AIAcgAa0iBIYgAkHAACABa62IhCEHIAIgBIYhAgsgCCACNwMQIAggBzcDGAJAQYH4ACAAayIAQcAAcQRAIAUgAEFAaq2IIQNCACEFDAELIABFDQAgBUHAACAAa62GIAMgAK0iAoiEIQMgBSACiCEFCyAIIAM3AwAgCCAF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ASAAKAIAIQAgASACQQFxBH8gASgCACAAaigCAAUgAAsRCwALYQECfyMAQRBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEQEB4iACACKQMINwMIIAAgAikDADcDACACQRBqJAAgAAtjAQJ/IwBBEGsiAyQAIAEgACgCBCIEQQF1aiEBIAAoAgAhACADIAEgAiAEQQFxBH8gASgCACAAaigCAAUgAAsRAwBBEBAeIgAgAykDCDcDCCAAIAMpAwA3AwAgA0EQaiQAIAALNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEEAAs5AQF/IAEgACgCBCIEQQF1aiEBIAAoAgAhACABIAIgAyAEQQFxBH8gASgCACAAaigCAAUgAAsRCAALCQAgASAAEQIACwUAQcM7Cw8AIAEgACgCAGogAjYCAAsNACABIAAoAgBqKAIACxgBAX9BEBAeIgBCADcDCCAAQQA2AgAgAAsYAQF/QRAQHiIAQgA3AwAgAEIANwMIIAALDABBMBAeQQBBMBAqCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRHgALBQBBvjsLIQAgACABKAIAIAEgASwAC0EASBtBuzsgAigCABAQNgIACyoBAX9BDBAeIgFBADoABCABIAAoAgA2AgggAEEANgIAIAFB2Cc2AgAgAQsFAEG7OwsFAEG4OwshACAAIAEoAgAgASABLAALQQBIG0GkOyACKAIAEBA2AgAL2AEBBH8jAEEgayIDJAAgASgCACIEQfD///8HSQRAAkACQCAEQQtPBEAgBEEPckEBaiIFEB4hBiADIAVBgICAgHhyNgIQIAMgBjYCCCADIAQ2AgwgBCAGaiEFDAELIAMgBDoAEyADQQhqIgYgBGohBSAERQ0BCyAGIAFBBGogBBArGgsgBUEAOgAAIAMgAjYCACADQRhqIANBCGogAyAAEQMAIAMoAhgQHSADKAIYIgAQBiADKAIAEAYgAywAE0EASARAIAMoAggQIwsgA0EgaiQAIAAPCxACAAsqAQF/QQwQHiIBQQA6AAQgASAAKAIANgIIIABBADYCACABQeAmNgIA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AkEIaiAIIAYQHyACIAcgAC8AABAfQQEhAyACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSADC0UNAiACLQAMIAItAARHDQILIABBAmohAEEBIQMgBCEGQQEhBCAGRQ0ACyABLwB6IgBBB3FFBEAgBS0AekEHcUUNAgsgCCAAECAiCiAHIAUvAHoQICILWw0BIAogClsNACALIAtcDQELIAFBFGogBUEUakHoABArGiABQfwAaiAFQfwAahCgAQNAIAEtAAAiAEEEcQ0BIAEgAEEEcjoAACABKAIQIgAEQCABIAARAAALIAFBgICA/gc2ApwBIAEoAuQDIgENAAsLIAJBEGokAAvGAwEEfyMAQaAEayICJAAgACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALAkAgACgCACIAKALoAyAAKALsA0YEQCAAKALkAw0BIAAgAkEYaiAAKAL0AxBcIgEpAgA3AgAgACABKAIQNgIQIAAgASkCCDcCCCAAQRRqIAFBFGpB6AAQKxogACABKQKMATcCjAEgACABKQKEATcChAEgACABKQJ8NwJ8IAEoApQBIQQgAUEANgKUASAAKAKUASEDIAAgBDYClAEgAwRAIAMQWwsgAEGYAWogAUGYAWpB0AIQKxogACgC6AMiAwRAIAAgAzYC7AMgAxAjCyAAIAEoAugDNgLoAyAAIAEoAuwDNgLsAyAAIAEoAvADNgLwAyABQQA2AvADIAFCADcC6AMgACABKQL8AzcC/AMgACABKQL0AzcC9AMgACABKAKEBDYChAQgASgClAEhACABQQA2ApQBIAAEQCAAEFsLIAJBoARqJAAPCyACQfAcNgIQIABBBUHYJSACQRBqECwQJAALIAJB5hE2AgAgAEEFQdglIAIQLBAkAAsLAEEMEB4gABCiAQsLAEEMEB5BABCiAQsNACAAKAIALQAIQQFxCwoAIAAoAgAoAhQLGQAgAUH/AXEEQBACAAsgACgCACgCEEEBcQsYACAAKAIAIgAgAC0ACEH+AXEgAXI6AAgLJgAgASAAKAIAIgAoAhRHBEAgACABNgIUIAAgACgCDEEBajYCDAsLkgEBAn8jAEEQayICJAAgACgCACEAIAFDAAAAAGAEQCABIAAqAhhcBEAgACABOAIYIAAgACgCDEEBajYCDAsgAkEQaiQADwsgAkGIFDYCACMAQRBrIgMkACADIAI2AgwCQCAARQRAQbgwQdglIAIQSRoMAQsgAEEAQQVB2CUgAiAAKAIEEQ0AGgsgA0EQaiQAECQACz8AIAFB/wFxRQRAIAIgACgCACIAKAIQIgFBAXFHBEAgACABQX5xIAJyNgIQIAAgACgCDEEBajYCDAsPCxACAAsL4CYjAEGACAuBHk9ubHkgbGVhZiBub2RlcyB3aXRoIGN1c3RvbSBtZWFzdXJlIGZ1bmN0aW9ucyBzaG91bGQgbWFudWFsbHkgbWFyayB0aGVtc2VsdmVzIGFzIGRpcnR5AGlzRGlydHkAbWFya0RpcnR5AGRlc3Ryb3kAc2V0RGlzcGxheQBnZXREaXNwbGF5AHNldEZsZXgALSsgICAwWDB4AC0wWCswWCAwWC0weCsweCAweABzZXRGbGV4R3JvdwBnZXRGbGV4R3JvdwBzZXRPdmVyZmxvdwBnZXRPdmVyZmxvdwBoYXNOZXdMYXlvdXQAY2FsY3VsYXRlTGF5b3V0AGdldENvbXB1dGVkTGF5b3V0AHVuc2lnbmVkIHNob3J0AGdldENoaWxkQ291bnQAdW5zaWduZWQgaW50AHNldEp1c3RpZnlDb250ZW50AGdldEp1c3RpZnlDb250ZW50AGF2YWlsYWJsZUhlaWdodCBpcyBpbmRlZmluaXRlIHNvIGhlaWdodFNpemluZ01vZGUgbXVzdCBiZSBTaXppbmdNb2RlOjpNYXhDb250ZW50AGF2YWlsYWJsZVdpZHRoIGlzIGluZGVmaW5pdGUgc28gd2lkdGhTaXppbmdNb2RlIG11c3QgYmUgU2l6aW5nTW9kZTo6TWF4Q29udGVudABzZXRBbGlnbkNvbnRlbnQAZ2V0QWxpZ25Db250ZW50AGdldFBhcmVudABpbXBsZW1lbnQAc2V0TWF4SGVpZ2h0UGVyY2VudABzZXRIZWlnaHRQZXJjZW50AHNldE1pbkhlaWdodFBlcmNlbnQAc2V0RmxleEJhc2lzUGVyY2VudABzZXRHYXBQZXJjZW50AHNldFBvc2l0aW9uUGVyY2VudABzZXRNYXJnaW5QZXJjZW50AHNldE1heFdpZHRoUGVyY2VudABzZXRXaWR0aFBlcmNlbnQAc2V0TWluV2lkdGhQZXJjZW50AHNldFBhZGRpbmdQZXJjZW50AGhhbmRsZS50eXBlKCkgPT0gU3R5bGVWYWx1ZUhhbmRsZTo6VHlwZTo6UG9pbnQgfHwgaGFuZGxlLnR5cGUoKSA9PSBTdHlsZVZhbHVlSGFuZGxlOjpUeXBlOjpQZXJjZW50AGNyZWF0ZURlZmF1bHQAdW5pdAByaWdodABoZWlnaHQAc2V0TWF4SGVpZ2h0AGdldE1heEhlaWdodABzZXRIZWlnaHQAZ2V0SGVpZ2h0AHNldE1pbkhlaWdodABnZXRNaW5IZWlnaHQAZ2V0Q29tcHV0ZWRIZWlnaHQAZ2V0Q29tcHV0ZWRSaWdodABsZWZ0AGdldENvbXB1dGVkTGVmdAByZXNldABfX2Rlc3RydWN0AGZsb2F0AHVpbnQ2NF90AHVzZVdlYkRlZmF1bHRzAHNldFVzZVdlYkRlZmF1bHRzAHNldEFsaWduSXRlbXMAZ2V0QWxpZ25JdGVtcwBzZXRGbGV4QmFzaXMAZ2V0RmxleEJhc2lzAENhbm5vdCBnZXQgbGF5b3V0IHByb3BlcnRpZXMgb2YgbXVsdGktZWRnZSBzaG9ydGhhbmRzAHNldFBvaW50U2NhbGVGYWN0b3IATWVhc3VyZUNhbGxiYWNrV3JhcHBlcgBEaXJ0aWVkQ2FsbGJhY2tXcmFwcGVyAENhbm5vdCByZXNldCBhIG5vZGUgc3RpbGwgYXR0YWNoZWQgdG8gYSBvd25lcgBzZXRCb3JkZXIAZ2V0Qm9yZGVyAGdldENvbXB1dGVkQm9yZGVyAGdldE51bWJlcgBoYW5kbGUudHlwZSgpID09IFN0eWxlVmFsdWVIYW5kbGU6OlR5cGU6Ok51bWJlcgB1bnNpZ25lZCBjaGFyAHRvcABnZXRDb21wdXRlZFRvcABzZXRGbGV4V3JhcABnZXRGbGV4V3JhcABzZXRHYXAAZ2V0R2FwACVwAHNldEhlaWdodEF1dG8Ac2V0RmxleEJhc2lzQXV0bwBzZXRQb3NpdGlvbkF1dG8Ac2V0TWFyZ2luQXV0bwBzZXRXaWR0aEF1dG8AU2NhbGUgZmFjdG9yIHNob3VsZCBub3QgYmUgbGVzcyB0aGFuIHplcm8Ac2V0QXNwZWN0UmF0aW8AZ2V0QXNwZWN0UmF0aW8Ac2V0UG9zaXRpb24AZ2V0UG9zaXRpb24Abm90aWZ5T25EZXN0cnVjdGlvbgBzZXRGbGV4RGlyZWN0aW9uAGdldEZsZXhEaXJlY3Rpb24Ac2V0RGlyZWN0aW9uAGdldERpcmVjdGlvbgBzZXRNYXJnaW4AZ2V0TWFyZ2luAGdldENvbXB1dGVkTWFyZ2luAG1hcmtMYXlvdXRTZWVuAG5hbgBib3R0b20AZ2V0Q29tcHV0ZWRCb3R0b20AYm9vbABlbXNjcmlwdGVuOjp2YWwAc2V0RmxleFNocmluawBnZXRGbGV4U2hyaW5rAHNldEFsd2F5c0Zvcm1zQ29udGFpbmluZ0Jsb2NrAE1lYXN1cmVDYWxsYmFjawBEaXJ0aWVkQ2FsbGJhY2sAZ2V0TGVuZ3RoAHdpZHRoAHNldE1heFdpZHRoAGdldE1heFdpZHRoAHNldFdpZHRoAGdldFdpZHRoAHNldE1pbldpZHRoAGdldE1pbldpZHRoAGdldENvbXB1dGVkV2lkdGgAcHVzaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1NtYWxsVmFsdWVCdWZmZXIuaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1N0eWxlVmFsdWVQb29sLmgAdW5zaWduZWQgbG9uZwBzZXRCb3hTaXppbmcAZ2V0Qm94U2l6aW5nAHN0ZDo6d3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBzZXRQYWRkaW5nAGdldFBhZGRpbmcAZ2V0Q29tcHV0ZWRQYWRkaW5nAFRyaWVkIHRvIGNvbnN0cnVjdCBZR05vZGUgd2l0aCBudWxsIGNvbmZpZwBBdHRlbXB0aW5nIHRvIGNvbnN0cnVjdCBOb2RlIHdpdGggbnVsbCBjb25maWcAY3JlYXRlV2l0aENvbmZpZwBpbmYAc2V0QWxpZ25TZWxmAGdldEFsaWduU2VsZgBTaXplAHZhbHVlAFZhbHVlAGNyZWF0ZQBtZWFzdXJlAHNldFBvc2l0aW9uVHlwZQBnZXRQb3NpdGlvblR5cGUAaXNSZWZlcmVuY2VCYXNlbGluZQBzZXRJc1JlZmVyZW5jZUJhc2VsaW5lAGNvcHlTdHlsZQBkb3VibGUATm9kZQBleHRlbmQAaW5zZXJ0Q2hpbGQAZ2V0Q2hpbGQAcmVtb3ZlQ2hpbGQAdm9pZABzZXRFeHBlcmltZW50YWxGZWF0dXJlRW5hYmxlZABpc0V4cGVyaW1lbnRhbEZlYXR1cmVFbmFibGVkAGRpcnRpZWQAQ2Fubm90IHJlc2V0IGEgbm9kZSB3aGljaCBzdGlsbCBoYXMgY2hpbGRyZW4gYXR0YWNoZWQAdW5zZXRNZWFzdXJlRnVuYwB1bnNldERpcnRpZWRGdW5jAHNldEVycmF0YQBnZXRFcnJhdGEATWVhc3VyZSBmdW5jdGlvbiByZXR1cm5lZCBhbiBpbnZhbGlkIGRpbWVuc2lvbiB0byBZb2dhOiBbd2lkdGg9JWYsIGhlaWdodD0lZl0ARXhwZWN0IGN1c3RvbSBiYXNlbGluZSBmdW5jdGlvbiB0byBub3QgcmV0dXJuIE5hTgBOQU4ASU5GAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVk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";if(!m(t)){var r=t;t=I.locateFile?I.locateFile(r,J):J+r}function WA(){var X=t;try{if(X==t&&Z)return new Uint8Array(Z);if(m(X))try{var k=UP(X.slice(37)),G=new Uint8Array(k.length);for(X=0;X<k.length;++X)G[X]=k.charCodeAt(X);var P=G}catch(h){throw Error("Converting base64 string to bytes failed.")}else P=void 0;var b=P;if(b)return b;throw"both async and sync fetching of the wasm failed"}catch(h){y(h)}}function kA(){return Z||typeof fetch!="function"?Promise.resolve().then(function(){return WA()}):fetch(t,{credentials:"same-origin"}).then(function(X){if(!X.ok)throw"failed to load wasm binary file at '"+t+"'";return X.arrayBuffer()}).catch(function(){return WA()})}function zA(X){for(;0<X.length;)X.shift()(I)}function $A(X){if(X===void 0)return"_unknown";X=X.replace(/[^a-zA-Z0-9_]/g,"$");var k=X.charCodeAt(0);return 48<=k&&57>=k?"_"+X:X}function fA(X,k){return X=$A(X),function(){return k.apply(this,arguments)}}var HA=[{},{value:void 0},{value:null},{value:!0},{value:!1}],FQ=[];function gQ(X){var k=Error,G=fA(X,function(P){this.name=X,this.message=P,P=Error(P).stack,P!==void 0&&(this.stack=this.toString()+`
`+P.replace(/^Error(:[^\n]*)?\n/,""))});return G.prototype=Object.create(k.prototype),G.prototype.constructor=G,G.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},G}var VQ=void 0;function ZA(X){throw new VQ(X)}var NQ=(X)=>{return X||ZA("Cannot use deleted val. handle = "+X),HA[X].value},OQ=(X)=>{switch(X){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var k=FQ.length?FQ.pop():HA.length;return HA[k]={ga:1,value:X},k}},JI=void 0,DI=void 0;function dA(X){for(var k="";D[X];)k+=DI[D[X++]];return k}var uQ=[];function mI(){for(;uQ.length;){var X=uQ.pop();X.M.$=!1,X.delete()}}var KI=void 0,HI={};function hC(X,k){for(k===void 0&&ZA("ptr should not be undefined");X.R;)k=X.ba(k),X=X.R;return k}var RB={};function WH(X){X=Ek(X);var k=dA(X);return CE(X),k}function XH(X,k){var G=RB[X];return G===void 0&&ZA(k+" has unknown type "+WH(X)),G}function xC(){}var a0=!1;function kH(X){--X.count.value,X.count.value===0&&(X.T?X.U.W(X.T):X.P.N.W(X.O))}function FH(X,k,G){if(k===G)return X;if(G.R===void 0)return null;return X=FH(X,k,G.R),X===null?null:G.na(X)}var Nq={};function I2(X,k){return k=hC(X,k),HI[k]}var r0=void 0;function mE(X){throw new r0(X)}function zq(X,k){return k.P&&k.O||mE("makeClassHandle requires ptr and ptrType"),!!k.U!==!!k.T&&mE("Both smartPtrType and smartPtr must be specified"),k.count={value:1},t0(Object.create(X,{M:{value:k}}))}function t0(X){if(typeof FinalizationRegistry==="undefined")return t0=(k)=>k,X;return a0=new FinalizationRegistry((k)=>{kH(k.M)}),t0=(k)=>{var G=k.M;return G.T&&a0.register(k,{M:G},k),k},xC=(k)=>{a0.unregister(k)},t0(X)}var Dq={};function B2(X){for(;X.length;){var k=X.pop();X.pop()(k)}}function OH(X){return this.fromWireType(O[X>>2])}var e0={},Wq={};function cE(X,k,G){function P(i){i=G(i),i.length!==X.length&&mE("Mismatched type converter count");for(var e=0;e<X.length;++e)BE(X[e],i[e])}X.forEach(function(i){Wq[i]=k});var b=Array(k.length),h=[],l=0;k.forEach((i,e)=>{RB.hasOwnProperty(i)?b[e]=RB[i]:(h.push(i),e0.hasOwnProperty(i)||(e0[i]=[]),e0[i].push(()=>{b[e]=RB[i],++l,l===h.length&&P(b)}))}),h.length===0&&P(b)}function E2(X){switch(X){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+X)}}function BE(X,k,G={}){if(!("argPackAdvance"in k))throw new TypeError("registerType registeredInstance requires argPackAdvance");var P=k.name;if(X||ZA('type "'+P+'" must have a positive integer typeid pointer'),RB.hasOwnProperty(X)){if(G.ua)return;ZA("Cannot register type '"+P+"' twice")}RB[X]=k,delete Wq[X],e0.hasOwnProperty(X)&&(k=e0[X],delete e0[X],k.forEach((b)=>b()))}function C2(X){ZA(X.M.P.N.name+" instance already deleted")}function dE(){}function J2(X,k,G){if(X[k].S===void 0){var P=X[k];X[k]=function(){return X[k].S.hasOwnProperty(arguments.length)||ZA("Function '"+G+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+X[k].S+")!"),X[k].S[arguments.length].apply(this,arguments)},X[k].S=[],X[k].S[P.Z]=P}}function sR(X,k){I.hasOwnProperty(X)?(ZA("Cannot register public name '"+X+"' twice"),J2(I,X,X),I.hasOwnProperty(void 0)&&ZA("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),I[X].S[void 0]=k):I[X]=k}function aR(X,k,G,P,b,h,l,i){this.name=X,this.constructor=k,this.X=G,this.W=P,this.R=b,this.pa=h,this.ba=l,this.na=i,this.ja=[]}function K2(X,k,G){for(;k!==G;)k.ba||ZA("Expected null or instance of "+G.name+", got an instance of "+k.name),X=k.ba(X),k=k.R;return X}function rR(X,k){if(k===null)return this.ea&&ZA("null is not a valid "+this.name),0;return k.M||ZA('Cannot pass "'+w2(k)+'" as a '+this.name),k.M.O||ZA("Cannot pass deleted object as a pointer of type "+this.name),K2(k.M.O,k.M.P.N,this.N)}function tR(X,k){if(k===null){if(this.ea&&ZA("null is not a valid "+this.name),this.da){var G=this.fa();return X!==null&&X.push(this.W,G),G}return 0}if(k.M||ZA('Cannot pass "'+w2(k)+'" as a '+this.name),k.M.O||ZA("Cannot pass deleted object as a pointer of type "+this.name),!this.ca&&k.M.P.ca&&ZA("Cannot convert argument of type "+(k.M.U?k.M.U.name:k.M.P.name)+" to parameter type "+this.name),G=K2(k.M.O,k.M.P.N,this.N),this.da)switch(k.M.T===void 0&&ZA("Passing raw pointer to smart pointer is illegal"),this.Ba){case 0:k.M.U===this?G=k.M.T:ZA("Cannot convert argument of type "+(k.M.U?k.M.U.name:k.M.P.name)+" to parameter type "+this.name);break;case 1:G=k.M.T;break;case 2:if(k.M.U===this)G=k.M.T;else{var P=k.clone();G=this.xa(G,OQ(function(){P.delete()})),X!==null&&X.push(this.W,G)}break;default:ZA("Unsupporting sharing policy")}return G}function eR(X,k){if(k===null)return this.ea&&ZA("null is not a valid "+this.name),0;return k.M||ZA('Cannot pass "'+w2(k)+'" as a '+this.name),k.M.O||ZA("Cannot pass deleted object as a pointer of type "+this.name),k.M.P.ca&&ZA("Cannot convert argument of type "+k.M.P.name+" to parameter type "+this.name),K2(k.M.O,k.M.P.N,this.N)}function EE(X,k,G,P){this.name=X,this.N=k,this.ea=G,this.ca=P,this.da=!1,this.W=this.xa=this.fa=this.ka=this.Ba=this.wa=void 0,k.R!==void 0?this.toWireType=tR:(this.toWireType=P?rR:eR,this.V=null)}function AP(X,k){I.hasOwnProperty(X)||mE("Replacing nonexistant public symbol"),I[X]=k,I[X].Z=void 0}function QP(X,k){var G=[];return function(){if(G.length=0,Object.assign(G,arguments),X.includes("j")){var P=I["dynCall_"+X];P=G&&G.length?P.apply(null,[k].concat(G)):P.call(null,k)}else P=T.get(k).apply(null,G);return P}}function JB(X,k){X=dA(X);var G=X.includes("j")?QP(X,k):T.get(k);return typeof G!="function"&&ZA("unknown function pointer with signature "+X+": "+k),G}var Ak=void 0;function Xq(X,k){function G(h){b[h]||RB[h]||(Wq[h]?Wq[h].forEach(G):(P.push(h),b[h]=!0))}var P=[],b={};throw k.forEach(G),new Ak(X+": "+P.map(WH).join([", "]))}function H2(X,k,G,P,b){var h=k.length;2>h&&ZA("argTypes array size mismatch! Must at least get return value and 'this' types!");var l=k[1]!==null&&G!==null,i=!1;for(G=1;G<k.length;++G)if(k[G]!==null&&k[G].V===void 0){i=!0;break}var e=k[0].name!=="void",s=h-2,IA=Array(s),YA=[],TA=[];return function(){if(arguments.length!==s&&ZA("function "+X+" called with "+arguments.length+" arguments, expected "+s+" args!"),TA.length=0,YA.length=l?2:1,YA[0]=b,l){var RQ=k[1].toWireType(TA,this);YA[1]=RQ}for(var pA=0;pA<s;++pA)IA[pA]=k[pA+2].toWireType(TA,arguments[pA]),YA.push(IA[pA]);if(pA=P.apply(null,YA),i)B2(TA);else for(var _I=l?1:2;_I<k.length;_I++){var KB=_I===1?RQ:IA[_I-2];k[_I].V!==null&&k[_I].V(KB)}return RQ=e?k[0].fromWireType(pA):void 0,RQ}}function Z2(X,k){for(var G=[],P=0;P<X;P++)G.push(F[k+4*P>>2]);return G}function q2(X){4<X&&--HA[X].ga===0&&(HA[X]=void 0,FQ.push(X))}function w2(X){if(X===null)return"null";var k=typeof X;return k==="object"||k==="array"||k==="function"?X.toString():""+X}function IP(X,k){switch(k){case 2:return function(G){return this.fromWireType(L[G>>2])};case 3:return function(G){return this.fromWireType(R[G>>3])};default:throw new TypeError("Unknown float type: "+X)}}function BP(X,k,G){switch(k){case 0:return G?function(P){return z[P]}:function(P){return D[P]};case 1:return G?function(P){return W[P>>1]}:function(P){return j[P>>1]};case 2:return G?function(P){return O[P>>2]}:function(P){return F[P>>2]};default:throw new TypeError("Unknown integer type: "+X)}}function EP(X,k){for(var G="",P=0;!(P>=k/2);++P){var b=W[X+2*P>>1];if(b==0)break;G+=String.fromCharCode(b)}return G}function CP(X,k,G){if(G===void 0&&(G=2147483647),2>G)return 0;G-=2;var P=k;G=G<2*X.length?G/2:X.length;for(var b=0;b<G;++b)W[k>>1]=X.charCodeAt(b),k+=2;return W[k>>1]=0,k-P}function JP(X){return 2*X.length}function KP(X,k){for(var G=0,P="";!(G>=k/4);){var b=O[X+4*G>>2];if(b==0)break;++G,65536<=b?(b-=65536,P+=String.fromCharCode(55296|b>>10,56320|b&1023)):P+=String.fromCharCode(b)}return P}function HP(X,k,G){if(G===void 0&&(G=2147483647),4>G)return 0;var P=k;G=P+G-4;for(var b=0;b<X.length;++b){var h=X.charCodeAt(b);if(55296<=h&&57343>=h){var l=X.charCodeAt(++b);h=65536+((h&1023)<<10)|l&1023}if(O[k>>2]=h,k+=4,k+4>G)break}return O[k>>2]=0,k-P}function ZP(X){for(var k=0,G=0;G<X.length;++G){var P=X.charCodeAt(G);55296<=P&&57343>=P&&++G,k+=4}return k}var qP={};function Qk(X){var k=qP[X];return k===void 0?dA(X):k}var kq=[];function wP(X){var k=kq.length;return kq.push(X),k}function YP(X,k){for(var G=Array(X),P=0;P<X;++P)G[P]=XH(F[k+4*P>>2],"parameter "+P);return G}var Ik=[],$P=[null,[],[]];VQ=I.BindingError=gQ("BindingError"),I.count_emval_handles=function(){for(var X=0,k=5;k<HA.length;++k)HA[k]!==void 0&&++X;return X},I.get_first_emval=function(){for(var X=5;X<HA.length;++X)if(HA[X]!==void 0)return HA[X];return null},JI=I.PureVirtualError=gQ("PureVirtualError");for(var Bk=Array(256),Fq=0;256>Fq;++Fq)Bk[Fq]=String.fromCharCode(Fq);DI=Bk,I.getInheritedInstanceCount=function(){return Object.keys(HI).length},I.getLiveInheritedInstances=function(){var X=[],k;for(k in HI)HI.hasOwnProperty(k)&&X.push(HI[k]);return X},I.flushPendingDeletes=mI,I.setDelayFunction=function(X){KI=X,uQ.length&&KI&&KI(mI)},r0=I.InternalError=gQ("InternalError"),dE.prototype.isAliasOf=function(X){if(!(this instanceof dE&&X instanceof dE))return!1;var k=this.M.P.N,G=this.M.O,P=X.M.P.N;for(X=X.M.O;k.R;)G=k.ba(G),k=k.R;for(;P.R;)X=P.ba(X),P=P.R;return k===P&&G===X},dE.prototype.clone=function(){if(this.M.O||C2(this),this.M.aa)return this.M.count.value+=1,this;var X=t0,k=Object,G=k.create,P=Object.getPrototypeOf(this),b=this.M;return X=X(G.call(k,P,{M:{value:{count:b.count,$:b.$,aa:b.aa,O:b.O,P:b.P,T:b.T,U:b.U}}})),X.M.count.value+=1,X.M.$=!1,X},dE.prototype.delete=function(){this.M.O||C2(this),this.M.$&&!this.M.aa&&ZA("Object already scheduled for deletion"),xC(this),kH(this.M),this.M.aa||(this.M.T=void 0,this.M.O=void 0)},dE.prototype.isDeleted=function(){return!this.M.O},dE.prototype.deleteLater=function(){return this.M.O||C2(this),this.M.$&&!this.M.aa&&ZA("Object already scheduled for deletion"),uQ.push(this),uQ.length===1&&KI&&KI(mI),this.M.$=!0,this},EE.prototype.qa=function(X){return this.ka&&(X=this.ka(X)),X},EE.prototype.ha=function(X){this.W&&this.W(X)},EE.prototype.argPackAdvance=8,EE.prototype.readValueFromPointer=OH,EE.prototype.deleteObject=function(X){if(X!==null)X.delete()},EE.prototype.fromWireType=function(X){function k(){return this.da?zq(this.N.X,{P:this.wa,O:G,U:this,T:X}):zq(this.N.X,{P:this,O:X})}var G=this.qa(X);if(!G)return this.ha(X),null;var P=I2(this.N,G);if(P!==void 0){if(P.M.count.value===0)return P.M.O=G,P.M.T=X,P.clone();return P=P.clone(),this.ha(X),P}if(P=this.N.pa(G),P=Nq[P],!P)return k.call(this);P=this.ca?P.la:P.pointerType;var b=FH(G,this.N,P.N);return b===null?k.call(this):this.da?zq(P.N.X,{P,O:b,U:this,T:X}):zq(P.N.X,{P,O:b})},Ak=I.UnboundTypeError=gQ("UnboundTypeError");var UP=typeof atob=="function"?atob:function(X){var k="",G=0;X=X.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(X.charAt(G++)),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(X.charAt(G++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(X.charAt(G++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(X.charAt(G++));P=P<<2|b>>4,b=(b&15)<<4|h>>2;var i=(h&3)<<6|l;k+=String.fromCharCode(P),h!==64&&(k+=String.fromCharCode(b)),l!==64&&(k+=String.fromCharCode(i))}while(G<X.length);return k},VP={l:function(X,k,G,P){y("Assertion failed: "+(X?U(D,X):"")+", at: "+[k?k?U(D,k):"":"unknown filename",G,P?P?U(D,P):"":"unknown function"])},q:function(X,k,G){X=dA(X),k=XH(k,"wrapper"),G=NQ(G);var P=[].slice,b=k.N,h=b.X,l=b.R.X,i=b.R.constructor;X=fA(X,function(){b.R.ja.forEach(function(s){if(this[s]===l[s])throw new JI("Pure virtual function "+s+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:h}),this.__construct.apply(this,P.call(arguments))}),h.__construct=function(){this===h&&ZA("Pass correct 'this' to __construct");var s=i.implement.apply(void 0,[this].concat(P.call(arguments)));xC(s);var IA=s.M;s.notifyOnDestruction(),IA.aa=!0,Object.defineProperties(this,{M:{value:IA}}),t0(this),s=IA.O,s=hC(b,s),HI.hasOwnProperty(s)?ZA("Tried to register registered instance: "+s):HI[s]=this},h.__destruct=function(){this===h&&ZA("Pass correct 'this' to __destruct"),xC(this);var s=this.M.O;s=hC(b,s),HI.hasOwnProperty(s)?delete HI[s]:ZA("Tried to unregister unregistered instance: "+s)},X.prototype=Object.create(h);for(var e in G)X.prototype[e]=G[e];return OQ(X)},j:function(X){var k=Dq[X];delete Dq[X];var{fa:G,W:P,ia:b}=k,h=b.map((l)=>l.ta).concat(b.map((l)=>l.za));cE([X],h,(l)=>{var i={};return b.forEach((e,s)=>{var IA=l[s],YA=e.ra,TA=e.sa,RQ=l[s+b.length],pA=e.ya,_I=e.Aa;i[e.oa]={read:(KB)=>IA.fromWireType(YA(TA,KB)),write:(KB,GH)=>{var JE=[];pA(_I,KB,RQ.toWireType(JE,GH)),B2(JE)}}}),[{name:k.name,fromWireType:function(e){var s={},IA;for(IA in i)s[IA]=i[IA].read(e);return P(e),s},toWireType:function(e,s){for(var IA in i)if(!(IA in s))throw new TypeError('Missing field:  "'+IA+'"');var YA=G();for(IA in i)i[IA].write(YA,s[IA]);return e!==null&&e.push(P,YA),YA},argPackAdvance:8,readValueFromPointer:OH,V:P}]})},v:function(){},B:function(X,k,G,P,b){var h=E2(G);k=dA(k),BE(X,{name:k,fromWireType:function(l){return!!l},toWireType:function(l,i){return i?P:b},argPackAdvance:8,readValueFromPointer:function(l){if(G===1)var i=z;else if(G===2)i=W;else if(G===4)i=O;else throw new TypeError("Unknown boolean type size: "+k);return this.fromWireType(i[l>>h])},V:null})},f:function(X,k,G,P,b,h,l,i,e,s,IA,YA,TA){IA=dA(IA),h=JB(b,h),i&&(i=JB(l,i)),s&&(s=JB(e,s)),TA=JB(YA,TA);var RQ=$A(IA);sR(RQ,function(){Xq("Cannot construct "+IA+" due to unbound types",[P])}),cE([X,k,G],P?[P]:[],function(pA){if(pA=pA[0],P)var _I=pA.N,KB=_I.X;else KB=dE.prototype;pA=fA(RQ,function(){if(Object.getPrototypeOf(this)!==GH)throw new VQ("Use 'new' to construct "+IA);if(JE.Y===void 0)throw new VQ(IA+" has no accessible constructor");var Kk=JE.Y[arguments.length];if(Kk===void 0)throw new VQ("Tried to invoke ctor of "+IA+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(JE.Y).toString()+") parameters instead!");return Kk.apply(this,arguments)});var GH=Object.create(KB,{constructor:{value:pA}});pA.prototype=GH;var JE=new aR(IA,pA,GH,TA,_I,h,i,s);_I=new EE(IA,JE,!0,!1),KB=new EE(IA+"*",JE,!1,!1);var Jk=new EE(IA+" const*",JE,!1,!0);return Nq[X]={pointerType:KB,la:Jk},AP(RQ,pA),[_I,KB,Jk]})},d:function(X,k,G,P,b,h,l){var i=Z2(G,P);k=dA(k),h=JB(b,h),cE([],[X],function(e){function s(){Xq("Cannot call "+IA+" due to unbound types",i)}e=e[0];var IA=e.name+"."+k;k.startsWith("@@")&&(k=Symbol[k.substring(2)]);var YA=e.N.constructor;return YA[k]===void 0?(s.Z=G-1,YA[k]=s):(J2(YA,k,IA),YA[k].S[G-1]=s),cE([],i,function(TA){return TA=H2(IA,[TA[0],null].concat(TA.slice(1)),null,h,l),YA[k].S===void 0?(TA.Z=G-1,YA[k]=TA):YA[k].S[G-1]=TA,[]}),[]})},p:function(X,k,G,P,b,h){0<k||y();var l=Z2(k,G);b=JB(P,b),cE([],[X],function(i){i=i[0];var e="constructor "+i.name;if(i.N.Y===void 0&&(i.N.Y=[]),i.N.Y[k-1]!==void 0)throw new VQ("Cannot register multiple constructors with identical number of parameters ("+(k-1)+") for class '"+i.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return i.N.Y[k-1]=()=>{Xq("Cannot construct "+i.name+" due to unbound types",l)},cE([],l,function(s){return s.splice(1,0,null),i.N.Y[k-1]=H2(e,s,null,b,h),[]}),[]})},a:function(X,k,G,P,b,h,l,i){var e=Z2(G,P);k=dA(k),h=JB(b,h),cE([],[X],function(s){function IA(){Xq("Cannot call "+YA+" due to unbound types",e)}s=s[0];var YA=s.name+"."+k;k.startsWith("@@")&&(k=Symbol[k.substring(2)]),i&&s.N.ja.push(k);var TA=s.N.X,RQ=TA[k];return RQ===void 0||RQ.S===void 0&&RQ.className!==s.name&&RQ.Z===G-2?(IA.Z=G-2,IA.className=s.name,TA[k]=IA):(J2(TA,k,YA),TA[k].S[G-2]=IA),cE([],e,function(pA){return pA=H2(YA,pA,s,h,l),TA[k].S===void 0?(pA.Z=G-2,TA[k]=pA):TA[k].S[G-2]=pA,[]}),[]})},A:function(X,k){k=dA(k),BE(X,{name:k,fromWireType:function(G){var P=NQ(G);return q2(G),P},toWireType:function(G,P){return OQ(P)},argPackAdvance:8,readValueFromPointer:OH,V:null})},n:function(X,k,G){G=E2(G),k=dA(k),BE(X,{name:k,fromWireType:function(P){return P},toWireType:function(P,b){return b},argPackAdvance:8,readValueFromPointer:IP(k,G),V:null})},e:function(X,k,G,P,b){k=dA(k),b===-1&&(b=4294967295),b=E2(G);var h=(i)=>i;if(P===0){var l=32-8*G;h=(i)=>i<<l>>>l}G=k.includes("unsigned")?function(i,e){return e>>>0}:function(i,e){return e},BE(X,{name:k,fromWireType:h,toWireType:G,argPackAdvance:8,readValueFromPointer:BP(k,b,P!==0),V:null})},b:function(X,k,G){function P(h){h>>=2;var l=F;return new b(V,l[h+1],l[h])}var b=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][k];G=dA(G),BE(X,{name:G,fromWireType:P,argPackAdvance:8,readValueFromPointer:P},{ua:!0})},o:function(X,k){k=dA(k);var G=k==="std::string";BE(X,{name:k,fromWireType:function(P){var b=F[P>>2],h=P+4;if(G)for(var l=h,i=0;i<=b;++i){var e=h+i;if(i==b||D[e]==0){if(l=l?U(D,l,e-l):"",s===void 0)var s=l;else s+=String.fromCharCode(0),s+=l;l=e+1}}else{s=Array(b);for(i=0;i<b;++i)s[i]=String.fromCharCode(D[h+i]);s=s.join("")}return CE(P),s},toWireType:function(P,b){b instanceof ArrayBuffer&&(b=new Uint8Array(b));var h,l=typeof b=="string";if(l||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int8Array||ZA("Cannot pass non-string to std::string"),G&&l){var i=0;for(h=0;h<b.length;++h){var e=b.charCodeAt(h);127>=e?i++:2047>=e?i+=2:55296<=e&&57343>=e?(i+=4,++h):i+=3}h=i}else h=b.length;if(i=Y2(4+h+1),e=i+4,F[i>>2]=h,G&&l){if(l=e,e=h+1,h=D,0<e){e=l+e-1;for(var s=0;s<b.length;++s){var IA=b.charCodeAt(s);if(55296<=IA&&57343>=IA){var YA=b.charCodeAt(++s);IA=65536+((IA&1023)<<10)|YA&1023}if(127>=IA){if(l>=e)break;h[l++]=IA}else{if(2047>=IA){if(l+1>=e)break;h[l++]=192|IA>>6}else{if(65535>=IA){if(l+2>=e)break;h[l++]=224|IA>>12}else{if(l+3>=e)break;h[l++]=240|IA>>18,h[l++]=128|IA>>12&63}h[l++]=128|IA>>6&63}h[l++]=128|IA&63}}h[l]=0}}else if(l)for(l=0;l<h;++l)s=b.charCodeAt(l),255<s&&(CE(e),ZA("String has UTF-16 code units that do not fit in 8 bits")),D[e+l]=s;else for(l=0;l<h;++l)D[e+l]=b[l];return P!==null&&P.push(CE,i),i},argPackAdvance:8,readValueFromPointer:OH,V:function(P){CE(P)}})},i:function(X,k,G){if(G=dA(G),k===2)var P=EP,b=CP,h=JP,l=()=>j,i=1;else k===4&&(P=KP,b=HP,h=ZP,l=()=>F,i=2);BE(X,{name:G,fromWireType:function(e){for(var s=F[e>>2],IA=l(),YA,TA=e+4,RQ=0;RQ<=s;++RQ){var pA=e+4+RQ*k;if(RQ==s||IA[pA>>i]==0)TA=P(TA,pA-TA),YA===void 0?YA=TA:(YA+=String.fromCharCode(0),YA+=TA),TA=pA+k}return CE(e),YA},toWireType:function(e,s){typeof s!="string"&&ZA("Cannot pass non-string to C++ string type "+G);var IA=h(s),YA=Y2(4+IA+k);return F[YA>>2]=IA>>i,b(s,YA+4,IA+k),e!==null&&e.push(CE,YA),YA},argPackAdvance:8,readValueFromPointer:OH,V:function(e){CE(e)}})},k:function(X,k,G,P,b,h){Dq[X]={name:dA(k),fa:JB(G,P),W:JB(b,h),ia:[]}},h:function(X,k,G,P,b,h,l,i,e,s){Dq[X].ia.push({oa:dA(k),ta:G,ra:JB(P,b),sa:h,za:l,ya:JB(i,e),Aa:s})},C:function(X,k){k=dA(k),BE(X,{va:!0,name:k,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},s:function(X,k,G,P,b){X=kq[X],k=NQ(k),G=Qk(G);var h=[];return F[P>>2]=OQ(h),X(k,G,h,b)},t:function(X,k,G,P){X=kq[X],k=NQ(k),G=Qk(G),X(k,G,null,P)},g:q2,m:function(X,k){var G=YP(X,k),P=G[0];k=P.name+"_$"+G.slice(1).map(function(l){return l.name}).join("_")+"$";var b=Ik[k];if(b!==void 0)return b;var h=Array(X-1);return b=wP((l,i,e,s)=>{for(var IA=0,YA=0;YA<X-1;++YA)h[YA]=G[YA+1].readValueFromPointer(s+IA),IA+=G[YA+1].argPackAdvance;l=l[i].apply(l,h);for(YA=0;YA<X-1;++YA)G[YA+1].ma&&G[YA+1].ma(h[YA]);if(!P.va)return P.toWireType(e,l)}),Ik[k]=b},D:function(X){4<X&&(HA[X].ga+=1)},r:function(X){var k=NQ(X);B2(k),q2(X)},c:function(){y("")},x:function(X,k,G){D.copyWithin(X,k,k+G)},w:function(X){var k=D.length;if(X>>>=0,2147483648<X)return!1;for(var G=1;4>=G;G*=2){var P=k*(1+0.2/G);P=Math.min(P,X+100663296);var b=Math;P=Math.max(X,P),b=b.min.call(b,2147483648,P+(65536-P%65536)%65536);A:{try{w.grow(b-V.byteLength+65535>>>16),_();var h=1;break A}catch(l){}h=void 0}if(h)return!0}return!1},z:function(){return 52},u:function(){return 70},y:function(X,k,G,P){for(var b=0,h=0;h<G;h++){var l=F[k>>2],i=F[k+4>>2];k+=8;for(var e=0;e<i;e++){var s=D[l+e],IA=$P[X];s===0||s===10?((X===1?K:H)(U(IA,0)),IA.length=0):IA.push(s)}b+=i}return F[P>>2]=b,0}};(function(){function X(b){I.asm=b.exports,w=I.asm.E,_(),T=I.asm.J,S.unshift(I.asm.F),a--,I.monitorRunDependencies&&I.monitorRunDependencies(a),a==0&&(AA!==null&&(clearInterval(AA),AA=null),CA&&(b=CA,CA=null,b()))}function k(b){X(b.instance)}function G(b){return kA().then(function(h){return WebAssembly.instantiate(h,P)}).then(function(h){return h}).then(b,function(h){H("failed to asynchronously prepare wasm: "+h),y(h)})}var P={a:VP};if(a++,I.monitorRunDependencies&&I.monitorRunDependencies(a),I.instantiateWasm)try{return I.instantiateWasm(P,X)}catch(b){H("Module.instantiateWasm callback failed with error: "+b),E(b)}return function(){return Z||typeof WebAssembly.instantiateStreaming!="function"||m(t)||typeof fetch!="function"?G(k):fetch(t,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,P).then(k,function(h){return H("wasm streaming compile failed: "+h),H("falling back to ArrayBuffer instantiation"),G(k)})})}().catch(E),{}})(),I.___wasm_call_ctors=function(){return(I.___wasm_call_ctors=I.asm.F).apply(null,arguments)};var Ek=I.___getTypeName=function(){return(Ek=I.___getTypeName=I.asm.G).apply(null,arguments)};I.__embind_initialize_bindings=function(){return(I.__embind_initialize_bindings=I.asm.H).apply(null,arguments)};var Y2=I._malloc=function(){return(Y2=I._malloc=I.asm.I).apply(null,arguments)},CE=I._free=function(){return(CE=I._free=I.asm.K).apply(null,arguments)};I.dynCall_jiji=function(){return(I.dynCall_jiji=I.asm.L).apply(null,arguments)};var Oq;CA=function X(){Oq||Ck(),Oq||(CA=X)};function Ck(){function X(){if(!Oq&&(Oq=!0,I.calledRun=!0,!$)){if(zA(S),B(I),I.onRuntimeInitialized)I.onRuntimeInitialized();if(I.postRun)for(typeof I.postRun=="function"&&(I.postRun=[I.postRun]);I.postRun.length;){var k=I.postRun.shift();g.unshift(k)}zA(g)}}if(!(0<a)){if(I.preRun)for(typeof I.preRun=="function"&&(I.preRun=[I.preRun]);I.preRun.length;)d();zA(f),0<a||(I.setStatus?(I.setStatus("Running..."),setTimeout(function(){setTimeout(function(){I.setStatus("")},1),X()},1)):X())}}if(I.preInit)for(typeof I.preInit=="function"&&(I.preInit=[I.preInit]);0<I.preInit.length;)I.preInit.pop()();return Ck(),Q.ready}})(),wL=yb});var nA,bC,$L,IE,d0,KA,YH,vb,BB,p0,hI,$H,_X,UL,u0,l0,GB,i0,Tb,VL;var vz=Y(()=>{nA=function(A){return A[A.Auto=0]="Auto",A[A.FlexStart=1]="FlexStart",A[A.Center=2]="Center",A[A.FlexEnd=3]="FlexEnd",A[A.Stretch=4]="Stretch",A[A.Baseline=5]="Baseline",A[A.SpaceBetween=6]="SpaceBetween",A[A.SpaceAround=7]="SpaceAround",A[A.SpaceEvenly=8]="SpaceEvenly",A}({}),bC=function(A){return A[A.BorderBox=0]="BorderBox",A[A.ContentBox=1]="ContentBox",A}({}),$L=function(A){return A[A.Width=0]="Width",A[A.Height=1]="Height",A}({}),IE=function(A){return A[A.Inherit=0]="Inherit",A[A.LTR=1]="LTR",A[A.RTL=2]="RTL",A}({}),d0=function(A){return A[A.Flex=0]="Flex",A[A.None=1]="None",A[A.Contents=2]="Contents",A}({}),KA=function(A){return A[A.Left=0]="Left",A[A.Top=1]="Top",A[A.Right=2]="Right",A[A.Bottom=3]="Bottom",A[A.Start=4]="Start",A[A.End=5]="End",A[A.Horizontal=6]="Horizontal",A[A.Vertical=7]="Vertical",A[A.All=8]="All",A}({}),YH=function(A){return A[A.None=0]="None",A[A.StretchFlexBasis=1]="StretchFlexBasis",A[A.AbsolutePositionWithoutInsetsExcludesPadding=2]="AbsolutePositionWithoutInsetsExcludesPadding",A[A.AbsolutePercentAgainstInnerSize=4]="AbsolutePercentAgainstInnerSize",A[A.All=2147483647]="All",A[A.Classic=2147483646]="Classic",A}({}),vb=function(A){return A[A.WebFlexBasis=0]="WebFlexBasis",A}({}),BB=function(A){return A[A.Column=0]="Column",A[A.ColumnReverse=1]="ColumnReverse",A[A.Row=2]="Row",A[A.RowReverse=3]="RowReverse",A}({}),p0=function(A){return A[A.Column=0]="Column",A[A.Row=1]="Row",A[A.All=2]="All",A}({}),hI=function(A){return A[A.FlexStart=0]="FlexStart",A[A.Center=1]="Center",A[A.FlexEnd=2]="FlexEnd",A[A.SpaceBetween=3]="SpaceBetween",A[A.SpaceAround=4]="SpaceAround",A[A.SpaceEvenly=5]="SpaceEvenly",A}({}),$H=function(A){return A[A.Error=0]="Error",A[A.Warn=1]="Warn",A[A.Info=2]="Info",A[A.Debug=3]="Debug",A[A.Verbose=4]="Verbose",A[A.Fatal=5]="Fatal",A}({}),_X=function(A){return A[A.Undefined=0]="Undefined",A[A.Exactly=1]="Exactly",A[A.AtMost=2]="AtMost",A}({}),UL=function(A){return A[A.Default=0]="Default",A[A.Text=1]="Text",A}({}),u0=function(A){return A[A.Visible=0]="Visible",A[A.Hidden=1]="Hidden",A[A.Scroll=2]="Scroll",A}({}),l0=function(A){return A[A.Static=0]="Static",A[A.Relative=1]="Relative",A[A.Absolute=2]="Absolute",A}({}),GB=function(A){return A[A.Undefined=0]="Undefined",A[A.Point=1]="Point",A[A.Percent=2]="Percent",A[A.Auto=3]="Auto",A}({}),i0=function(A){return A[A.NoWrap=0]="NoWrap",A[A.Wrap=1]="Wrap",A[A.WrapReverse=2]="WrapReverse",A}({}),Tb={ALIGN_AUTO:nA.Auto,ALIGN_FLEX_START:nA.FlexStart,ALIGN_CENTER:nA.Center,ALIGN_FLEX_END:nA.FlexEnd,ALIGN_STRETCH:nA.Stretch,ALIGN_BASELINE:nA.Baseline,ALIGN_SPACE_BETWEEN:nA.SpaceBetween,ALIGN_SPACE_AROUND:nA.SpaceAround,ALIGN_SPACE_EVENLY:nA.SpaceEvenly,BOX_SIZING_BORDER_BOX:bC.BorderBox,BOX_SIZING_CONTENT_BOX:bC.ContentBox,DIMENSION_WIDTH:$L.Width,DIMENSION_HEIGHT:$L.Height,DIRECTION_INHERIT:IE.Inherit,DIRECTION_LTR:IE.LTR,DIRECTION_RTL:IE.RTL,DISPLAY_FLEX:d0.Flex,DISPLAY_NONE:d0.None,DISPLAY_CONTENTS:d0.Contents,EDGE_LEFT:KA.Left,EDGE_TOP:KA.Top,EDGE_RIGHT:KA.Right,EDGE_BOTTOM:KA.Bottom,EDGE_START:KA.Start,EDGE_END:KA.End,EDGE_HORIZONTAL:KA.Horizontal,EDGE_VERTICAL:KA.Vertical,EDGE_ALL:KA.All,ERRATA_NONE:YH.None,ERRATA_STRETCH_FLEX_BASIS:YH.StretchFlexBasis,ERRATA_ABSOLUTE_POSITION_WITHOUT_INSETS_EXCLUDES_PADDING:YH.AbsolutePositionWithoutInsetsExcludesPadding,ERRATA_ABSOLUTE_PERCENT_AGAINST_INNER_SIZE:YH.AbsolutePercentAgainstInnerSize,ERRATA_ALL:YH.All,ERRATA_CLASSIC:YH.Classic,EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS:vb.WebFlexBasis,FLEX_DIRECTION_COLUMN:BB.Column,FLEX_DIRECTION_COLUMN_REVERSE:BB.ColumnReverse,FLEX_DIRECTION_ROW:BB.Row,FLEX_DIRECTION_ROW_REVERSE:BB.RowReverse,GUTTER_COLUMN:p0.Column,GUTTER_ROW:p0.Row,GUTTER_ALL:p0.All,JUSTIFY_FLEX_START:hI.FlexStart,JUSTIFY_CENTER:hI.Center,JUSTIFY_FLEX_END:hI.FlexEnd,JUSTIFY_SPACE_BETWEEN:hI.SpaceBetween,JUSTIFY_SPACE_AROUND:hI.SpaceAround,JUSTIFY_SPACE_EVENLY:hI.SpaceEvenly,LOG_LEVEL_ERROR:$H.Error,LOG_LEVEL_WARN:$H.Warn,LOG_LEVEL_INFO:$H.Info,LOG_LEVEL_DEBUG:$H.Debug,LOG_LEVEL_VERBOSE:$H.Verbose,LOG_LEVEL_FATAL:$H.Fatal,MEASURE_MODE_UNDEFINED:_X.Undefined,MEASURE_MODE_EXACTLY:_X.Exactly,MEASURE_MODE_AT_MOST:_X.AtMost,NODE_TYPE_DEFAULT:UL.Default,NODE_TYPE_TEXT:UL.Text,OVERFLOW_VISIBLE:u0.Visible,OVERFLOW_HIDDEN:u0.Hidden,OVERFLOW_SCROLL:u0.Scroll,POSITION_TYPE_STATIC:l0.Static,POSITION_TYPE_RELATIVE:l0.Relative,POSITION_TYPE_ABSOLUTE:l0.Absolute,UNIT_UNDEFINED:GB.Undefined,UNIT_POINT:GB.Point,UNIT_PERCENT:GB.Percent,UNIT_AUTO:GB.Auto,WRAP_NO_WRAP:i0.NoWrap,WRAP_WRAP:i0.Wrap,WRAP_WRAP_REVERSE:i0.WrapReverse},VL=Tb});function SX(A){function Q(E,C,J){let K=E[C];E[C]=function(){for(var H=arguments.length,Z=new Array(H),q=0;q<H;q++)Z[q]=arguments[q];return J.call(this,K,...Z)}}for(let E of["setPosition","setMargin","setFlexBasis","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setPadding","setGap"]){let C={[GB.Point]:A.Node.prototype[E],[GB.Percent]:A.Node.prototype[`${E}Percent`],[GB.Auto]:A.Node.prototype[`${E}Auto`]};Q(A.Node.prototype,E,function(J){for(var K=arguments.length,H=new Array(K>1?K-1:0),Z=1;Z<K;Z++)H[Z-1]=arguments[Z];let q=H.pop(),w,$;if(q==="auto")w=GB.Auto,$=void 0;else if(typeof q==="object")w=q.unit,$=q.valueOf();else if(w=typeof q==="string"&&q.endsWith("%")?GB.Percent:GB.Point,$=parseFloat(q),q!==void 0&&!Number.isNaN(q)&&Number.isNaN($))throw new Error(`Invalid value ${q} for ${E}`);if(!C[w])throw new Error(`Failed to execute "${E}": Unsupported unit '${q}'`);if($!==void 0)return C[w].call(this,...H,$);else return C[w].call(this,...H)})}function I(E){return A.MeasureCallback.implement({measure:function(){let{width:C,height:J}=E(...arguments);return{width:C??NaN,height:J??NaN}}})}Q(A.Node.prototype,"setMeasureFunc",function(E,C){if(C)return E.call(this,I(C));else return this.unsetMeasureFunc()});function B(E){return A.DirtiedCallback.implement({dirtied:E})}return Q(A.Node.prototype,"setDirtiedFunc",function(E,C){E.call(this,B(C))}),Q(A.Config.prototype,"free",function(){A.Config.destroy(this)}),Q(A.Node,"create",(E,C)=>{return C?A.Node.createWithConfig(C):A.Node.createDefault()}),Q(A.Node.prototype,"free",function(){A.Node.destroy(this)}),Q(A.Node.prototype,"freeRecursive",function(){for(let E=0,C=this.getChildCount();E<C;++E)this.getChild(0).freeRecursive();this.free()}),Q(A.Node.prototype,"calculateLayout",function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:IE.LTR;return E.call(this,C,J,K)}),{Config:A.Config,Node:A.Node,...VL}}var NL=Y(()=>{vz();vz()});async function zL(){return SX(await wL())}var qq=Y(()=>{YL();NL();vz()});function TX(A,Q){let I=`getComputed${Q.charAt(0).toUpperCase()+Q.slice(1)}`;return{top:A.yoga[I](KA.Top),right:A.yoga[I](KA.Right),bottom:A.yoga[I](KA.Bottom),left:A.yoga[I](KA.Left)}}function GL(A,Q){let{width:I,height:B}=A.computedLayout,E=TX(A,"margin"),C=TX(A,"border"),J=TX(A,"padding"),K=Q.get("margin");K.outer.x=-E.left,K.outer.y=-E.top,K.outer.width=I+E.left+E.right,K.outer.height=B+E.top+E.bottom,K.inner.x=0,K.inner.y=0,K.inner.width=I,K.inner.height=B;let H=Q.get("border");H.outer.x=0,H.outer.y=0,H.outer.width=I,H.outer.height=B,H.inner.x=C.left,H.inner.y=C.top,H.inner.width=I-C.left-C.right,H.inner.height=B-C.top-C.bottom;let Z=Q.get("padding");Z.outer.copyFrom(H.inner),Z.inner.x=J.left+C.left,Z.inner.y=J.top+C.top,Z.inner.width=I-J.left-J.right-C.left-C.right,Z.inner.height=B-J.top-J.bottom-C.top-C.bottom,xb(A,Q)}function xb(A,Q){var I;let B=Q.get("flex"),E=Q.get("padding");B.outer.copyFrom(E.inner);let C=new RA,J=A.yoga.getChildCount();for(let H=0;H<J;H++){let q=A.yoga.getChild(H).getComputedLayout();C.addRect(new EA(q.left,q.top,q.width,q.height))}let K=A.yoga.getFlexDirection();if(K===BB.Column||K===BB.ColumnReverse)C.width=B.outer.width,C.x=B.outer.x;else C.height=B.outer.height,C.y=B.outer.y;(I=B.inner)==null||I.copyFrom(C.rectangle),Q.get("content").outer.copyFrom(C.rectangle)}var EB;var hX=Y(()=>{iA();qq();EB=((A)=>{return A.Margin="margin",A.Padding="padding",A.Border="border",A.Flex="flex",A.Content="content",A})(EB||{})});function db(A,Q,I){let B=Math.round(A[0]+(Q[0]-A[0])*I),E=Math.round(A[1]+(Q[1]-A[1])*I),C=Math.round(A[2]+(Q[2]-A[2])*I);return`rgb(${B},${E},${C})`}var mb,cb=(A,Q,I)=>(Q in A)?mb(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,jL=(A,Q,I)=>cb(A,typeof Q!=="symbol"?Q+"":Q,I),xX;var LL=Y(()=>{iA();hX();mb=Object.defineProperty;xX=class xX extends QA{constructor(){super();jL(this,"graphics"),jL(this,"heatGraphics"),this.graphics=new Map,Object.values(EB).forEach((A)=>{let Q=new UQ;this.graphics.set(A,Q),this.addChild(Q)}),this.heatGraphics=new UQ,this.addChild(this.heatGraphics)}init(A){let{target:Q,alpha:I,heat:B}=A;if(!A.heatOnly)Object.entries(A).forEach(([J,K])=>{if(J==="target"||J==="alpha"||J==="heat"||J==="heatOnly")return;K=K;let H=this.graphics.get(J);if(!H||!K.draw)return;if(K.inner)this.drawCutBox(H,K.outer,K.inner,K.color,I);else{let{x:Z,y:q,width:w,height:$}=K.outer;H.rect(Z,q,w,Math.max($,1)),H.fill({color:K.color,alpha:I})}});let{invalidationCount:E,draw:C}=B;if(E>0&&C){let K=Math.min(E/20,1),H=A[EB.Margin],w=db([255,255,0],[255,0,0],K);this.heatGraphics.rect(H.outer.x,H.outer.y,H.outer.width,H.outer.height),this.heatGraphics.fill({color:w,alpha:Math.min(0.3,K)}),this.heatGraphics.stroke({color:w,alpha:Math.max(0.3,K),pixelLine:!0})}this.position.set(Q.x,Q.y)}reset(){this.graphics.forEach((A)=>A.clear()),this.heatGraphics.clear(),this.removeFromParent()}drawCutBox(A,Q,I,B,E){let{x:C,y:J,width:K,height:H}=Q,{x:Z,y:q,width:w,height:$}=I;A.rect(C,J,K,H),A.fill({color:B,alpha:E}),A.rect(Z,q,w,$),A.cut()}}});var RL={};jH(RL,{DebugRenderer:()=>mX});class mX{constructor(){cz(this,"holder",new QA),cz(this,"regions",new Map),cz(this,"colors",{[EB.Margin]:"#B68655",[EB.Padding]:"#BAC57F",[EB.Border]:"#E7C583",[EB.Content]:"#89B1BE",[EB.Flex]:"#6E28D9"}),cz(this,"alpha",0.75),Object.values(EB).forEach((A)=>{this.regions.set(A,{outer:new EA,inner:new EA})}),this.holder.__devtoolIgnore=!0,this.holder.__devtoolIgnoreChildren=!0,this.holder.eventMode="none",this.holder.interactiveChildren=!1}reset(){for(let A=this.holder.children.length-1;A>=0;A--){let Q=this.holder.children[A];yA.return(Q)}}render(A){GL(A,this.regions);let Q=Object.values(EB).reduce((J,K)=>{let H=this.regions.get(K);if(!H)return J;let Z=`debugDraw${K.charAt(0).toUpperCase()}${K.slice(1)}`;return J[K]={...H,color:this.colors[K],draw:A._styles.custom[Z]??!0},J},{}),{left:I,top:B}=A.computedLayout,E=A.target.getGlobalPosition(),C=yA.get(xX,{...Q,target:{x:E.x+I,y:E.y+B},alpha:this.alpha,heat:{invalidationCount:A._modificationCount,draw:A._styles.custom.debugHeat!==!1},heatOnly:!A._styles.custom.debug});this.holder.addChildAt(C,0)}destroy(){this.reset(),this.holder.destroy(),this.regions.clear()}}var pb,ub=(A,Q,I)=>(Q in A)?pb(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,cz=(A,Q,I)=>ub(A,typeof Q!=="symbol"?Q+"":Q,I);var cX=Y(()=>{iA();hX();LL();pb=Object.defineProperty});var sX=KQ((lL)=>{Object.defineProperty(lL,"__esModule",{value:!0});lL.loop=lL.conditional=lL.parse=void 0;var Lf=function A(Q,I){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B;if(Array.isArray(I))I.forEach(function(J){return A(Q,J,B,E)});else if(typeof I==="function")I(Q,B,E,A);else{var C=Object.keys(I)[0];if(Array.isArray(I[C]))E[C]={},A(Q,I[C],B,E[C]);else E[C]=I[C](Q,B,E,A)}return B};lL.parse=Lf;var Rf=function A(Q,I){return function(B,E,C,J){if(I(B,E,C))J(B,Q,E,C)}};lL.conditional=Rf;var Pf=function A(Q,I){return function(B,E,C,J){var K=[],H=B.pos;while(I(B,E,C)){var Z={};if(J(B,Q,E,Z),B.pos===H)break;H=B.pos,K.push(Z)}return K}};lL.loop=Pf});var aX=KQ((oL)=>{Object.defineProperty(oL,"__esModule",{value:!0});oL.readBits=oL.readArray=oL.readUnsigned=oL.readString=oL.peekBytes=oL.readBytes=oL.peekByte=oL.readByte=oL.buildStream=void 0;var _f=function A(Q){return{data:Q,pos:0}};oL.buildStream=_f;var nL=function A(){return function(Q){return Q.data[Q.pos++]}};oL.readByte=nL;var Sf=function A(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(I){return I.data[I.pos+Q]}};oL.peekByte=Sf;var az=function A(Q){return function(I){return I.data.subarray(I.pos,I.pos+=Q)}};oL.readBytes=az;var bf=function A(Q){return function(I){return I.data.subarray(I.pos,I.pos+Q)}};oL.peekBytes=bf;var ff=function A(Q){return function(I){return Array.from(az(Q)(I)).map(function(B){return String.fromCharCode(B)}).join("")}};oL.readString=ff;var yf=function A(Q){return function(I){var B=az(2)(I);return Q?(B[1]<<8)+B[0]:(B[0]<<8)+B[1]}};oL.readUnsigned=yf;var vf=function A(Q,I){return function(B,E,C){var J=typeof I==="function"?I(B,E,C):I,K=az(Q),H=new Array(J);for(var Z=0;Z<J;Z++)H[Z]=K(B);return H}};oL.readArray=vf;var Tf=function A(Q,I,B){var E=0;for(var C=0;C<B;C++)E+=Q[I+C]&&Math.pow(2,B-C-1);return E},hf=function A(Q){return function(I){var B=nL()(I),E=new Array(8);for(var C=0;C<8;C++)E[7-C]=!!(B&1<<C);return Object.keys(Q).reduce(function(J,K){var H=Q[K];if(H.length)J[K]=Tf(E,H.index,H.length);else J[K]=E[H.index];return J},{})}};oL.readBits=hf});var tL=KQ((aL)=>{Object.defineProperty(aL,"__esModule",{value:!0});aL.default=void 0;var vC=sX(),MA=aX(),rz={blocks:function A(Q){var I=0,B=[],E=Q.data.length,C=0;for(var J=MA.readByte()(Q);J!==I;J=MA.readByte()(Q)){if(!J)break;if(Q.pos+J>=E){var K=E-Q.pos;B.push(MA.readBytes(K)(Q)),C+=K;break}B.push(MA.readBytes(J)(Q)),C+=J}var H=new Uint8Array(C),Z=0;for(var q=0;q<B.length;q++)H.set(B[q],Z),Z+=B[q].length;return H}},of=vC.conditional({gce:[{codes:MA.readBytes(2)},{byteSize:MA.readByte()},{extras:MA.readBits({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:MA.readUnsigned(!0)},{transparentColorIndex:MA.readByte()},{terminator:MA.readByte()}]},function(A){var Q=MA.peekBytes(2)(A);return Q[0]===33&&Q[1]===249}),sf=vC.conditional({image:[{code:MA.readByte()},{descriptor:[{left:MA.readUnsigned(!0)},{top:MA.readUnsigned(!0)},{width:MA.readUnsigned(!0)},{height:MA.readUnsigned(!0)},{lct:MA.readBits({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},vC.conditional({lct:MA.readArray(3,function(A,Q,I){return Math.pow(2,I.descriptor.lct.size+1)})},function(A,Q,I){return I.descriptor.lct.exists}),{data:[{minCodeSize:MA.readByte()},rz]}]},function(A){return MA.peekByte()(A)===44}),af=vC.conditional({text:[{codes:MA.readBytes(2)},{blockSize:MA.readByte()},{preData:function A(Q,I,B){return MA.readBytes(B.text.blockSize)(Q)}},rz]},function(A){var Q=MA.peekBytes(2)(A);return Q[0]===33&&Q[1]===1}),rf=vC.conditional({application:[{codes:MA.readBytes(2)},{blockSize:MA.readByte()},{id:function A(Q,I,B){return MA.readString(B.blockSize)(Q)}},rz]},function(A){var Q=MA.peekBytes(2)(A);return Q[0]===33&&Q[1]===255}),tf=vC.conditional({comment:[{codes:MA.readBytes(2)},rz]},function(A){var Q=MA.peekBytes(2)(A);return Q[0]===33&&Q[1]===254}),ef=[{header:[{signature:MA.readString(3)},{version:MA.readString(3)}]},{lsd:[{width:MA.readUnsigned(!0)},{height:MA.readUnsigned(!0)},{gct:MA.readBits({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:MA.readByte()},{pixelAspectRatio:MA.readByte()}]},vC.conditional({gct:MA.readArray(3,function(A,Q){return Math.pow(2,Q.lsd.gct.size+1)})},function(A,Q){return Q.lsd.gct.exists}),{frames:vC.loop([of,rf,tf,sf,af],function(A){var Q=MA.peekByte()(A);return Q===33||Q===44})}],Ay=ef;aL.default=Ay});var QR=KQ((eL)=>{Object.defineProperty(eL,"__esModule",{value:!0});eL.deinterlace=void 0;var Qy=function A(Q,I){var B=new Array(Q.length),E=Q.length/I,C=function w($,U){var V=Q.slice(U*I,(U+1)*I);B.splice.apply(B,[$*I,I].concat(V))},J=[0,4,2,1],K=[8,8,4,2],H=0;for(var Z=0;Z<4;Z++)for(var q=J[Z];q<E;q+=K[Z])C(q,H),H++;return B};eL.deinterlace=Qy});var ER=KQ((IR)=>{Object.defineProperty(IR,"__esModule",{value:!0});IR.lzw=void 0;var Iy=function A(Q,I,B){var E=4096,C=-1,J=B,K,H,Z,q,w,$,U,R,V,z,L,D,T,f,g,S,W=new Array(B),j=new Array(E),O=new Array(E),F=new Array(E+1);D=Q,H=1<<D,w=H+1,K=H+2,U=C,q=D+1,Z=(1<<q)-1;for(V=0;V<H;V++)j[V]=0,O[V]=V;var L,R,_,T,f,S,g;L=R=_=T=f=S=g=0;for(z=0;z<J;){if(f===0){if(R<q){L+=I[g]<<R,R+=8,g++;continue}if(V=L&Z,L>>=q,R-=q,V>K||V==w)break;if(V==H){q=D+1,Z=(1<<q)-1,K=H+2,U=C;continue}if(U==C){F[f++]=O[V],U=V,T=V;continue}if($=V,V==K)F[f++]=T,V=U;while(V>H)F[f++]=O[V],V=j[V];if(T=O[V]&255,F[f++]=T,K<E){if(j[K]=U,O[K]=T,K++,(K&Z)===0&&K<E)q++,Z+=K}U=$}f--,W[S++]=F[f],z++}for(z=S;z<J;z++)W[z]=0;return W};IR.lzw=Iy});var HR=KQ((JR)=>{Object.defineProperty(JR,"__esModule",{value:!0});JR.decompressFrames=JR.decompressFrame=JR.parseGIF=void 0;var By=Hy(tL()),Ey=sX(),Cy=aX(),Jy=QR(),Ky=ER();function Hy(A){return A&&A.__esModule?A:{default:A}}var Zy=function A(Q){var I=new Uint8Array(Q);return Ey.parse(Cy.buildStream(I),By.default)};JR.parseGIF=Zy;var qy=function A(Q){var I=Q.pixels.length,B=new Uint8ClampedArray(I*4);for(var E=0;E<I;E++){var C=E*4,J=Q.pixels[E],K=Q.colorTable[J]||[0,0,0];B[C]=K[0],B[C+1]=K[1],B[C+2]=K[2],B[C+3]=J!==Q.transparentIndex?255:0}return B},CR=function A(Q,I,B){if(!Q.image){console.warn("gif frame does not have associated image.");return}var E=Q.image,C=E.descriptor.width*E.descriptor.height,J=Ky.lzw(E.data.minCodeSize,E.data.blocks,C);if(E.descriptor.lct.interlaced)J=Jy.deinterlace(J,E.descriptor.width);var K={pixels:J,dims:{top:Q.image.descriptor.top,left:Q.image.descriptor.left,width:Q.image.descriptor.width,height:Q.image.descriptor.height}};if(E.descriptor.lct&&E.descriptor.lct.exists)K.colorTable=E.lct;else K.colorTable=I;if(Q.gce){if(K.delay=(Q.gce.delay||10)*10,K.disposalType=Q.gce.extras.disposal,Q.gce.extras.transparentColorGiven)K.transparentIndex=Q.gce.transparentColorIndex}if(B)K.patch=qy(K);return K};JR.decompressFrame=CR;var wy=function A(Q,I){return Q.frames.filter(function(B){return B.image}).map(function(B){return CR(B,Q.gct,I)})};JR.decompressFrames=wy});var DH=KQ((wR)=>{Object.defineProperty(wR,"__esModule",{value:!0});wR.Collector=void 0;class qR{constructor(A){this.emit=(...Q)=>{A.emitCollecting(this,Q)}}}wR.Collector=qR});var NR=KQ((UR)=>{Object.defineProperty(UR,"__esModule",{value:!0});UR.CollectorArray=void 0;var Ny=DH();class $R extends Ny.Collector{constructor(){super(...arguments);this.result=[]}handleResult(A){return this.result.push(A),!0}getResult(){return this.result}reset(){this.result.length=0}}UR.CollectorArray=$R});var XR=KQ((DR)=>{Object.defineProperty(DR,"__esModule",{value:!0});DR.CollectorLast=void 0;var zy=DH();class zR extends zy.Collector{handleResult(A){return this.result=A,!0}getResult(){return this.result}reset(){delete this.result}}DR.CollectorLast=zR});var GR=KQ((FR)=>{Object.defineProperty(FR,"__esModule",{value:!0});FR.CollectorUntil0=void 0;var Dy=DH();class kR extends Dy.Collector{constructor(){super(...arguments);this.result=!1}handleResult(A){return this.result=A,this.result}getResult(){return this.result}reset(){this.result=!1}}FR.CollectorUntil0=kR});var PR=KQ((LR)=>{Object.defineProperty(LR,"__esModule",{value:!0});LR.CollectorWhile0=void 0;var Wy=DH();class jR extends Wy.Collector{constructor(){super(...arguments);this.result=!1}handleResult(A){return this.result=A,!this.result}getResult(){return this.result}reset(){this.result=!1}}LR.CollectorWhile0=jR});var SR=KQ((gR)=>{Object.defineProperty(gR,"__esModule",{value:!0});gR.SignalConnectionImpl=void 0;class MR{constructor(A,Q){this.link=A,this.parentCleanup=Q}disconnect(){if(this.link!==null)return this.link.unlink(),this.link=null,this.parentCleanup(),this.parentCleanup=null,!0;return!1}set enabled(A){if(this.link)this.link.setEnabled(A)}get enabled(){return this.link!==null&&this.link.isEnabled()}}gR.SignalConnectionImpl=MR});var yR=KQ((bR)=>{Object.defineProperty(bR,"__esModule",{value:!0});bR.SignalLink=void 0;class tX{constructor(A=null,Q=null,I=0){this.enabled=!0,this.newLink=!1,this.callback=null,this.prev=A!==null&&A!==void 0?A:this,this.next=Q!==null&&Q!==void 0?Q:this,this.order=I}isEnabled(){return this.enabled&&!this.newLink}setEnabled(A){this.enabled=A}unlink(){this.callback=null,this.next.prev=this.prev,this.prev.next=this.next}insert(A,Q){let I=this.prev;while(I!==this){if(I.order<=Q)break;I=I.prev}let B=new tX(I,I.next,Q);return B.callback=A,I.next=B,B.next.prev=B,B}}bR.SignalLink=tX});var xR=KQ((TR)=>{Object.defineProperty(TR,"__esModule",{value:!0});TR.Signal=void 0;var Xy=SR(),ky=yR();class vR{constructor(){this.head=new ky.SignalLink,this.hasNewLinks=!1,this.emitDepth=0,this.connectionsCount=0}getConnectionsCount(){return this.connectionsCount}hasConnections(){return this.connectionsCount>0}connect(A,Q=0){this.connectionsCount++;let I=this.head.insert(A,Q);if(this.emitDepth>0)this.hasNewLinks=!0,I.newLink=!0;return new Xy.SignalConnectionImpl(I,()=>this.decrementConnectionCount())}decrementConnectionCount(){this.connectionsCount--}disconnect(A){for(let Q=this.head.next;Q!==this.head;Q=Q.next)if(Q.callback===A)return this.decrementConnectionCount(),Q.unlink(),!0;return!1}disconnectAll(){while(this.head.next!==this.head)this.head.next.unlink();this.connectionsCount=0}emit(...A){this.emitDepth++;for(let Q=this.head.next;Q!==this.head;Q=Q.next)if(Q.isEnabled()&&Q.callback)Q.callback.apply(null,A);this.emitDepth--,this.unsetNewLink()}emitCollecting(A,Q){this.emitDepth++;for(let I=this.head.next;I!==this.head;I=I.next)if(I.isEnabled()&&I.callback){let B=I.callback.apply(null,Q);if(!A.handleResult(B))break}this.emitDepth--,this.unsetNewLink()}unsetNewLink(){if(this.hasNewLinks&&this.emitDepth===0){for(let A=this.head.next;A!==this.head;A=A.next)A.newLink=!1;this.hasNewLinks=!1}}}TR.Signal=vR});var pR=KQ((cR)=>{Object.defineProperty(cR,"__esModule",{value:!0});cR.SignalConnections=void 0;class mR{constructor(){this.list=[]}add(A){this.list.push(A)}disconnectAll(){for(let A of this.list)A.disconnect();this.list=[]}getCount(){return this.list.length}isEmpty(){return this.list.length===0}}cR.SignalConnections=mR});var uR=KQ((xE)=>{Object.defineProperty(xE,"__esModule",{value:!0});xE.SignalConnections=xE.Signal=xE.CollectorWhile0=xE.CollectorUntil0=xE.CollectorLast=xE.CollectorArray=xE.Collector=void 0;var Fy=DH();Object.defineProperty(xE,"Collector",{enumerable:!0,get:function(){return Fy.Collector}});var Oy=NR();Object.defineProperty(xE,"CollectorArray",{enumerable:!0,get:function(){return Oy.CollectorArray}});var Gy=XR();Object.defineProperty(xE,"CollectorLast",{enumerable:!0,get:function(){return Gy.CollectorLast}});var jy=GR();Object.defineProperty(xE,"CollectorUntil0",{enumerable:!0,get:function(){return jy.CollectorUntil0}});var Ly=PR();Object.defineProperty(xE,"CollectorWhile0",{enumerable:!0,get:function(){return Ly.CollectorWhile0}});var Ry=xR();Object.defineProperty(xE,"Signal",{enumerable:!0,get:function(){return Ry.Signal}});var Py=pR();Object.defineProperty(xE,"SignalConnections",{enumerable:!0,get:function(){return Py.SignalConnections}})});iA();iA();iA();qq();var DL;function wq(){return DL}function bX(A){DL=A}var WL;function fX(A){WL=A}function yX(){return WL}function fC(A,Q){if(!A)return 0;if(typeof A==="number")return A;else if(typeof A==="string"&&A.endsWith("%"))return Q??(Q=1),Q*(parseFloat(A)/100);else if(!Number.isNaN(parseFloat(A)))return parseFloat(A);return 0}function jB(A){if(typeof A==="number")return"number";if(A.endsWith("%"))return"percentage";if(Number.isNaN(parseInt(A,10)))return"keyword";return"number"}function Tz(A,Q,I){return(Q[A]-I[A])/2}function XL(A,Q,I,B,E){let C=Q==="percentage"?B[I]-E[I]:1;return fC(A)*C}function hz(A,Q,I){let[B,E]=A,C=jB(B),J=jB(E),K={x:void 0,y:void 0};switch(B){case"top":K.y=0;break;case"bottom":K.y=Q.height-I.height;break;case"center":if(E==="left"||E==="right")K.y=Tz("height",Q,I);else K.x=Tz("width",Q,I);break;case"left":K.x=0;break;case"right":K.x=Q.width-I.width;break;default:{let H=E==="top"||E==="bottom"||J!=="keyword"?"width":"height",Z=H==="width"?"x":"y";K[Z]=XL(B,C,H,Q,I)}}switch(E){case"top":K.y=0;break;case"bottom":K.y=Q.height-I.height;break;case"center":if(K.y===void 0)K.y=Tz("height",Q,I);else K.x=Tz("width",Q,I);break;case"left":K.x=0;break;case"right":K.x=Q.width-I.width;break;default:{let H=K.y===void 0?"y":"x",Z=H==="y"?"height":"width";K[H]=XL(E,J,Z,Q,I)}}return K}function xz(A,Q,I,B){let E=A==="right"||A==="bottom",C=I==="percentage"?Q*B:Q;return E?-C:C}function kL(A,Q,I){let[B,E,C,J]=A,K=jB(B),H=jB(E),Z=jB(C),q=jB(J);if(H==="keyword"||q==="keyword")throw new Error("Invalid objectPosition value: second and fourth values must be numbers or percentages");if(K!=="keyword"||Z!=="keyword")throw new Error("Invalid objectPosition value: first and third values must be keywords");let w=hz([B,C],Q,I),$={...w},U=fC(E),V=fC(J);if(B==="left"||B==="right")$.x=w.x+xz(B,U,H,I.width);else if(B==="top"||B==="bottom")$.y=w.y+xz(B,U,H,I.height);if(C==="left"||C==="right")$.x=w.x+xz(C,V,q,I.width);else if(C==="top"||C==="bottom")$.y=w.y+xz(C,V,q,I.height);return $}function FL(A,Q,I){let B=A[0],E={x:void 0,y:void 0};switch(B){case"top":E.y=0,E.x=(Q.width-I.width)/2;break;case"bottom":E.y=Q.height-I.height,E.x=(Q.width-I.width)/2;break;case"left":E.x=0,E.y=(Q.height-I.height)/2;break;case"right":E.x=Q.width-I.width,E.y=(Q.height-I.height)/2;break;case"center":E.x=(Q.width-I.width)/2,E.y=(Q.height-I.height)/2;break;default:{let J=jB(B)==="percentage"?Q.width-I.width:1;E.x=fC(B)*J,E.y=(Q.height-I.height)/2}}return E}function UH(A,Q,I){if(!A)return{x:0,y:0};let B=typeof A==="string"?A.split(" "):[A];switch(B.length){case 1:return FL(B,Q,I);case 2:return hz(B,Q,I);case 4:return kL(B,Q,I);default:throw new Error("Invalid objectPosition value: must have 1, 2, or 4 values")}}var vX={width:0,height:0};function Yq(A){let Q=A.target.getLocalBounds(),I=A.target.scale;return vX.width=Math.abs(Q.width*I.x),vX.height=Math.abs(Q.height*I.y),vX}function mz(A,Q,I=0.49){return Math.abs(A-Q)<I}function hb(A,Q=0,I={}){let B,E,C=I.maxWait?I.maxWait:Q,J,K,H,Z=0,q=!!I.leading,w="maxWait"in I,$=I.trailing??!0,U=Q!==0&&typeof globalThis.requestAnimationFrame==="function";if(typeof A!=="function")throw new TypeError("Expected a function");function V(S){let g=B,d=E;return B=E=void 0,Z=S,J=A.apply(d,g),J}function z(S,g){if(U){if(typeof K==="number")globalThis.cancelAnimationFrame(K);return globalThis.requestAnimationFrame(S)}return setTimeout(S,g)}function D(S){if(U){globalThis.cancelAnimationFrame(S);return}clearTimeout(S)}function W(S){return Z=S,K=z(F,Q),q?V(S):J}function j(S){let g=S-(H||0),d=S-Z,a=Q-g;return w?Math.min(a,C-d):a}function O(S){let g=S-(H||0),d=S-Z;return H===void 0||g>=Q||g<0||w&&d>=C}function F(){let S=Date.now();if(O(S))return L(S);K=z(F,j(S));return}function L(S){if(K=void 0,$&&B)return V(S);return B=E=void 0,J}function R(){if(K!==void 0)D(K);Z=0,B=H=E=K=void 0}function _(){return K===void 0?J:L(Date.now())}function T(){return K!==void 0}function f(...S){let g=Date.now(),d=O(g);if(B=S,E=this,H=g,d){if(K===void 0)return W(H);if(w)return K=z(F,Q),V(H)}if(K===void 0)K=z(F,Q);return J}return f.cancel=R,f.flush=_,f.pending=T,f}function OL(A,Q,I={}){let B=I.leading??!0,E=I.trailing??!0;if(typeof A!=="function")throw new TypeError("Expected a function");return hb(A,Q,{leading:B,trailing:E,maxWait:Q})}var lb=Object.defineProperty,ib=(A,Q,I)=>(Q in A)?lb(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,n0=(A,Q,I)=>ib(A,typeof Q!=="symbol"?Q+"":Q,I);class dz{constructor(){n0(this,"autoUpdate",!0),n0(this,"_debugEnabled",!1),n0(this,"_debugRenderer",null),n0(this,"_throttledUpdateSize"),n0(this,"_throttle",100),n0(this,"_modificationCount",50)}async init(A){bX(await zL()),fX(wq().Config.create());let{layout:Q}=A??{},{autoUpdate:I,enableDebug:B,throttle:E,debugModificationCount:C}=Q??{};if(B)this.enableDebug(!0);if(I!==void 0)this.autoUpdate=I;this._throttle=E??this._throttle,this._throttledUpdateSize=OL((J)=>this._updateSize(J),this._throttle,{leading:!0,trailing:!0}),this._modificationCount=C??this._modificationCount}async enableDebug(A=!this._debugEnabled){if(this._debugEnabled=A,!this._debugRenderer){let Q=await Promise.resolve().then(() => (cX(),RL));this._debugRenderer=new Q.DebugRenderer}if(!this._debugEnabled)this._debugRenderer.reset()}update(A){if(this._debugEnabled&&this._debugRenderer)this._debugRenderer.reset(),A.addChild(this._debugRenderer.holder);this._throttle===0?this._updateSize(A):this._throttledUpdateSize(A),this.updateLayout(A)}prerender({container:A}){if(this.autoUpdate)this.update(A)}_updateSize(A){if(A.destroyed)return;let Q=A._layout;if(Q){let I=Q.style;if(I.width==="intrinsic"||I.height==="intrinsic"){let B=Yq(Q);if(I.width==="intrinsic"){let E=Q.yoga.getWidth().value;if(!mz(E,B.width))Q.yoga.setWidth(B.width),Q.invalidateRoot()}if(I.height==="intrinsic"){let E=Q.yoga.getHeight().value;if(!mz(E,B.height))Q.yoga.setHeight(B.height),Q.invalidateRoot()}}if(!A.visible){Q._onChildRemoved();return}}for(let I=0;I<A.children.length;I++)this._updateSize(A.children[I])}updateLayout(A){var Q,I,B,E;let C=A._layout;if(!A.visible)return;if(C){let{yoga:J,style:K}=C,H=(Q=A.parent)==null?void 0:Q.isOverflowContainer;if(!((I=A.parent)==null?void 0:I._layout)&&!H){if(C._isDirty)C._isDirty=!1,J.calculateLayout(K.width,K.height,J.getDirection()??IE.LTR)}if(J.hasNewLayout()||C._forceUpdate){J.markLayoutSeen(),C._forceUpdate=!1,C._computedLayout=J.getComputedLayout();let q=UH(K.transformOrigin,C._computedLayout,{width:0,height:0});C._computedPixiLayout={...A.computeLayoutData(C._computedLayout),originX:q.x,originY:q.y},A.emit("layout",C),(B=A.onLayout)==null||B.call(A,C),A._onUpdate()}if(this._debugEnabled){if(C._styles.custom.debug||C._modificationCount>this._modificationCount&&C._styles.custom.debugHeat!==!1)(E=this._debugRenderer)==null||E.render(C)}}for(let J=0;J<A.children.length;J++)this.updateLayout(A.children[J])}destroy(){if(!this._debugEnabled&&this._debugRenderer)this._debugRenderer.destroy()}}n0(dz,"extension",{type:[N.WebGLSystem,N.WebGPUSystem],name:"layout"});iA();qq();var PL={"flex-start":nA.FlexStart,"flex-end":nA.FlexEnd,center:nA.Center,stretch:nA.Stretch,"space-between":nA.SpaceBetween,"space-around":nA.SpaceAround,"space-evenly":nA.SpaceEvenly},ML={"flex-start":nA.FlexStart,"flex-end":nA.FlexEnd,center:nA.Center,stretch:nA.Stretch,baseline:nA.Baseline},gL={auto:nA.Auto,"flex-start":nA.FlexStart,"flex-end":nA.FlexEnd,center:nA.Center,stretch:nA.Stretch,baseline:nA.Baseline},_L={"border-box":bC.BorderBox,"content-box":bC.ContentBox},SL={ltr:IE.LTR,rtl:IE.RTL},bL={none:d0.None,flex:d0.Flex,contents:d0.Contents},fL={row:BB.Row,column:BB.Column,"row-reverse":BB.RowReverse,"column-reverse":BB.ColumnReverse},yL={wrap:i0.Wrap,nowrap:i0.NoWrap,"wrap-reverse":i0.WrapReverse},vL={"flex-start":hI.FlexStart,"flex-end":hI.FlexEnd,center:hI.Center,"space-between":hI.SpaceBetween,"space-around":hI.SpaceAround,"space-evenly":hI.SpaceEvenly},TL={visible:u0.Visible,hidden:u0.Hidden,scroll:u0.Scroll},hL={absolute:l0.Absolute,relative:l0.Relative,static:l0.Static},nb={alignContent:(A,Q)=>A.setAlignContent(ob(Q)),alignItems:(A,Q)=>A.setAlignItems(sb(Q)),alignSelf:(A,Q)=>A.setAlignSelf(ab(Q)),aspectRatio:(A,Q)=>A.setAspectRatio(Q),borderBottomWidth:(A,Q)=>A.setBorder(KA.Bottom,Q),borderEndWidth:(A,Q)=>A.setBorder(KA.End,Q),borderLeftWidth:(A,Q)=>A.setBorder(KA.Left,Q),borderRightWidth:(A,Q)=>A.setBorder(KA.Right,Q),borderStartWidth:(A,Q)=>A.setBorder(KA.Start,Q),borderTopWidth:(A,Q)=>A.setBorder(KA.Top,Q),borderWidth:(A,Q)=>A.setBorder(KA.All,Q),borderInlineWidth:(A,Q)=>A.setBorder(KA.Horizontal,Q),borderBlockWidth:(A,Q)=>A.setBorder(KA.Vertical,Q),bottom:(A,Q)=>A.setPosition(KA.Bottom,Q),boxSizing:(A,Q)=>A.setBoxSizing(rb(Q)),direction:(A,Q)=>A.setDirection(tb(Q)),display:(A,Q)=>A.setDisplay(eb(Q)),end:(A,Q)=>A.setPosition(KA.End,Q),flex:(A,Q)=>A.setFlex(Q),flexBasis:(A,Q)=>A.setFlexBasis(Q),flexDirection:(A,Q)=>A.setFlexDirection(Af(Q)),rowGap:(A,Q)=>A.setGap(p0.Row,Q),gap:(A,Q)=>A.setGap(p0.All,Q),columnGap:(A,Q)=>A.setGap(p0.Column,Q),flexGrow:(A,Q)=>A.setFlexGrow(Q),flexShrink:(A,Q)=>A.setFlexShrink(Q),flexWrap:(A,Q)=>A.setFlexWrap(Qf(Q)),height:(A,Q)=>A.setHeight(Q),justifyContent:(A,Q)=>A.setJustifyContent(If(Q)),left:(A,Q)=>A.setPosition(KA.Left,Q),margin:(A,Q)=>A.setMargin(KA.All,Q),marginBottom:(A,Q)=>A.setMargin(KA.Bottom,Q),marginEnd:(A,Q)=>A.setMargin(KA.End,Q),marginLeft:(A,Q)=>A.setMargin(KA.Left,Q),marginRight:(A,Q)=>A.setMargin(KA.Right,Q),marginStart:(A,Q)=>A.setMargin(KA.Start,Q),marginTop:(A,Q)=>A.setMargin(KA.Top,Q),marginInline:(A,Q)=>A.setMargin(KA.Horizontal,Q),marginBlock:(A,Q)=>A.setMargin(KA.Vertical,Q),maxHeight:(A,Q)=>A.setMaxHeight(Q),maxWidth:(A,Q)=>A.setMaxWidth(Q),minHeight:(A,Q)=>A.setMinHeight(Q),minWidth:(A,Q)=>A.setMinWidth(Q),overflow:(A,Q)=>A.setOverflow(Bf(Q)),padding:(A,Q)=>A.setPadding(KA.All,Q),paddingBottom:(A,Q)=>A.setPadding(KA.Bottom,Q),paddingEnd:(A,Q)=>A.setPadding(KA.End,Q),paddingLeft:(A,Q)=>A.setPadding(KA.Left,Q),paddingRight:(A,Q)=>A.setPadding(KA.Right,Q),paddingStart:(A,Q)=>A.setPadding(KA.Start,Q),paddingTop:(A,Q)=>A.setPadding(KA.Top,Q),paddingInline:(A,Q)=>A.setPadding(KA.Horizontal,Q),paddingBlock:(A,Q)=>A.setPadding(KA.Vertical,Q),position:(A,Q)=>A.setPositionType(Ef(Q)),right:(A,Q)=>A.setPosition(KA.Right,Q),start:(A,Q)=>A.setPosition(KA.Start,Q),top:(A,Q)=>A.setPosition(KA.Top,Q),insetInline:(A,Q)=>A.setPosition(KA.Horizontal,Q),insetBlock:(A,Q)=>A.setPosition(KA.Vertical,Q),inset:(A,Q)=>A.setPosition(KA.All,Q),width:(A,Q)=>A.setWidth(Q)};function ob(A){if(A in PL)return PL[A];throw new Error(`"${A}" is not a valid value for alignContent`)}function sb(A){if(A in ML)return ML[A];throw new Error(`"${A}" is not a valid value for alignItems`)}function ab(A){if(A in gL)return gL[A];throw new Error(`"${A}" is not a valid value for alignSelf`)}function rb(A){if(A in _L)return _L[A];throw new Error(`"${A}" is not a valid value for boxSizing`)}function tb(A){if(A in SL)return SL[A];throw new Error(`"${A}" is not a valid value for direction`)}function eb(A){if(A in bL)return bL[A];throw new Error(`"${A}" is not a valid value for display`)}function Af(A){if(A in fL)return fL[A];throw new Error(`"${A}" is not a valid value for flexDirection`)}function Qf(A){if(A in yL)return yL[A];throw new Error(`"${A}" is not a valid value for flexWrap`)}function If(A){if(A in vL)return vL[A];throw new Error(`"${A}" is not a valid value for justifyContent`)}function Bf(A){if(A in TL)return TL[A];throw new Error(`"${A}" is not a valid value for overflow`)}function Ef(A){if(A in hL)return hL[A];throw new Error(`"${A}" is not a valid value for position`)}function dX(A,Q={}){for(let[I,B]of Object.entries(Q))try{let E=nb[I];if(E)E(A,B)}catch(E){}if(Q.width!==void 0){let I=Q.left!==void 0&&Q.right!==void 0?"auto":Q.width;A.setWidth(I)}if(Q.height!==void 0){let I=Q.top!==void 0&&Q.bottom!==void 0?"auto":Q.height;A.setHeight(I)}}iA();function pX(A,Q){let B={...A._styles.custom,...Q};B={...{...MI.defaultStyle.shared,...A.target instanceof wQ||B.isLeaf||MI.defaultStyle.shared.isLeaf?MI.defaultStyle.leaf:MI.defaultStyle.container},...B};let C={...B},J=B.width==="intrinsic",K=B.height==="intrinsic";if(J||K){let{width:H,height:Z}=Yq(A);if(J)C.width=H;if(K)C.height=Z}return{custom:B,yoga:C}}function uX(A,Q){var I;let B=Q.layout,E;if(!B&&Q.isOverflowContainer)E=Q,B=(I=E.parent)==null?void 0:I.layout,Q=E.parent;if(!B)return!1;let C=A.yoga.getParent();if(C)C.removeChild(A.yoga);let J=Cf(A,Q,E);if(J===-1)return!1;if(J===B.yoga.getChildCount())return B.yoga.insertChild(A.yoga,J),!0;return B.yoga.insertChild(A.yoga,J),!0}function Cf(A,Q,I){let B=A.target,E=0;if(I){for(let C of Q.children){if(C===I){for(let J of I.children){if(!J.layout||!J.visible)continue;if(J===B)return E;E++}return-1}if(C.layout&&C.visible)E++}return-1}for(let C of Q.children){if(!C.layout||!C.visible)continue;if(C===B)return E;E++}return-1}function lX(A){let Q=A.yoga.getParent();if(Q)Q.removeChild(A.yoga)}var Jf=Object.defineProperty,Kf=(A,Q,I)=>(Q in A)?Jf(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,CB=(A,Q,I)=>Kf(A,typeof Q!=="symbol"?Q+"":Q,I);class MI{constructor({target:A}){CB(this,"yoga"),CB(this,"target"),CB(this,"destroyed",!1),CB(this,"_isDirty",!1),CB(this,"_computedPixiLayout",{x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,originX:0,originY:0}),CB(this,"_computedLayout",{left:0,right:0,top:0,bottom:0,width:0,height:0}),CB(this,"_styles",{custom:{},yoga:{}}),CB(this,"_modificationCount",0),CB(this,"_forceUpdate",!1),CB(this,"hasParent",!1),CB(this,"_trackedStyleKeys",["borderRadius","borderColor","backgroundColor","objectFit","objectPosition","transformOrigin","isLeaf"]),this.target=A,this.yoga=wq().Node.create(yX()),A.on("added",this._onChildAdded,this),A.on("removed",this._onChildRemoved,this),A.on("destroyed",this.destroy,this)}get style(){return this._styles.custom}get computedLayout(){return this._computedLayout}get computedPixiLayout(){return this._computedPixiLayout}get realX(){return this.target.localTransform.tx}get realY(){return this.target.localTransform.ty}get realScaleX(){return this.target.localTransform.a}get realScaleY(){return this.target.localTransform.d}setStyle(A){let Q=pX(this,A),I=JSON.stringify(this._styles.custom)!==JSON.stringify(Q.custom),B=JSON.stringify(this._styles.yoga)!==JSON.stringify(Q.yoga),E=I||B,C=this._trackedStyleKeys.some((J)=>Q.custom[J]!==this._styles.custom[J]);if(this._styles=Q,C)this._forceUpdate=!0;if(E)dX(this.yoga,this._styles.yoga),this.target._onUpdate(),this.invalidateRoot()}invalidateRoot(A){let Q=this.getRoot(A);if(Q.destroyed)return;Q._layout._isDirty=!0,Q._onUpdate(),this._modificationCount++}forceUpdate(){this._forceUpdate=!0}getRoot(A){var Q,I;let B=A||this.target;while(((Q=B.parent)==null?void 0:Q._layout)||((I=B.parent)==null?void 0:I.isOverflowContainer))if(B=B.parent,B.isOverflowContainer)B=B.parent;return B}_onChildAdded(A){if(this.hasParent)return;if(uX(this,A)===!1)return;this.hasParent=!0,this.invalidateRoot()}_onChildRemoved(A){if(!this.hasParent)return;this.hasParent=!1,this.invalidateRoot(A),lX(this)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.invalidateRoot(),this.yoga.free(),this.target.off("added",this._onChildAdded,this),this.target.off("removed",this._onChildRemoved,this),this._styles=null,this._computedPixiLayout=null,this._computedLayout=null,this.target=null,this.hasParent=!1}}CB(MI,"defaultStyle",{leaf:{width:"intrinsic",height:"intrinsic"},container:{width:"auto",height:"auto"},shared:{transformOrigin:"50%",objectPosition:"center",flexShrink:1,flexDirection:"row",alignContent:"stretch",flexWrap:"nowrap",overflow:"visible"}});iA();function pz(A,Q,I){let B=1,E=1;switch(A){case"fill":B=Q.width/I.width,E=Q.height/I.height;break;case"contain":{let C=Math.min(Q.width/I.width,Q.height/I.height);B=C,E=C;break}case"cover":{let C=Math.max(Q.width/I.width,Q.height/I.height);B=C,E=C;break}case"none":B=1,E=1;break;case"scale-down":{let C=Math.min(1,Q.width/I.width,Q.height/I.height);B=C,E=C;break}}return{offsetScaleX:B,offsetScaleY:E}}function uz(A,Q,I,B){let E=A.getLocalBounds(),C=A.layout.style.objectFit||I,{offsetScaleX:J,offsetScaleY:K}=pz(C,Q,E),H={width:E.width*J,height:E.height*K},{x:Z,y:q}=UH(A.layout.style.objectPosition,Q,H);if(B)Z+=E.width*J*B._x,q+=E.height*K*B._y;else Z-=E.minX*J,q-=E.minY*K;let w=A.layout.style.applySizeDirectly;if(w===!0||w==null&&(A instanceof f0||A instanceof Hq))A.width=E.width*J,A.height=E.height*K,J=1,K=1;return{x:Q.left,y:Q.top,offsetX:Z,offsetY:q,scaleX:J,scaleY:K}}var iX=Object.getOwnPropertyDescriptor(QA.prototype,"visible"),Hf={_layout:null,get layout(){return this._layout??null},set layout(A){if(A=A===!0?{}:A,!A){if(this._layout)this._layout.destroy(),this._layout=null,this.updateLocalTransform=QA.prototype.updateLocalTransform,Object.defineProperty(QA.prototype,"visible",iX);return}if(!this._layout){this._layout=new MI({target:this}),Object.defineProperty(QA.prototype,"visible",{...iX,set(Q){if(iX.set.call(this,Q),this.layout)if(Q&&this.parent)this.layout._onChildAdded(this.parent);else this.layout._onChildRemoved()}});for(let Q of this.children)if(Q.layout&&Q.visible)Q.layout._onChildRemoved(),Q.layout._onChildAdded(this);if(this.parent&&this.visible)this._layout._onChildAdded(this.parent)}this._layout.setStyle(A),this.updateLocalTransform=this.updateLocalTransformWithLayout,this._onUpdate()},updateLocalTransformWithLayout(){let A=this._didContainerChangeTick;if(this._didLocalTransformChangeId===A)return;this._didLocalTransformChangeId=A;let Q=this._layout,{x:I,y:B,offsetX:E,offsetY:C,scaleX:J,scaleY:K,originX:H,originY:Z}=Q._computedPixiLayout,q=this.localTransform,{rotation:w,skew:$,scale:U,position:V}=this,z=w+$._y,D=w-$._x,W=Math.cos(z)*U._x,j=Math.sin(z)*U._x,O=-Math.sin(D)*U._y,F=Math.cos(D)*U._y,L=V._x+I-H*W-Z*O,R=V._y+B-H*j-Z*F;q.a=W*J,q.b=j*J,q.c=O*K,q.d=F*K,q.tx=L+(E*W+C*O)+H,q.ty=R+(E*j+C*F)+Z},computeLayoutData(A){let Q=this._layout,{isLeaf:I}=Q._styles.custom;if(I)return uz(this,A,"fill");return{x:A.left,y:A.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}};p.mixin(QA,Hf);iA();var xL=new UA(0,0),Zf={computeLayoutData(A){let Q=this._style;if(xL.copyFrom(this.scale),this.scale=1,Q.wordWrap)Q.wordWrapWidth=A.width;let I=this.getLocalBounds(),B=this.layout.style.objectFit||"scale-down",{offsetScaleX:E,offsetScaleY:C}=pz(B,A,I);if(Q.wordWrap)Q.wordWrapWidth=A.width/Math.min(1,Math.max(E,C));I=this.getLocalBounds();let J={width:I.width*E,height:I.height*C},{x:K,y:H}=UH(this.layout.style.objectPosition,A,J);if(K+=I.width*E*this.anchor._x,H+=I.height*C*this.anchor._y,this.layout.style.applySizeDirectly===!0)this.width=I.width*E,this.height=I.height*C;return this.scale.copyFrom(xL),{x:A.left,y:A.top,offsetX:K,offsetY:H,scaleX:E,scaleY:C}}};p.mixin(vI,Zf);var nX=Object.getOwnPropertyDescriptor(vI.prototype,"text");Object.defineProperty(vI.prototype,"text",{...nX,set(A){var Q;let I=nX.get.call(this);if(nX.set.call(this,A),I===A)return;(Q=this.layout)==null||Q.forceUpdate()}});iA();var qf={computeLayoutData(A){return uz(this,A,"fill",this._anchor)}};p.mixin(wQ,qf);cX();p.add(dz);iA();iA();iA();iA();var pQ={target:void 0,offset:{x:0,y:0},start:{x:0,y:0}};window.addEventListener("mousemove",(A)=>{if(pQ.target)pQ.target.x=A.x-pQ.offset.x,pQ.target.y=A.y-pQ.offset.y});window.addEventListener("mouseup",(A)=>{if(!pQ.target)return;let I=new aC(VH.stage).hitTest(A.x,A.y);if(!Yf(I)||!I.onDrop(pQ.target))pQ.target.x=pQ.start.x,pQ.target.y=pQ.start.y;pQ.target.eventMode="static",pQ.target=void 0});function wf(A,Q){if(!Q.draggable)return;pQ.target=Q,pQ.offset.x=A.global.x-Q.x,pQ.offset.y=A.global.y-Q.y,pQ.start.x=Q.x,pQ.start.y=Q.y,Q.parent.setChildIndex(Q,Q.parent.children.length-1),Q.eventMode="none"}class lz extends QA{draggable=!0;dragging=!1;cursor="pointer";eventMode="static";constructor(){super();this.on("mousedown",(A)=>wf(A,this))}}function Yf(A){if(!A)return!1;return"onDrop"in A}var o0=200,NH=300;class iz extends lz{graphic=new UQ;parent=null;info;constructor(A){super();this.info=A,this.draw(),this.addChild(this.graphic),this.on("mouseover",this.startHover.bind(this)),this.on("mouseleave",this.stopHover.bind(this))}getHappiness(){if(this.info?.passive)return this.info.passive.func();return 0}draw(){this.graphic.filletRect(0,0,o0,NH,10),this.graphic.fill("teal"),this.graphic.stroke("black"),this.graphic.addChild(new PI({text:this.info?.name,x:10,y:10,style:{fontSize:20,wordWrap:!0,wordWrapWidth:o0-20}})),this.graphic.addChild(new PI({text:this.getDesc(),x:10,y:NH-20,anchor:{x:0,y:1},style:{fontSize:20,wordWrap:!0,wordWrapWidth:o0-20}}))}getDesc(){let A="";if(this.info?.active)A+=`

Ability: `+this.info.active.desc;if(this.info?.passive)A+=`

Passive: `+this.info.passive.desc;return A}startHover(){this.graphic.y=-10}stopHover(){this.graphic.y=0}onDrop(A){return!1}}class LB extends iz{draggable=!1;cursor="default";constructor(){super()}draw(){this.graphic.filletRect(0,0,o0,NH,10),this.graphic.stroke({color:"white",alpha:0}),this.graphic.fill({color:"white",alpha:0})}onDrop(A){let Q=A.parent.cards.indexOf(this),I=A.parent.cards.indexOf(A);return A.parent.cards[Q]=A,A.parent.cards[I]=this,A.parent.setup(),!0}startHover(){}stopHover(){}}var mL=`joy, name                         , effect              , tags           , in
  1, Beth; the Cute Girl Next Door, draw 2              , person         ,  1
  5, Chad the Dad                 , money 100           , person liny bar, 
  1, Diel                         , draw 3              , person vole    ,   
  1, Esti                         , ____                , person         ,   
  1, Finn                         , ____                , person         ,   
  7, Gwen                         , "lot's of happiness", person liny    ,   
  1, Hugo                         , ____                , person         ,   
  1, Ivan; the kindly stranger    , pick place          , person         ,  1
  1, Jake                         , ____                , person         ,   
  1, Kazi                         , ____                , person vole    ,   
  1, Cousin Liny                  , gain liny           , person         ,  1
  1, Mose                         , ____                , person         ,   
  1, Norm                         , ____                , person bar     ,   
  1, Owen                         , pick posession      , person liny    ,   
  1, Pete                         , ____                , person         ,   
  1, Quin                         , ____                , person         ,   
  1, Ryan                         , joy place           , person         ,   
  1, Scut                         , "eat my shorts"     , person         ,   
  1, Trea Torvalds                , gain posession      , person         ,   
  1, Ursa                         , pick person         , person liny    ,   
  1, Vera                         , ____                , person         ,   
  1, Wren                         , ____                , person         ,   
  1, Xena                         , ____                , person         ,   
  1, Yzma                         , ____                , person         ,   
  1, Zara                         , ____                , person         ,   

  1, The Bar                      , gain bar            , place          ,  1
  1, The Mall                     , ____                , place          ,  1
  1, The sidewalk                 , gain place          , place          ,  1
  1, Police Station               , pick posession      , place          ,   
  1, Metro Stop                   , pick place          , place          ,   
  1, Phone booth                  , pick person         , place          ,   
  1, The Secret Spot              , joy person          , place          ,   
  1, Public library               , draw 2              , place          ,   
  1, Food not Bombs               , ____                , place          ,   
  1, Cloths go Around             , ____                , place          ,   
  1, Hospital                     , ____                , place          ,   
  1, The Office                   , money 1000          , place          ,   
  7, Arcade                       , "lot's of happiness", place          ,   
  1, Community Mercantile         , "Sell item"         , place          ,   
  1, Your apartment               , joy posession       , place          ,  1
  1, The Bank                     , ____                , place          ,   

  1, iPhone 14                    , pick person         , posession      ,  1
  1, City map                     , pick place          , posession      ,   
  1, AirTag                       , pick posession      , posession      ,   
  1, 2016 Honda Civic             , redraw              , posession      ,  1
  7, Stuffed Animal               , "lot's of happiness", posession      ,  1
  1, Mushroom Guide               , joy place           , posession      ,   
  1, A nice japanese knife        , ____                , posession      ,   
  1, 9 Gold Doubloons             , gain 10000          , posession      ,   `;class cL{name;active;passive;default;constructor(A,Q,I,B=!1){this.name=A,this.active=Q,this.passive=I,this.default=B}joyGain(){return this.passive?.func()??0}}function Uf(){return mL.split(`
`).slice(1).filter((A)=>A.trim().length>0).map((A)=>A.split(",").map((Q)=>Q.trim())).map(([A,Q,I,B,E])=>new cL(Q,{desc:I},{desc:`+ ${A} joy`,func:()=>Number(A)},E==="1"))}var dL=Uf();function $q(A){for(let Q=A.length-1;Q>0;Q--){let I=Math.floor(Math.random()*(Q+1));[A[Q],A[I]]=[A[I],A[Q]]}return A}class pL{deck=$q(dL.filter((A)=>A.default));hand=[];used=[];turn=0;life=0;$$$$=1500;bill=[{name:"Rent",amount:700},{name:"Groceries",amount:150},{name:"Dentist appointment",amount:210}];constructor(){this.draw(7)}get expenses(){return this.bill.reduce((A,Q)=>A+Q.amount,0)}get cardCount(){return this.deck.length+this.hand.length+this.used.length}draw(A){for(let Q=0;Q<A;Q++){let I=this.deck.pop();if(I)this.hand.push(I)}}getJoyGain(){let A=0;for(let Q of this.hand)A+=Q.joyGain();return A}nextTurn(){this.life+=this.getJoyGain(),this.$$$$-=this.expenses,this.turn++,this.deck=$q([...this.deck,...this.hand,...this.used]),this.hand=[],this.used=[],this.draw(7),uL.forEach((A)=>A())}}var MQ=new pL,uL=[];function vE(A,Q){return uL.push(()=>Q(A)),A}class oX extends QA{cards=[];gap=20;jiggle=10;constructor(){super();this.layout={width:2+this.gap*3+o0*4,height:this.gap+NH*2},this.cards=[new LB,new LB,new LB,new LB,new LB,new LB,new LB,new LB],this.addChild(...this.cards),vE(void 0,this.update.bind(this)),this.update()}update(){for(let A of this.cards)if(!MQ.hand.find((Q)=>Q==A.info)){let Q=new LB;this.replaceChild(A,Q),A.destroy(),this.cards[this.cards.indexOf(A)]=Q}for(let A of MQ.hand)if(!this.cards.find((Q)=>Q.info===A)){let Q=new iz(A),I=this.findEmptySlot();this.cards[this.cards.indexOf(I)]=Q,this.replaceChild(I,Q)}this.setup()}findEmptySlot(){for(let A of this.cards)if(!A.info)return A;throw new Error("No more empty slots!")}getHappiness(){let A=0;for(let Q of this.cards)A+=Q.getHappiness();return A}setup(){let A=o0+this.gap,Q=NH+this.gap;for(let[I,B]of this.cards.entries())B.x=I%4*A,B.y=Math.floor(I/4)*Q}}iA();qq();iA();var Vf=Object.defineProperty,Nf=(A,Q,I)=>(Q in A)?Vf(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,Uq=(A,Q,I)=>Nf(A,typeof Q!=="symbol"?Q+"":Q,I);class nz{constructor(A={}){Uq(this,"x"),Uq(this,"ax"),Uq(this,"dx"),Uq(this,"tx"),Uq(this,"_options"),this.x=0,this.ax=0,this.dx=0,this.tx=0,this._options=A,this._options.max=A.max??160,this._options.damp=A.damp??0.8,this._options.springiness=A.springiness??0.1}update(){if(this.ax=(this.tx-this.x)*this._options.springiness,this.dx+=this.ax,this.dx*=this._options.damp,this.dx<-this._options.max)this.dx=-this._options.max;else if(this.dx>this._options.max)this.dx=this._options.max;this.x+=this.dx}}var zf=Object.defineProperty,Df=(A,Q,I)=>(Q in A)?zf(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,zH=(A,Q,I)=>Df(A,typeof Q!=="symbol"?Q+"":Q,I);class oz{constructor(A={}){zH(this,"done"),zH(this,"to"),zH(this,"_spring"),zH(this,"_pos"),zH(this,"_speed"),zH(this,"_correctSpeed"),this._spring=new nz(A),this._pos=0,this.to=0}start(A,Q,I){this._speed=A,this._pos=Q,this.to=I,this.done=!1,this._spring.x=this._pos,this._spring.tx=this.to;let B=this.to-this._pos,E=Math.abs(B)/B,C=Math.abs(this._speed)/this._speed;if(E!==C)this._correctSpeed=!0;else this._correctSpeed=!1}update(){if(this._correctSpeed){if(this._speed*=0.6,Math.abs(this._speed)<2)this._correctSpeed=!1;this._pos+=this._speed,this._spring.x=this._pos}else{let A=this.to-this._pos;if(Math.abs(A)<0.05)this._pos=this.to,this.done=!0;else this._spring.tx=this.to,this._spring.update(),this._pos=this._spring.x}return this._pos}}var Wf=Object.defineProperty,Xf=(A,Q,I)=>(Q in A)?Wf(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,zI=(A,Q,I)=>Xf(A,typeof Q!=="symbol"?Q+"":Q,I);class Vq{constructor(A={}){zI(this,"position",0),zI(this,"maxSpeed"),zI(this,"constrainPercent"),zI(this,"constrain"),zI(this,"min",0),zI(this,"max",0),zI(this,"_ease"),zI(this,"_offset",0),zI(this,"_prev",0),zI(this,"_speed",0),zI(this,"_hasStopped",!0),zI(this,"_targetSpeed",0),zI(this,"_speedChecker",0),zI(this,"_grab",0),zI(this,"_activeEase",null),this.constrain=A.constrain??!0,this.maxSpeed=A.maxSpeed??400,this._ease=A.ease??new oz,this.constrainPercent=A.constrainPercent??0}set value(A){this._speed=0,this.position=A}get value(){return this.position}grab(A){this._grab=A,this._offset=this.position-A,this._speedChecker=0,this._targetSpeed=this._speed=0,this._hasStopped=!1}hold(A){if(this._speedChecker++,this.position=A+this._offset,this._speedChecker>1)this._targetSpeed=this.position-this._prev;if(this._speed+=(this._targetSpeed-this._speed)/2,this._speed>this.maxSpeed)this._speed=this.maxSpeed;else if(this._speed<-this.maxSpeed)this._speed=-this.maxSpeed;if(this._prev=this.position,this.constrain){if(this.constrainPercent<0)this.position=0,this._speed=0,this._hasStopped=!0;else if(this.constrainPercent===0){if(this.position>this.min)this.position=this.min;else if(this.position<this.max)this.position=this.max}else if(this.position>this.min)this.position-=(this.position-this.min)/(1+this.constrainPercent);else if(this.position<this.max)this.position+=(this.max-this.position)/(1+this.constrainPercent)}}slide(A=!1){if(this._hasStopped)return;if(this.constrain)this._updateConstrain(A);else this._updateDefault()}_updateDefault(){if(this._speed*=0.9,this.position+=this._speed,(this._speed<0?this._speed*-1:this._speed)<0.01)this._hasStopped=!0;if(this.position>this.min)this.position=this.min,this._hasStopped=!0;else if(this.position<this.max)this.position=this.max,this._hasStopped=!0}_updateConstrain(A=!1){let Q=this.max;if(A){if(this.position>this.min)this.position=this.min;else if(this.position<this.max)this.position=this.max}else if(this.position>this.min||this.position<Q||this._activeEase){if(!this._activeEase)if(this._activeEase=this._ease,this.position>this.min)this._activeEase.start(this._speed,this.position,this.min);else this._activeEase.start(this._speed,this.position,Q);if(this.position=this._activeEase.update(),this._activeEase.done)this.position=this._activeEase.to,this._speed=0,this._activeEase=null}else this._updateDefault()}}var kf=Object.defineProperty,Ff=(A,Q,I)=>(Q in A)?kf(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,yC=(A,Q,I)=>Ff(A,typeof Q!=="symbol"?Q+"":Q,I);class sz{constructor(A){yC(this,"xAxis"),yC(this,"yAxis"),yC(this,"_isDown"),yC(this,"_globalPosition"),yC(this,"_frame"),yC(this,"_bounds"),yC(this,"_dirty"),yC(this,"disableEasing",!1),this.xAxis=new Vq({ease:A.xEase,maxSpeed:A.maxSpeed,constrain:A.constrain,constrainPercent:A.xConstrainPercent}),this.yAxis=new Vq({ease:A.yEase,maxSpeed:A.maxSpeed,constrain:A.constrain,constrainPercent:A.yConstrainPercent}),this.disableEasing=A.disableEasing??!1,this._frame=new EA,this._bounds=new EA,this._globalPosition=new UA}pointerDown(A){this._globalPosition=A,this.xAxis.grab(A.x),this.yAxis.grab(A.y),this._isDown=!0}pointerUp(){this._isDown=!1}pointerMove(A){this._globalPosition=A}update(){if(this._dirty)this._dirty=!1,this.xAxis.min=this._bounds.left,this.xAxis.min=this._bounds.right-this._frame.width,this.xAxis.min=this._bounds.top,this.xAxis.min=this._bounds.bottom-this._frame.height;if(this._isDown)this.xAxis.hold(this._globalPosition.x),this.yAxis.hold(this._globalPosition.y);else this.xAxis.slide(this.disableEasing),this.yAxis.slide(this.disableEasing)}resize(A,Q){this._frame.x=0,this._frame.width=A,this._frame.y=0,this._frame.height=Q,this._dirty=!0}setBounds(A,Q,I,B){this._bounds.x=A,this._bounds.width=Q-A,this._bounds.y=I,this._bounds.height=B-I,this._dirty=!0}get x(){return this.xAxis.value}set x(A){this.xAxis.value=A}get y(){return this.yAxis.value}set y(A){this.yAxis.value=A}}var Of=Object.defineProperty,Gf=(A,Q,I)=>(Q in A)?Of(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,TE=(A,Q,I)=>Gf(A,typeof Q!=="symbol"?Q+"":Q,I);function jf(A,Q,I){let B={},E=Object.getPrototypeOf(A);for(let C of I){let J=E[C];B[C]=J.bind(A),A[C]=(...K)=>Q[C](...K)}return B}class gI extends QA{constructor(A={}){let{layout:Q,trackpad:I,background:B,children:E,...C}=A;super(C);TE(this,"background"),TE(this,"stroke",new UQ({label:"stroke"})),TE(this,"overflowContainer",new QA({label:"overflowContainer"})),TE(this,"containerMethods"),TE(this,"_trackpad"),TE(this,"_mask",new UQ),TE(this,"_isUserBackground",!1),TE(this,"_visualBounds",new EA),TE(this,"_scrollBounds",new EA),this.layout=Q??{},E==null||E.forEach((J)=>this.addChild(J)),this.overflowContainer.isOverflowContainer=!0,this.background=B??new UQ({label:"background"}),this._isUserBackground=!!B,this.addChild(this.background,this.overflowContainer,this._mask,this.stroke),this.containerMethods=jf(this,this.overflowContainer,["addChild","addChildAt","removeChild","removeChildAt","getChildAt","getChildIndex","setChildIndex","getChildByName","removeChildren","sortChildren","swapChildren","reparentChild","reparentChildAt","getChildByLabel","getChildrenByLabel"]),this._trackpad=new sz({constrain:!0,...I}),this.eventMode="static",this.on("pointerdown",(J)=>this.isPointWithinBounds(J.global.x,J.global.y)&&this._trackpad.pointerDown(J.global)),this.on("pointerup",()=>this._trackpad.pointerUp()),this.on("pointerupoutside",()=>this._trackpad.pointerUp()),this.on("pointermove",(J)=>this.isPointWithinBounds(J.global.x,J.global.y)&&this._trackpad.pointerMove(J.global)),this.on("pointercancel",()=>this._trackpad.pointerUp()),this.on("wheel",(J)=>{var K;if(((K=this.layout)==null?void 0:K.style.overflow)!=="scroll")return;if(!this.isPointWithinBounds(J.global.x,J.global.y))return;let Z=J.shiftKey?1:0,q=J.deltaX*(Z?1:-1),w=J.deltaY*(Z?-1:1),$=this._trackpad.xAxis.value-q,U=this._trackpad.yAxis.value-w;if(this._trackpad.xAxis.constrainPercent>=0)this._trackpad.xAxis.value=Math.max(this._trackpad.xAxis.max,Math.min(this._trackpad.xAxis.min,$));if(this._trackpad.yAxis.constrainPercent>=0)this._trackpad.yAxis.value=Math.max(this._trackpad.yAxis.max,Math.min(this._trackpad.yAxis.min,U))}),SA.shared.add(this.update,this)}computeLayoutData(A){return this._drawBackground(A),{x:A.left,y:A.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}_updateMask(A,Q,I=0,B=0,E=!1){let C=E?-B:0,J=E?-B:0,K=E?A+B*2:A,H=E?Q+B*2:Q;this._mask.clear(),this._mask.roundRect(0,0,K,H,I),this._mask.position.set(C,J),this._mask.fill(16777215),this._scrollBounds.set(C+B,J+B,K-B*2,H-B*2)}_updateBackground(A){let Q=this.layout.style,{backgroundColor:I,borderRadius:B}=Q;if(this._isUserBackground)this.background.position.set(0,0),this.background.setSize(A.width,A.height);else{let E=this.background;if(E.clear(),E.roundRect(0,0,A.width,A.height,B??0),I!=null)E.fill({color:I});else E.fill({color:16777215,alpha:0})}}_drawBackground(A){var Q;let I=this.layout.yoga.getBorder(KA.All);if(isNaN(I)||I<0)I=0;let B=this.layout.yoga.getBoxSizing(),E=B===bC.BorderBox?1:0,C=this.layout.style,{borderColor:J,borderRadius:K}=C;if(this._updateBackground(A),this.stroke.clear(),I>0&&J!=null)this.stroke.roundRect(0,0,A.width,A.height,K??0),this.stroke.stroke({color:J,width:I,alignment:E});if(((Q=this.layout)==null?void 0:Q.style.overflow)!=="visible"){this._updateMask(A.width,A.height,C.borderRadius??0,I,B===bC.ContentBox),this._updateScrollArea(),this.setMask({mask:this._mask});let Z=A.width-this._visualBounds.width,q=A.height-this._visualBounds.height;this._trackpad.xAxis.max=Math.min(0,Z),this._trackpad.yAxis.max=Math.min(0,q)}else this.mask=null,this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0,this.overflowContainer.position.set(0,0)}_updateScrollArea(){let A=0,Q=0;for(let B=0;B<this.layout.yoga.getChildCount();B++){let E=this.layout.yoga.getChild(B),C=E.getComputedTop()+E.getComputedHeight(),J=E.getComputedLeft()+E.getComputedWidth();if(J>Q)Q=J;if(C>A)A=C}Q+=this.layout.yoga.getComputedPadding(KA.Right),A+=this.layout.yoga.getComputedPadding(KA.Bottom);let I=this.layout.yoga.getBorder(KA.All)||0;Q+=I,A+=I,this._visualBounds.width=Math.max(0,Q),this._visualBounds.height=Math.max(0,A)}isPointWithinBounds(A,Q){return this._scrollBounds.contains(A-this.worldTransform.tx,Q-this.worldTransform.ty)}update(){var A;if(((A=this.layout)==null?void 0:A.style.overflow)!=="scroll")return;this._trackpad.update(),this.overflowContainer.x=this._trackpad.x,this.overflowContainer.y=this._trackpad.y}destroy(A){super.destroy(A),SA.shared.remove(this.update,this)}}iA();M();jA();M();bB();var tz=Gq(HR(),1);jA();yB();FA();class hE{constructor(A){if(!A||!A.length)throw new Error("Invalid frames");let[{texture:{width:Q,height:I}}]=A;this.width=Q,this.height=I,this.frames=A,this.textures=this.frames.map((B)=>B.texture),this.totalFrames=this.frames.length,this.duration=this.frames[this.totalFrames-1].end}destroy(){for(let A of this.textures)A.destroy(!0);for(let A of this.frames)A.texture=null;this.frames.length=0,this.textures.length=0,Object.assign(this,{frames:null,textures:null,width:0,height:0,duration:0,totalFrames:0})}static from(A,Q){if(!A||A.byteLength===0)throw new Error("Invalid buffer");let I=(W)=>{let j=null;for(let O of W.frames)if(j=O.gce??j,"image"in O&&!("gce"in O))O.gce=j},B=tz.parseGIF(A);I(B);let E=tz.decompressFrames(B,!0),C=[],J=B.lsd.width,K=B.lsd.height,H=u.get().createCanvas(J,K),Z=H.getContext("2d",{willReadFrequently:!0}),q=u.get().createCanvas(),w=q.getContext("2d"),$=0,U=null,{fps:V=30,...z}=Q??{},D=1000/V;for(let W=0;W<E.length;W++){let{disposalType:j=2,delay:O=D,patch:F,dims:{width:L,height:R,left:_,top:T}}=E[W];q.width=L,q.height=R,w.clearRect(0,0,L,R);let f=w.createImageData(L,R);if(f.data.set(F),w.putImageData(f,0,0),j===3)U=Z.getImageData(0,0,J,K);Z.drawImage(q,_,T);let S=Z.getImageData(0,0,J,K);if(j===2)Z.clearRect(0,0,J,K);else if(j===3)Z.putImageData(U,0,0);let g=u.get().createCanvas(S.width,S.height);g.getContext("2d").putImageData(S,0,0),C.push({start:$,end:$+O,texture:new v({source:new GQ({resource:g,...z})})}),$+=O}return H.width=H.height=0,q.width=q.height=0,new hE(C)}}var rX={extension:N.Asset,detection:{test:async()=>!0,add:async(A)=>[...A,"gif"],remove:async(A)=>A.filter((Q)=>Q!=="gif")},loader:{name:"gifLoader",id:"gif",test:(A)=>qQ.extname(A)===".gif"||A.startsWith("data:image/gif"),load:async(A,Q)=>{let B=await(await u.get().fetch(A)).arrayBuffer();return hE.from(B,Q?.data)},unload:async(A)=>{A.destroy()}}};FA();fB();gB();wB();var Uy=class A extends bQ{constructor(...Q){let I=Q[0]instanceof hE?{source:Q[0]}:Q[0],{source:B,fps:E,loop:C,animationSpeed:J,autoPlay:K,autoUpdate:H,onComplete:Z,onFrameChange:q,onLoop:w,...$}=Object.assign({},A.defaultOptions,I);super({texture:v.EMPTY,...$});if(this.animationSpeed=1,this.loop=!0,this.duration=0,this.autoPlay=!0,this.dirty=!1,this._currentFrame=0,this._autoUpdate=!1,this._isConnectedToTicker=!1,this._playing=!1,this._currentTime=0,this.onRender=()=>this._updateFrame(),this.texture=B.textures[0],this.duration=B.frames[B.frames.length-1].end,this._source=B,this._playing=!1,this._currentTime=0,this._isConnectedToTicker=!1,Object.assign(this,{fps:E,loop:C,animationSpeed:J,autoPlay:K,autoUpdate:H,onComplete:Z,onFrameChange:q,onLoop:w}),this.currentFrame=0,K)this.play()}stop(){if(!this._playing)return;if(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker)SA.shared.remove(this.update,this),this._isConnectedToTicker=!1}play(){if(this._playing)return;if(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker)SA.shared.add(this.update,this,SQ.HIGH),this._isConnectedToTicker=!0;if(!this.loop&&this.currentFrame===this._source.frames.length-1)this._currentTime=0}get progress(){return this._currentTime/this.duration}get playing(){return this._playing}update(Q){if(!this._playing)return;let I=this.animationSpeed*Q.deltaTime/SA.targetFPMS,B=this._currentTime+I,E=B%this.duration,C=this._source.frames.findIndex((J)=>J.start<=E&&J.end>E);if(B>=this.duration)if(this.loop)this._currentTime=E,this._updateFrameIndex(C),this.onLoop?.();else this._currentTime=this.duration,this._updateFrameIndex(this.totalFrames-1),this.onComplete?.(),this.stop();else this._currentTime=E,this._updateFrameIndex(C)}_updateFrame(){if(!this.dirty)return;this.texture=this._source.frames[this._currentFrame].texture,this.dirty=!1}get autoUpdate(){return this._autoUpdate}set autoUpdate(Q){if(Q!==this._autoUpdate){if(this._autoUpdate=Q,!this._autoUpdate&&this._isConnectedToTicker)SA.shared.remove(this.update,this),this._isConnectedToTicker=!1;else if(this._autoUpdate&&!this._isConnectedToTicker&&this._playing)SA.shared.add(this.update,this),this._isConnectedToTicker=!0}}get currentFrame(){return this._currentFrame}set currentFrame(Q){this._updateFrameIndex(Q),this._currentTime=this._source.frames[Q].start}get source(){return this._source}_updateFrameIndex(Q){if(Q<0||Q>=this.totalFrames)throw new Error(`Frame index out of range, expecting 0 to ${this.totalFrames}, got ${Q}`);if(this._currentFrame!==Q)this._currentFrame=Q,this.dirty=!0,this.onFrameChange?.(Q)}get totalFrames(){return this._source.totalFrames}destroy(Q=!1){if(this.stop(),super.destroy(),Q)this._source.destroy();let I=null;this._source=I,this.onComplete=I,this.onFrameChange=I,this.onLoop=I}clone(){let Q=new A({source:this._source,autoUpdate:this._autoUpdate,loop:this.loop,autoPlay:this.autoPlay,animationSpeed:this.animationSpeed,onComplete:this.onComplete,onFrameChange:this.onFrameChange,onLoop:this.onLoop});return Q.dirty=!0,Q}};Uy.defaultOptions={fps:30,loop:!0,animationSpeed:1,autoPlay:!0,autoUpdate:!0,onComplete:null,onFrameChange:null,onLoop:null};p.add(rX);iA();iA();iA();iA();class xI extends PI{constructor(A){let{layout:Q,...I}=A;super(I);this.layout=Q}}iA();iA();var s0=Gq(uR(),1),gy=Object.defineProperty,_y=(A,Q,I)=>(Q in A)?gy(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,TC=(A,Q,I)=>_y(A,typeof Q!=="symbol"?Q+"":Q,I);class eX{constructor(){TC(this,"_isMouseIn",!1),TC(this,"_isDown",!1),TC(this,"onDown"),TC(this,"onUp"),TC(this,"onUpOut"),TC(this,"onOut"),TC(this,"onPress"),TC(this,"onHover"),this.onPress=new s0.Signal,this.onDown=new s0.Signal,this.onUp=new s0.Signal,this.onHover=new s0.Signal,this.onOut=new s0.Signal,this.onUpOut=new s0.Signal}connectEvents(A){if(sE.any)A.on("pointerdown",this.processDown,this),A.on("pointerup",this.processUp,this),A.on("pointerupoutside",this.processUpOut,this),A.on("pointerout",this.processOut,this),A.on("pointertap",this.processPress,this),A.on("pointerover",this.processOver,this);else A.on("mousedown",this.processDown,this),A.on("mouseup",this.processUp,this),A.on("mouseupoutside",this.processUpOut,this),A.on("mouseout",this.processOut,this),A.on("click",this.processPress,this),A.on("mouseover",this.processOver,this)}disconnectEvents(A){if(sE.any)A.off("pointerdown",this.processDown,this),A.off("pointerup",this.processUp,this),A.off("pointerupoutside",this.processUpOut,this),A.off("pointerout",this.processOut,this),A.off("pointertap",this.processPress,this),A.off("pointerover",this.processOver,this);else A.off("mousedown",this.processDown,this),A.off("mouseup",this.processUp,this),A.off("mouseupoutside",this.processUpOut,this),A.off("mouseout",this.processOut,this),A.off("click",this.processPress,this),A.off("mouseover",this.processOver,this)}processDown(A){this._isDown=!0,this.onDown.emit(this,A),this.down(A)}processUp(A){if(this._isDown)this.onUp.emit(this,A),this.up(A);this._isDown=!1}processUpOut(A){if(this._isDown)this.onUp.emit(this,A),this.onUpOut.emit(this,A),this.up(A),this.upOut(A);this._isDown=!1}processOut(A){if(this._isMouseIn)this._isMouseIn=!1,this.onOut.emit(this,A),this.out(A)}processPress(A){this._isDown=!1,this.onPress.emit(this,A),this.press(A)}processOver(A){if(sE.any)return;this._isMouseIn=!0,this.onHover.emit(this,A),this.hover(A)}down(A){}up(A){}upOut(A){}out(A){}press(A){}hover(A){}get isDown(){return this._isDown}}var Sy=Object.defineProperty,by=(A,Q,I)=>(Q in A)?Sy(A,Q,{enumerable:!0,configurable:!0,writable:!0,value:I}):A[Q]=I,fy=(A,Q,I)=>by(A,typeof Q!=="symbol"?Q+"":Q,I);class A2 extends eX{constructor(A){super();if(fy(this,"_view"),A)this.view=A,this.enabled=!0}set view(A){if(!!this._view&&this._view)this.disconnectEvents(this._view);this._view=A,this.connectEvents(this._view)}get view(){return this._view}set enabled(A){if(!this.view){console.error("Button view is not set. Please set it before enabling the button.");return}if(this.view.eventMode=A?"static":"auto",this.view.cursor=A?"pointer":"default",!A&&this.isDown)this.processUp()}get enabled(){return this.view?.eventMode==="static"}}iA();function lR(){let A=new QA({layout:{gap:20,flexDirection:"column"}});return A.addChild(yy(),vy()),A}function yy(){let A=new gI({layout:{flex:1,borderRadius:10,flexDirection:"column-reverse",gap:5}});for(let Q=0;Q<6;Q++)A.addChild(vE(new gI({layout:{flex:1,borderWidth:2,borderColor:"black",backgroundColor:Q==0?"red":"grey",borderRadius:10}}),(I)=>{if(Q==MQ.turn)I.layout.setStyle({backgroundColor:"red"});if(Q<MQ.turn)I.layout.setStyle({backgroundColor:"black"})}));return A}function vy(){let A=new gI({layout:{width:120,height:120,justifyContent:"center",alignItems:"center"}});return A.addChild(new UQ().circle(60,60,60).fill("grey")),A.addChild(new xI({text:`NEXT
TURN`,anchor:0.5,layout:!0,style:{align:"center"}})),new A2(A).onPress.connect(()=>{MQ.nextTurn()}),A}iA();var Ty=()=>$q(["I've bills to pay","I got 99 problems","Livin On A Prayer","Un manoir  Neuchtel","Get your work up!","The house of the rising sun"])[0];function iR(){let A=new QA({layout:{flex:1,flexDirection:"column",gap:20}});return A.addChild(new xI({text:`############################
${Ty()}
############################`,layout:{alignSelf:"center"},style:{align:"center"}}),...MQ.bill.map((Q)=>new gI({layout:{flex:1,flexDirection:"column"},children:[Q2(()=>Q.name,()=>`-${Q.amount}$`)]})),new xI({text:"###########################",layout:!0}),Q2(()=>"Savings",()=>`${MQ.$$$$}$`),Q2(()=>"Expenses",()=>`-${MQ.expenses}$`),Q2(()=>"Total",()=>`${MQ.$$$$-MQ.expenses}$`)),A}function Q2(A,Q){return new QA({layout:{flexDirection:"row",justifyContent:"space-between"},children:[vE(new xI({text:A(),layout:!0}),(I)=>{I.text=A()}),vE(new xI({text:Q(),layout:!0}),(I)=>{I.text=Q()})]})}iA();function oR(){let A=new QA({layout:{flex:1,flexDirection:"row",gap:20}});return A.addChild(new gI({layout:{backgroundColor:"green",aspectRatio:0.75,padding:20},children:[new xI({text:`Bust
of
Anna`,layout:!0,style:{align:"center"}})]})),A.addChild(new QA({layout:{flexDirection:"column",gap:10,flex:1},children:[new gI({layout:{flex:1,backgroundColor:"gray",padding:20},children:[new xI({text:'"Something funny"',layout:!0})]}),new gI({layout:{flexDirection:"row",gap:40},children:[new gI({layout:{flex:1}}),nR(()=>`${MQ.life}+${MQ.getJoyGain()}=${MQ.life+MQ.getJoyGain()}/100 joy`),nR(()=>`${MQ.deck.length}/${MQ.cardCount} in deck`)]})]})),A}function nR(A){return vE(new xI({text:A(),layout:!0}),(Q)=>{Q.text=A()})}var VH=new n6;async function hy(){await VH.init({background:"#1099bb",resizeTo:window}),document.body.appendChild(VH.canvas),VH.stage.layout={width:window.innerWidth,height:window.innerHeight,flexDirection:"row-reverse",padding:20,gap:20},VH.stage.addChild(lR(),iR(),new QA({layout:{flexDirection:"column",gap:20},children:[oR(),new oX]}))}hy();
